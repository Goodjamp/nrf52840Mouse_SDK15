cscope 15 $HOME\Desktop\nrf52840Mouse_15\nrf52840Mouse_15"               0000811850
	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\ble\ble_advertising\ble_advertising.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
BLE_ADVERTISING
)

42 
	~"bË_advd©a.h
"

43 
	~"bË_adv”tisšg.h
"

44 
	~"Äf_soc.h
"

45 
	~"Äf_log.h
"

46 
	~"sdk_”rÜs.h
"

47 
	~"Äf_sdh_bË.h
"

48 
	~"Äf_sdh_soc.h
"

50 
	#BLE_ADV_MODES
 (5è

	)

57 
boŞ
 
	$wh™–i¡_has_’Œ›s
(
bË_adv”tisšg_t
 * cÚ¡ 
p_adv”tisšg
)

59  
p_adv”tisšg
->
wh™–i¡_š_u£
;

60 
	}
}

67 
boŞ
 
	$addr_is_v®id
(
ušt8_t
 cÚ¡ * cÚ¡ 
p_addr
)

69 
ušt32_t
 
i
 = 0; i < 
BLE_GAP_ADDR_LEN
; i++)

71 ià(
p_addr
[
i
] != 0)

73  
Œue
;

76  
çl£
;

77 
	}
}

84 
bË_adv_mode_t
 
	$adv_mode_Ãxt_g‘
(
bË_adv_mode_t
 
adv_mode
)

86  (
bË_adv_mode_t
)((
adv_mode
 + 1è% 
BLE_ADV_MODES
);

87 
	}
}

94 
	$Ú_cÚÃùed
(
bË_adv”tisšg_t
 * cÚ¡ 
p_adv”tisšg
, 
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

96 ià(
p_bË_evt
->
evt
.
g­_evt
.
·¿ms
.
cÚÃùed
.
rŞe
 =ğ
BLE_GAP_ROLE_PERIPH
)

98 
p_adv”tisšg
->
cu¼’t_¦ave_lšk_cÚn_hªdË
 = 
p_bË_evt
->
evt
.
g­_evt
.
cÚn_hªdË
;

100 
	}
}

108 
	$Ú_discÚÃùed
(
bË_adv”tisšg_t
 * cÚ¡ 
p_adv”tisšg
, 
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

110 
ušt32_t
 
»t
;

112 
p_adv”tisšg
->
wh™–i¡_‹mpÜ¬y_di§bËd
 = 
çl£
;

114 ià(
p_bË_evt
->
evt
.
g­_evt
.
cÚn_hªdË
 =ğ
p_adv”tisšg
->
cu¼’t_¦ave_lšk_cÚn_hªdË
 &&

115 
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_Ú_discÚÃù_di§bËd
 =ğ
çl£
)

117 
»t
 = 
	`bË_adv”tisšg_¡¬t
(
p_adv”tisšg
, 
BLE_ADV_MODE_DIRECTED_HIGH_DUTY
);

118 ià((
»t
 !ğ
NRF_SUCCESS
è&& (
p_adv”tisšg
->
”rÜ_hªdËr
 !ğ
NULL
))

120 
p_adv”tisšg
->
	`”rÜ_hªdËr
(
»t
);

123 
	}
}

131 
	$Ú_‹rmš©ed
(
bË_adv”tisšg_t
 * cÚ¡ 
p_adv”tisšg
, 
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

133 
»t_code_t
 
»t
;

135 ià(
p_bË_evt
->
h—d”
.
evt_id
 !ğ
BLE_GAP_EVT_ADV_SET_TERMINATED
)

141 iàĞ
p_bË_evt
->
evt
.
g­_evt
.
·¿ms
.
adv_£t_‹rmš©ed
.
»asÚ
 =ğ
BLE_GAP_EVT_ADV_SET_TERMINATED_REASON_TIMEOUT


142 ||
p_bË_evt
->
evt
.
g­_evt
.
·¿ms
.
adv_£t_‹rmš©ed
.
»asÚ
 =ğ
BLE_GAP_EVT_ADV_SET_TERMINATED_REASON_LIMIT_REACHED
)

145 
»t
 = 
	`bË_adv”tisšg_¡¬t
(
p_adv”tisšg
, 
	`adv_mode_Ãxt_g‘
Õ_adv”tisšg->
adv_mode_cu¼’t
));

147 ià((
»t
 !ğ
NRF_SUCCESS
è&& (
p_adv”tisšg
->
”rÜ_hªdËr
 !ğ
NULL
))

149 
p_adv”tisšg
->
	`”rÜ_hªdËr
(
»t
);

152 
	}
}

162 
bË_adv_mode_t
 
	$adv_mode_Ãxt_ava_g‘
(
bË_adv”tisšg_t
 * cÚ¡ 
p_adv”tisšg
,

163 
bË_adv_mode_t
 
adv_mode
)

165 
boŞ
 
³”_addr_is_v®id
 = 
	`addr_is_v®id
(
p_adv”tisšg
->
³”_add»ss
.
addr
);

169 
adv_mode
)

171 
BLE_ADV_MODE_DIRECTED_HIGH_DUTY
:

172 iàĞ(
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_dœeùed_high_duty_’abËd
)

173 && (!
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_ex‹nded_’abËd
)

174 && (
³”_addr_is_v®id
))

176  
BLE_ADV_MODE_DIRECTED_HIGH_DUTY
;

180 
BLE_ADV_MODE_DIRECTED
:

181 ià((
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_dœeùed_’abËd
è&& 
³”_addr_is_v®id
)

183  
BLE_ADV_MODE_DIRECTED
;

187 
BLE_ADV_MODE_FAST
:

188 ià(
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_ç¡_’abËd
)

190  
BLE_ADV_MODE_FAST
;

194 
BLE_ADV_MODE_SLOW
:

195 ià(
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_¦ow_’abËd
)

197  
BLE_ADV_MODE_SLOW
;

202  
BLE_ADV_MODE_IDLE
;

204 
	}
}

214 
»t_code_t
 
	$£t_adv_mode_dœeùed_high_duty
(
bË_adv”tisšg_t
 * cÚ¡ 
p_adv”tisšg
,

215 
bË_g­_adv_·¿ms_t
 * 
p_adv_·¿ms
)

217 
p_adv”tisšg
->
adv_evt
 = 
BLE_ADV_EVT_DIRECTED_HIGH_DUTY
;

218 
p_adv”tisšg
->
p_adv_d©a
 = 
NULL
;

220 
p_adv_·¿ms
->
p_³”_addr
 = &(
p_adv”tisšg
->
³”_add»ss
);

221 
p_adv_·¿ms
->
š‹rv®
 = 0;

222 
p_adv_·¿ms
->
´İ”t›s
.
ty³
 = 
BLE_GAP_ADV_TYPE_CONNECTABLE_NONSCANNABLE_DIRECTED_HIGH_DUTY_CYCLE
;

223 
p_adv_·¿ms
->
du¿tiÚ
 = 
BLE_GAP_ADV_TIMEOUT_HIGH_DUTY_MAX
;

225  
NRF_SUCCESS
;

226 
	}
}

236 
»t_code_t
 
	$£t_adv_mode_dœeùed
(
bË_adv”tisšg_t
 * cÚ¡ 
p_adv”tisšg
,

237 
bË_g­_adv_·¿ms_t
 * 
p_adv_·¿ms
)

239 
p_adv”tisšg
->
adv_evt
 = 
BLE_ADV_EVT_DIRECTED
;

240 #ià!
	`defšed
 (
S112
)

241 ià(
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_ex‹nded_’abËd
)

243 
p_adv_·¿ms
->
´İ”t›s
.
ty³
 = 
BLE_GAP_ADV_TYPE_EXTENDED_CONNECTABLE_NONSCANNABLE_DIRECTED
;

248 
p_adv_·¿ms
->
´İ”t›s
.
ty³
 = 
BLE_GAP_ADV_TYPE_CONNECTABLE_NONSCANNABLE_DIRECTED
;

249 #ià!
	`defšed
 (
S112
)

252 
p_adv_·¿ms
->
du¿tiÚ
 = 
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_dœeùed_timeout
;

254 
p_adv”tisšg
->
p_adv_d©a
 = 
NULL
;

256 
p_adv_·¿ms
->
p_³”_addr
 = &
p_adv”tisšg
->
³”_add»ss
;

257 
p_adv_·¿ms
->
š‹rv®
 = 
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_dœeùed_š‹rv®
;

259  
NRF_SUCCESS
;

260 
	}
}

269 
boŞ
 
	$u£_wh™–i¡
(
bË_adv”tisšg_t
 * cÚ¡ 
p_adv”tisšg
)

271 ((
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_wh™–i¡_’abËd
) &&

272 (!
p_adv”tisšg
->
wh™–i¡_‹mpÜ¬y_di§bËd
) &&

273 (
	`wh™–i¡_has_’Œ›s
(
p_adv”tisšg
)));

274 
	}
}

284 
»t_code_t
 
	$æags_£t
(
bË_adv”tisšg_t
 * cÚ¡ 
p_adv”tisšg
, 
ušt8_t
 
æags
)

286 
ušt8_t
 * 
p_æags
 = 
	`bË_advd©a_·r£
(
p_adv”tisšg
->
adv_d©a
.adv_d©a.
p_d©a
,

287 
p_adv”tisšg
->
adv_d©a
.adv_d©a.
Ën
,

288 
BLE_GAP_AD_TYPE_FLAGS
);

290 ià(
p_æags
 !ğ
NULL
)

292 *
p_æags
 = 
æags
;

295  
	`sd_bË_g­_adv_£t_cÚfigu»
(&
p_adv”tisšg
->
adv_hªdË
, &p_adv”tisšg->
adv_d©a
, &p_adv”tisšg->
adv_·¿ms
);

296 
	}
}

306 
»t_code_t
 
	$£t_adv_mode_ç¡
(
bË_adv”tisšg_t
 * cÚ¡ 
p_adv”tisšg
,

307 
bË_g­_adv_·¿ms_t
 * 
p_adv_·¿ms
)

309 
»t_code_t
 
»t
;

311 
p_adv_·¿ms
->
š‹rv®
 = 
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_ç¡_š‹rv®
;

312 
p_adv_·¿ms
->
du¿tiÚ
 = 
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_ç¡_timeout
;

314 #ià!
	`defšed
 (
S112
)

315 ià(
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_ex‹nded_’abËd
)

317 
p_adv”tisšg
->
adv_·¿ms
.
´İ”t›s
.
ty³
 = 
BLE_GAP_ADV_TYPE_EXTENDED_CONNECTABLE_NONSCANNABLE_UNDIRECTED
;

322 
p_adv”tisšg
->
adv_·¿ms
.
´İ”t›s
.
ty³
 = 
BLE_GAP_ADV_TYPE_CONNECTABLE_SCANNABLE_UNDIRECTED
;

323 #ià!
	`defšed
 (
S112
)

327 ià(
	`u£_wh™–i¡
(
p_adv”tisšg
))

329 
p_adv_·¿ms
->
f‹r_pŞicy
 = 
BLE_GAP_ADV_FP_FILTER_CONNREQ
;

332 
»t
 = 
	`æags_£t
(
p_adv”tisšg
, 
BLE_GAP_ADV_FLAG_BR_EDR_NOT_SUPPORTED
);

333 
	`VERIFY_SUCCESS
(
»t
);

335 
p_adv”tisšg
->
adv_evt
 = 
BLE_ADV_EVT_FAST_WHITELIST
;

339 
p_adv”tisšg
->
adv_evt
 = 
BLE_ADV_EVT_FAST
;

341 
p_adv”tisšg
->
p_adv_d©a
 = &Õ_adv”tisšg->
adv_d©a
);

342  
NRF_SUCCESS
;

343 
	}
}

353 
»t_code_t
 
	$£t_adv_mode_¦ow
(
bË_adv”tisšg_t
 * cÚ¡ 
p_adv”tisšg
,

354 
bË_g­_adv_·¿ms_t
 * 
p_adv_·¿ms
)

356 
»t_code_t
 
»t
;

358 
p_adv_·¿ms
->
š‹rv®
 = 
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_¦ow_š‹rv®
;

359 
p_adv_·¿ms
->
du¿tiÚ
 = 
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_¦ow_timeout
;

361 #ià!
	`defšed
 (
S112
)

362 ià(
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_ex‹nded_’abËd
)

364 
p_adv”tisšg
->
adv_·¿ms
.
´İ”t›s
.
ty³
 = 
BLE_GAP_ADV_TYPE_EXTENDED_CONNECTABLE_NONSCANNABLE_UNDIRECTED
;

369 
p_adv”tisšg
->
adv_·¿ms
.
´İ”t›s
.
ty³
 = 
BLE_GAP_ADV_TYPE_CONNECTABLE_SCANNABLE_UNDIRECTED
;

370 #ià!
	`defšed
 (
S112
)

374 ià(
	`u£_wh™–i¡
(
p_adv”tisšg
))

376 
p_adv_·¿ms
->
f‹r_pŞicy
 = 
BLE_GAP_ADV_FP_FILTER_CONNREQ
;

379 
»t
 = 
	`æags_£t
(
p_adv”tisšg
, 
BLE_GAP_ADV_FLAG_BR_EDR_NOT_SUPPORTED
);

380 
	`VERIFY_SUCCESS
(
»t
);

382 
p_adv”tisšg
->
adv_evt
 = 
BLE_ADV_EVT_SLOW_WHITELIST
;

386 
p_adv”tisšg
->
adv_evt
 = 
BLE_ADV_EVT_SLOW
;

388 
p_adv”tisšg
->
p_adv_d©a
 = &Õ_adv”tisšg->
adv_d©a
);

389  
NRF_SUCCESS
;

390 
	}
}

403 
boŞ
 
	$cÚfig_is_v®id
(
bË_adv_modes_cÚfig_t
 cÚ¡ * cÚ¡ 
p_cÚfig
)

405 ià((
p_cÚfig
->
bË_adv_dœeùed_high_duty_’abËd
 =ğ
Œue
) &&

406 (
p_cÚfig
->
bË_adv_ex‹nded_’abËd
 =ğ
Œue
))

408  
çl£
;

410 #ià!
	`defšed
 (
S140
)

411 iàĞ
p_cÚfig
->
bË_adv_´im¬y_phy
 =ğ
BLE_GAP_PHY_CODED
 ||

412 
p_cÚfig
->
bË_adv_£cÚd¬y_phy
 =ğ
BLE_GAP_PHY_CODED
)

414  
çl£
;

419  
Œue
;

421 
	}
}

424 
	$bË_adv”tisšg_cÚn_cfg_g_£t
(
bË_adv”tisšg_t
 * cÚ¡ 
p_adv”tisšg
,

425 
ušt8_t
 
bË_cfg_g
)

427 
p_adv”tisšg
->
cÚn_cfg_g
 = 
bË_cfg_g
;

428 
	}
}

431 
ušt32_t
 
	$bË_adv”tisšg_š™
(
bË_adv”tisšg_t
 * cÚ¡ 
p_adv”tisšg
,

432 
bË_adv”tisšg_š™_t
 cÚ¡ * cÚ¡ 
p_š™
)

434 
ušt32_t
 
»t
;

435 ià((
p_š™
 =ğ
NULL
è|| (
p_adv”tisšg
 == NULL))

437  
NRF_ERROR_NULL
;

439 ià(!
	`cÚfig_is_v®id
(&
p_š™
->
cÚfig
))

441  
NRF_ERROR_INVALID_PARAM
;

444 
p_adv”tisšg
->
adv_mode_cu¼’t
 = 
BLE_ADV_MODE_IDLE
;

445 
p_adv”tisšg
->
adv_modes_cÚfig
 = 
p_š™
->
cÚfig
;

446 
p_adv”tisšg
->
cÚn_cfg_g
 = 
BLE_CONN_CFG_TAG_DEFAULT
;

447 
p_adv”tisšg
->
evt_hªdËr
 = 
p_š™
->evt_handler;

448 
p_adv”tisšg
->
”rÜ_hªdËr
 = 
p_š™
->error_handler;

449 
p_adv”tisšg
->
cu¼’t_¦ave_lšk_cÚn_hªdË
 = 
BLE_CONN_HANDLE_INVALID
;

450 
p_adv”tisšg
->
p_adv_d©a
 = &p_adv”tisšg->
adv_d©a
;

452 
	`mem£t
(&
p_adv”tisšg
->
³”_add»ss
, 0, (p_advertising->peer_address));

455 ià(!
p_adv”tisšg
->
š™Ÿlized
)

457 
p_adv”tisšg
->
adv_hªdË
 = 
BLE_GAP_ADV_SET_HANDLE_NOT_SET
;

459 
p_adv”tisšg
->
adv_d©a
.adv_d©a.
p_d©a
 =…_adv”tisšg->
’c_advd©a
;

461 ià(
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_ex‹nded_’abËd
 =ğ
Œue
)

463 #ifdeà
BLE_GAP_ADV_SET_DATA_SIZE_EXTENDED_CONNECTABLE_MAX_SUPPORTED


464 
p_adv”tisšg
->
adv_d©a
.adv_d©a.
Ën
 = 
BLE_GAP_ADV_SET_DATA_SIZE_EXTENDED_CONNECTABLE_MAX_SUPPORTED
;

466 
p_adv”tisšg
->
adv_d©a
.adv_d©a.
Ën
 = 
BLE_GAP_ADV_SET_DATA_SIZE_MAX
;

471 
p_adv”tisšg
->
adv_d©a
.adv_d©a.
Ën
 = 
BLE_GAP_ADV_SET_DATA_SIZE_MAX
;

474 
»t
 = 
	`bË_advd©a_’code
(&
p_š™
->
advd©a
, 
p_adv”tisšg
->
’c_advd©a
, &p_adv”tisšg->
adv_d©a
.adv_d©a.
Ën
);

475 
	`VERIFY_SUCCESS
(
»t
);

477 ià(&
p_š™
->
¤d©a
 !ğ
NULL
)

479 
p_adv”tisšg
->
adv_d©a
.
sÿn_r¥_d©a
.
p_d©a
 =…_adv”tisšg->
’c_sÿn_r¥_d©a
;

480 ià(
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_ex‹nded_’abËd
 =ğ
Œue
)

482 #ifdeà
BLE_GAP_ADV_SET_DATA_SIZE_EXTENDED_CONNECTABLE_MAX_SUPPORTED


483 
p_adv”tisšg
->
adv_d©a
.
sÿn_r¥_d©a
.
Ën
 = 
BLE_GAP_ADV_SET_DATA_SIZE_EXTENDED_CONNECTABLE_MAX_SUPPORTED
;

485 
p_adv”tisšg
->
adv_d©a
.
sÿn_r¥_d©a
.
Ën
 = 
BLE_GAP_ADV_SET_DATA_SIZE_MAX
;

490 
p_adv”tisšg
->
adv_d©a
.
sÿn_r¥_d©a
.
Ën
 = 
BLE_GAP_ADV_SET_DATA_SIZE_MAX
;

492 
»t
 = 
	`bË_advd©a_’code
(&
p_š™
->
¤d©a
,

493 
p_adv”tisšg
->
adv_d©a
.
sÿn_r¥_d©a
.
p_d©a
,

494 &
p_adv”tisšg
->
adv_d©a
.
sÿn_r¥_d©a
.
Ën
);

495 
	`VERIFY_SUCCESS
(
»t
);

499 
p_adv”tisšg
->
adv_d©a
.
sÿn_r¥_d©a
.
p_d©a
 = 
NULL
;

500 
p_adv”tisšg
->
adv_d©a
.
sÿn_r¥_d©a
.
Ën
 = 0;

506 
p_adv”tisšg
->
adv_·¿ms
.
´im¬y_phy
 = 
BLE_GAP_PHY_1MBPS
;

507 
p_adv”tisšg
->
adv_·¿ms
.
du¿tiÚ
 =…_adv”tisšg->
adv_modes_cÚfig
.
bË_adv_ç¡_timeout
;

508 
p_adv”tisšg
->
adv_·¿ms
.
´İ”t›s
.
ty³
 = 
BLE_GAP_ADV_TYPE_CONNECTABLE_SCANNABLE_UNDIRECTED
;

509 
p_adv”tisšg
->
adv_·¿ms
.
p_³”_addr
 = 
NULL
;

510 
p_adv”tisšg
->
adv_·¿ms
.
f‹r_pŞicy
 = 
BLE_GAP_ADV_FP_ANY
;

511 
p_adv”tisšg
->
adv_·¿ms
.
š‹rv®
 =…_adv”tisšg->
adv_modes_cÚfig
.
bË_adv_ç¡_š‹rv®
;

513 
»t
 = 
	`sd_bË_g­_adv_£t_cÚfigu»
(&
p_adv”tisšg
->
adv_hªdË
, 
NULL
, &p_adv”tisšg->
adv_·¿ms
);

514 
	`VERIFY_SUCCESS
(
»t
);

516 
p_adv”tisšg
->
š™Ÿlized
 = 
Œue
;

517  
»t
;

518 
	}
}

528 
boŞ
 
	$phy_is_v®id
(
ušt32_t
 cÚ¡ * cÚ¡ 
p_phy
)

530 ià((*
p_phy
è=ğ
BLE_GAP_PHY_1MBPS
 ||

531 (*
p_phy
è=ğ
BLE_GAP_PHY_2MBPS


532 #ià
	`defšed
 (
S140
)

533 || (*
p_phy
è=ğ
BLE_GAP_PHY_CODED


537  
Œue
;

541  
çl£
;

543 
	}
}

546 
ušt32_t
 
	$bË_adv”tisšg_¡¬t
(
bË_adv”tisšg_t
 * cÚ¡ 
p_adv”tisšg
,

547 
bË_adv_mode_t
 
adv”tisšg_mode
)

549 
ušt32_t
 
»t
;

551 ià(
p_adv”tisšg
->
š™Ÿlized
 =ğ
çl£
)

553  
NRF_ERROR_INVALID_STATE
;

556 
p_adv”tisšg
->
adv_mode_cu¼’t
 = 
adv”tisšg_mode
;

558 
	`mem£t
(&
p_adv”tisšg
->
³”_add»ss
, 0, (p_advertising->peer_address));

560 iàĞ((
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_dœeùed_high_duty_’abËd
è&& (p_adv”tisšg->
adv_mode_cu¼’t
 =ğ
BLE_ADV_MODE_DIRECTED_HIGH_DUTY
))

561 ||((
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_dœeùed_’abËd
è&& (p_adv”tisšg->
adv_mode_cu¼’t
 =ğ
BLE_ADV_MODE_DIRECTED_HIGH_DUTY
))

562 ||((
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_dœeùed_’abËd
è&& (p_adv”tisšg->
adv_mode_cu¼’t
 =ğ
BLE_ADV_MODE_DIRECTED
))

565 ià(
p_adv”tisšg
->
evt_hªdËr
 !ğ
NULL
)

567 
p_adv”tisšg
->
³”_addr_»¶y_ex³ùed
 = 
Œue
;

568 
p_adv”tisšg
->
	`evt_hªdËr
(
BLE_ADV_EVT_PEER_ADDR_REQUEST
);

572 
p_adv”tisšg
->
³”_addr_»¶y_ex³ùed
 = 
çl£
;

576 
p_adv”tisšg
->
adv_mode_cu¼’t
 = 
	`adv_mode_Ãxt_ava_g‘
Õ_adv”tisšg, 
adv”tisšg_mode
);

579 ià((
p_adv”tisšg
->
evt_hªdËr
 !ğ
NULL
) &&

580 (
p_adv”tisšg
->
adv_mode_cu¼’t
 =ğ
BLE_ADV_MODE_FAST
 ||…_adv”tisšg->adv_mode_cu¼’ˆ=ğ
BLE_ADV_MODE_SLOW
) &&

581 (
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_wh™–i¡_’abËd
) &&

582 (!
p_adv”tisšg
->
wh™–i¡_‹mpÜ¬y_di§bËd
))

584 
p_adv”tisšg
->
wh™–i¡_š_u£
 = 
çl£
;

585 
p_adv”tisšg
->
wh™–i¡_»¶y_ex³ùed
 = 
Œue
;

586 
p_adv”tisšg
->
	`evt_hªdËr
(
BLE_ADV_EVT_WHITELIST_REQUEST
);

590 
p_adv”tisšg
->
wh™–i¡_»¶y_ex³ùed
 = 
çl£
;

594 
	`mem£t
(&
p_adv”tisšg
->
adv_·¿ms
, 0, (p_advertising->adv_params));

596 
p_adv”tisšg
->
adv_·¿ms
.
´İ”t›s
.
ty³
 = 
BLE_GAP_ADV_TYPE_CONNECTABLE_SCANNABLE_UNDIRECTED
;

599 ià(
	`phy_is_v®id
(&
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_´im¬y_phy
))

601 
p_adv”tisšg
->
adv_·¿ms
.
´im¬y_phy
 =…_adv”tisšg->
adv_modes_cÚfig
.
bË_adv_´im¬y_phy
;

605 
p_adv”tisšg
->
adv_·¿ms
.
´im¬y_phy
 = 
BLE_GAP_PHY_1MBPS
;

608 ià(
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_ex‹nded_’abËd
)

611 ià(
	`phy_is_v®id
(&
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_´im¬y_phy
))

613 
p_adv”tisšg
->
adv_·¿ms
.
£cÚd¬y_phy
 =…_adv”tisšg->
adv_modes_cÚfig
.
bË_adv_£cÚd¬y_phy
;

617 
p_adv”tisšg
->
adv_·¿ms
.
£cÚd¬y_phy
 = 
BLE_GAP_PHY_1MBPS
;

620 
p_adv”tisšg
->
adv_·¿ms
.
f‹r_pŞicy
 = 
BLE_GAP_ADV_FP_ANY
;

623 
p_adv”tisšg
->
adv_mode_cu¼’t
)

625 
BLE_ADV_MODE_DIRECTED_HIGH_DUTY
:

626 
»t
 = 
	`£t_adv_mode_dœeùed_high_duty
(
p_adv”tisšg
, &p_adv”tisšg->
adv_·¿ms
);

629 
BLE_ADV_MODE_DIRECTED
:

630 
»t
 = 
	`£t_adv_mode_dœeùed
(
p_adv”tisšg
, &p_adv”tisšg->
adv_·¿ms
);

633 
BLE_ADV_MODE_FAST
:

634 
»t
 = 
	`£t_adv_mode_ç¡
(
p_adv”tisšg
, &p_adv”tisšg->
adv_·¿ms
);

637 
BLE_ADV_MODE_SLOW
:

638 
»t
 = 
	`£t_adv_mode_¦ow
(
p_adv”tisšg
, &p_adv”tisšg->
adv_·¿ms
);

641 
BLE_ADV_MODE_IDLE
:

642 
p_adv”tisšg
->
adv_evt
 = 
BLE_ADV_EVT_IDLE
;

649 ià(
p_adv”tisšg
->
adv_mode_cu¼’t
 !ğ
BLE_ADV_MODE_IDLE
)

652 
»t
 = 
	`sd_bË_g­_adv_£t_cÚfigu»
(&
p_adv”tisšg
->
adv_hªdË
,…_adv”tisšg->
p_adv_d©a
, &p_adv”tisšg->
adv_·¿ms
);

653 ià(
»t
 !ğ
NRF_SUCCESS
)

655  
»t
;

657 
»t
 = 
	`sd_bË_g­_adv_¡¬t
(
p_adv”tisšg
->
adv_hªdË
,…_adv”tisšg->
cÚn_cfg_g
);

659 ià(
»t
 !ğ
NRF_SUCCESS
)

661  
»t
;

665 ià(
p_adv”tisšg
->
evt_hªdËr
 !ğ
NULL
)

667 
p_adv”tisšg
->
	`evt_hªdËr
Õ_adv”tisšg->
adv_evt
);

670  
NRF_SUCCESS
;

671 
	}
}

674 
	$bË_adv”tisšg_Ú_bË_evt
(
bË_evt_t
 cÚ¡ * 
p_bË_evt
, * 
p_cÚ‹xt
)

676 
bË_adv”tisšg_t
 * 
p_adv”tisšg
 = (bË_adv”tisšg_ˆ*)
p_cÚ‹xt
;

678 
p_bË_evt
->
h—d”
.
evt_id
)

680 
BLE_GAP_EVT_CONNECTED
:

681 
	`Ú_cÚÃùed
(
p_adv”tisšg
, 
p_bË_evt
);

685 
BLE_GAP_EVT_DISCONNECTED
:

686 
	`Ú_discÚÃùed
(
p_adv”tisšg
, 
p_bË_evt
);

690 
BLE_GAP_EVT_ADV_SET_TERMINATED
:

691 
	`Ú_‹rmš©ed
(
p_adv”tisšg
, 
p_bË_evt
);

697 
	}
}

700 
	$bË_adv”tisšg_Ú_sys_evt
(
ušt32_t
 
evt_id
, * 
p_cÚ‹xt
)

704 
	}
}

707 
ušt32_t
 
	$bË_adv”tisšg_³”_addr_»¶y
(
bË_adv”tisšg_t
 * cÚ¡ 
p_adv”tisšg
,

708 
bË_g­_addr_t
 * 
p_³”_add»ss
)

710 ià(!
p_adv”tisšg
->
³”_addr_»¶y_ex³ùed
)

712  
NRF_ERROR_INVALID_STATE
;

715 
p_adv”tisšg
->
³”_addr_»¶y_ex³ùed
 = 
çl£
;

717 
	`memıy
(&
p_adv”tisšg
->
³”_add»ss
, 
p_³”_add»ss
, (p_advertising->peer_address));

719  
NRF_SUCCESS
;

720 
	}
}

723 
ušt32_t
 
	$bË_adv”tisšg_wh™–i¡_»¶y
(
bË_adv”tisšg_t
 * cÚ¡ 
p_adv”tisšg
,

724 
bË_g­_addr_t
 cÚ¡ * 
p_g­_addrs
,

725 
ušt32_t
 
addr_út
,

726 
bË_g­_œk_t
 cÚ¡ * 
p_g­_œks
,

727 
ušt32_t
 
œk_út
)

729 ià(!
p_adv”tisšg
->
wh™–i¡_»¶y_ex³ùed
)

731  
NRF_ERROR_INVALID_STATE
;

734 
p_adv”tisšg
->
wh™–i¡_»¶y_ex³ùed
 = 
çl£
;

735 
p_adv”tisšg
->
wh™–i¡_š_u£
 = ((
addr_út
 > 0è|| (
œk_út
 > 0));

737  
NRF_SUCCESS
;

738 
	}
}

741 
ušt32_t
 
	$bË_adv”tisšg_»¡¬t_w™hout_wh™–i¡
(
bË_adv”tisšg_t
 * cÚ¡ 
p_adv”tisšg
)

743 
»t_code_t
 
»t
;

745 (è
	`sd_bË_g­_adv_¡İ
(
p_adv”tisšg
->
adv_hªdË
);

747 
p_adv”tisšg
->
wh™–i¡_‹mpÜ¬y_di§bËd
 = 
Œue
;

748 
p_adv”tisšg
->
wh™–i¡_š_u£
 = 
çl£
;

749 
p_adv”tisšg
->
adv_·¿ms
.
f‹r_pŞicy
 = 
BLE_GAP_ADV_FP_ANY
;

751 
»t
 = 
	`æags_£t
(
p_adv”tisšg
, 
BLE_GAP_ADV_FLAGS_LE_ONLY_GENERAL_DISC_MODE
);

752 
	`VERIFY_SUCCESS
(
»t
);

754 
»t
 = 
	`bË_adv”tisšg_¡¬t
(
p_adv”tisšg
,…_adv”tisšg->
adv_mode_cu¼’t
);

755 ià((
»t
 !ğ
NRF_SUCCESS
è&& (
p_adv”tisšg
->
”rÜ_hªdËr
 !ğ
NULL
))

757 
p_adv”tisšg
->
	`”rÜ_hªdËr
(
»t
);

760  
NRF_SUCCESS
;

761 
	}
}

764 
	$bË_adv”tisšg_modes_cÚfig_£t
(
bË_adv”tisšg_t
 * cÚ¡ 
p_adv”tisšg
,

765 
bË_adv_modes_cÚfig_t
 cÚ¡ * cÚ¡ 
p_adv_modes_cÚfig
)

767 
p_adv”tisšg
->
adv_modes_cÚfig
 = *
p_adv_modes_cÚfig
;

768 
	}
}

771 
»t_code_t
 
	$bË_adv”tisšg_advd©a_upd©e
(
bË_adv”tisšg_t
 * cÚ¡ 
p_adv”tisšg
,

772 
bË_g­_adv_d©a_t
 * cÚ¡ 
p_Ãw_advd©a_buf
,

773 
boŞ
 
³rmª’t
)

775 ià(
³rmª’t
)

777 
	`memıy
(&
p_adv”tisšg
->
adv_d©a
, 
p_Ãw_advd©a_buf
, (p_advertising->adv_data));

778 
p_adv”tisšg
->
p_adv_d©a
 = &p_adv”tisšg->
adv_d©a
;

782 
p_adv”tisšg
->
p_adv_d©a
 = 
p_Ãw_advd©a_buf
;

785  
	`sd_bË_g­_adv_£t_cÚfigu»
(&
p_adv”tisšg
->
adv_hªdË
,

786 
p_adv”tisšg
->
p_adv_d©a
,

787 
NULL
);

788 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\ble\ble_link_ctx_manager\ble_link_ctx_manager.c

40 
	~"bË_lšk_ùx_mªag”.h
"

41 
	~"sdk_commÚ.h
"

44 
»t_code_t
 
	$blcm_lšk_ùx_g‘
(
blcm_lšk_ùx_¡Üage_t
 cÚ¡ * cÚ¡ 
p_lšk_ùx_¡Üage
,

45 
ušt16_t
 cÚ¡ 
cÚn_hªdË
,

46 ** cÚ¡ 
µ_ùx_d©a
)

48 
ušt8_t
 
cÚn_id
;

50 ià(
µ_ùx_d©a
 =ğ
NULL
)

52  
NRF_ERROR_NULL
;

56 *
µ_ùx_d©a
 = 
NULL
;

59 
	`VERIFY_PARAM_NOT_NULL
(
p_lšk_ùx_¡Üage
);

60 
	`VERIFY_PARAM_NOT_NULL
(
p_lšk_ùx_¡Üage
->
p_ùx_d©a_poŞ
);

61 
	`VERIFY_TRUE
((
p_lšk_ùx_¡Üage
->
lšk_ùx_size
 % 
BYTES_PER_WORD
è=ğ0, 
NRF_ERROR_INVALID_PARAM
);

63 
cÚn_id
 = 
	`bË_cÚn_¡©e_cÚn_idx
(
cÚn_hªdË
);

65 ià(
cÚn_id
 =ğ
BLE_CONN_STATE_MAX_CONNECTIONS
)

67  
NRF_ERROR_NOT_FOUND
;

70 ià(
cÚn_id
 >ğ
p_lšk_ùx_¡Üage
->
max_lšks_út
)

72  
NRF_ERROR_NO_MEM
;

75 *
µ_ùx_d©a
 = (*è((
ušt8_t
 *è
p_lšk_ùx_¡Üage
->
p_ùx_d©a_poŞ
 +

76 
cÚn_id
 * 
p_lšk_ùx_¡Üage
->
lšk_ùx_size
);

77  
NRF_SUCCESS
;

78 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\ble\ble_services\ble_bas\ble_bas.c

44 
	~"sdk_commÚ.h
"

45 #ià
NRF_MODULE_ENABLED
(
BLE_BAS
)

46 
	~"bË_bas.h
"

47 
	~<¡ršg.h
>

48 
	~"bË_¤v_commÚ.h
"

49 
	~"bË_cÚn_¡©e.h
"

51 
	#NRF_LOG_MODULE_NAME
 
bË_bas


	)

52 #ià
BLE_BAS_CONFIG_LOG_ENABLED


53 
	#NRF_LOG_LEVEL
 
BLE_BAS_CONFIG_LOG_LEVEL


	)

54 
	#NRF_LOG_INFO_COLOR
 
BLE_BAS_CONFIG_INFO_COLOR


	)

55 
	#NRF_LOG_DEBUG_COLOR
 
BLE_BAS_CONFIG_DEBUG_COLOR


	)

57 
	#NRF_LOG_LEVEL
 0

	)

59 
	~"Äf_log.h
"

60 
NRF_LOG_MODULE_REGISTER
();

63 
	#INVALID_BATTERY_LEVEL
 255

	)

71 
	$Ú_wr™e
(
bË_bas_t
 * 
p_bas
, 
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

73 ià(!
p_bas
->
is_nÙifiÿtiÚ_suµÜ‹d
)

78 
bË_g©ts_evt_wr™e_t
 cÚ¡ * 
p_evt_wr™e
 = &
p_bË_evt
->
evt
.
g©ts_evt
.
·¿ms
.
wr™e
;

80 iàĞ(
p_evt_wr™e
->
hªdË
 =ğ
p_bas
->
b©‹ry_Ëv–_hªdËs
.
cccd_hªdË
)

81 && (
p_evt_wr™e
->
Ën
 == 2))

83 ià(
p_bas
->
evt_hªdËr
 =ğ
NULL
)

88 
bË_bas_evt_t
 
evt
;

90 ià(
	`bË_¤v_is_nÙifiÿtiÚ_’abËd
(
p_evt_wr™e
->
d©a
))

92 
evt
.
evt_ty³
 = 
BLE_BAS_EVT_NOTIFICATION_ENABLED
;

96 
evt
.
evt_ty³
 = 
BLE_BAS_EVT_NOTIFICATION_DISABLED
;

98 
evt
.
cÚn_hªdË
 = 
p_bË_evt
->evt.
g©ts_evt
.conn_handle;

101 
p_bas
->
	`evt_hªdËr
Õ_bas, &
evt
);

103 
	}
}

106 
	$bË_bas_Ú_bË_evt
(
bË_evt_t
 cÚ¡ * 
p_bË_evt
, * 
p_cÚ‹xt
)

108 ià((
p_cÚ‹xt
 =ğ
NULL
è|| (
p_bË_evt
 == NULL))

113 
bË_bas_t
 * 
p_bas
 = (bË_bas_ˆ*)
p_cÚ‹xt
;

115 
p_bË_evt
->
h—d”
.
evt_id
)

117 
BLE_GATTS_EVT_WRITE
:

118 
	`Ú_wr™e
(
p_bas
, 
p_bË_evt
);

125 
	}
}

135 
»t_code_t
 
	$b©‹ry_Ëv–_ch¬_add
(
bË_bas_t
 * 
p_bas
, cÚ¡ 
bË_bas_š™_t
 * 
p_bas_š™
)

137 
»t_code_t
 
”r_code
;

138 
bË_add_ch¬_·¿ms_t
 
add_ch¬_·¿ms
;

139 
bË_add_desü_·¿ms_t
 
add_desü_·¿ms
;

140 
ušt8_t
 
š™Ÿl_b©‹ry_Ëv–
;

141 
ušt8_t
 
š™_Ën
;

142 
ušt8_t
 
’coded_»pÜt_»f
[
BLE_SRV_ENCODED_REPORT_REF_LEN
];

145 
š™Ÿl_b©‹ry_Ëv–
 = 
p_bas_š™
->
š™Ÿl_b©t_Ëv–
;

147 
	`mem£t
(&
add_ch¬_·¿ms
, 0, (add_char_params));

148 
add_ch¬_·¿ms
.
uuid
 = 
BLE_UUID_BATTERY_LEVEL_CHAR
;

149 
add_ch¬_·¿ms
.
max_Ën
 = (
ušt8_t
);

150 
add_ch¬_·¿ms
.
š™_Ën
 = (
ušt8_t
);

151 
add_ch¬_·¿ms
.
p_š™_v®ue
 = &
š™Ÿl_b©‹ry_Ëv–
;

152 
add_ch¬_·¿ms
.
ch¬_´İs
.
nÙify
 = 
p_bas
->
is_nÙifiÿtiÚ_suµÜ‹d
;

153 
add_ch¬_·¿ms
.
ch¬_´İs
.
»ad
 = 1;

154 
add_ch¬_·¿ms
.
cccd_wr™e_acûss
 = 
p_bas_š™
->
bl_cccd_wr_£c
;

155 
add_ch¬_·¿ms
.
»ad_acûss
 = 
p_bas_š™
->
bl_rd_£c
;

157 
”r_code
 = 
	`ch¬aù”i¡ic_add
(
p_bas
->
£rviû_hªdË
,

158 &
add_ch¬_·¿ms
,

159 &(
p_bas
->
b©‹ry_Ëv–_hªdËs
));

160 ià(
”r_code
 !ğ
NRF_SUCCESS
)

162  
”r_code
;

165 ià(
p_bas_š™
->
p_»pÜt_»f
 !ğ
NULL
)

168 
š™_Ën
 = 
	`bË_¤v_»pÜt_»f_’code
(
’coded_»pÜt_»f
, 
p_bas_š™
->
p_»pÜt_»f
);

170 
	`mem£t
(&
add_desü_·¿ms
, 0, (add_descr_params));

171 
add_desü_·¿ms
.
uuid
 = 
BLE_UUID_REPORT_REF_DESCR
;

172 
add_desü_·¿ms
.
»ad_acûss
 = 
p_bas_š™
->
bl_»pÜt_rd_£c
;

173 
add_desü_·¿ms
.
š™_Ën
 = init_len;

174 
add_desü_·¿ms
.
max_Ën
 =‡dd_desü_·¿ms.
š™_Ën
;

175 
add_desü_·¿ms
.
p_v®ue
 = 
’coded_»pÜt_»f
;

177 
”r_code
 = 
	`desütÜ_add
(
p_bas
->
b©‹ry_Ëv–_hªdËs
.
v®ue_hªdË
,

178 &
add_desü_·¿ms
,

179 &
p_bas
->
»pÜt_»f_hªdË
);

180  
”r_code
;

184 
p_bas
->
»pÜt_»f_hªdË
 = 
BLE_GATT_HANDLE_INVALID
;

187  
NRF_SUCCESS
;

188 
	}
}

191 
»t_code_t
 
	$bË_bas_š™
(
bË_bas_t
 * 
p_bas
, cÚ¡ 
bË_bas_š™_t
 * 
p_bas_š™
)

193 ià(
p_bas
 =ğ
NULL
 || 
p_bas_š™
 == NULL)

195  
NRF_ERROR_NULL
;

198 
»t_code_t
 
”r_code
;

199 
bË_uuid_t
 
bË_uuid
;

202 
p_bas
->
evt_hªdËr
 = 
p_bas_š™
->evt_handler;

203 
p_bas
->
is_nÙifiÿtiÚ_suµÜ‹d
 = 
p_bas_š™
->
suµÜt_nÙifiÿtiÚ
;

204 
p_bas
->
b©‹ry_Ëv–_Ï¡
 = 
INVALID_BATTERY_LEVEL
;

207 
	`BLE_UUID_BLE_ASSIGN
(
bË_uuid
, 
BLE_UUID_BATTERY_SERVICE
);

209 
”r_code
 = 
	`sd_bË_g©ts_£rviû_add
(
BLE_GATTS_SRVC_TYPE_PRIMARY
, &
bË_uuid
, &
p_bas
->
£rviû_hªdË
);

210 
	`VERIFY_SUCCESS
(
”r_code
);

213 
”r_code
 = 
	`b©‹ry_Ëv–_ch¬_add
(
p_bas
, 
p_bas_š™
);

214  
”r_code
;

215 
	}
}

225 
»t_code_t
 
	$b©‹ry_nÙifiÿtiÚ_£nd
(
bË_g©ts_hvx_·¿ms_t
 * cÚ¡ 
p_hvx_·¿ms
,

226 
ušt16_t
 
cÚn_hªdË
)

228 
»t_code_t
 
”r_code
 = 
	`sd_bË_g©ts_hvx
(
cÚn_hªdË
, 
p_hvx_·¿ms
);

229 ià(
”r_code
 =ğ
NRF_SUCCESS
)

231 
	`NRF_LOG_INFO
("B©‹ry‚ÙifiÿtiÚ ha b“À£Á usšg cÚn_hªdË: 0x%04X", 
cÚn_hªdË
);

235 
	`NRF_LOG_DEBUG
("Error: 0x%08X while sending‚otification with conn_handle: 0x%04X",

236 
”r_code
,

237 
cÚn_hªdË
);

239  
”r_code
;

240 
	}
}

243 
»t_code_t
 
	$bË_bas_b©‹ry_Ëv–_upd©e
(
bË_bas_t
 * 
p_bas
,

244 
ušt8_t
 
b©‹ry_Ëv–
,

245 
ušt16_t
 
cÚn_hªdË
)

247 ià(
p_bas
 =ğ
NULL
)

249  
NRF_ERROR_NULL
;

252 
»t_code_t
 
”r_code
 = 
NRF_SUCCESS
;

253 
bË_g©ts_v®ue_t
 
g©ts_v®ue
;

255 ià(
b©‹ry_Ëv–
 !ğ
p_bas
->
b©‹ry_Ëv–_Ï¡
)

258 
	`mem£t
(&
g©ts_v®ue
, 0, (gatts_value));

260 
g©ts_v®ue
.
Ën
 = (
ušt8_t
);

261 
g©ts_v®ue
.
off£t
 = 0;

262 
g©ts_v®ue
.
p_v®ue
 = &
b©‹ry_Ëv–
;

265 
”r_code
 = 
	`sd_bË_g©ts_v®ue_£t
(
BLE_CONN_HANDLE_INVALID
,

266 
p_bas
->
b©‹ry_Ëv–_hªdËs
.
v®ue_hªdË
,

267 &
g©ts_v®ue
);

268 ià(
”r_code
 =ğ
NRF_SUCCESS
)

270 
	`NRF_LOG_INFO
("B©‹ry†ev– ha b“Àupd©ed: %d%%", 
b©‹ry_Ëv–
)

273 
p_bas
->
b©‹ry_Ëv–_Ï¡
 = 
b©‹ry_Ëv–
;

277 
	`NRF_LOG_DEBUG
("E¼Ü duršg b©‹ry†ev– upd©e: 0x%08X", 
”r_code
)

279  
”r_code
;

283 ià(
p_bas
->
is_nÙifiÿtiÚ_suµÜ‹d
)

285 
bË_g©ts_hvx_·¿ms_t
 
hvx_·¿ms
;

287 
	`mem£t
(&
hvx_·¿ms
, 0, (hvx_params));

289 
hvx_·¿ms
.
hªdË
 = 
p_bas
->
b©‹ry_Ëv–_hªdËs
.
v®ue_hªdË
;

290 
hvx_·¿ms
.
ty³
 = 
BLE_GATT_HVX_NOTIFICATION
;

291 
hvx_·¿ms
.
off£t
 = 
g©ts_v®ue
.offset;

292 
hvx_·¿ms
.
p_Ën
 = &
g©ts_v®ue
.
Ën
;

293 
hvx_·¿ms
.
p_d©a
 = 
g©ts_v®ue
.
p_v®ue
;

295 ià(
cÚn_hªdË
 =ğ
BLE_CONN_HANDLE_ALL
)

297 
bË_cÚn_¡©e_cÚn_hªdË_li¡_t
 
cÚn_hªdËs
 = 
	`bË_cÚn_¡©e_cÚn_hªdËs
();

300 
ušt32_t
 
i
 = 0; i < 
cÚn_hªdËs
.
Ën
; i++)

302 ià(
	`bË_cÚn_¡©e_¡©us
(
cÚn_hªdËs
.cÚn_hªdËs[
i
]è=ğ
BLE_CONN_STATUS_CONNECTED
)

304 ià(
”r_code
 =ğ
NRF_SUCCESS
)

306 
”r_code
 = 
	`b©‹ry_nÙifiÿtiÚ_£nd
(&
hvx_·¿ms
,

307 
cÚn_hªdËs
.cÚn_hªdËs[
i
]);

312 
	`UNUSED_RETURN_VALUE
(
	`b©‹ry_nÙifiÿtiÚ_£nd
(&
hvx_·¿ms
,

313 
cÚn_hªdËs
.cÚn_hªdËs[
i
]));

320 
”r_code
 = 
	`b©‹ry_nÙifiÿtiÚ_£nd
(&
hvx_·¿ms
, 
cÚn_hªdË
);

325 
”r_code
 = 
NRF_ERROR_INVALID_STATE
;

329  
”r_code
;

330 
	}
}

333 
»t_code_t
 
	$bË_bas_b©‹ry_lvl_Ú_»cÚÃùiÚ_upd©e
(
bË_bas_t
 * 
p_bas
,

334 
ušt16_t
 
cÚn_hªdË
)

336 ià(
p_bas
 =ğ
NULL
)

338  
NRF_ERROR_NULL
;

341 
»t_code_t
 
”r_code
;

343 ià(
p_bas
->
is_nÙifiÿtiÚ_suµÜ‹d
)

345 
bË_g©ts_hvx_·¿ms_t
 
hvx_·¿ms
;

346 
ušt16_t
 
Ën
 = (
ušt8_t
);

348 
	`mem£t
(&
hvx_·¿ms
, 0, (hvx_params));

350 
hvx_·¿ms
.
hªdË
 = 
p_bas
->
b©‹ry_Ëv–_hªdËs
.
v®ue_hªdË
;

351 
hvx_·¿ms
.
ty³
 = 
BLE_GATT_HVX_NOTIFICATION
;

352 
hvx_·¿ms
.
off£t
 = 0;

353 
hvx_·¿ms
.
p_Ën
 = &
Ën
;

354 
hvx_·¿ms
.
p_d©a
 = &
p_bas
->
b©‹ry_Ëv–_Ï¡
;

356 
”r_code
 = 
	`b©‹ry_nÙifiÿtiÚ_£nd
(&
hvx_·¿ms
, 
cÚn_hªdË
);

358  
”r_code
;

361  
NRF_ERROR_INVALID_STATE
;

362 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\ble\ble_services\ble_dis\ble_dis.c

44 
	~"sdk_commÚ.h
"

45 #ià
NRF_MODULE_ENABLED
(
BLE_DIS
)

46 
	~"bË_dis.h
"

48 
	~<¡dlib.h
>

49 
	~<¡ršg.h
>

50 
	~"­p_”rÜ.h
"

51 
	~"bË_g©ts.h
"

52 
	~"bË_¤v_commÚ.h
"

55 
	#BLE_DIS_SYS_ID_LEN
 8

	)

56 
	#BLE_DIS_PNP_ID_LEN
 7

	)

58 
ušt16_t
 
	g£rviû_hªdË
;

59 
bË_g©ts_ch¬_hªdËs_t
 
	gmªuçù_Çme_hªdËs
;

60 
bË_g©ts_ch¬_hªdËs_t
 
	gmod–_num_hªdËs
;

61 
bË_g©ts_ch¬_hªdËs_t
 
	g£rŸl_num_hªdËs
;

62 
bË_g©ts_ch¬_hªdËs_t
 
	ghw_»v_hªdËs
;

63 
bË_g©ts_ch¬_hªdËs_t
 
	gfw_»v_hªdËs
;

64 
bË_g©ts_ch¬_hªdËs_t
 
	gsw_»v_hªdËs
;

65 
bË_g©ts_ch¬_hªdËs_t
 
	gsys_id_hªdËs
;

66 
bË_g©ts_ch¬_hªdËs_t
 
	g»g_û¹_d©a_li¡_hªdËs
;

67 
bË_g©ts_ch¬_hªdËs_t
 
	g²p_id_hªdËs
;

75 
	$sys_id_’code
(
ušt8_t
 * 
p_’coded_bufãr
, 
bË_dis_sys_id_t
 cÚ¡ * 
p_sys_id
)

77 
	`APP_ERROR_CHECK_BOOL
(
p_sys_id
 !ğ
NULL
);

78 
	`APP_ERROR_CHECK_BOOL
(
p_’coded_bufãr
 !ğ
NULL
);

80 
p_’coded_bufãr
[0] = (
p_sys_id
->
mªuçùu»r_id
 & 0x00000000FF);

81 
p_’coded_bufãr
[1] = (
p_sys_id
->
mªuçùu»r_id
 & 0x000000FF00) >> 8;

82 
p_’coded_bufãr
[2] = (
p_sys_id
->
mªuçùu»r_id
 & 0x0000FF0000) >> 16;

83 
p_’coded_bufãr
[3] = (
p_sys_id
->
mªuçùu»r_id
 & 0x00FF000000) >> 24;

84 
p_’coded_bufãr
[4] = (
p_sys_id
->
mªuçùu»r_id
 & 0xFF00000000) >> 32;

86 
p_’coded_bufãr
[5] = (
p_sys_id
->
Ügªiz©iÚ®ly_unique_id
 & 0x0000FF);

87 
p_’coded_bufãr
[6] = (
p_sys_id
->
Ügªiz©iÚ®ly_unique_id
 & 0x00FF00) >> 8;

88 
p_’coded_bufãr
[7] = (
p_sys_id
->
Ügªiz©iÚ®ly_unique_id
 & 0xFF0000) >> 16;

89 
	}
}

97 
	$²p_id_’code
(
ušt8_t
 * 
p_’coded_bufãr
, 
bË_dis_²p_id_t
 cÚ¡ * 
p_²p_id
)

99 
ušt8_t
 
Ën
 = 0;

101 
	`APP_ERROR_CHECK_BOOL
(
p_²p_id
 !ğ
NULL
);

102 
	`APP_ERROR_CHECK_BOOL
(
p_’coded_bufãr
 !ğ
NULL
);

104 
p_’coded_bufãr
[
Ën
++] = 
p_²p_id
->
v’dÜ_id_sourû
;

106 
Ën
 +ğ
	`ušt16_’code
(
p_²p_id
->
v’dÜ_id
, &
p_’coded_bufãr
[len]);

107 
Ën
 +ğ
	`ušt16_’code
(
p_²p_id
->
´oduù_id
, &
p_’coded_bufãr
[len]);

108 
Ën
 +ğ
	`ušt16_’code
(
p_²p_id
->
´oduù_v”siÚ
, &
p_’coded_bufãr
[len]);

110 
	`APP_ERROR_CHECK_BOOL
(
Ën
 =ğ
BLE_DIS_PNP_ID_LEN
);

111 
	}
}

124 
ušt32_t
 
	$ch¬_add
(
ušt16_t
 
uuid
,

125 
ušt8_t
 * 
p_ch¬_v®ue
,

126 
ušt16_t
 
ch¬_Ën
,

127 
£cur™y_»q_t
 cÚ¡ 
rd_£c
,

128 
bË_g©ts_ch¬_hªdËs_t
 * 
p_hªdËs
)

130 
bË_add_ch¬_·¿ms_t
 
add_ch¬_·¿ms
;

132 
	`APP_ERROR_CHECK_BOOL
(
p_ch¬_v®ue
 !ğ
NULL
);

133 
	`APP_ERROR_CHECK_BOOL
(
ch¬_Ën
 > 0);

135 
	`mem£t
(&
add_ch¬_·¿ms
, 0, (add_char_params));

137 
add_ch¬_·¿ms
.
uuid
 = uuid;

138 
add_ch¬_·¿ms
.
max_Ën
 = 
ch¬_Ën
;

139 
add_ch¬_·¿ms
.
š™_Ën
 = 
ch¬_Ën
;

140 
add_ch¬_·¿ms
.
p_š™_v®ue
 = 
p_ch¬_v®ue
;

141 
add_ch¬_·¿ms
.
ch¬_´İs
.
»ad
 = 1;

142 
add_ch¬_·¿ms
.
»ad_acûss
 = 
rd_£c
;

144  
	`ch¬aù”i¡ic_add
(
£rviû_hªdË
, &
add_ch¬_·¿ms
, 
p_hªdËs
);

145 
	}
}

148 
ušt32_t
 
	$bË_dis_š™
(
bË_dis_š™_t
 cÚ¡ * 
p_dis_š™
)

150 
ušt32_t
 
”r_code
;

151 
bË_uuid_t
 
bË_uuid
;

154 
	`BLE_UUID_BLE_ASSIGN
(
bË_uuid
, 
BLE_UUID_DEVICE_INFORMATION_SERVICE
);

156 
”r_code
 = 
	`sd_bË_g©ts_£rviû_add
(
BLE_GATTS_SRVC_TYPE_PRIMARY
, &
bË_uuid
, &
£rviû_hªdË
);

157 ià(
”r_code
 !ğ
NRF_SUCCESS
)

159  
”r_code
;

163 ià(
p_dis_š™
->
mªuçù_Çme_¡r
.
Ëngth
 > 0)

165 
”r_code
 = 
	`ch¬_add
(
BLE_UUID_MANUFACTURER_NAME_STRING_CHAR
,

166 
p_dis_š™
->
mªuçù_Çme_¡r
.
p_¡r
,

167 
p_dis_š™
->
mªuçù_Çme_¡r
.
Ëngth
,

168 
p_dis_š™
->
dis_ch¬_rd_£c
,

169 &
mªuçù_Çme_hªdËs
);

170 ià(
”r_code
 !ğ
NRF_SUCCESS
)

172  
”r_code
;

175 ià(
p_dis_š™
->
mod–_num_¡r
.
Ëngth
 > 0)

177 
”r_code
 = 
	`ch¬_add
(
BLE_UUID_MODEL_NUMBER_STRING_CHAR
,

178 
p_dis_š™
->
mod–_num_¡r
.
p_¡r
,

179 
p_dis_š™
->
mod–_num_¡r
.
Ëngth
,

180 
p_dis_š™
->
dis_ch¬_rd_£c
,

181 &
mod–_num_hªdËs
);

182 ià(
”r_code
 !ğ
NRF_SUCCESS
)

184  
”r_code
;

187 ià(
p_dis_š™
->
£rŸl_num_¡r
.
Ëngth
 > 0)

189 
”r_code
 = 
	`ch¬_add
(
BLE_UUID_SERIAL_NUMBER_STRING_CHAR
,

190 
p_dis_š™
->
£rŸl_num_¡r
.
p_¡r
,

191 
p_dis_š™
->
£rŸl_num_¡r
.
Ëngth
,

192 
p_dis_š™
->
dis_ch¬_rd_£c
,

193 &
£rŸl_num_hªdËs
);

194 ià(
”r_code
 !ğ
NRF_SUCCESS
)

196  
”r_code
;

199 ià(
p_dis_š™
->
hw_»v_¡r
.
Ëngth
 > 0)

201 
”r_code
 = 
	`ch¬_add
(
BLE_UUID_HARDWARE_REVISION_STRING_CHAR
,

202 
p_dis_š™
->
hw_»v_¡r
.
p_¡r
,

203 
p_dis_š™
->
hw_»v_¡r
.
Ëngth
,

204 
p_dis_š™
->
dis_ch¬_rd_£c
,

205 &
hw_»v_hªdËs
);

206 ià(
”r_code
 !ğ
NRF_SUCCESS
)

208  
”r_code
;

211 ià(
p_dis_š™
->
fw_»v_¡r
.
Ëngth
 > 0)

213 
”r_code
 = 
	`ch¬_add
(
BLE_UUID_FIRMWARE_REVISION_STRING_CHAR
,

214 
p_dis_š™
->
fw_»v_¡r
.
p_¡r
,

215 
p_dis_š™
->
fw_»v_¡r
.
Ëngth
,

216 
p_dis_š™
->
dis_ch¬_rd_£c
,

217 &
fw_»v_hªdËs
);

218 ià(
”r_code
 !ğ
NRF_SUCCESS
)

220  
”r_code
;

223 ià(
p_dis_š™
->
sw_»v_¡r
.
Ëngth
 > 0)

225 
”r_code
 = 
	`ch¬_add
(
BLE_UUID_SOFTWARE_REVISION_STRING_CHAR
,

226 
p_dis_š™
->
sw_»v_¡r
.
p_¡r
,

227 
p_dis_š™
->
sw_»v_¡r
.
Ëngth
,

228 
p_dis_š™
->
dis_ch¬_rd_£c
,

229 &
sw_»v_hªdËs
);

230 ià(
”r_code
 !ğ
NRF_SUCCESS
)

232  
”r_code
;

235 ià(
p_dis_š™
->
p_sys_id
 !ğ
NULL
)

237 
ušt8_t
 
’coded_sys_id
[
BLE_DIS_SYS_ID_LEN
];

239 
	`sys_id_’code
(
’coded_sys_id
, 
p_dis_š™
->
p_sys_id
);

240 
”r_code
 = 
	`ch¬_add
(
BLE_UUID_SYSTEM_ID_CHAR
,

241 
’coded_sys_id
,

242 
BLE_DIS_SYS_ID_LEN
,

243 
p_dis_š™
->
dis_ch¬_rd_£c
,

244 &
sys_id_hªdËs
);

245 ià(
”r_code
 !ğ
NRF_SUCCESS
)

247  
”r_code
;

250 ià(
p_dis_š™
->
p_»g_û¹_d©a_li¡
 !ğ
NULL
)

252 
”r_code
 = 
	`ch¬_add
(
BLE_UUID_IEEE_REGULATORY_CERTIFICATION_DATA_LIST_CHAR
,

253 
p_dis_š™
->
p_»g_û¹_d©a_li¡
->
p_li¡
,

254 
p_dis_š™
->
p_»g_û¹_d©a_li¡
->
li¡_Ën
,

255 
p_dis_š™
->
dis_ch¬_rd_£c
,

256 &
»g_û¹_d©a_li¡_hªdËs
);

257 ià(
”r_code
 !ğ
NRF_SUCCESS
)

259  
”r_code
;

262 ià(
p_dis_š™
->
p_²p_id
 !ğ
NULL
)

264 
ušt8_t
 
’coded_²p_id
[
BLE_DIS_PNP_ID_LEN
];

266 
	`²p_id_’code
(
’coded_²p_id
, 
p_dis_š™
->
p_²p_id
);

267 
”r_code
 = 
	`ch¬_add
(
BLE_UUID_PNP_ID_CHAR
,

268 
’coded_²p_id
,

269 
BLE_DIS_PNP_ID_LEN
,

270 
p_dis_š™
->
dis_ch¬_rd_£c
,

271 &
²p_id_hªdËs
);

272 ià(
”r_code
 !ğ
NRF_SUCCESS
)

274  
”r_code
;

278  
NRF_SUCCESS
;

279 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\ble\ble_services\ble_hids\ble_hids.c

44 
	~"sdk_commÚ.h
"

45 #ià
NRF_MODULE_ENABLED
(
BLE_HIDS
)

46 
	~"bË_hids.h
"

47 
	~<¡ršg.h
>

48 
	~"­p_”rÜ.h
"

49 
	~"bË_¤v_commÚ.h
"

53 
	#PROTOCOL_MODE_BOOT
 0x00

	)

54 
	#PROTOCOL_MODE_REPORT
 0x01

	)

57 
	#HIDS_CONTROL_POINT_SUSPEND
 0

	)

58 
	#HIDS_CONTROL_POINT_EXIT_SUSPEND
 1

	)

60 
	#DEFAULT_PROTOCOL_MODE
 
PROTOCOL_MODE_REPORT


	)

61 
	#INITIAL_VALUE_HID_CONTROL_POINT
 
HIDS_CONTROL_POINT_SUSPEND


	)

63 
	#ENCODED_HID_INFORMATION_LEN
 4

	)

71 
	#BLE_HIDS_ERROR_HANDLE
(
_p_hids
, 
_”r_code
) \

74 ià(((
_”r_code
è!ğ
NRF_SUCCESS
è&& ((
_p_hids
)->
”rÜ_hªdËr
 !ğ
NULL
)) \

76 (
_p_hids
)->
	`”rÜ_hªdËr
((
_”r_code
)); \

78 } 0)

	)

87 
size_t
 
	$bË_hids_ş›Á_cÚ‹xt_size_ÿlc
(
bË_hids_t
 * 
p_hids
)

89 
size_t
 
ş›Á_size
 = (
bË_hids_ş›Á_cÚ‹xt_t
è+ (
BOOT_KB_INPUT_REPORT_MAX_SIZE
) +

90 (
BOOT_KB_OUTPUT_REPORT_MAX_SIZE
è+ (
BOOT_MOUSE_INPUT_REPORT_MAX_SIZE
);

92 ià(
p_hids
->
p_šp_»p_š™_¬¿y
 !ğ
NULL
)

94 
ušt32_t
 
i
 = 0; i < 
p_hids
->
šp_»p_couÁ
; i++)

96 
ş›Á_size
 +ğ
p_hids
->
p_šp_»p_š™_¬¿y
[
i
].
max_Ën
;

99 ià(
p_hids
->
p_ou_»p_š™_¬¿y
 !ğ
NULL
)

101 
ušt32_t
 
i
 = 0; i < 
p_hids
->
ou_»p_couÁ
; i++)

103 
ş›Á_size
 +ğ
p_hids
->
p_ou_»p_š™_¬¿y
[
i
].
max_Ën
;

106 ià(
p_hids
->
p_ã©u»_»p_š™_¬¿y
 !ğ
NULL
)

108 
ušt32_t
 
i
 = 0; i < 
p_hids
->
ã©u»_»p_couÁ
; i++)

110 
ş›Á_size
 +ğ
p_hids
->
p_ã©u»_»p_š™_¬¿y
[
i
].
max_Ën
;

114  
ş›Á_size
;

115 
	}
}

126 
bË_hids_ch¬_id_t
 
	$make_ch¬_id
(
ušt16_t
 
uuid
, 
ušt8_t
 
»p_ty³
, ušt8_ˆ
»p_šdex
)

128 
bË_hids_ch¬_id_t
 
ch¬_id
 = {0};

130 
ch¬_id
.
uuid
 = uuid;

131 
ch¬_id
.
»p_ty³
 =„ep_type;

132 
ch¬_id
.
»p_šdex
 =„ep_index;

134  
ch¬_id
;

135 
	}
}

143 
	$Ú_cÚÃù
(
bË_hids_t
 * 
p_hids
, 
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

145 
ušt32_t
 
”r_code
;

146 
bË_g©ts_v®ue_t
 
g©ts_v®ue
;

147 
bË_hids_ş›Á_cÚ‹xt_t
 * 
p_ş›Á
 = 
NULL
;

149 
”r_code
 = 
	`blcm_lšk_ùx_g‘
(
p_hids
->
p_lšk_ùx_¡Üage
,

150 
p_bË_evt
->
evt
.
g­_evt
.
cÚn_hªdË
,

151 (*è&
p_ş›Á
);

152 
	`BLE_HIDS_ERROR_HANDLE
(
p_hids
, 
”r_code
);

154 ià(
p_ş›Á
 =ğ
NULL
)

159 
	`mem£t
(
p_ş›Á
, 0, 
	`bË_hids_ş›Á_cÚ‹xt_size_ÿlc
(
p_hids
));

161 ià(
p_hids
->
´ÙocŞ_mode_hªdËs
.
v®ue_hªdË
)

164 
p_ş›Á
->
´ÙocŞ_mode
 = 
DEFAULT_PROTOCOL_MODE
;

167 
	`mem£t
(&
g©ts_v®ue
, 0, (gatts_value));

169 
g©ts_v®ue
.
Ën
 = (
ušt8_t
);

170 
g©ts_v®ue
.
off£t
 = 0;

171 
g©ts_v®ue
.
p_v®ue
 = &
p_ş›Á
->
´ÙocŞ_mode
;

173 
”r_code
 = 
	`sd_bË_g©ts_v®ue_£t
(
p_bË_evt
->
evt
.
g­_evt
.
cÚn_hªdË
,

174 
p_hids
->
´ÙocŞ_mode_hªdËs
.
v®ue_hªdË
,

175 &
g©ts_v®ue
);

176 
	`BLE_HIDS_ERROR_HANDLE
(
p_hids
, 
”r_code
);

178 
	}
}

186 
	$Ú_cÚŒŞ_pošt_wr™e
(
bË_hids_t
 * 
p_hids
, 
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

188 
»t_code_t
 
”r_code
;

189 
bË_hids_ş›Á_cÚ‹xt_t
 * 
p_ho¡
;

190 
bË_g©ts_evt_wr™e_t
 cÚ¡ * 
p_evt_wr™e
 = &
p_bË_evt
->
evt
.
g©ts_evt
.
·¿ms
.
wr™e
;

192 
”r_code
 = 
	`blcm_lšk_ùx_g‘
(
p_hids
->
p_lšk_ùx_¡Üage
,

193 
p_bË_evt
->
evt
.
g©ts_evt
.
cÚn_hªdË
,

194 (*è&
p_ho¡
);

195 
	`BLE_HIDS_ERROR_HANDLE
(
p_hids
, 
”r_code
);

197 ià(
p_ho¡
 =ğ
NULL
)

202 ià(
p_evt_wr™e
->
Ën
 == 1)

204 
bË_hids_evt_t
 
evt
;

206 
p_evt_wr™e
->
d©a
[0])

208 
HIDS_CONTROL_POINT_SUSPEND
:

209 
evt
.
evt_ty³
 = 
BLE_HIDS_EVT_HOST_SUSP
;

212 
HIDS_CONTROL_POINT_EXIT_SUSPEND
:

213 
evt
.
evt_ty³
 = 
BLE_HIDS_EVT_HOST_EXIT_SUSP
;

222 
p_ho¡
->
ù¾_±
 = 
p_evt_wr™e
->
d©a
[0];

225 ià(
p_hids
->
evt_hªdËr
 !ğ
NULL
)

227 
evt
.
p_bË_evt
 =…_ble_evt;

228 
p_hids
->
	`evt_hªdËr
Õ_hids, &
evt
);

231 
	}
}

239 
	$Ú_´ÙocŞ_mode_wr™e
(
bË_hids_t
 * 
p_hids
, 
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

241 
»t_code_t
 
”r_code
;

242 
bË_hids_ş›Á_cÚ‹xt_t
 * 
p_ho¡
;

243 
bË_g©ts_evt_wr™e_t
 cÚ¡ * 
p_evt_wr™e
 = &
p_bË_evt
->
evt
.
g©ts_evt
.
·¿ms
.
wr™e
;

245 
”r_code
 = 
	`blcm_lšk_ùx_g‘
(
p_hids
->
p_lšk_ùx_¡Üage
,

246 
p_bË_evt
->
evt
.
g©ts_evt
.
cÚn_hªdË
,

247 (*è&
p_ho¡
);

248 
	`BLE_HIDS_ERROR_HANDLE
(
p_hids
, 
”r_code
);

251 ià(
p_ho¡
 =ğ
NULL
)

256 ià(
p_evt_wr™e
->
Ën
 == 1)

258 
bË_hids_evt_t
 
evt
;

260 
p_evt_wr™e
->
d©a
[0])

262 
PROTOCOL_MODE_BOOT
:

263 
evt
.
evt_ty³
 = 
BLE_HIDS_EVT_BOOT_MODE_ENTERED
;

266 
PROTOCOL_MODE_REPORT
:

267 
evt
.
evt_ty³
 = 
BLE_HIDS_EVT_REPORT_MODE_ENTERED
;

276 
p_ho¡
->
´ÙocŞ_mode
 = 
p_evt_wr™e
->
d©a
[0];

279 ià(
p_hids
->
evt_hªdËr
 !ğ
NULL
)

281 
evt
.
p_bË_evt
 =…_ble_evt;

282 
p_hids
->
	`evt_hªdËr
Õ_hids, &
evt
);

285 
	}
}

293 
	$Ú_´ÙocŞ_mode_»ad_auth
(
bË_hids_t
 * 
p_hids
, 
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

295 
»t_code_t
 
”r_code
;

296 
bË_g©ts_rw_authÜize_»¶y_·¿ms_t
 
auth_»ad_·¿ms
;

297 
bË_hids_ş›Á_cÚ‹xt_t
 * 
p_ho¡
;

298 
bË_g©ts_evt_rw_authÜize_»que¡_t
 cÚ¡ * 
p_»ad_auth
 =

299 &
p_bË_evt
->
evt
.
g©ts_evt
.
·¿ms
.
authÜize_»que¡
;

301 
”r_code
 = 
	`blcm_lšk_ùx_g‘
(
p_hids
->
p_lšk_ùx_¡Üage
,

302 
p_bË_evt
->
evt
.
g©ts_evt
.
cÚn_hªdË
,

303 (*è&
p_ho¡
);

304 
	`BLE_HIDS_ERROR_HANDLE
(
p_hids
, 
”r_code
);

307 ià(
p_ho¡
 !ğ
NULL
)

309 
	`mem£t
(&
auth_»ad_·¿ms
, 0, (auth_read_params));

311 
auth_»ad_·¿ms
.
ty³
 = 
BLE_GATTS_AUTHORIZE_TYPE_READ
;

312 
auth_»ad_·¿ms
.
·¿ms
.
»ad
.
g©t_¡©us
 = 
BLE_GATT_STATUS_SUCCESS
;

313 
auth_»ad_·¿ms
.
·¿ms
.
»ad
.
off£t
 = 
p_»ad_auth
->
»que¡
.read.offset;

314 
auth_»ad_·¿ms
.
·¿ms
.
»ad
.
Ën
 = (
ušt8_t
);

315 
auth_»ad_·¿ms
.
·¿ms
.
»ad
.
p_d©a
 = &
p_ho¡
->
´ÙocŞ_mode
;

316 
auth_»ad_·¿ms
.
·¿ms
.
»ad
.
upd©e
 = 1;

318 
”r_code
 = 
	`sd_bË_g©ts_rw_authÜize_»¶y
(
p_bË_evt
->
evt
.
g­_evt
.
cÚn_hªdË
,

319 &
auth_»ad_·¿ms
);

320 
	`BLE_HIDS_ERROR_HANDLE
(
p_hids
, 
”r_code
);

322 
	}
}

331 
	$Ú_»pÜt_cccd_wr™e
(
bË_hids_t
 * 
p_hids
,

332 
bË_hids_ch¬_id_t
 * 
p_ch¬_id
,

333 
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

335 
bË_g©ts_evt_wr™e_t
 cÚ¡ * 
p_evt_wr™e
 = &
p_bË_evt
->
evt
.
g©ts_evt
.
·¿ms
.
wr™e
;

337 ià(
p_evt_wr™e
->
Ën
 == 2)

340 ià(
p_hids
->
evt_hªdËr
 !ğ
NULL
)

342 
bË_hids_evt_t
 
evt
;

344 ià(
	`bË_¤v_is_nÙifiÿtiÚ_’abËd
(
p_evt_wr™e
->
d©a
))

346 
evt
.
evt_ty³
 = 
BLE_HIDS_EVT_NOTIF_ENABLED
;

350 
evt
.
evt_ty³
 = 
BLE_HIDS_EVT_NOTIF_DISABLED
;

352 
evt
.
·¿ms
.
nÙifiÿtiÚ
.
ch¬_id
 = *
p_ch¬_id
;

353 
evt
.
p_bË_evt
 =…_ble_evt;

355 
p_hids
->
	`evt_hªdËr
Õ_hids, &
evt
);

358 
	}
}

369 
	$Ú_»pÜt_v®ue_wr™e
(
bË_hids_t
 * 
p_hids
,

370 
bË_evt_t
 cÚ¡ * 
p_bË_evt
,

371 
bË_hids_ch¬_id_t
 * 
p_ch¬_id
,

372 
ušt16_t
 
»p_off£t
,

373 
ušt16_t
 
»p_max_Ën
)

376 
»t_code_t
 
”r_code
;

377 
ušt8_t
 * 
p_»pÜt
;

378 
bË_hids_ş›Á_cÚ‹xt_t
 * 
p_ho¡
;

379 
bË_g©ts_evt_wr™e_t
 cÚ¡ * 
p_wr™e
 = &
p_bË_evt
->
evt
.
g©ts_evt
.
·¿ms
.
wr™e
;

381 
”r_code
 = 
	`blcm_lšk_ùx_g‘
(
p_hids
->
p_lšk_ùx_¡Üage
,

382 
p_bË_evt
->
evt
.
g©ts_evt
.
cÚn_hªdË
,

383 (*è&
p_ho¡
);

384 
	`BLE_HIDS_ERROR_HANDLE
(
p_hids
, 
”r_code
);

387 ià((
p_ho¡
 !ğ
NULL
è&& (
p_wr™e
->
Ën
 +…_wr™e->
off£t
 <ğ
»p_max_Ën
))

389 
p_»pÜt
 = (
ušt8_t
 *è
p_ho¡
 + 
»p_off£t
;

390 
	`memıy
(
p_»pÜt
, 
p_wr™e
->
d©a
,…_wr™e->
Ën
);

398 ià(
p_hids
->
evt_hªdËr
 !ğ
NULL
)

400 
bË_hids_evt_t
 
evt
;

402 
evt
.
evt_ty³
 = 
BLE_HIDS_EVT_REP_CHAR_WRITE
;

403 
evt
.
·¿ms
.
ch¬_wr™e
.
ch¬_id
 = *
p_ch¬_id
;

404 
evt
.
·¿ms
.
ch¬_wr™e
.
off£t
 = 
p_bË_evt
->evt.
g©ts_evt
.·¿ms.
wr™e
.offset;

405 
evt
.
·¿ms
.
ch¬_wr™e
.
Ën
 = 
p_bË_evt
->evt.
g©ts_evt
.·¿ms.
wr™e
.len;

406 
evt
.
·¿ms
.
ch¬_wr™e
.
d©a
 = 
p_bË_evt
->evt.
g©ts_evt
.·¿ms.
wr™e
.data;

407 
evt
.
p_bË_evt
 =…_ble_evt;

409 
p_hids
->
	`evt_hªdËr
Õ_hids, &
evt
);

411 
	}
}

422 
	$Ú_»pÜt_v®ue_»ad_auth
(
bË_hids_t
 * 
p_hids
,

423 
bË_hids_ch¬_id_t
 * 
p_ch¬_id
,

424 
bË_evt_t
 cÚ¡ * 
p_bË_evt
,

425 
ušt16_t
 
»p_off£t
,

426 
ušt16_t
 
»p_max_Ën
)

428 
bË_g©ts_rw_authÜize_»¶y_·¿ms_t
 
auth_»ad_·¿ms
;

429 
bË_hids_ş›Á_cÚ‹xt_t
 * 
p_ho¡
;

430 
ušt8_t
 * 
p_»pÜt
;

431 
ušt16_t
 
»ad_off£t
;

432 
ušt32_t
 
”r_code
 = 
NRF_SUCCESS
;

434 
”r_code
 = 
	`blcm_lšk_ùx_g‘
(
p_hids
->
p_lšk_ùx_¡Üage
,

435 
p_bË_evt
->
evt
.
g©ts_evt
.
cÚn_hªdË
,

436 (*è&
p_ho¡
);

437 
	`BLE_HIDS_ERROR_HANDLE
(
p_hids
, 
”r_code
);

440 ià(
p_ho¡
 !ğ
NULL
)

442 
»ad_off£t
 = 
p_bË_evt
->
evt
.
g©ts_evt
.
·¿ms
.
authÜize_»que¡
.
»que¡
.
»ad
.
off£t
;

443 
p_»pÜt
 = (
ušt8_t
 *è
p_ho¡
 + 
»p_off£t
;

444 
	`mem£t
(&
auth_»ad_·¿ms
, 0, (auth_read_params));

446 
auth_»ad_·¿ms
.
ty³
 = 
BLE_GATTS_AUTHORIZE_TYPE_READ
;

447 
auth_»ad_·¿ms
.
·¿ms
.
»ad
.
g©t_¡©us
 = 
BLE_GATT_STATUS_SUCCESS
;

448 
auth_»ad_·¿ms
.
·¿ms
.
»ad
.
off£t
 = 
»ad_off£t
;

449 
auth_»ad_·¿ms
.
·¿ms
.
»ad
.
Ën
 = 
»p_max_Ën
 - 
»ad_off£t
;

450 
auth_»ad_·¿ms
.
·¿ms
.
»ad
.
p_d©a
 = 
p_»pÜt
 + 
»ad_off£t
;

451 
auth_»ad_·¿ms
.
·¿ms
.
»ad
.
upd©e
 = 1;

453 
”r_code
 = 
	`sd_bË_g©ts_rw_authÜize_»¶y
(
p_bË_evt
->
evt
.
g­_evt
.
cÚn_hªdË
,

454 &
auth_»ad_·¿ms
);

456 
	`BLE_HIDS_ERROR_HANDLE
(
p_hids
, 
”r_code
);

463 ià(
p_hids
->
evt_hªdËr
 !ğ
NULL
)

465 
bË_hids_evt_t
 
evt
;

467 
evt
.
evt_ty³
 = 
BLE_HIDS_EVT_REPORT_READ
;

468 
evt
.
·¿ms
.
ch¬_auth_»ad
.
ch¬_id
 = *
p_ch¬_id
;

469 
evt
.
p_bË_evt
 =…_ble_evt;

471 
p_hids
->
	`evt_hªdËr
Õ_hids, &
evt
);

473 
	}
}

484 
boŞ
 
	$šp_»p_cccd_id’tify
(
bË_hids_t
 * 
p_hids
,

485 
ušt16_t
 
hªdË
,

486 
bË_hids_ch¬_id_t
 * 
p_ch¬_id
)

488 
ušt8_t
 
i
;

490 
i
 = 0; i < 
p_hids
->
šp_»p_couÁ
; i++)

492 ià(
hªdË
 =ğ
p_hids
->
šp_»p_¬¿y
[
i
].
ch¬_hªdËs
.
cccd_hªdË
)

494 *
p_ch¬_id
 = 
	`make_ch¬_id
(
BLE_UUID_REPORT_CHAR
, 
BLE_HIDS_REP_TYPE_INPUT
, 
i
);

495  
Œue
;

499  
çl£
;

500 
	}
}

513 
boŞ
 
	$»p_v®ue_id’tify
(
bË_hids_t
 * 
p_hids
,

514 
ušt16_t
 
hªdË
,

515 
bË_hids_ch¬_id_t
 * 
p_ch¬_id
,

516 
ušt16_t
 * 
p_cÚ‹xt_off£t
,

517 
ušt16_t
 * 
p_»p_max_Ën
)

519 
ušt8_t
 
i
;

522 *
p_cÚ‹xt_off£t
 = (
bË_hids_ş›Á_cÚ‹xt_t
è+ 
BOOT_KB_INPUT_REPORT_MAX_SIZE
 +

523 
BOOT_KB_OUTPUT_REPORT_MAX_SIZE
 + 
BOOT_MOUSE_INPUT_REPORT_MAX_SIZE
;

525 ià(
p_hids
->
p_šp_»p_š™_¬¿y
 !ğ
NULL
)

527 
i
 = 0; i < 
p_hids
->
šp_»p_couÁ
; i++)

529 ià(
hªdË
 =ğ
p_hids
->
šp_»p_¬¿y
[
i
].
ch¬_hªdËs
.
v®ue_hªdË
)

531 *
p_ch¬_id
 = 
	`make_ch¬_id
(
BLE_UUID_REPORT_CHAR
, 
BLE_HIDS_REP_TYPE_INPUT
, 
i
);

532 *
p_»p_max_Ën
 = 
p_hids
->
p_šp_»p_š™_¬¿y
[
i
].
max_Ën
;

533  
Œue
;

535 *
p_cÚ‹xt_off£t
 +ğ
p_hids
->
p_šp_»p_š™_¬¿y
[
i
].
max_Ën
;

538 ià(
p_hids
->
p_ou_»p_š™_¬¿y
 !ğ
NULL
)

540 
i
 = 0; i < 
p_hids
->
ou_»p_couÁ
; i++)

542 ià(
hªdË
 =ğ
p_hids
->
ou_»p_¬¿y
[
i
].
ch¬_hªdËs
.
v®ue_hªdË
)

544 *
p_ch¬_id
 = 
	`make_ch¬_id
(
BLE_UUID_REPORT_CHAR
, 
BLE_HIDS_REP_TYPE_OUTPUT
, 
i
);

545 *
p_»p_max_Ën
 = 
p_hids
->
p_ou_»p_š™_¬¿y
[
i
].
max_Ën
;

546  
Œue
;

548 *
p_cÚ‹xt_off£t
 +ğ
p_hids
->
p_ou_»p_š™_¬¿y
[
i
].
max_Ën
;

551 ià(
p_hids
->
p_ã©u»_»p_š™_¬¿y
 !ğ
NULL
)

553 
i
 = 0; i < 
p_hids
->
ã©u»_»p_couÁ
; i++)

555 ià(
hªdË
 =ğ
p_hids
->
ã©u»_»p_¬¿y
[
i
].
ch¬_hªdËs
.
v®ue_hªdË
)

557 *
p_ch¬_id
 = 
	`make_ch¬_id
(
BLE_UUID_REPORT_CHAR
, 
BLE_HIDS_REP_TYPE_FEATURE
, 
i
);

558 *
p_»p_max_Ën
 = 
p_hids
->
p_ã©u»_»p_š™_¬¿y
[
i
].
max_Ën
;

559  
Œue
;

561 *
p_cÚ‹xt_off£t
 +ğ
p_hids
->
p_ã©u»_»p_š™_¬¿y
[
i
].
max_Ën
;

565  
çl£
;

566 
	}
}

574 
	$Ú_wr™e
(
bË_hids_t
 * 
p_hids
, 
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

576 
bË_hids_ch¬_id_t
 
ch¬_id
;

577 
bË_g©ts_evt_wr™e_t
 cÚ¡ * 
p_evt_wr™e
 = &
p_bË_evt
->
evt
.
g©ts_evt
.
·¿ms
.
wr™e
;

578 
ušt16_t
 
»p_d©a_off£t
 = (
bË_hids_ş›Á_cÚ‹xt_t
);

579 
ušt16_t
 
max_»p_Ën
 = 0;

581 ià(
p_evt_wr™e
->
hªdË
 =ğ
p_hids
->
hid_cÚŒŞ_pošt_hªdËs
.
v®ue_hªdË
)

583 
	`Ú_cÚŒŞ_pošt_wr™e
(
p_hids
, 
p_bË_evt
);

585 ià(
p_evt_wr™e
->
hªdË
 =ğ
p_hids
->
´ÙocŞ_mode_hªdËs
.
v®ue_hªdË
)

587 
	`Ú_´ÙocŞ_mode_wr™e
(
p_hids
, 
p_bË_evt
);

589 ià(
p_evt_wr™e
->
hªdË
 =ğ
p_hids
->
boÙ_kb_šp_»p_hªdËs
.
cccd_hªdË
)

591 
ch¬_id
 = 
	`make_ch¬_id
(
BLE_UUID_BOOT_KEYBOARD_INPUT_REPORT_CHAR
, 0, 0);

592 
	`Ú_»pÜt_cccd_wr™e
(
p_hids
, &
ch¬_id
, 
p_bË_evt
);

594 ià(
p_evt_wr™e
->
hªdË
 =ğ
p_hids
->
boÙ_kb_šp_»p_hªdËs
.
v®ue_hªdË
)

596 
ch¬_id
 = 
	`make_ch¬_id
(
BLE_UUID_BOOT_KEYBOARD_INPUT_REPORT_CHAR
, 0, 0);

597 
max_»p_Ën
 = 
BOOT_KB_INPUT_REPORT_MAX_SIZE
;

598 
	`Ú_»pÜt_v®ue_wr™e
(
p_hids
, 
p_bË_evt
, &
ch¬_id
, 
»p_d©a_off£t
, 
max_»p_Ën
);

600 ià(
p_evt_wr™e
->
hªdË
 =ğ
p_hids
->
boÙ_kb_ou_»p_hªdËs
.
v®ue_hªdË
)

602 
ch¬_id
 = 
	`make_ch¬_id
(
BLE_UUID_BOOT_KEYBOARD_OUTPUT_REPORT_CHAR
, 0, 0);

603 
»p_d©a_off£t
 +ğ
BOOT_KB_INPUT_REPORT_MAX_SIZE
;

604 
max_»p_Ën
 = 
BOOT_KB_OUTPUT_REPORT_MAX_SIZE
;

605 
	`Ú_»pÜt_v®ue_wr™e
(
p_hids
, 
p_bË_evt
, &
ch¬_id
, 
»p_d©a_off£t
, 
max_»p_Ën
);

607 ià(
p_evt_wr™e
->
hªdË
 =ğ
p_hids
->
boÙ_mou£_šp_»p_hªdËs
.
cccd_hªdË
)

609 
ch¬_id
 = 
	`make_ch¬_id
(
BLE_UUID_BOOT_MOUSE_INPUT_REPORT_CHAR
, 0, 0);

610 
	`Ú_»pÜt_cccd_wr™e
(
p_hids
, &
ch¬_id
, 
p_bË_evt
);

612 ià(
p_evt_wr™e
->
hªdË
 =ğ
p_hids
->
boÙ_mou£_šp_»p_hªdËs
.
v®ue_hªdË
)

614 
ch¬_id
 = 
	`make_ch¬_id
(
BLE_UUID_BOOT_MOUSE_INPUT_REPORT_CHAR
, 0, 0);

615 
»p_d©a_off£t
 +ğ
BOOT_KB_INPUT_REPORT_MAX_SIZE
 + 
BOOT_KB_OUTPUT_REPORT_MAX_SIZE
;

616 
max_»p_Ën
 = 
BOOT_MOUSE_INPUT_REPORT_MAX_SIZE
;

617 
	`Ú_»pÜt_v®ue_wr™e
(
p_hids
, 
p_bË_evt
, &
ch¬_id
, 
»p_d©a_off£t
, 
max_»p_Ën
);

619 ià(
	`šp_»p_cccd_id’tify
(
p_hids
, 
p_evt_wr™e
->
hªdË
, &
ch¬_id
))

621 
	`Ú_»pÜt_cccd_wr™e
(
p_hids
, &
ch¬_id
, 
p_bË_evt
);

623 ià(
	`»p_v®ue_id’tify
(
p_hids
,

624 
p_evt_wr™e
->
hªdË
,

625 &
ch¬_id
,

626 &
»p_d©a_off£t
,

627 &
max_»p_Ën
))

629 
	`Ú_»pÜt_v®ue_wr™e
(
p_hids
, 
p_bË_evt
, &
ch¬_id
, 
»p_d©a_off£t
, 
max_»p_Ën
);

635 
	}
}

643 
	$Ú_rw_authÜize_»que¡
(
bË_hids_t
 * 
p_hids
, 
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

645 
bË_g©ts_evt_rw_authÜize_»que¡_t
 cÚ¡ * 
evt_rw_auth
 =

646 &
p_bË_evt
->
evt
.
g©ts_evt
.
·¿ms
.
authÜize_»que¡
;

648 
bË_hids_ch¬_id_t
 
ch¬_id
;

649 
ušt16_t
 
»p_d©a_off£t
 = (
bË_hids_ş›Á_cÚ‹xt_t
);

650 
ušt16_t
 
max_»p_Ën
 = 0;

652 ià(
evt_rw_auth
->
ty³
 !ğ
BLE_GATTS_AUTHORIZE_TYPE_READ
)

659 ià(
evt_rw_auth
->
»que¡
.
»ad
.
hªdË
 =ğ
p_hids
->
´ÙocŞ_mode_hªdËs
.
v®ue_hªdË
)

661 
	`Ú_´ÙocŞ_mode_»ad_auth
(
p_hids
, 
p_bË_evt
);

663 ià(
evt_rw_auth
->
»que¡
.
»ad
.
hªdË
 =ğ
p_hids
->
boÙ_kb_šp_»p_hªdËs
.
v®ue_hªdË
)

665 
ch¬_id
 = 
	`make_ch¬_id
(
BLE_UUID_BOOT_KEYBOARD_INPUT_REPORT_CHAR
, 0, 0);

666 
max_»p_Ën
 = 
BOOT_KB_INPUT_REPORT_MAX_SIZE
;

667 
	`Ú_»pÜt_v®ue_»ad_auth
(
p_hids
, &
ch¬_id
, 
p_bË_evt
, 
»p_d©a_off£t
, 
max_»p_Ën
);

669 ià(
evt_rw_auth
->
»que¡
.
»ad
.
hªdË
 =ğ
p_hids
->
boÙ_kb_ou_»p_hªdËs
.
v®ue_hªdË
)

671 
ch¬_id
 = 
	`make_ch¬_id
(
BLE_UUID_BOOT_KEYBOARD_OUTPUT_REPORT_CHAR
, 0, 0);

672 
»p_d©a_off£t
 +ğ
BOOT_KB_INPUT_REPORT_MAX_SIZE
;

673 
max_»p_Ën
 = 
BOOT_KB_OUTPUT_REPORT_MAX_SIZE
;

674 
	`Ú_»pÜt_v®ue_»ad_auth
(
p_hids
, &
ch¬_id
, 
p_bË_evt
, 
»p_d©a_off£t
, 
max_»p_Ën
);

676 ià(
evt_rw_auth
->
»que¡
.
»ad
.
hªdË
 =ğ
p_hids
->
boÙ_mou£_šp_»p_hªdËs
.
v®ue_hªdË
)

678 
ch¬_id
 = 
	`make_ch¬_id
(
BLE_UUID_BOOT_MOUSE_INPUT_REPORT_CHAR
, 0, 0);

679 
»p_d©a_off£t
 +ğ
BOOT_KB_INPUT_REPORT_MAX_SIZE
 + 
BOOT_KB_OUTPUT_REPORT_MAX_SIZE
;

680 
max_»p_Ën
 = 
BOOT_MOUSE_INPUT_REPORT_MAX_SIZE
;

681 
	`Ú_»pÜt_v®ue_»ad_auth
(
p_hids
, &
ch¬_id
, 
p_bË_evt
, 
»p_d©a_off£t
, 
max_»p_Ën
);

683 ià(
	`»p_v®ue_id’tify
(
p_hids
,

684 
evt_rw_auth
->
»que¡
.
»ad
.
hªdË
,

685 &
ch¬_id
,

686 &
»p_d©a_off£t
,

687 &
max_»p_Ën
))

689 
	`Ú_»pÜt_v®ue_»ad_auth
(
p_hids
, &
ch¬_id
, 
p_bË_evt
, 
»p_d©a_off£t
, 
max_»p_Ën
);

695 
	}
}

698 
	$bË_hids_Ú_bË_evt
(
bË_evt_t
 cÚ¡ * 
p_bË_evt
, * 
p_cÚ‹xt
)

700 
bË_hids_t
 * 
p_hids
 = (bË_hids_ˆ*è
p_cÚ‹xt
;

702 
p_bË_evt
->
h—d”
.
evt_id
)

704 
BLE_GAP_EVT_CONNECTED
:

705 
	`Ú_cÚÃù
(
p_hids
, 
p_bË_evt
);

708 
BLE_GATTS_EVT_WRITE
:

709 
	`Ú_wr™e
(
p_hids
, 
p_bË_evt
);

712 
BLE_GATTS_EVT_RW_AUTHORIZE_REQUEST
:

713 
	`Ú_rw_authÜize_»que¡
(
p_hids
, 
p_bË_evt
);

720 
	}
}

731 
ušt32_t
 
	$´ÙocŞ_mode_ch¬_add
(
bË_hids_t
 * 
p_hids
,

732 
£cur™y_»q_t
 
»ad_acûss
,

733 
£cur™y_»q_t
 
wr™e_acûss
)

735 
bË_add_ch¬_·¿ms_t
 
add_ch¬_·¿ms
;

736 
ušt8_t
 
š™Ÿl_´ÙocŞ_mode
;

738 
š™Ÿl_´ÙocŞ_mode
 = 
DEFAULT_PROTOCOL_MODE
;

740 
	`mem£t
(&
add_ch¬_·¿ms
, 0, (add_char_params));

741 
add_ch¬_·¿ms
.
uuid
 = 
BLE_UUID_PROTOCOL_MODE_CHAR
;

742 
add_ch¬_·¿ms
.
max_Ën
 = (
ušt8_t
);

743 
add_ch¬_·¿ms
.
š™_Ën
 = (
ušt8_t
);

744 
add_ch¬_·¿ms
.
p_š™_v®ue
 = &
š™Ÿl_´ÙocŞ_mode
;

745 
add_ch¬_·¿ms
.
ch¬_´İs
.
»ad
 = 1;

746 
add_ch¬_·¿ms
.
ch¬_´İs
.
wr™e_wo_»¥
 = 1;

747 
add_ch¬_·¿ms
.
»ad_acûss
 =„ead_access;

748 
add_ch¬_·¿ms
.
wr™e_acûss
 = write_access;

749 
add_ch¬_·¿ms
.
is_deã»d_»ad
 = 
Œue
;

751  
	`ch¬aù”i¡ic_add
(
p_hids
->
£rviû_hªdË
,

752 &
add_ch¬_·¿ms
,

753 &
p_hids
->
´ÙocŞ_mode_hªdËs
);

754 
	}
}

768 
ušt32_t
 
	$»p_ch¬_add
(
bË_hids_t
 * 
p_hids
,

769 
bË_g©t_ch¬_´İs_t
 * 
p_´İ”t›s
,

770 
ušt16_t
 
max_Ën
,

771 
bË_¤v_»pÜt_»f_t
 cÚ¡ * 
p_»p_»f
,

772 
bË_hids_ch¬_£c_t
 cÚ¡ * cÚ¡ 
p_ch¬_£c
,

773 
bË_hids_»p_ch¬_t
 * 
p_»p_ch¬
)

775 
ušt32_t
 
”r_code
;

776 
bË_add_ch¬_·¿ms_t
 
add_ch¬_·¿ms
;

777 
bË_add_desü_·¿ms_t
 
add_desü_·¿ms
;

778 
ušt8_t
 
’coded_»p_»f
[
BLE_SRV_ENCODED_REPORT_REF_LEN
];

780 
	`mem£t
(&
add_ch¬_·¿ms
, 0, (add_char_params));

781 
add_ch¬_·¿ms
.
uuid
 = 
BLE_UUID_REPORT_CHAR
;

782 
add_ch¬_·¿ms
.
max_Ën
 = max_len;

783 
add_ch¬_·¿ms
.
ch¬_´İs
 = *
p_´İ”t›s
;

784 
add_ch¬_·¿ms
.
»ad_acûss
 = 
p_ch¬_£c
->
rd
;

785 
add_ch¬_·¿ms
.
wr™e_acûss
 = 
p_ch¬_£c
->
wr
;

786 
add_ch¬_·¿ms
.
cccd_wr™e_acûss
 = 
p_ch¬_£c
->
cccd_wr
;

787 
add_ch¬_·¿ms
.
is_v¬_Ën
 = 
Œue
;

788 
add_ch¬_·¿ms
.
is_deã»d_»ad
 = 
Œue
;

790 
”r_code
 = 
	`ch¬aù”i¡ic_add
(
p_hids
->
£rviû_hªdË
,

791 &
add_ch¬_·¿ms
,

792 &
p_»p_ch¬
->
ch¬_hªdËs
);

793 ià(
”r_code
 !ğ
NRF_SUCCESS
)

795  
”r_code
;

799 
	`mem£t
(&
add_desü_·¿ms
, 0, (add_descr_params));

800 
add_desü_·¿ms
.
uuid
 = 
BLE_UUID_REPORT_REF_DESCR
;

801 
add_desü_·¿ms
.
»ad_acûss
 = 
p_ch¬_£c
->
rd
;

802 
add_desü_·¿ms
.
wr™e_acûss
 = 
p_ch¬_£c
->
wr
;

803 
add_desü_·¿ms
.
š™_Ën
 = 
	`bË_¤v_»pÜt_»f_’code
(
’coded_»p_»f
, 
p_»p_»f
);

804 
add_desü_·¿ms
.
max_Ën
 =‡dd_desü_·¿ms.
š™_Ën
;

805 
add_desü_·¿ms
.
p_v®ue
 = 
’coded_»p_»f
;

807  
	`desütÜ_add
(
p_»p_ch¬
->
ch¬_hªdËs
.
v®ue_hªdË
,

808 &
add_desü_·¿ms
,

809 &
p_»p_ch¬
->
»f_hªdË
);

810 
	}
}

820 
ušt32_t
 
	$»p_m­_ch¬_add
(
bË_hids_t
 * 
p_hids
, cÚ¡ 
bË_hids_š™_t
 * 
p_hids_š™
)

822 
ušt32_t
 
”r_code
;

823 
bË_add_ch¬_·¿ms_t
 
add_ch¬_·¿ms
;

824 
bË_add_desü_·¿ms_t
 
add_desü_·¿ms
;

827 
	`mem£t
(&
add_ch¬_·¿ms
, 0, (add_char_params));

828 
add_ch¬_·¿ms
.
uuid
 = 
BLE_UUID_REPORT_MAP_CHAR
;

829 
add_ch¬_·¿ms
.
max_Ën
 = 
p_hids_š™
->
»p_m­
.
d©a_Ën
;

830 
add_ch¬_·¿ms
.
š™_Ën
 = 
p_hids_š™
->
»p_m­
.
d©a_Ën
;

831 
add_ch¬_·¿ms
.
p_š™_v®ue
 = 
p_hids_š™
->
»p_m­
.
p_d©a
;

832 
add_ch¬_·¿ms
.
ch¬_´İs
.
»ad
 = 1;

833 
add_ch¬_·¿ms
.
»ad_acûss
 = 
p_hids_š™
->
»p_m­
.
rd_£c
;

834 
add_ch¬_·¿ms
.
is_v¬_Ën
 = 
Œue
;

836 
”r_code
 = 
	`ch¬aù”i¡ic_add
(
p_hids
->
£rviû_hªdË
,

837 &
add_ch¬_·¿ms
,

838 &
p_hids
->
»p_m­_hªdËs
);

839 ià(
”r_code
 !ğ
NRF_SUCCESS
)

841  
”r_code
;

844 ià(
p_hids_š™
->
»p_m­
.
ext_»p_»f_num
 !ğ0 &&…_hids_š™->»p_m­.
p_ext_»p_»f
 =ğ
NULL
)

846  
NRF_ERROR_INVALID_PARAM
;

849 
i
 = 0; i < 
p_hids_š™
->
»p_m­
.
ext_»p_»f_num
; ++i)

851 
ušt8_t
 
’coded_»p_»f
[(
bË_uuid128_t
)];

852 
ušt8_t
 
’coded_»p_»f_Ën
;

855 
”r_code
 = 
	`sd_bË_uuid_’code
(&
p_hids_š™
->
»p_m­
.
p_ext_»p_»f
[
i
],

856 &
’coded_»p_»f_Ën
,

857 
’coded_»p_»f
);

858 ià(
”r_code
 !ğ
NRF_SUCCESS
)

860  
”r_code
;

863 
	`mem£t
(&
add_desü_·¿ms
, 0, (add_descr_params));

864 
add_desü_·¿ms
.
uuid
 = 
BLE_UUID_EXTERNAL_REPORT_REF_DESCR
;

865 
add_desü_·¿ms
.
»ad_acûss
 = 
p_hids_š™
->
»p_m­
.
rd_£c
;

866 
add_desü_·¿ms
.
š™_Ën
 = 
’coded_»p_»f_Ën
;

867 
add_desü_·¿ms
.
max_Ën
 =‡dd_desü_·¿ms.
š™_Ën
;

868 
add_desü_·¿ms
.
p_v®ue
 = 
’coded_»p_»f
;

870 
”r_code
 = 
	`desütÜ_add
(
p_hids
->
»p_m­_hªdËs
.
v®ue_hªdË
,

871 &
add_desü_·¿ms
,

872 &
p_hids
->
»p_m­_ext_»p_»f_hªdË
);

873 ià(
”r_code
 !ğ
NRF_SUCCESS
)

875  
”r_code
;

879  
NRF_SUCCESS
;

880 
	}
}

893 
ušt32_t
 
	$boÙ_šp_»p_ch¬_add
(
bË_hids_t
 * 
p_hids
,

894 
ušt16_t
 
uuid
,

895 
ušt16_t
 
max_d©a_Ën
,

896 
bË_hids_ch¬_£c_t
 cÚ¡ * cÚ¡ 
p_ch¬_£c
,

897 
bË_g©ts_ch¬_hªdËs_t
 * 
p_ch¬_hªdËs
)

899 
bË_add_ch¬_·¿ms_t
 
add_ch¬_·¿ms
;

901 
	`mem£t
(&
add_ch¬_·¿ms
, 0, (add_char_params));

902 
add_ch¬_·¿ms
.
uuid
 = uuid;

903 
add_ch¬_·¿ms
.
max_Ën
 = 
max_d©a_Ën
;

904 
add_ch¬_·¿ms
.
ch¬_´İs
.
»ad
 = 1;

905 
add_ch¬_·¿ms
.
ch¬_´İs
.
wr™e
 = (
p_ch¬_£c
->
wr
 !ğ
SEC_NO_ACCESS
) ? 1 : 0;

906 
add_ch¬_·¿ms
.
ch¬_´İs
.
nÙify
 = 1;

907 
add_ch¬_·¿ms
.
»ad_acûss
 = 
p_ch¬_£c
->
rd
;

908 
add_ch¬_·¿ms
.
wr™e_acûss
 = 
p_ch¬_£c
->
wr
;

909 
add_ch¬_·¿ms
.
cccd_wr™e_acûss
 = 
p_ch¬_£c
->
cccd_wr
;

910 
add_ch¬_·¿ms
.
is_deã»d_»ad
 = 
Œue
;

912  
	`ch¬aù”i¡ic_add
(
p_hids
->
£rviû_hªdË
,

913 &
add_ch¬_·¿ms
,

914 
p_ch¬_hªdËs
);

915 
	}
}

925 
ušt32_t
 
	$boÙ_kb_ou_»p_ch¬_add
(
bË_hids_t
 * 
p_hids
, cÚ¡ 
bË_hids_š™_t
 * 
p_hids_š™
)

927 
bË_add_ch¬_·¿ms_t
 
add_ch¬_·¿ms
;

929 
	`mem£t
(&
add_ch¬_·¿ms
, 0, (add_char_params));

930 
add_ch¬_·¿ms
.
uuid
 = 
BLE_UUID_BOOT_KEYBOARD_OUTPUT_REPORT_CHAR
;

931 
add_ch¬_·¿ms
.
max_Ën
 = 
BOOT_KB_OUTPUT_REPORT_MAX_SIZE
;

932 
add_ch¬_·¿ms
.
ch¬_´İs
.
»ad
 = 1;

933 
add_ch¬_·¿ms
.
ch¬_´İs
.
wr™e
 = 1;

934 
add_ch¬_·¿ms
.
ch¬_´İs
.
wr™e_wo_»¥
 = 1;

935 
add_ch¬_·¿ms
.
»ad_acûss
 = 
p_hids_š™
->
boÙ_kb_ou_»p_£c
.
rd
;

936 
add_ch¬_·¿ms
.
wr™e_acûss
 = 
p_hids_š™
->
boÙ_kb_ou_»p_£c
.
wr
;

937 
add_ch¬_·¿ms
.
is_deã»d_»ad
 = 
Œue
;

939  
	`ch¬aù”i¡ic_add
(
p_hids
->
£rviû_hªdË
,

940 &
add_ch¬_·¿ms
,

941 &
p_hids
->
boÙ_kb_ou_»p_hªdËs
);

942 
	}
}

952 
ušt8_t
 
	$’code_hid_šfÜm©iÚ
(
ušt8_t
 * 
p_’coded_bufãr
,

953 cÚ¡ 
bË_hids_hid_šfÜm©iÚ_t
 * 
p_hid_šfÜm©iÚ
)

955 
ušt8_t
 
Ën
 = 
	`ušt16_’code
(
p_hid_šfÜm©iÚ
->
bcd_hid
, 
p_’coded_bufãr
);

957 
p_’coded_bufãr
[
Ën
++] = 
p_hid_šfÜm©iÚ
->
b_couÁry_code
;

958 
p_’coded_bufãr
[
Ën
++] = 
p_hid_šfÜm©iÚ
->
æags
;

960 
	`APP_ERROR_CHECK_BOOL
(
Ën
 =ğ
ENCODED_HID_INFORMATION_LEN
);

962  
Ën
;

963 
	}
}

973 
ušt32_t
 
	$hid_šfÜm©iÚ_ch¬_add
(
bË_hids_t
 * 
p_hids
, cÚ¡ 
bË_hids_š™_t
 * 
p_hids_š™
)

975 
ušt8_t
 
’coded_hid_šfÜm©iÚ
[
ENCODED_HID_INFORMATION_LEN
];

976 
ušt8_t
 
hid_šfo_Ën
;

977 
bË_add_ch¬_·¿ms_t
 
add_ch¬_·¿ms
;

979 
hid_šfo_Ën
 = 
	`’code_hid_šfÜm©iÚ
(
’coded_hid_šfÜm©iÚ
, &
p_hids_š™
->
hid_šfÜm©iÚ
);

981 
	`mem£t
(&
add_ch¬_·¿ms
, 0, (add_char_params));

982 
add_ch¬_·¿ms
.
uuid
 = 
BLE_UUID_HID_INFORMATION_CHAR
;

983 
add_ch¬_·¿ms
.
max_Ën
 = 
hid_šfo_Ën
;

984 
add_ch¬_·¿ms
.
ch¬_´İs
.
»ad
 = 1;

985 
add_ch¬_·¿ms
.
»ad_acûss
 = 
p_hids_š™
->
hid_šfÜm©iÚ
.
rd_£c
;

986 
add_ch¬_·¿ms
.
š™_Ën
 = 
hid_šfo_Ën
;

987 
add_ch¬_·¿ms
.
p_š™_v®ue
 = 
’coded_hid_šfÜm©iÚ
;

989  
	`ch¬aù”i¡ic_add
(
p_hids
->
£rviû_hªdË
,

990 &
add_ch¬_·¿ms
,

991 &
p_hids
->
hid_šfÜm©iÚ_hªdËs
);

992 
	}
}

1002 
ušt32_t
 
	$hid_cÚŒŞ_pošt_ch¬_add
(
bË_hids_t
 * 
p_hids
, 
£cur™y_»q_t
 
wr™e_acûss
)

1004 
ušt8_t
 
š™Ÿl_hid_cÚŒŞ_pošt
;

1005 
bË_add_ch¬_·¿ms_t
 
add_ch¬_·¿ms
;

1007 
š™Ÿl_hid_cÚŒŞ_pošt
 = 
INITIAL_VALUE_HID_CONTROL_POINT
;

1009 
	`mem£t
(&
add_ch¬_·¿ms
, 0, (add_char_params));

1010 
add_ch¬_·¿ms
.
uuid
 = 
BLE_UUID_HID_CONTROL_POINT_CHAR
;

1011 
add_ch¬_·¿ms
.
max_Ën
 = (
ušt8_t
);

1012 
add_ch¬_·¿ms
.
ch¬_´İs
.
wr™e_wo_»¥
 = 1;

1013 
add_ch¬_·¿ms
.
wr™e_acûss
 = write_access;

1014 
add_ch¬_·¿ms
.
š™_Ën
 = (
ušt8_t
);

1015 
add_ch¬_·¿ms
.
p_š™_v®ue
 = &
š™Ÿl_hid_cÚŒŞ_pošt
;

1017  
	`ch¬aù”i¡ic_add
(
p_hids
->
£rviû_hªdË
,

1018 &
add_ch¬_·¿ms
,

1019 &
p_hids
->
hid_cÚŒŞ_pošt_hªdËs
);

1020 
	}
}

1030 
ušt32_t
 
	$šp_»p_ch¬aù”i¡ics_add
(
bË_hids_t
 * 
p_hids
,

1031 cÚ¡ 
bË_hids_š™_t
 * 
p_hids_š™
)

1033 ià((
p_hids_š™
->
šp_»p_couÁ
 !ğ0è&& (p_hids_š™->
p_šp_»p_¬¿y
 !ğ
NULL
))

1035 
ušt8_t
 
i
;

1037 
i
 = 0; i < 
p_hids_š™
->
šp_»p_couÁ
; i++)

1039 
ušt32_t
 
”r_code
;

1040 
bË_hids_šp_»p_š™_t
 cÚ¡ * 
p_»p_š™
 = &
p_hids_š™
->
p_šp_»p_¬¿y
[
i
];

1041 
bË_g©t_ch¬_´İs_t
 
´İ”t›s
;

1043 
	`mem£t
(&
´İ”t›s
, 0, (properties));

1045 
´İ”t›s
.
»ad
 = 
Œue
;

1046 
´İ”t›s
.
wr™e
 = (
p_»p_š™
->
£c
.
wr
 !ğ
SEC_NO_ACCESS
) ? 1 : 0;

1047 
´İ”t›s
.
nÙify
 = 
Œue
;

1049 
”r_code
 = 
	`»p_ch¬_add
(
p_hids
,

1050 &
´İ”t›s
,

1051 
p_»p_š™
->
max_Ën
,

1052 &
p_»p_š™
->
»p_»f
,

1053 &
p_»p_š™
->
£c
,

1054 &
p_hids
->
šp_»p_¬¿y
[
i
]);

1055 ià(
”r_code
 !ğ
NRF_SUCCESS
)

1057  
”r_code
;

1062  
NRF_SUCCESS
;

1063 
	}
}

1073 
ušt32_t
 
	$ou_»p_ch¬aù”i¡ics_add
(
bË_hids_t
 * 
p_hids
,

1074 cÚ¡ 
bË_hids_š™_t
 * 
p_hids_š™
)

1076 ià((
p_hids_š™
->
ou_»p_couÁ
 !ğ0è&& (p_hids_š™->
p_ou_»p_¬¿y
 !ğ
NULL
))

1078 
ušt8_t
 
i
;

1080 
i
 = 0; i < 
p_hids_š™
->
ou_»p_couÁ
; i++)

1082 
ušt32_t
 
”r_code
;

1083 
bË_hids_ou_»p_š™_t
 cÚ¡ * 
p_»p_š™
 = &
p_hids_š™
->
p_ou_»p_¬¿y
[
i
];

1084 
bË_g©t_ch¬_´İs_t
 
´İ”t›s
;

1086 
	`mem£t
(&
´İ”t›s
, 0, (properties));

1088 
´İ”t›s
.
»ad
 = 
Œue
;

1089 
´İ”t›s
.
wr™e
 = 
Œue
;

1090 
´İ”t›s
.
wr™e_wo_»¥
 = 
Œue
;

1092 
”r_code
 = 
	`»p_ch¬_add
(
p_hids
,

1093 &
´İ”t›s
,

1094 
p_»p_š™
->
max_Ën
,

1095 &
p_»p_š™
->
»p_»f
,

1096 &
p_»p_š™
->
£c
,

1097 &
p_hids
->
ou_»p_¬¿y
[
i
]);

1098 ià(
”r_code
 !ğ
NRF_SUCCESS
)

1100  
”r_code
;

1105  
NRF_SUCCESS
;

1106 
	}
}

1116 
ušt32_t
 
	$ã©u»_»p_ch¬aù”i¡ics_add
(
bË_hids_t
 * 
p_hids
,

1117 cÚ¡ 
bË_hids_š™_t
 * 
p_hids_š™
)

1119 ià((
p_hids_š™
->
ã©u»_»p_couÁ
 !ğ0è&& (p_hids_š™->
p_ã©u»_»p_¬¿y
 !ğ
NULL
))

1121 
ušt8_t
 
i
;

1123 
i
 = 0; i < 
p_hids_š™
->
ã©u»_»p_couÁ
; i++)

1125 
ušt32_t
 
”r_code
;

1126 
bË_hids_ã©u»_»p_š™_t
 cÚ¡ * 
p_»p_š™
 = &
p_hids_š™
->
p_ã©u»_»p_¬¿y
[
i
];

1127 
bË_g©t_ch¬_´İs_t
 
´İ”t›s
;

1129 
	`mem£t
(&
´İ”t›s
, 0, (properties));

1131 
´İ”t›s
.
»ad
 = 
Œue
;

1132 
´İ”t›s
.
wr™e
 = 
Œue
;

1134 
”r_code
 = 
	`»p_ch¬_add
(
p_hids
,

1135 &
´İ”t›s
,

1136 
p_»p_š™
->
max_Ën
,

1137 &
p_»p_š™
->
»p_»f
,

1138 &
p_»p_š™
->
£c
,

1139 &
p_hids
->
ã©u»_»p_¬¿y
[
i
]);

1140 ià(
”r_code
 !ğ
NRF_SUCCESS
)

1142  
”r_code
;

1147  
NRF_SUCCESS
;

1148 
	}
}

1158 
ušt32_t
 
	$šşudes_add
(
bË_hids_t
 * 
p_hids
, cÚ¡ 
bË_hids_š™_t
 * 
p_hids_š™
)

1160 
ušt32_t
 
”r_code
;

1161 
ušt8_t
 
i
;

1162 
ušt16_t
 
unu£d_šşude_hªdË
;

1164 
i
 = 0; i < 
p_hids_š™
->
šşuded_£rviûs_couÁ
; i++)

1166 
”r_code
 = 
	`sd_bË_g©ts_šşude_add
(
p_hids
->
£rviû_hªdË
,

1167 
p_hids_š™
->
p_šşuded_£rviûs_¬¿y
[
i
],

1168 &
unu£d_šşude_hªdË
);

1169 ià(
”r_code
 !ğ
NRF_SUCCESS
)

1171  
”r_code
;

1175  
NRF_SUCCESS
;

1176 
	}
}

1179 
ušt32_t
 
	$bË_hids_š™
(
bË_hids_t
 * 
p_hids
, cÚ¡ 
bË_hids_š™_t
 * 
p_hids_š™
)

1181 
	`VERIFY_PARAM_NOT_NULL
(
p_hids
);

1182 
	`VERIFY_PARAM_NOT_NULL
(
p_hids_š™
);

1184 
ušt32_t
 
”r_code
;

1185 
bË_uuid_t
 
bË_uuid
;

1187 ià((
p_hids_š™
->
šp_»p_couÁ
 > 
BLE_HIDS_MAX_INPUT_REP
) ||

1188 (
p_hids_š™
->
ou_»p_couÁ
 > 
BLE_HIDS_MAX_OUTPUT_REP
) ||

1189 (
p_hids_š™
->
ã©u»_»p_couÁ
 > 
BLE_HIDS_MAX_FEATURE_REP
)

1192  
NRF_ERROR_INVALID_PARAM
;

1196 
p_hids
->
evt_hªdËr
 = 
p_hids_š™
->evt_handler;

1197 
p_hids
->
”rÜ_hªdËr
 = 
p_hids_š™
->error_handler;

1198 
p_hids
->
šp_»p_couÁ
 = 
p_hids_š™
->inp_rep_count;

1199 
p_hids
->
ou_»p_couÁ
 = 
p_hids_š™
->outp_rep_count;

1200 
p_hids
->
ã©u»_»p_couÁ
 = 
p_hids_š™
->feature_rep_count;

1203 
	`BLE_UUID_BLE_ASSIGN
(
bË_uuid
, 
BLE_UUID_HUMAN_INTERFACE_DEVICE_SERVICE
);

1205 
”r_code
 = 
	`sd_bË_g©ts_£rviû_add
(
BLE_GATTS_SRVC_TYPE_PRIMARY
,

1206 &
bË_uuid
,

1207 &
p_hids
->
£rviû_hªdË
);

1208 ià(
”r_code
 !ğ
NRF_SUCCESS
)

1210  
”r_code
;

1214 
”r_code
 = 
	`šşudes_add
(
p_hids
, 
p_hids_š™
);

1215 ià(
”r_code
 !ğ
NRF_SUCCESS
)

1217  
”r_code
;

1220 ià(
p_hids_š™
->
is_kb
 ||…_hids_š™->
is_mou£
)

1223 
”r_code
 = 
	`´ÙocŞ_mode_ch¬_add
(
p_hids
,

1224 
p_hids_š™
->
´ÙocŞ_mode_rd_£c
,

1225 
p_hids_š™
->
´ÙocŞ_mode_wr_£c
);

1226 ià(
”r_code
 !ğ
NRF_SUCCESS
)

1228  
”r_code
;

1233 
”r_code
 = 
	`šp_»p_ch¬aù”i¡ics_add
(
p_hids
, 
p_hids_š™
);

1234 ià(
”r_code
 !ğ
NRF_SUCCESS
)

1236  
”r_code
;

1240 
”r_code
 = 
	`ou_»p_ch¬aù”i¡ics_add
(
p_hids
, 
p_hids_š™
);

1241 ià(
”r_code
 !ğ
NRF_SUCCESS
)

1243  
”r_code
;

1247 
”r_code
 = 
	`ã©u»_»p_ch¬aù”i¡ics_add
(
p_hids
, 
p_hids_š™
);

1248 ià(
”r_code
 !ğ
NRF_SUCCESS
)

1250  
”r_code
;

1254 
”r_code
 = 
	`»p_m­_ch¬_add
(
p_hids
, 
p_hids_š™
);

1255 ià(
”r_code
 !ğ
NRF_SUCCESS
)

1257  
”r_code
;

1260 ià(
p_hids_š™
->
is_kb
)

1263 
”r_code
 = 
	`boÙ_šp_»p_ch¬_add
(
p_hids
,

1264 
BLE_UUID_BOOT_KEYBOARD_INPUT_REPORT_CHAR
,

1265 
BOOT_KB_INPUT_REPORT_MAX_SIZE
,

1266 &
p_hids_š™
->
boÙ_kb_šp_»p_£c
,

1267 &
p_hids
->
boÙ_kb_šp_»p_hªdËs
);

1268 ià(
”r_code
 !ğ
NRF_SUCCESS
)

1270  
”r_code
;

1274 
”r_code
 = 
	`boÙ_kb_ou_»p_ch¬_add
(
p_hids
, 
p_hids_š™
);

1275 ià(
”r_code
 !ğ
NRF_SUCCESS
)

1277  
”r_code
;

1281 ià(
p_hids_š™
->
is_mou£
)

1284 
”r_code
 = 
	`boÙ_šp_»p_ch¬_add
(
p_hids
,

1285 
BLE_UUID_BOOT_MOUSE_INPUT_REPORT_CHAR
,

1286 
BOOT_MOUSE_INPUT_REPORT_MAX_SIZE
,

1287 &
p_hids_š™
->
boÙ_mou£_šp_»p_£c
,

1288 &
p_hids
->
boÙ_mou£_šp_»p_hªdËs
);

1289 ià(
”r_code
 !ğ
NRF_SUCCESS
)

1291  
”r_code
;

1296 
”r_code
 = 
	`hid_šfÜm©iÚ_ch¬_add
(
p_hids
, 
p_hids_š™
);

1297 ià(
”r_code
 !ğ
NRF_SUCCESS
)

1299  
”r_code
;

1303 
”r_code
 = 
	`hid_cÚŒŞ_pošt_ch¬_add
(
p_hids
, 
p_hids_š™
->
ù¾_pošt_wr_£c
);

1304 ià(
”r_code
 !ğ
NRF_SUCCESS
)

1306  
”r_code
;

1310 
p_hids
->
p_šp_»p_š™_¬¿y
 = 
p_hids_š™
->
p_šp_»p_¬¿y
;

1311 
p_hids
->
p_ou_»p_š™_¬¿y
 = 
p_hids_š™
->
p_ou_»p_¬¿y
;

1312 
p_hids
->
p_ã©u»_»p_š™_¬¿y
 = 
p_hids_š™
->
p_ã©u»_»p_¬¿y
;

1314  
”r_code
;

1315 
	}
}

1318 
ušt32_t
 
	$bË_hids_šp_»p_£nd
(
bË_hids_t
 * 
p_hids
,

1319 
ušt8_t
 
»p_šdex
,

1320 
ušt16_t
 
Ën
,

1321 
ušt8_t
 * 
p_d©a
,

1322 
ušt16_t
 
cÚn_hªdË
)

1324 
	`VERIFY_PARAM_NOT_NULL
(
p_hids
);

1325 
	`VERIFY_PARAM_NOT_NULL
(
p_d©a
);

1327 
ušt32_t
 
”r_code
;

1329 ià(
»p_šdex
 < 
p_hids
->
šp_»p_couÁ
)

1331 
bË_hids_»p_ch¬_t
 * 
p_»p_ch¬
 = &
p_hids
->
šp_»p_¬¿y
[
»p_šdex
];

1333 ià(
cÚn_hªdË
 !ğ
BLE_CONN_HANDLE_INVALID
)

1335 
bË_g©ts_hvx_·¿ms_t
 
hvx_·¿ms
;

1336 
ušt8_t
 
šdex
 = 0;

1337 
ušt16_t
 
hvx_Ën
 = 
Ën
;

1338 
ušt8_t
 * 
p_ho¡_»p_d©a
;

1340 
”r_code
 = 
	`blcm_lšk_ùx_g‘
(
p_hids
->
p_lšk_ùx_¡Üage
,

1341 
cÚn_hªdË
,

1342 (*è&
p_ho¡_»p_d©a
);

1343 
	`VERIFY_SUCCESS
(
”r_code
);

1345 
p_ho¡_»p_d©a
 +ğ(
bË_hids_ş›Á_cÚ‹xt_t
è+ 
BOOT_KB_INPUT_REPORT_MAX_SIZE
 +

1346 
BOOT_KB_OUTPUT_REPORT_MAX_SIZE
 + 
BOOT_MOUSE_INPUT_REPORT_MAX_SIZE
;

1349 
šdex
 < 
»p_šdex
)

1351 
p_ho¡_»p_d©a
 +ğ
p_hids
->
p_šp_»p_š™_¬¿y
[
šdex
].
max_Ën
;

1352 ++
šdex
;

1355 ià(
Ën
 <ğ
p_hids
->
p_šp_»p_š™_¬¿y
[
»p_šdex
].
max_Ën
)

1357 
	`memıy
(
p_ho¡_»p_d©a
, 
p_d©a
, 
Ën
);

1361  
NRF_ERROR_DATA_SIZE
;

1365 
	`mem£t
(&
hvx_·¿ms
, 0, (hvx_params));

1367 
hvx_·¿ms
.
hªdË
 = 
p_»p_ch¬
->
ch¬_hªdËs
.
v®ue_hªdË
;

1368 
hvx_·¿ms
.
ty³
 = 
BLE_GATT_HVX_NOTIFICATION
;

1369 
hvx_·¿ms
.
off£t
 = 0;

1370 
hvx_·¿ms
.
p_Ën
 = &
hvx_Ën
;

1371 
hvx_·¿ms
.
p_d©a
 =…_data;

1373 
”r_code
 = 
	`sd_bË_g©ts_hvx
(
cÚn_hªdË
, &
hvx_·¿ms
);

1374 ià((
”r_code
 =ğ
NRF_SUCCESS
è&& (*
hvx_·¿ms
.
p_Ën
 !ğ
Ën
))

1376 
”r_code
 = 
NRF_ERROR_DATA_SIZE
;

1381 
”r_code
 = 
NRF_ERROR_INVALID_STATE
;

1386 
”r_code
 = 
NRF_ERROR_INVALID_PARAM
;

1389  
”r_code
;

1390 
	}
}

1393 
ušt32_t
 
	$bË_hids_boÙ_kb_šp_»p_£nd
(
bË_hids_t
 * 
p_hids
,

1394 
ušt16_t
 
Ën
,

1395 
ušt8_t
 * 
p_d©a
,

1396 
ušt16_t
 
cÚn_hªdË
)

1398 
	`VERIFY_PARAM_NOT_NULL
(
p_hids
);

1399 
	`VERIFY_PARAM_NOT_NULL
(
p_d©a
);

1401 
ušt32_t
 
”r_code
;

1403 ià(
cÚn_hªdË
 !ğ
BLE_CONN_HANDLE_INVALID
)

1405 
bË_g©ts_hvx_·¿ms_t
 
hvx_·¿ms
;

1406 
ušt16_t
 
hvx_Ën
 = 
Ën
;

1407 
ušt8_t
 * 
p_ho¡_»p_d©a
;

1409 
”r_code
 = 
	`blcm_lšk_ùx_g‘
(
p_hids
->
p_lšk_ùx_¡Üage
,

1410 
cÚn_hªdË
,

1411 (*è&
p_ho¡_»p_d©a
);

1412 
	`VERIFY_SUCCESS
(
”r_code
);

1414 
p_ho¡_»p_d©a
 +ğ(
bË_hids_ş›Á_cÚ‹xt_t
);

1417 ià(
Ën
 <ğ
BOOT_KB_INPUT_REPORT_MAX_SIZE
)

1419 
	`memıy
(
p_ho¡_»p_d©a
, 
p_d©a
, 
Ën
);

1423 
	`mem£t
(&
hvx_·¿ms
, 0, (hvx_params));

1425 
hvx_·¿ms
.
hªdË
 = 
p_hids
->
boÙ_kb_šp_»p_hªdËs
.
v®ue_hªdË
;

1426 
hvx_·¿ms
.
ty³
 = 
BLE_GATT_HVX_NOTIFICATION
;

1427 
hvx_·¿ms
.
off£t
 = 0;

1428 
hvx_·¿ms
.
p_Ën
 = &
hvx_Ën
;

1429 
hvx_·¿ms
.
p_d©a
 =…_data;

1431 
”r_code
 = 
	`sd_bË_g©ts_hvx
(
cÚn_hªdË
, &
hvx_·¿ms
);

1432 ià((
”r_code
 =ğ
NRF_SUCCESS
è&& (*
hvx_·¿ms
.
p_Ën
 !ğ
Ën
))

1434 
”r_code
 = 
NRF_ERROR_DATA_SIZE
;

1439 
”r_code
 = 
NRF_ERROR_INVALID_STATE
;

1442  
”r_code
;

1443 
	}
}

1446 
ušt32_t
 
	$bË_hids_boÙ_mou£_šp_»p_£nd
(
bË_hids_t
 * 
p_hids
,

1447 
ušt8_t
 
bu‰Ús
,

1448 
št8_t
 
x_d–
,

1449 
št8_t
 
y_d–
,

1450 
ušt16_t
 
İtiÚ®_d©a_Ën
,

1451 
ušt8_t
 * 
p_İtiÚ®_d©a
,

1452 
ušt16_t
 
cÚn_hªdË
)

1454 
	`VERIFY_PARAM_NOT_NULL
(
p_hids
);

1456 
ušt32_t
 
”r_code
;

1458 ià(
cÚn_hªdË
 !ğ
BLE_CONN_HANDLE_INVALID
)

1460 
ušt16_t
 
hvx_Ën
 = 
BOOT_MOUSE_INPUT_REPORT_MIN_SIZE
 + 
İtiÚ®_d©a_Ën
;

1462 ià(
hvx_Ën
 <ğ
BOOT_MOUSE_INPUT_REPORT_MAX_SIZE
)

1464 
ušt8_t
 
bufãr
[
BOOT_MOUSE_INPUT_REPORT_MAX_SIZE
];

1465 
bË_g©ts_hvx_·¿ms_t
 
hvx_·¿ms
;

1466 
ušt8_t
 * 
p_ho¡_»p_d©a
;

1468 
”r_code
 = 
	`blcm_lšk_ùx_g‘
(
p_hids
->
p_lšk_ùx_¡Üage
,

1469 
cÚn_hªdË
,

1470 (*è&
p_ho¡_»p_d©a
);

1471 
	`VERIFY_SUCCESS
(
”r_code
);

1473 
p_ho¡_»p_d©a
 +ğ(
bË_hids_ş›Á_cÚ‹xt_t
è+ 
BOOT_KB_INPUT_REPORT_MAX_SIZE
 +

1474 
BOOT_KB_OUTPUT_REPORT_MAX_SIZE
;

1476 
	`APP_ERROR_CHECK_BOOL
(
BOOT_MOUSE_INPUT_REPORT_MIN_SIZE
 == 3);

1479 
bufãr
[0] = 
bu‰Ús
;

1480 
bufãr
[1] = (
ušt8_t
)
x_d–
;

1481 
bufãr
[2] = (
ušt8_t
)
y_d–
;

1483 ià(
İtiÚ®_d©a_Ën
 > 0)

1485 
	`memıy
(&
bufãr
[3], 
p_İtiÚ®_d©a
, 
İtiÚ®_d©a_Ën
);

1489 
	`memıy
(
p_ho¡_»p_d©a
, 
bufãr
, 
hvx_Ën
);

1492 
	`mem£t
(&
hvx_·¿ms
, 0, (hvx_params));

1494 
hvx_·¿ms
.
hªdË
 = 
p_hids
->
boÙ_mou£_šp_»p_hªdËs
.
v®ue_hªdË
;

1495 
hvx_·¿ms
.
ty³
 = 
BLE_GATT_HVX_NOTIFICATION
;

1496 
hvx_·¿ms
.
off£t
 = 0;

1497 
hvx_·¿ms
.
p_Ën
 = &
hvx_Ën
;

1498 
hvx_·¿ms
.
p_d©a
 = 
bufãr
;

1500 
”r_code
 = 
	`sd_bË_g©ts_hvx
(
cÚn_hªdË
, &
hvx_·¿ms
);

1501 ià((
”r_code
 =ğ
NRF_SUCCESS
) &&

1502 (*
hvx_·¿ms
.
p_Ën
 !ğ
BOOT_MOUSE_INPUT_REPORT_MIN_SIZE
 + 
İtiÚ®_d©a_Ën
)

1505 
”r_code
 = 
NRF_ERROR_DATA_SIZE
;

1510 
”r_code
 = 
NRF_ERROR_DATA_SIZE
;

1515 
”r_code
 = 
NRF_ERROR_INVALID_STATE
;

1518  
”r_code
;

1519 
	}
}

1522 
ušt32_t
 
	$bË_hids_ou_»p_g‘
(
bË_hids_t
 * 
p_hids
,

1523 
ušt8_t
 
»p_šdex
,

1524 
ušt16_t
 
Ën
,

1525 
ušt8_t
 
off£t
,

1526 
ušt16_t
 
cÚn_hªdË
,

1527 
ušt8_t
 * 
p_ou_»p
)

1529 
	`VERIFY_PARAM_NOT_NULL
(
p_hids
);

1530 
	`VERIFY_PARAM_NOT_NULL
(
p_ou_»p
);

1532 
»t_code_t
 
”r_code
;

1533 
ušt8_t
 * 
p_»p_d©a
;

1534 
ušt8_t
 
šdex
;

1536 ià(
»p_šdex
 >ğ
p_hids
->
ou_»p_couÁ
)

1538  
NRF_ERROR_INVALID_PARAM
;

1541 
”r_code
 = 
	`blcm_lšk_ùx_g‘
(
p_hids
->
p_lšk_ùx_¡Üage
,

1542 
cÚn_hªdË
,

1543 (*è&
p_»p_d©a
);

1544 
	`VERIFY_SUCCESS
(
”r_code
);

1546 
p_»p_d©a
 +ğ(
bË_hids_ş›Á_cÚ‹xt_t
è+ 
BOOT_KB_INPUT_REPORT_MAX_SIZE
 +

1547 
BOOT_KB_OUTPUT_REPORT_MAX_SIZE
 + 
BOOT_MOUSE_INPUT_REPORT_MAX_SIZE
;

1549 
šdex
 = 0; index < 
p_hids
->
šp_»p_couÁ
; index++)

1551 
p_»p_d©a
 +ğ
p_hids
->
p_šp_»p_š™_¬¿y
[
šdex
].
max_Ën
;

1554 
šdex
 = 0; index < 
»p_šdex
; index++)

1556 
p_»p_d©a
 +ğ
p_hids
->
p_ou_»p_š™_¬¿y
[
šdex
].
max_Ën
;

1560 ià(
Ën
 + 
off£t
 <ğ
p_hids
->
p_ou_»p_š™_¬¿y
[
»p_šdex
].
max_Ën
)

1562 
	`memıy
(
p_ou_»p
, 
p_»p_d©a
 + 
off£t
, 
Ën
);

1566  
NRF_ERROR_INVALID_LENGTH
;

1569  
NRF_SUCCESS
;

1570 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\ble\common\ble_advdata.c

40 
	~"bË_advd©a.h
"

41 
	~"bË_g­.h
"

42 
	~"bË_¤v_commÚ.h
"

43 
	~"sdk_commÚ.h
"

49 
	#AD_TYPE_BLE_DEVICE_ADDR_TYPE_PUBLIC
 0UL

	)

50 
	#AD_TYPE_BLE_DEVICE_ADDR_TYPE_RANDOM
 1UL

	)

52 
	#UUID16_SIZE
 2

	)

53 
	#UUID32_SIZE
 4

	)

54 
	#UUID128_SIZE
 16

	)

56 
	#N_AD_TYPES
 2

	)

59 
»t_code_t
 
	$bË_deviû_addr_’code
(
ušt8_t
 * 
p_’coded_d©a
,

60 
ušt16_t
 * 
p_off£t
,

61 
ušt16_t
 
max_size
)

63 
»t_code_t
 
”r_code
;

64 
bË_g­_addr_t
 
deviû_addr
;

67 ià(((*
p_off£t
è+ 
AD_TYPE_BLE_DEVICE_ADDR_SIZE
è> 
max_size
)

69  
NRF_ERROR_DATA_SIZE
;

73 
”r_code
 = 
	`sd_bË_g­_addr_g‘
(&
deviû_addr
);

74 
	`VERIFY_SUCCESS
(
”r_code
);

77 
p_’coded_d©a
[*
p_off£t
] = (
ušt8_t
)(
AD_TYPE_FIELD_SIZE
 +

78 
AD_TYPE_BLE_DEVICE_ADDR_DATA_SIZE
);

79 *
p_off£t
 +ğ
AD_LENGTH_FIELD_SIZE
;

80 
p_’coded_d©a
[*
p_off£t
] = 
BLE_GAP_AD_TYPE_LE_BLUETOOTH_DEVICE_ADDRESS
;

81 *
p_off£t
 +ğ
AD_TYPE_FIELD_SIZE
;

82 
	`memıy
(&
p_’coded_d©a
[*
p_off£t
], &
deviû_addr
.
addr
[0], 
BLE_GAP_ADDR_LEN
);

83 *
p_off£t
 +ğ
BLE_GAP_ADDR_LEN
;

84 ià(
BLE_GAP_ADDR_TYPE_PUBLIC
 =ğ
deviû_addr
.
addr_ty³
)

86 
p_’coded_d©a
[*
p_off£t
] = 
AD_TYPE_BLE_DEVICE_ADDR_TYPE_PUBLIC
;

90 
p_’coded_d©a
[*
p_off£t
] = 
AD_TYPE_BLE_DEVICE_ADDR_TYPE_RANDOM
;

92 *
p_off£t
 +ğ
AD_TYPE_BLE_DEVICE_ADDR_TYPE_SIZE
;

94  
NRF_SUCCESS
;

95 
	}
}

97 
»t_code_t
 
	$Çme_’code
(cÚ¡ 
bË_advd©a_t
 * 
p_advd©a
,

98 
ušt8_t
 * 
p_’coded_d©a
,

99 
ušt16_t
 * 
p_off£t
,

100 
ušt16_t
 
max_size
)

102 
»t_code_t
 
”r_code
;

103 
ušt16_t
 
»m_adv_d©a_Ën
;

104 
ušt16_t
 
aùu®_Ëngth
;

105 
ušt8_t
 
adv_d©a_fÜm©
;

109 ià((
BLE_ADVDATA_SHORT_NAME
 =ğ
p_advd©a
->
Çme_ty³
è&& (0 =ğp_advd©a->
shÜt_Çme_Ën
))

111  
NRF_ERROR_INVALID_PARAM
;

115 iàĞ(((*
p_off£t
è+ 
AD_DATA_OFFSET
è> 
max_size
) ||

116 Ğ(
BLE_ADVDATA_SHORT_NAME
 =ğ
p_advd©a
->
Çme_ty³
) &&

117 (((*
p_off£t
è+ 
AD_DATA_OFFSET
 + 
p_advd©a
->
shÜt_Çme_Ën
è> 
max_size
)))

119  
NRF_ERROR_DATA_SIZE
;

122 
»m_adv_d©a_Ën
 = 
max_size
 - (*
p_off£t
è- 
AD_DATA_OFFSET
;

123 
aùu®_Ëngth
 = 
»m_adv_d©a_Ën
;

126 
”r_code
 = 
	`sd_bË_g­_deviû_Çme_g‘
(&
p_’coded_d©a
[(*
p_off£t
è+ 
AD_DATA_OFFSET
],

127 &
aùu®_Ëngth
);

128 
	`VERIFY_SUCCESS
(
”r_code
);

133 ià(((
p_advd©a
->
Çme_ty³
 =ğ
BLE_ADVDATA_FULL_NAME
) ||

134 (
aùu®_Ëngth
 <ğ
p_advd©a
->
shÜt_Çme_Ën
)) &&

135 (
aùu®_Ëngth
 <ğ
»m_adv_d©a_Ën
))

138 
adv_d©a_fÜm©
 = 
BLE_GAP_AD_TYPE_COMPLETE_LOCAL_NAME
;

143 
adv_d©a_fÜm©
 = 
BLE_GAP_AD_TYPE_SHORT_LOCAL_NAME
;

147 ià((
BLE_ADVDATA_SHORT_NAME
 =ğ
p_advd©a
->
Çme_ty³
) &&

148 (
p_advd©a
->
shÜt_Çme_Ën
 <ğ
»m_adv_d©a_Ën
))

151 
aùu®_Ëngth
 = 
p_advd©a
->
shÜt_Çme_Ën
;

156 
aùu®_Ëngth
 = 
»m_adv_d©a_Ën
;

161 ià(
aùu®_Ëngth
 > (0x00FF - 
AD_TYPE_FIELD_SIZE
))

163  
NRF_ERROR_DATA_SIZE
;

167 
p_’coded_d©a
[*
p_off£t
] = (
ušt8_t
)(
AD_TYPE_FIELD_SIZE
 + 
aùu®_Ëngth
);

168 *
p_off£t
 +ğ
AD_LENGTH_FIELD_SIZE
;

169 
p_’coded_d©a
[*
p_off£t
] = 
adv_d©a_fÜm©
;

170 *
p_off£t
 +ğ
AD_TYPE_FIELD_SIZE
;

171 *
p_off£t
 +ğ
aùu®_Ëngth
;

173  
NRF_SUCCESS
;

174 
	}
}

177 
»t_code_t
 
	$­³¬ªû_’code
(
ušt8_t
 * 
p_’coded_d©a
,

178 
ušt16_t
 * 
p_off£t
,

179 
ušt16_t
 
max_size
)

181 
»t_code_t
 
”r_code
;

182 
ušt16_t
 
­³¬ªû
;

185 ià(((*
p_off£t
è+ 
AD_TYPE_APPEARANCE_SIZE
è> 
max_size
)

187  
NRF_ERROR_DATA_SIZE
;

191 
”r_code
 = 
	`sd_bË_g­_­³¬ªû_g‘
(&
­³¬ªû
);

192 
	`VERIFY_SUCCESS
(
”r_code
);

195 
p_’coded_d©a
[*
p_off£t
] = (
ušt8_t
)(
AD_TYPE_FIELD_SIZE
 + 
AD_TYPE_APPEARANCE_DATA_SIZE
);

196 *
p_off£t
 +ğ
AD_LENGTH_FIELD_SIZE
;

197 
p_’coded_d©a
[*
p_off£t
] = 
BLE_GAP_AD_TYPE_APPEARANCE
;

198 *
p_off£t
 +ğ
AD_TYPE_FIELD_SIZE
;

199 *
p_off£t
 +ğ
	`ušt16_’code
(
­³¬ªû
, &
p_’coded_d©a
[*p_offset]);

201  
NRF_SUCCESS
;

202 
	}
}

204 
»t_code_t
 
	$æags_’code
(
št8_t
 
æags
,

205 
ušt8_t
 * 
p_’coded_d©a
,

206 
ušt16_t
 * 
p_off£t
,

207 
ušt16_t
 
max_size
)

210 ià(((*
p_off£t
è+ 
AD_TYPE_FLAGS_SIZE
è> 
max_size
)

212  
NRF_ERROR_DATA_SIZE
;

216 
p_’coded_d©a
[*
p_off£t
] = (
ušt8_t
)(
AD_TYPE_FIELD_SIZE
 + 
AD_TYPE_FLAGS_DATA_SIZE
);

217 *
p_off£t
 +ğ
AD_LENGTH_FIELD_SIZE
;

218 
p_’coded_d©a
[*
p_off£t
] = 
BLE_GAP_AD_TYPE_FLAGS
;

219 *
p_off£t
 +ğ
AD_TYPE_FIELD_SIZE
;

220 
p_’coded_d©a
[*
p_off£t
] = 
æags
;

221 *
p_off£t
 +ğ
AD_TYPE_FLAGS_DATA_SIZE
;

223  
NRF_SUCCESS
;

224 
	}
}

226 
»t_code_t
 
	$tx_pow”_Ëv–_’code
(
št8_t
 
tx_pow”_Ëv–
,

227 
ušt8_t
 * 
p_’coded_d©a
,

228 
ušt16_t
 * 
p_off£t
,

229 
ušt16_t
 
max_size
)

232 ià(((*
p_off£t
è+ 
AD_TYPE_TX_POWER_LEVEL_SIZE
è> 
max_size
)

234  
NRF_ERROR_DATA_SIZE
;

238 
p_’coded_d©a
[*
p_off£t
] = (
ušt8_t
)(
AD_TYPE_FIELD_SIZE
 +

239 
AD_TYPE_TX_POWER_LEVEL_DATA_SIZE
);

240 *
p_off£t
 +ğ
AD_LENGTH_FIELD_SIZE
;

241 
p_’coded_d©a
[*
p_off£t
] = 
BLE_GAP_AD_TYPE_TX_POWER_LEVEL
;

242 *
p_off£t
 +ğ
AD_TYPE_FIELD_SIZE
;

243 
p_’coded_d©a
[*
p_off£t
] = 
tx_pow”_Ëv–
;

244 *
p_off£t
 +ğ
AD_TYPE_TX_POWER_LEVEL_DATA_SIZE
;

246  
NRF_SUCCESS
;

247 
	}
}

250 
»t_code_t
 
	$uuid_li¡_sized_’code
(cÚ¡ 
bË_advd©a_uuid_li¡_t
 * 
p_uuid_li¡
,

251 
ušt8_t
 
adv_ty³
,

252 
ušt8_t
 
uuid_size
,

253 
ušt8_t
 * 
p_’coded_d©a
,

254 
ušt16_t
 * 
p_off£t
,

255 
ušt16_t
 
max_size
)

257 
i
;

258 
boŞ
 
is_h—dšg_wr™‹n
 = 
çl£
;

259 
ušt16_t
 
¡¬t_pos
 = *
p_off£t
;

260 
ušt16_t
 
Ëngth
;

262 
i
 = 0; i < 
p_uuid_li¡
->
uuid_út
; i++)

264 
»t_code_t
 
”r_code
;

265 
ušt8_t
 
’coded_size
;

266 
bË_uuid_t
 
uuid
 = 
p_uuid_li¡
->
p_uuids
[
i
];

269 
”r_code
 = 
	`sd_bË_uuid_’code
(&
uuid
, &
’coded_size
, 
NULL
);

270 
	`VERIFY_SUCCESS
(
”r_code
);

273 ià(
’coded_size
 =ğ
uuid_size
)

275 
ušt8_t
 
h—dšg_by‹s
 = (
is_h—dšg_wr™‹n
è? 0 : 
AD_DATA_OFFSET
;

278 ià(((*
p_off£t
è+ 
’coded_size
 + 
h—dšg_by‹s
è> 
max_size
)

280  
NRF_ERROR_DATA_SIZE
;

283 ià(!
is_h—dšg_wr™‹n
)

286 *
p_off£t
 +ğ
AD_LENGTH_FIELD_SIZE
;

287 
p_’coded_d©a
[*
p_off£t
] = 
adv_ty³
;

288 *
p_off£t
 +ğ
AD_TYPE_FIELD_SIZE
;

289 
is_h—dšg_wr™‹n
 = 
Œue
;

293 
”r_code
 = 
	`sd_bË_uuid_’code
(&
uuid
, &
’coded_size
, &
p_’coded_d©a
[*
p_off£t
]);

294 
	`VERIFY_SUCCESS
(
”r_code
);

295 *
p_off£t
 +ğ
’coded_size
;

299 ià(
is_h—dšg_wr™‹n
)

302 
Ëngth
 = (*
p_off£t
è- (
¡¬t_pos
 + 
AD_LENGTH_FIELD_SIZE
);

304 ià(
Ëngth
 > 0x00FF)

306  
NRF_ERROR_DATA_SIZE
;

308 
p_’coded_d©a
[
¡¬t_pos
] = (
ušt8_t
)
Ëngth
;

311  
NRF_SUCCESS
;

312 
	}
}

315 
»t_code_t
 
	$uuid_li¡_’code
(cÚ¡ 
bË_advd©a_uuid_li¡_t
 * 
p_uuid_li¡
,

316 
ušt8_t
 
adv_ty³_16
,

317 
ušt8_t
 
adv_ty³_128
,

318 
ušt8_t
 * 
p_’coded_d©a
,

319 
ušt16_t
 * 
p_off£t
,

320 
ušt16_t
 
max_size
)

322 
»t_code_t
 
”r_code
;

325 
”r_code
 = 
	`uuid_li¡_sized_’code
(
p_uuid_li¡
,

326 
adv_ty³_16
,

327 (
ušt16_Ë_t
),

328 
p_’coded_d©a
,

329 
p_off£t
,

330 
max_size
);

331 
	`VERIFY_SUCCESS
(
”r_code
);

334 
”r_code
 = 
	`uuid_li¡_sized_’code
(
p_uuid_li¡
,

335 
adv_ty³_128
,

336 (
bË_uuid128_t
),

337 
p_’coded_d©a
,

338 
p_off£t
,

339 
max_size
);

340 
	`VERIFY_SUCCESS
(
”r_code
);

342  
NRF_SUCCESS
;

343 
	}
}

346 
»t_code_t
 
	$cÚn_št_check
(cÚ¡ 
bË_advd©a_cÚn_št_t
 *
p_cÚn_št
)

349 ià((
p_cÚn_št
->
mš_cÚn_š‹rv®
 < 0x0006) ||

351 (
p_cÚn_št
->
mš_cÚn_š‹rv®
 > 0x0c80) &&

352 (
p_cÚn_št
->
mš_cÚn_š‹rv®
 != 0xffff)

356  
NRF_ERROR_INVALID_PARAM
;

360 ià((
p_cÚn_št
->
max_cÚn_š‹rv®
 < 0x0006) ||

362 (
p_cÚn_št
->
max_cÚn_š‹rv®
 > 0x0c80) &&

363 (
p_cÚn_št
->
max_cÚn_š‹rv®
 != 0xffff)

367  
NRF_ERROR_INVALID_PARAM
;

371 ià((
p_cÚn_št
->
mš_cÚn_š‹rv®
 != 0xffff) &&

372 (
p_cÚn_št
->
max_cÚn_š‹rv®
 != 0xffff) &&

373 (
p_cÚn_št
->
mš_cÚn_š‹rv®
 >…_cÚn_št->
max_cÚn_š‹rv®
)

376  
NRF_ERROR_INVALID_PARAM
;

379  
NRF_SUCCESS
;

380 
	}
}

383 
»t_code_t
 
	$cÚn_št_’code
(cÚ¡ 
bË_advd©a_cÚn_št_t
 * 
p_cÚn_št
,

384 
ušt8_t
 * 
p_’coded_d©a
,

385 
ušt16_t
 * 
p_off£t
,

386 
ušt16_t
 
max_size
)

388 
»t_code_t
 
”r_code
;

391 ià(((*
p_off£t
è+ 
AD_TYPE_CONN_INT_SIZE
è> 
max_size
)

393  
NRF_ERROR_DATA_SIZE
;

397 
”r_code
 = 
	`cÚn_št_check
(
p_cÚn_št
);

398 
	`VERIFY_SUCCESS
(
”r_code
);

401 
p_’coded_d©a
[*
p_off£t
] = (
ušt8_t
)(
AD_TYPE_FIELD_SIZE
 + 
AD_TYPE_CONN_INT_DATA_SIZE
);

402 *
p_off£t
 +ğ
AD_LENGTH_FIELD_SIZE
;

403 
p_’coded_d©a
[*
p_off£t
] = 
BLE_GAP_AD_TYPE_SLAVE_CONNECTION_INTERVAL_RANGE
;

404 *
p_off£t
 +ğ
AD_TYPE_FIELD_SIZE
;

407 *
p_off£t
 +ğ
	`ušt16_’code
(
p_cÚn_št
->
mš_cÚn_š‹rv®
, &
p_’coded_d©a
[*p_offset]);

408 *
p_off£t
 +ğ
	`ušt16_’code
(
p_cÚn_št
->
max_cÚn_š‹rv®
, &
p_’coded_d©a
[*p_offset]);

410  
NRF_SUCCESS
;

411 
	}
}

414 
»t_code_t
 
	$mªuf_¥ecific_d©a_’code
(cÚ¡ 
bË_advd©a_mªuf_d©a_t
 * 
p_mªuf_¥_d©a
,

415 
ušt8_t
 * 
p_’coded_d©a
,

416 
ušt16_t
 * 
p_off£t
,

417 
ušt16_t
 
max_size
)

419 
ušt32_t
 
d©a_size
 = 
AD_TYPE_MANUF_SPEC_DATA_ID_SIZE
 + 
p_mªuf_¥_d©a
->
d©a
.
size
;

422 ià(((*
p_off£t
è+ 
AD_DATA_OFFSET
 + 
d©a_size
è> 
max_size
)

424  
NRF_ERROR_DATA_SIZE
;

428 ià(
d©a_size
 > (0x00FF - 
AD_TYPE_FIELD_SIZE
))

430  
NRF_ERROR_DATA_SIZE
;

434 
p_’coded_d©a
[*
p_off£t
] = (
ušt8_t
)(
AD_TYPE_FIELD_SIZE
 + 
d©a_size
);

435 *
p_off£t
 +ğ
AD_LENGTH_FIELD_SIZE
;

436 
p_’coded_d©a
[*
p_off£t
] = 
BLE_GAP_AD_TYPE_MANUFACTURER_SPECIFIC_DATA
;

437 *
p_off£t
 +ğ
AD_TYPE_FIELD_SIZE
;

440 *
p_off£t
 +ğ
	`ušt16_’code
(
p_mªuf_¥_d©a
->
com·ny_id’tif›r
, &
p_’coded_d©a
[*p_offset]);

443 ià(
p_mªuf_¥_d©a
->
d©a
.
size
 > 0)

445 ià(
p_mªuf_¥_d©a
->
d©a
.
p_d©a
 =ğ
NULL
)

447  
NRF_ERROR_INVALID_PARAM
;

449 
	`memıy
(&
p_’coded_d©a
[*
p_off£t
], 
p_mªuf_¥_d©a
->
d©a
.
p_d©a
,…_mªuf_¥_d©a->d©a.
size
);

450 *
p_off£t
 +ğ
p_mªuf_¥_d©a
->
d©a
.
size
;

453  
NRF_SUCCESS
;

454 
	}
}

457 
»t_code_t
 
	$£rviû_d©a_’code
(cÚ¡ 
bË_advd©a_t
 * 
p_advd©a
,

458 
ušt8_t
 * 
p_’coded_d©a
,

459 
ušt16_t
 * 
p_off£t
,

460 
ušt16_t
 
max_size
)

462 
ušt8_t
 
i
;

465 ià(
p_advd©a
->
p_£rviû_d©a_¬¿y
 =ğ
NULL
)

467  
NRF_ERROR_INVALID_PARAM
;

470 
i
 = 0; i < 
p_advd©a
->
£rviû_d©a_couÁ
; i++)

472 
bË_advd©a_£rviû_d©a_t
 * 
p_£rviû_d©a
;

473 
ušt32_t
 
d©a_size
;

475 
p_£rviû_d©a
 = &
p_advd©a
->
p_£rviû_d©a_¬¿y
[
i
];

477 
d©a_size
 = 
AD_TYPE_SERV_DATA_16BIT_UUID_SIZE
 + 
p_£rviû_d©a
->
d©a
.
size
;

480 ià(
d©a_size
 > (0x00FF - 
AD_TYPE_FIELD_SIZE
))

482  
NRF_ERROR_DATA_SIZE
;

486 
p_’coded_d©a
[*
p_off£t
] = (
ušt8_t
)(
AD_TYPE_FIELD_SIZE
 + 
d©a_size
);

487 *
p_off£t
 +ğ
AD_LENGTH_FIELD_SIZE
;

488 
p_’coded_d©a
[*
p_off£t
] = 
BLE_GAP_AD_TYPE_SERVICE_DATA
;

489 *
p_off£t
 +ğ
AD_TYPE_FIELD_SIZE
;

492 *
p_off£t
 +ğ
	`ušt16_’code
(
p_£rviû_d©a
->
£rviû_uuid
, &
p_’coded_d©a
[*p_offset]);

495 ià(
p_£rviû_d©a
->
d©a
.
size
 > 0)

497 ià(
p_£rviû_d©a
->
d©a
.
p_d©a
 =ğ
NULL
)

499  
NRF_ERROR_INVALID_PARAM
;

501 
	`memıy
(&
p_’coded_d©a
[*
p_off£t
], 
p_£rviû_d©a
->
d©a
.
p_d©a
,…_£rviû_d©a->d©a.
size
);

502 *
p_off£t
 +ğ
p_£rviû_d©a
->
d©a
.
size
;

506  
NRF_SUCCESS
;

507 
	}
}

509 
»t_code_t
 
	$bË_advd©a_’code
(
bË_advd©a_t
 cÚ¡ * cÚ¡ 
p_advd©a
,

510 
ušt8_t
 * cÚ¡ 
p_’coded_d©a
,

511 
ušt16_t
 * cÚ¡ 
p_Ën
)

513 
»t_code_t
 
”r_code
 = 
NRF_SUCCESS
;

514 
ušt16_t
 
max_size
 = *
p_Ën
;

515 *
p_Ën
 = 0;

518 ià(
p_advd©a
->
šşude_bË_deviû_addr
)

520 
”r_code
 = 
	`bË_deviû_addr_’code
(
p_’coded_d©a
, 
p_Ën
, 
max_size
);

521 
	`VERIFY_SUCCESS
(
”r_code
);

525 ià(
p_advd©a
->
šşude_­³¬ªû
)

527 
”r_code
 = 
	`­³¬ªû_’code
(
p_’coded_d©a
, 
p_Ën
, 
max_size
);

528 
	`VERIFY_SUCCESS
(
”r_code
);

532 ià(
p_advd©a
->
æags
 != 0 )

534 
”r_code
 = 
	`æags_’code
(
p_advd©a
->
æags
, 
p_’coded_d©a
, 
p_Ën
, 
max_size
);

535 
	`VERIFY_SUCCESS
(
”r_code
);

539 ià(
p_advd©a
->
p_tx_pow”_Ëv–
 !ğ
NULL
)

541 
”r_code
 = 
	`tx_pow”_Ëv–_’code
(*
p_advd©a
->
p_tx_pow”_Ëv–
,

542 
p_’coded_d©a
,

543 
p_Ën
,

544 
max_size
);

545 
	`VERIFY_SUCCESS
(
”r_code
);

549 ià(
p_advd©a
->
uuids_mÜe_avaabË
.
uuid_út
 > 0)

551 
”r_code
 = 
	`uuid_li¡_’code
(&
p_advd©a
->
uuids_mÜe_avaabË
,

552 
BLE_GAP_AD_TYPE_16BIT_SERVICE_UUID_MORE_AVAILABLE
,

553 
BLE_GAP_AD_TYPE_128BIT_SERVICE_UUID_MORE_AVAILABLE
,

554 
p_’coded_d©a
,

555 
p_Ën
,

556 
max_size
);

557 
	`VERIFY_SUCCESS
(
”r_code
);

561 ià(
p_advd©a
->
uuids_com¶‘e
.
uuid_út
 > 0)

563 
”r_code
 = 
	`uuid_li¡_’code
(&
p_advd©a
->
uuids_com¶‘e
,

564 
BLE_GAP_AD_TYPE_16BIT_SERVICE_UUID_COMPLETE
,

565 
BLE_GAP_AD_TYPE_128BIT_SERVICE_UUID_COMPLETE
,

566 
p_’coded_d©a
,

567 
p_Ën
,

568 
max_size
);

569 
	`VERIFY_SUCCESS
(
”r_code
);

573 ià(
p_advd©a
->
uuids_sŞic™ed
.
uuid_út
 > 0)

575 
”r_code
 = 
	`uuid_li¡_’code
(&
p_advd©a
->
uuids_sŞic™ed
,

576 
BLE_GAP_AD_TYPE_SOLICITED_SERVICE_UUIDS_16BIT
,

577 
BLE_GAP_AD_TYPE_SOLICITED_SERVICE_UUIDS_128BIT
,

578 
p_’coded_d©a
,

579 
p_Ën
,

580 
max_size
);

581 
	`VERIFY_SUCCESS
(
”r_code
);

585 ià(
p_advd©a
->
p_¦ave_cÚn_št
 !ğ
NULL
)

587 
”r_code
 = 
	`cÚn_št_’code
(
p_advd©a
->
p_¦ave_cÚn_št
, 
p_’coded_d©a
, 
p_Ën
, 
max_size
);

588 
	`VERIFY_SUCCESS
(
”r_code
);

592 ià(
p_advd©a
->
p_mªuf_¥ecific_d©a
 !ğ
NULL
)

594 
”r_code
 = 
	`mªuf_¥ecific_d©a_’code
(
p_advd©a
->
p_mªuf_¥ecific_d©a
,

595 
p_’coded_d©a
,

596 
p_Ën
,

597 
max_size
);

598 
	`VERIFY_SUCCESS
(
”r_code
);

602 ià(
p_advd©a
->
£rviû_d©a_couÁ
 > 0)

604 
”r_code
 = 
	`£rviû_d©a_’code
(
p_advd©a
, 
p_’coded_d©a
, 
p_Ën
, 
max_size
);

605 
	`VERIFY_SUCCESS
(
”r_code
);

609 ià(
p_advd©a
->
Çme_ty³
 !ğ
BLE_ADVDATA_NO_NAME
)

611 
”r_code
 = 
	`Çme_’code
(
p_advd©a
, 
p_’coded_d©a
, 
p_Ën
, 
max_size
);

612 
	`VERIFY_SUCCESS
(
”r_code
);

615  
”r_code
;

616 
	}
}

619 
ušt16_t
 
	$bË_advd©a_£¬ch
(
ušt8_t
 cÚ¡ * 
p_’coded_d©a
,

620 
ušt16_t
 
d©a_Ën
,

621 
ušt16_t
 * 
p_off£t
,

622 
ušt8_t
 
ad_ty³
)

624 ià((
p_’coded_d©a
 =ğ
NULL
è|| (
p_off£t
 == NULL))

629 
ušt16_t
 
i
 = 0;

631 ((
i
 < *
p_off£t
è|| (
p_’coded_d©a
[˜+ 1] !ğ
ad_ty³
)è&& (˜< 
d©a_Ën
))

634 
i
 +ğ(
p_’coded_d©a
[i] + 1);

637 ià(
i
 >ğ
d©a_Ën
)

643 *
p_off£t
 = 
i
 + 2;

644  (
p_’coded_d©a
[
i
] - 1);

646 
	}
}

649 
ušt8_t
 * 
	$bË_advd©a_·r£
(
ušt8_t
 * 
p_’coded_d©a
,

650 
ušt16_t
 
d©a_Ën
,

651 
ušt8_t
 
ad_ty³
)

653 
ušt16_t
 
off£t
 = 0;

654 
ušt16_t
 
Ën
 = 
	`bË_advd©a_£¬ch
(
p_’coded_d©a
, 
d©a_Ën
, &
off£t
, 
ad_ty³
);

656 ià(
Ën
 == 0)

658  
NULL
;

662  &
p_’coded_d©a
[
off£t
];

664 
	}
}

667 
boŞ
 
	$bË_advd©a_Çme_fšd
(
ušt8_t
 cÚ¡ * 
p_’coded_d©a
,

668 
ušt16_t
 
d©a_Ën
,

669 cÚ¡ * 
p_rg‘_Çme
)

671 
ušt16_t
 
·r£d_Çme_Ën
;

672 
ušt8_t
 cÚ¡ * 
p_·r£d_Çme
;

673 
ušt16_t
 
d©a_off£t
 = 0;

675 ià(
p_rg‘_Çme
 =ğ
NULL
)

677  
çl£
;

681 
·r£d_Çme_Ën
 = 
	`bË_advd©a_£¬ch
(
p_’coded_d©a
,

682 
d©a_Ën
,

683 &
d©a_off£t
,

684 
BLE_GAP_AD_TYPE_COMPLETE_LOCAL_NAME
);

686 
p_·r£d_Çme
 = &
p_’coded_d©a
[
d©a_off£t
];

688 iàĞ(
d©a_off£t
 != 0)

689 && (
·r£d_Çme_Ën
 != 0)

690 && (
	`¡¾’
(
p_rg‘_Çme
è=ğ
·r£d_Çme_Ën
)

691 && (
	`memcmp
(
p_rg‘_Çme
, 
p_·r£d_Çme
, 
·r£d_Çme_Ën
) == 0))

693  
Œue
;

696  
çl£
;

697 
	}
}

700 
boŞ
 
	$bË_advd©a_shÜt_Çme_fšd
(
ušt8_t
 cÚ¡ * 
p_’coded_d©a
,

701 
ušt16_t
 
d©a_Ën
,

702 cÚ¡ * 
p_rg‘_Çme
,

703 
ušt8_t
 cÚ¡ 
shÜt_Çme_mš_Ën
)

705 
ušt16_t
 
·r£d_Çme_Ën
;

706 
ušt8_t
 cÚ¡ * 
p_·r£d_Çme
;

707 
ušt16_t
 
d©a_off£t
 = 0;

709 ià(
p_rg‘_Çme
 =ğ
NULL
)

711  
çl£
;

714 
·r£d_Çme_Ën
 = 
	`bË_advd©a_£¬ch
(
p_’coded_d©a
,

715 
d©a_Ën
,

716 &
d©a_off£t
,

717 
BLE_GAP_AD_TYPE_SHORT_LOCAL_NAME
);

719 
p_·r£d_Çme
 = &
p_’coded_d©a
[
d©a_off£t
];

721 iàĞ(
d©a_off£t
 != 0)

722 && (
·r£d_Çme_Ën
 != 0)

723 && (
·r£d_Çme_Ën
 >ğ
shÜt_Çme_mš_Ën
)

724 && (
·r£d_Çme_Ën
 < 
	`¡¾’
(
p_rg‘_Çme
))

725 && (
	`memcmp
(
p_rg‘_Çme
, 
p_·r£d_Çme
, 
·r£d_Çme_Ën
) == 0))

727  
Œue
;

730  
çl£
;

731 
	}
}

734 
boŞ
 
	$bË_advd©a_uuid_fšd
(
ušt8_t
 cÚ¡ * 
p_’coded_d©a
,

735 
ušt16_t
 
d©a_Ën
,

736 
bË_uuid_t
 cÚ¡ * 
p_rg‘_uuid
)

739 
»t_code_t
 
”r_code
;

740 
ušt16_t
 
d©a_off£t
 = 0;

741 
ušt8_t
 
¿w_uuid_Ën
 = 
UUID128_SIZE
;

742 
ušt8_t
 cÚ¡ * 
p_·r£d_uuid
;

743 
ušt16_t
 
·r£d_uuid_Ën
 = 
d©a_Ën
;

744 
ušt8_t
 
¿w_uuid
[
UUID128_SIZE
];

745 
ušt8_t
 
ad_ty³s
[
N_AD_TYPES
];

747 
”r_code
 = 
	`sd_bË_uuid_’code
(
p_rg‘_uuid
, &
¿w_uuid_Ën
, 
¿w_uuid
);

749 ià((
p_’coded_d©a
 =ğ
NULL
è|| (
”r_code
 !ğ
NRF_SUCCESS
))

752  
çl£
;

755 
¿w_uuid_Ën
)

757 
UUID16_SIZE
:

758 
ad_ty³s
[0] = 
BLE_GAP_AD_TYPE_16BIT_SERVICE_UUID_COMPLETE
;

759 
ad_ty³s
[1] = 
BLE_GAP_AD_TYPE_16BIT_SERVICE_UUID_MORE_AVAILABLE
;

762 
UUID32_SIZE
:

764 
ad_ty³s
[0] = 
BLE_GAP_AD_TYPE_32BIT_SERVICE_UUID_COMPLETE
;

765 
ad_ty³s
[1] = 
BLE_GAP_AD_TYPE_32BIT_SERVICE_UUID_MORE_AVAILABLE
;

768 
UUID128_SIZE
:

769 
ad_ty³s
[0] = 
BLE_GAP_AD_TYPE_128BIT_SERVICE_UUID_COMPLETE
;

770 
ad_ty³s
[1] = 
BLE_GAP_AD_TYPE_128BIT_SERVICE_UUID_MORE_AVAILABLE
;

774  
çl£
;

777 
ušt8_t
 
i
 = 0; (˜< 
N_AD_TYPES
è&& (
d©a_off£t
 == 0); i++)

779 
·r£d_uuid_Ën
 = 
	`bË_advd©a_£¬ch
(
p_’coded_d©a
, 
d©a_Ën
, &
d©a_off£t
, 
ad_ty³s
[
i
]);

782 ià(
d©a_off£t
 == 0)

785  
çl£
;

788 
p_·r£d_uuid
 = &
p_’coded_d©a
[
d©a_off£t
];

791 
ušt16_t
 
li¡_off£t
 = 0;†i¡_off£ˆ< 
·r£d_uuid_Ën
;†i¡_off£ˆ+ğ
¿w_uuid_Ën
)

793 ià(
	`memcmp
(&
p_·r£d_uuid
[
li¡_off£t
], 
¿w_uuid
, 
¿w_uuid_Ën
) == 0)

795  
Œue
;

800  
çl£
;

801 
	}
}

804 
boŞ
 
	$bË_advd©a_­³¬ªû_fšd
(
ušt8_t
 cÚ¡ * 
p_’coded_d©a
,

805 
ušt16_t
 
d©a_Ën
,

806 
ušt16_t
 cÚ¡ * 
p_rg‘_­³¬ªû
)

808 
ušt16_t
 
d©a_off£t
 = 0;

809 
ušt8_t
 
­³¬ªû_Ën
;

810 
ušt16_t
 
decoded_­³¬ªû
;

812 
­³¬ªû_Ën
 = 
	`bË_advd©a_£¬ch
(
p_’coded_d©a
, 
d©a_Ën
, &
d©a_off£t
, 
BLE_GAP_AD_TYPE_APPEARANCE
);

814 iàĞ(
d©a_off£t
 == 0)

815 || (
p_rg‘_­³¬ªû
 =ğ
NULL
)

816 || (
­³¬ªû_Ën
 == 0))

819  
çl£
;

822 
decoded_­³¬ªû
 = 
	`ušt16_decode
(&
p_’coded_d©a
[
d©a_off£t
]);

824 ià(
decoded_­³¬ªû
 =ğ*
p_rg‘_­³¬ªû
)

826  
Œue
;

830  
çl£
;

831 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\ble\common\ble_conn_params.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
NRF_BLE_CONN_PARAMS
)

42 
	~<¡dlib.h
>

43 
	~"Äf.h
"

44 
	~"sdk_”rÜs.h
"

45 
	~"bË_hci.h
"

46 
	~"bË_”r.h
"

47 
	~"bË_cÚn_·¿ms.h
"

48 
	~"bË_¤v_commÚ.h
"

49 
	~"bË_cÚn_¡©e.h
"

50 
	~"Äf_sdh_bË.h
"

51 
	~"­p_tim”.h
"

52 
	~"­p_ut.h
"

55 
	#NRF_BLE_CONN_PARAMS_INSTANCE_COUNT
 
NRF_SDH_BLE_PERIPHERAL_LINK_COUNT


56 

	)

57 #ià(
NRF_BLE_CONN_PARAMS_INSTANCE_COUNT
 < 1)

58 #”rÜ 
Inv®id
 
NRF_SDH_BLE_PERIPHERAL_LINK_COUNT
 
v®ue
. 
S‘
 
™
 
š
 
SDK
 
cÚfig
 (
Äf_sdh_bË
).

65 
ušt16_t
 
	mcÚn_hªdË
;

66 
­p_tim”_id_t
 
	mtim”_id
;

67 
ušt8_t
 
	mupd©e_couÁ
;

68 
ušt8_t
 
	m·¿ms_ok
;

69 
bË_g­_cÚn_·¿ms_t
 
	m´eã¼ed_cÚn_·¿ms
;

70 } 
	tbË_cÚn_·¿ms_š¡ªû_t
;

72 
­p_tim”_t
 
	gm_tim”_d©a
[
NRF_BLE_CONN_PARAMS_INSTANCE_COUNT
] = {{{0}}};

73 
bË_cÚn_·¿ms_š¡ªû_t
 
	gm_cÚn_·¿ms_š¡ªûs
[
NRF_BLE_CONN_PARAMS_INSTANCE_COUNT
] = {{0}};

74 
bË_cÚn_·¿ms_š™_t
 
	gm_cÚn_·¿ms_cÚfig
;

75 
bË_g­_cÚn_·¿ms_t
 
	gm_´eã¼ed_cÚn_·¿ms
;

85 
bË_cÚn_·¿ms_š¡ªû_t
 * 
	$š¡ªû_g‘
(
ušt16_t
 
cÚn_hªdË
)

88 
ušt32_t
 
i
 = 0; i < 
NRF_BLE_CONN_PARAMS_INSTANCE_COUNT
; i++)

90 ià(
m_cÚn_·¿ms_š¡ªûs
[
i
].
cÚn_hªdË
 == conn_handle)

92  &
m_cÚn_·¿ms_š¡ªûs
[
i
];

96  
NULL
;

97 
	}
}

105 
__INLINE
 
	$š¡ªû_şaim
(
bË_cÚn_·¿ms_š¡ªû_t
 * 
p_š¡ªû
, 
ušt16_t
 
cÚn_hªdË
)

107 
p_š¡ªû
->
cÚn_hªdË
 = conn_handle;

108 
p_š¡ªû
->
upd©e_couÁ
 = 0;

109 
p_š¡ªû
->
´eã¼ed_cÚn_·¿ms
 = 
m_´eã¼ed_cÚn_·¿ms
;

110 
	}
}

117 
__INLINE
 
	$š¡ªû_ä“
(
bË_cÚn_·¿ms_š¡ªû_t
 * 
p_š¡ªû
)

119 
p_š¡ªû
->
cÚn_hªdË
 = 
BLE_CONN_HANDLE_INVALID
;

120 
	}
}

134 
boŞ
 
	$is_cÚn_·¿ms_ok
(
bË_g­_cÚn_·¿ms_t
 cÚ¡ * 
p_´eã¼ed_cÚn_·¿ms
,

135 
bË_g­_cÚn_·¿ms_t
 cÚ¡ * 
p_aùu®_cÚn_·¿ms
,

136 
ušt16_t
 
max_¦ave_Ï‹ncy_”r
,

137 
ušt16_t
 
max_sup_timeout_”r
)

139 
ušt32_t
 
max_®lowed_¦
 = 
p_´eã¼ed_cÚn_·¿ms
->
¦ave_Ï‹ncy
 + 
max_¦ave_Ï‹ncy_”r
;

140 
ušt32_t
 
mš_®lowed_¦
 = 
p_´eã¼ed_cÚn_·¿ms
->
¦ave_Ï‹ncy


141 - 
	`MIN
(
max_¦ave_Ï‹ncy_”r
, 
p_´eã¼ed_cÚn_·¿ms
->
¦ave_Ï‹ncy
);

142 
ušt32_t
 
max_®lowed_to
 = 
p_´eã¼ed_cÚn_·¿ms
->
cÚn_sup_timeout
 + 
max_sup_timeout_”r
;

143 
ušt32_t
 
mš_®lowed_to
 = 
p_´eã¼ed_cÚn_·¿ms
->
cÚn_sup_timeout


144 - 
	`MIN
(
max_sup_timeout_”r
, 
p_´eã¼ed_cÚn_·¿ms
->
cÚn_sup_timeout
);

149 ià((
p_aùu®_cÚn_·¿ms
->
max_cÚn_š‹rv®
 < 
p_´eã¼ed_cÚn_·¿ms
->
mš_cÚn_š‹rv®
)

150 || (
p_aùu®_cÚn_·¿ms
->
max_cÚn_š‹rv®
 > 
p_´eã¼ed_cÚn_·¿ms
->max_conn_interval))

152  
çl£
;

156 ià((
p_aùu®_cÚn_·¿ms
->
¦ave_Ï‹ncy
 < 
mš_®lowed_¦
)

157 || (
p_aùu®_cÚn_·¿ms
->
¦ave_Ï‹ncy
 > 
max_®lowed_¦
))

159  
çl£
;

163 ià((
p_aùu®_cÚn_·¿ms
->
cÚn_sup_timeout
 < 
mš_®lowed_to
)

164 || (
p_aùu®_cÚn_·¿ms
->
cÚn_sup_timeout
 > 
max_®lowed_to
))

166  
çl£
;

169  
Œue
;

170 
	}
}

173 
	$£nd_”rÜ_evt
(
»t_code_t
 
”r_code
)

175 ià(
m_cÚn_·¿ms_cÚfig
.
”rÜ_hªdËr
 !ğ
NULL
)

177 
m_cÚn_·¿ms_cÚfig
.
	`”rÜ_hªdËr
(
”r_code
);

179 
	}
}

189 
boŞ
 
	$£nd_upd©e_»que¡
(
ušt16_t
 
cÚn_hªdË
, 
bË_g­_cÚn_·¿ms_t
 * 
p_Ãw_cÚn_·¿ms
)

191 
»t_code_t
 
”r_code
;

193 
”r_code
 = 
	`sd_bË_g­_cÚn_·¿m_upd©e
(
cÚn_hªdË
, 
p_Ãw_cÚn_·¿ms
);

194 ià((
”r_code
 !ğ
NRF_SUCCESS
è&& (”r_cod!ğ
NRF_ERROR_BUSY
))

196 
	`£nd_”rÜ_evt
(
”r_code
);

199  (
”r_code
 =ğ
NRF_SUCCESS
);

200 
	}
}

207 
	$upd©e_timeout_hªdËr
(* 
p_cÚ‹xt
)

209 
ušt32_t
 
cÚn_hªdË
 = (ušt32_t)
p_cÚ‹xt
;

210 
bË_cÚn_·¿ms_š¡ªû_t
 * 
p_š¡ªû
 = 
	`š¡ªû_g‘
(
cÚn_hªdË
);

212 ià(
p_š¡ªû
 !ğ
NULL
)

215 ià(
p_š¡ªû
->
upd©e_couÁ
 < 
m_cÚn_·¿ms_cÚfig
.
max_cÚn_·¿ms_upd©e_couÁ
)

217 
boŞ
 
upd©e_£Á
 = 
	`£nd_upd©e_»que¡
(
cÚn_hªdË
, &
p_š¡ªû
->
´eã¼ed_cÚn_·¿ms
);

218 ià(
upd©e_£Á
)

220 
p_š¡ªû
->
upd©e_couÁ
++;

225 
p_š¡ªû
->
upd©e_couÁ
 = 0;

228 ià(
m_cÚn_·¿ms_cÚfig
.
discÚÃù_Ú_ç
)

230 
»t_code_t
 
”r_code
;

232 
”r_code
 = 
	`sd_bË_g­_discÚÃù
(
cÚn_hªdË
, 
BLE_HCI_CONN_INTERVAL_UNACCEPTABLE
);

233 ià((
”r_code
 !ğ
NRF_SUCCESS
è&& (”r_cod!ğ
NRF_ERROR_INVALID_STATE
))

235 
	`£nd_”rÜ_evt
(
”r_code
);

240 ià(
m_cÚn_·¿ms_cÚfig
.
evt_hªdËr
 !ğ
NULL
)

242 
bË_cÚn_·¿ms_evt_t
 
evt
;

244 
evt
.
evt_ty³
 = 
BLE_CONN_PARAMS_EVT_FAILED
;

245 
evt
.
cÚn_hªdË
 = conn_handle;

246 
m_cÚn_·¿ms_cÚfig
.
	`evt_hªdËr
(&
evt
);

250 
	}
}

253 
»t_code_t
 
	$bË_cÚn_·¿ms_š™
(cÚ¡ 
bË_cÚn_·¿ms_š™_t
 * 
p_š™
)

255 
»t_code_t
 
”r_code
;

257 
	`VERIFY_PARAM_NOT_NULL
(
p_š™
);

259 
m_cÚn_·¿ms_cÚfig
 = *
p_š™
;

260 
m_cÚn_·¿ms_cÚfig
.
p_cÚn_·¿ms
 = &
m_´eã¼ed_cÚn_·¿ms
;

262 ià(
p_š™
->
p_cÚn_·¿ms
 !ğ
NULL
)

265 
”r_code
 = 
	`sd_bË_g­_µı_£t
(
p_š™
->
p_cÚn_·¿ms
);

266 ià(
”r_code
 !ğ
NRF_SUCCESS
)

268  
”r_code
;

270 
m_´eã¼ed_cÚn_·¿ms
 = *
p_š™
->
p_cÚn_·¿ms
;

275 
”r_code
 = 
	`sd_bË_g­_µı_g‘
(&
m_´eã¼ed_cÚn_·¿ms
);

276 ià(
”r_code
 !ğ
NRF_SUCCESS
)

278  
”r_code
;

283 
ušt32_t
 
i
 = 0; i < 
NRF_BLE_CONN_PARAMS_INSTANCE_COUNT
; i++)

285 
bË_cÚn_·¿ms_š¡ªû_t
 * 
p_š¡ªû
 = &
m_cÚn_·¿ms_š¡ªûs
[
i
];

287 
	`š¡ªû_ä“
(
p_š¡ªû
);

288 
p_š¡ªû
->
tim”_id
 = &
m_tim”_d©a
[
i
];

290 
”r_code
 = 
	`­p_tim”_ü—‹
(&
p_š¡ªû
->
tim”_id
,

291 
APP_TIMER_MODE_SINGLE_SHOT
,

292 
upd©e_timeout_hªdËr
);

293 ià(
”r_code
 !ğ
NRF_SUCCESS
)

295  
NRF_ERROR_INTERNAL
;

300  
NRF_SUCCESS
;

301 
	}
}

304 
»t_code_t
 
	$bË_cÚn_·¿ms_¡İ
()

306 
»t_code_t
 
”r_code
;

309 
ušt32_t
 
i
 = 0; i < 
NRF_BLE_CONN_PARAMS_INSTANCE_COUNT
; i++)

311 
”r_code
 = 
	`­p_tim”_¡İ
(
m_cÚn_·¿ms_š¡ªûs
[
i
].
tim”_id
);

312 
”r_code
)

314 
NRF_SUCCESS
:

318 
NRF_ERROR_INVALID_STATE
:

322 
NRF_ERROR_NO_MEM
:

323  
NRF_ERROR_BUSY
;

325 
NRF_ERROR_INVALID_PARAM
:

328  
NRF_ERROR_INTERNAL
;

332  
NRF_SUCCESS
;

333 
	}
}

341 
	$cÚn_·¿ms_ÃgÙŸtiÚ
(
ušt16_t
 
cÚn_hªdË
, 
bË_cÚn_·¿ms_š¡ªû_t
 * 
p_š¡ªû
)

344 ià(!
p_š¡ªû
->
·¿ms_ok
)

346 
»t_code_t
 
”r_code
;

347 
ušt32_t
 
timeout_ticks
;

349 ià(
p_š¡ªû
->
upd©e_couÁ
 == 0)

352 
timeout_ticks
 = 
m_cÚn_·¿ms_cÚfig
.
fœ¡_cÚn_·¿ms_upd©e_d–ay
;

356 
timeout_ticks
 = 
m_cÚn_·¿ms_cÚfig
.
Ãxt_cÚn_·¿ms_upd©e_d–ay
;

359 
”r_code
 = 
	`­p_tim”_¡¬t
(
p_š¡ªû
->
tim”_id
, 
timeout_ticks
, (*)(
ušt32_t
)
cÚn_hªdË
);

360 ià(
”r_code
 !ğ
NRF_SUCCESS
)

362 
	`£nd_”rÜ_evt
(
”r_code
);

367 
p_š¡ªû
->
upd©e_couÁ
 = 0;

370 ià(
m_cÚn_·¿ms_cÚfig
.
evt_hªdËr
 !ğ
NULL
)

372 
bË_cÚn_·¿ms_evt_t
 
evt
;

374 
evt
.
evt_ty³
 = 
BLE_CONN_PARAMS_EVT_SUCCEEDED
;

375 
evt
.
cÚn_hªdË
 = conn_handle;

376 
m_cÚn_·¿ms_cÚfig
.
	`evt_hªdËr
(&
evt
);

379 
	}
}

386 
	$Ú_cÚÃù
(
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

388 
ušt8_t
 
rŞe
 = 
p_bË_evt
->
evt
.
g­_evt
.
·¿ms
.
cÚÃùed
.role;

389 
ušt16_t
 
cÚn_hªdË
 = 
p_bË_evt
->
evt
.
g­_evt
.conn_handle;

391 ià(
rŞe
 !ğ
BLE_GAP_ROLE_PERIPH
)

396 
bË_cÚn_·¿ms_š¡ªû_t
 * 
p_š¡ªû
 = 
	`š¡ªû_g‘
(
BLE_CONN_HANDLE_INVALID
);

398 ià(
p_š¡ªû
 =ğ
NULL
)

400 
	`£nd_”rÜ_evt
(
NRF_ERROR_NO_MEM
);

404 
	`š¡ªû_şaim
(
p_š¡ªû
, 
cÚn_hªdË
);

405 
p_š¡ªû
->
·¿ms_ok
 = 
	`is_cÚn_·¿ms_ok
(&p_š¡ªû->
´eã¼ed_cÚn_·¿ms
,

406 &
p_bË_evt
->
evt
.
g­_evt
.
·¿ms
.
cÚÃùed
.
cÚn_·¿ms
,

407 
NRF_BLE_CONN_PARAMS_MAX_SLAVE_LATENCY_DEVIATION
,

408 
NRF_BLE_CONN_PARAMS_MAX_SUPERVISION_TIMEOUT_DEVIATION
);

411 ià(
m_cÚn_·¿ms_cÚfig
.
¡¬t_Ú_nÙify_cccd_hªdË
 =ğ
BLE_GATT_HANDLE_INVALID
)

413 
	`cÚn_·¿ms_ÃgÙŸtiÚ
(
cÚn_hªdË
, 
p_š¡ªû
);

415 
	}
}

422 
	$Ú_discÚÃù
(
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

424 
»t_code_t
 
”r_code
;

425 
ušt16_t
 
cÚn_hªdË
 = 
p_bË_evt
->
evt
.
g­_evt
.conn_handle;

426 
bË_cÚn_·¿ms_š¡ªû_t
 * 
p_š¡ªû
 = 
	`š¡ªû_g‘
(
cÚn_hªdË
);

428 ià(
p_š¡ªû
 !ğ
NULL
)

431 
”r_code
 = 
	`­p_tim”_¡İ
(
p_š¡ªû
->
tim”_id
);

432 ià(
”r_code
 !ğ
NRF_SUCCESS
)

434 
	`£nd_”rÜ_evt
(
”r_code
);

437 
	`š¡ªû_ä“
(
p_š¡ªû
);

439 
	}
}

448 
	$Ú_wr™e
(
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

450 
bË_g©ts_evt_wr™e_t
 cÚ¡ * 
p_evt_wr™e
 = &
p_bË_evt
->
evt
.
g©ts_evt
.
·¿ms
.
wr™e
;

454 (
p_evt_wr™e
->
hªdË
 =ğ
m_cÚn_·¿ms_cÚfig
.
¡¬t_Ú_nÙify_cccd_hªdË
)

456 (
p_evt_wr™e
->
Ën
 == 2)

459 
ušt16_t
 
cÚn_hªdË
 = 
p_bË_evt
->
evt
.
g­_evt
.conn_handle;

460 
bË_cÚn_·¿ms_š¡ªû_t
 * 
p_š¡ªû
 = 
	`š¡ªû_g‘
(
cÚn_hªdË
);

462 ià(
p_š¡ªû
 !ğ
NULL
)

465 ià(
	`bË_¤v_is_nÙifiÿtiÚ_’abËd
(
p_evt_wr™e
->
d©a
))

468 
	`cÚn_·¿ms_ÃgÙŸtiÚ
(
cÚn_hªdË
, 
p_š¡ªû
);

472 
»t_code_t
 
”r_code
;

475 
”r_code
 = 
	`­p_tim”_¡İ
(
p_š¡ªû
->
tim”_id
);

476 ià(
”r_code
 !ğ
NRF_SUCCESS
)

478 
	`£nd_”rÜ_evt
(
”r_code
);

483 
	}
}

493 
	$Ú_cÚn_·¿ms_upd©e
(
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

495 
ušt16_t
 
cÚn_hªdË
 = 
p_bË_evt
->
evt
.
g­_evt
.conn_handle;

496 
bË_cÚn_·¿ms_š¡ªû_t
 * 
p_š¡ªû
 = 
	`š¡ªû_g‘
(
cÚn_hªdË
);

498 ià(
p_š¡ªû
 !ğ
NULL
)

500 
p_š¡ªû
->
·¿ms_ok
 = 
	`is_cÚn_·¿ms_ok
(

501 &
p_š¡ªû
->
´eã¼ed_cÚn_·¿ms
,

502 &
p_bË_evt
->
evt
.
g­_evt
.
·¿ms
.
cÚn_·¿m_upd©e
.
cÚn_·¿ms
,

503 
NRF_BLE_CONN_PARAMS_MAX_SLAVE_LATENCY_DEVIATION
,

504 
NRF_BLE_CONN_PARAMS_MAX_SUPERVISION_TIMEOUT_DEVIATION
);

506 
	`cÚn_·¿ms_ÃgÙŸtiÚ
(
cÚn_hªdË
, 
p_š¡ªû
);

508 
	}
}

517 
	$bË_evt_hªdËr
(
bË_evt_t
 cÚ¡ * 
p_bË_evt
, * 
p_cÚ‹xt
)

519 
p_bË_evt
->
h—d”
.
evt_id
)

521 
BLE_GAP_EVT_CONNECTED
:

522 
	`Ú_cÚÃù
(
p_bË_evt
);

525 
BLE_GAP_EVT_DISCONNECTED
:

526 
	`Ú_discÚÃù
(
p_bË_evt
);

529 
BLE_GATTS_EVT_WRITE
:

530 
	`Ú_wr™e
(
p_bË_evt
);

533 
BLE_GAP_EVT_CONN_PARAM_UPDATE
:

534 
	`Ú_cÚn_·¿ms_upd©e
(
p_bË_evt
);

541 
	}
}

544 
»t_code_t
 
	$bË_cÚn_·¿ms_chªge_cÚn_·¿ms
(
ušt16_t
 
cÚn_hªdË
,

545 
bË_g­_cÚn_·¿ms_t
 * 
p_Ãw_·¿ms
)

547 
»t_code_t
 
”r_code
 = 
BLE_ERROR_INVALID_CONN_HANDLE
;

548 
bË_cÚn_·¿ms_š¡ªû_t
 * 
p_š¡ªû
 = 
	`š¡ªû_g‘
(
cÚn_hªdË
);

550 ià(
p_Ãw_·¿ms
 =ğ
NULL
)

552 
p_Ãw_·¿ms
 = &
m_´eã¼ed_cÚn_·¿ms
;

555 ià(
p_š¡ªû
 !ğ
NULL
)

558 
”r_code
 = 
	`sd_bË_g­_cÚn_·¿m_upd©e
(
cÚn_hªdË
, 
p_Ãw_·¿ms
);

559 ià(
”r_code
 =ğ
NRF_SUCCESS
)

561 
p_š¡ªû
->
·¿ms_ok
 = 
çl£
;

562 
p_š¡ªû
->
upd©e_couÁ
 = 1;

563 
p_š¡ªû
->
´eã¼ed_cÚn_·¿ms
 = *
p_Ãw_·¿ms
;

567  
”r_code
;

568 
	}
}

570 
NRF_SDH_BLE_OBSERVER
(
m_bË_ob£rv”
, 
BLE_CONN_PARAMS_BLE_OBSERVER_PRIO
, 
bË_evt_hªdËr
, 
NULL
);

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\ble\common\ble_conn_state.c

40 
	~"bË_cÚn_¡©e.h
"

41 
	~<¡dboŞ.h
>

42 
	~<¡dšt.h
>

43 
	~<¡ršg.h
>

44 
	~"bË.h
"

45 
	~"Äf_©æags.h
"

46 
	~"­p_”rÜ.h
"

47 
	~"Äf_sdh_bË.h
"

48 
	~"­p_ut_¶©fÜm.h
"

52 
	#DEFAULT_FLAG_COLLECTION_COUNT
 5

	)

53 
	#TOTAL_FLAG_COLLECTION_COUNT
 (
DEFAULT_FLAG_COLLECTION_COUNT
 \

54 + 
BLE_CONN_STATE_USER_FLAG_COUNT
è

	)

60 
Äf_©æags_t
 
	mv®id_æags
;

61 
Äf_©æags_t
 
	mcÚÃùed_æags
;

62 
Äf_©æags_t
 
	mûÁ¿l_æags
;

63 
Äf_©æags_t
 
	m’üy±ed_æags
;

64 
Äf_©æags_t
 
	mm™m_´Ùeùed_æags
;

65 
Äf_©æags_t
 
	mu£r_æags
[
BLE_CONN_STATE_USER_FLAG_COUNT
];

66 } 
	tbË_cÚn_¡©e_æag_cŞËùiÚs_t
;

69 
	gANON_UNIONS_ENABLE
;

75 
Äf_©æags_t
 
	macquœed_æags
;

78 
bË_cÚn_¡©e_æag_cŞËùiÚs_t
 
	mæags
;

79 
Äf_©æags_t
 
	mæag_¬¿y
[
TOTAL_FLAG_COLLECTION_COUNT
];

81 } 
	tbË_cÚn_¡©e_t
;

83 
	gANON_UNIONS_DISABLE
;

86 
bË_cÚn_¡©e_t
 
	gm_bcs
 = {0};

91 
	$bcs_š‹º®_¡©e_»£t
()

93 
	`mem£t
Ğ&
m_bcs
, 0, (
bË_cÚn_¡©e_t
) );

94 
	}
}

97 
bË_cÚn_¡©e_cÚn_hªdË_li¡_t
 
	$cÚn_hªdË_li¡_g‘
(
Äf_©æags_t
 
æags
)

99 
bË_cÚn_¡©e_cÚn_hªdË_li¡_t
 
cÚn_hªdË_li¡
;

100 
cÚn_hªdË_li¡
.
Ën
 = 0;

102 ià(
æags
 != 0)

104 
ušt32_t
 
i
 = 0; i < 
BLE_CONN_STATE_MAX_CONNECTIONS
; i++)

106 ià(
	`Äf_©æags_g‘
(&
æags
, 
i
))

108 
cÚn_hªdË_li¡
.
cÚn_hªdËs
[cÚn_hªdË_li¡.
Ën
++] = 
i
;

113  
cÚn_hªdË_li¡
;

114 
	}
}

117 
ušt32_t
 
	$aùive_æag_couÁ
(
Äf_©æags_t
 
æags
)

119 
ušt32_t
 
£t_æag_couÁ
 = 0;

121 
ušt32_t
 
i
 = 0; i < 
BLE_CONN_STATE_MAX_CONNECTIONS
; i++)

123 ià(
	`Äf_©æags_g‘
(&
æags
, 
i
))

125 
£t_æag_couÁ
 += 1;

128  
£t_æag_couÁ
;

129 
	}
}

140 
boŞ
 
	$»cÜd_aùiv©e
(
ušt16_t
 
cÚn_hªdË
)

142 ià(
cÚn_hªdË
 >ğ
BLE_CONN_STATE_MAX_CONNECTIONS
)

144  
çl£
;

146 
	`Äf_©æags_£t
(&
m_bcs
.
æags
.
cÚÃùed_æags
, 
cÚn_hªdË
);

147 
	`Äf_©æags_£t
(&
m_bcs
.
æags
.
v®id_æags
, 
cÚn_hªdË
);

148  
Œue
;

149 
	}
}

156 
	$»cÜd_šv®id©e
(
ušt16_t
 
cÚn_hªdË
)

158 
ušt32_t
 
i
 = 0; i < 
TOTAL_FLAG_COLLECTION_COUNT
; i++)

160 
	`Äf_©æags_ş—r
(&
m_bcs
.
æag_¬¿y
[
i
], 
cÚn_hªdË
);

162 
	}
}

169 
	$»cÜd_£t_discÚÃùed
(
ušt16_t
 
cÚn_hªdË
)

171 
	`Äf_©æags_ş—r
(&
m_bcs
.
æags
.
cÚÃùed_æags
, 
cÚn_hªdË
);

172 
	}
}

178 
	$»cÜd_purge_discÚÃùed
()

180 
Äf_©æags_t
 
discÚÃùed_æags
 = ~
m_bcs
.
æags
.
cÚÃùed_æags
;

181 
bË_cÚn_¡©e_cÚn_hªdË_li¡_t
 
discÚÃùed_li¡
;

183 
	`UNUSED_RETURN_VALUE
(
	`Äf_©omic_u32_ªd
(&
discÚÃùed_æags
, 
m_bcs
.
æags
.
v®id_æags
));

184 
discÚÃùed_li¡
 = 
	`cÚn_hªdË_li¡_g‘
(
discÚÃùed_æags
);

186 
ušt32_t
 
i
 = 0; i < 
discÚÃùed_li¡
.
Ën
; i++)

188 
	`»cÜd_šv®id©e
(
discÚÃùed_li¡
.
cÚn_hªdËs
[
i
]);

190 
	}
}

199 
boŞ
 
	$u£r_æag_is_acquœed
(
bË_cÚn_¡©e_u£r_æag_id_t
 
æag_id
)

201  
	`Äf_©æags_g‘
(&
m_bcs
.
acquœed_æags
, 
æag_id
);

202 
	}
}

205 
	$bË_cÚn_¡©e_š™
()

207 
	`bcs_š‹º®_¡©e_»£t
();

208 
	}
}

216 
	$bË_evt_hªdËr
(
bË_evt_t
 cÚ¡ * 
p_bË_evt
, * 
p_cÚ‹xt
)

218 
ušt16_t
 
cÚn_hªdË
 = 
p_bË_evt
->
evt
.
g­_evt
.conn_handle;

219 
p_bË_evt
->
h—d”
.
evt_id
)

221 
BLE_GAP_EVT_CONNECTED
:

222 
	`»cÜd_purge_discÚÃùed
();

224 iàĞ!
	`»cÜd_aùiv©e
(
cÚn_hªdË
) )

227 
	`APP_ERROR_HANDLER
(
NRF_ERROR_NO_MEM
);

229 ià((
p_bË_evt
->
evt
.
g­_evt
.
·¿ms
.
cÚÃùed
.
rŞe
 !ğ
BLE_GAP_ROLE_PERIPH
))

232 
	`Äf_©æags_£t
(&
m_bcs
.
æags
.
ûÁ¿l_æags
, 
cÚn_hªdË
);

237 
BLE_GAP_EVT_DISCONNECTED
:

238 
	`»cÜd_£t_discÚÃùed
(
cÚn_hªdË
);

241 
BLE_GAP_EVT_CONN_SEC_UPDATE
:

243 
boŞ
 
’üy±ed
 = (
p_bË_evt
->
evt
.
g­_evt
.
·¿ms
.
cÚn_£c_upd©e
.
cÚn_£c
.
£c_mode
.
lv
 > 1);

244 
boŞ
 
m™m
 = (
p_bË_evt
->
evt
.
g­_evt
.
·¿ms
.
cÚn_£c_upd©e
.
cÚn_£c
.
£c_mode
.
lv
 > 2);

246 ià(
’üy±ed
)

248 
	`Äf_©æags_£t
(&
m_bcs
.
æags
.
’üy±ed_æags
, 
cÚn_hªdË
);

249 ià(
m™m
)

251 
	`Äf_©æags_£t
(&
m_bcs
.
æags
.
m™m_´Ùeùed_æags
, 
cÚn_hªdË
);

255 
	`Äf_©æags_ş—r
(&
m_bcs
.
æags
.
m™m_´Ùeùed_æags
, 
cÚn_hªdË
);

260 
	`Äf_©æags_ş—r
(&
m_bcs
.
æags
.
’üy±ed_æags
, 
cÚn_hªdË
);

261 
	`Äf_©æags_ş—r
(&
m_bcs
.
æags
.
m™m_´Ùeùed_æags
, 
cÚn_hªdË
);

266 
	}
}

268 
NRF_SDH_BLE_OBSERVER
(
m_bË_evt_ob£rv”
, 
BLE_CONN_STATE_BLE_OBSERVER_PRIO
, 
bË_evt_hªdËr
, 
NULL
);

271 
boŞ
 
	$bË_cÚn_¡©e_v®id
(
ušt16_t
 
cÚn_hªdË
)

273 ià(
cÚn_hªdË
 >ğ
BLE_CONN_STATE_MAX_CONNECTIONS
)

275  
çl£
;

277  
	`Äf_©æags_g‘
(&
m_bcs
.
æags
.
v®id_æags
, 
cÚn_hªdË
);

278 
	}
}

281 
ušt8_t
 
	$bË_cÚn_¡©e_rŞe
(
ušt16_t
 
cÚn_hªdË
)

283 
ušt8_t
 
rŞe
 = 
BLE_GAP_ROLE_INVALID
;

285 ià(
	`bË_cÚn_¡©e_v®id
(
cÚn_hªdË
))

287 #ià!
	`defšed
 (
S112
)

288 
boŞ
 
ûÁ¿l
 = 
	`Äf_©æags_g‘
(&
m_bcs
.
æags
.
ûÁ¿l_æags
, 
cÚn_hªdË
);

289 
rŞe
 = 
ûÁ¿l
 ? 
BLE_GAP_ROLE_CENTRAL
 : 
BLE_GAP_ROLE_PERIPH
;

291 
rŞe
 = 
BLE_GAP_ROLE_PERIPH
;

295  
rŞe
;

296 
	}
}

299 
bË_cÚn_¡©e_¡©us_t
 
	$bË_cÚn_¡©e_¡©us
(
ušt16_t
 
cÚn_hªdË
)

301 
bË_cÚn_¡©e_¡©us_t
 
cÚn_¡©us
 = 
BLE_CONN_STATUS_INVALID
;

303 ià(
	`bË_cÚn_¡©e_v®id
(
cÚn_hªdË
))

305 
boŞ
 
cÚÃùed
 = 
	`Äf_©æags_g‘
(&
m_bcs
.
æags
.
cÚÃùed_æags
, 
cÚn_hªdË
);

306 
cÚn_¡©us
 = 
cÚÃùed
 ? 
BLE_CONN_STATUS_CONNECTED
 : 
BLE_CONN_STATUS_DISCONNECTED
;

309  
cÚn_¡©us
;

310 
	}
}

313 
boŞ
 
	$bË_cÚn_¡©e_’üy±ed
(
ušt16_t
 
cÚn_hªdË
)

315 ià(
	`bË_cÚn_¡©e_v®id
(
cÚn_hªdË
))

317  
	`Äf_©æags_g‘
(&
m_bcs
.
æags
.
’üy±ed_æags
, 
cÚn_hªdË
);

319  
çl£
;

320 
	}
}

323 
boŞ
 
	$bË_cÚn_¡©e_m™m_´Ùeùed
(
ušt16_t
 
cÚn_hªdË
)

325 ià(
	`bË_cÚn_¡©e_v®id
(
cÚn_hªdË
))

327  
	`Äf_©æags_g‘
(&
m_bcs
.
æags
.
m™m_´Ùeùed_æags
, 
cÚn_hªdË
);

329  
çl£
;

330 
	}
}

333 
ušt32_t
 
	$bË_cÚn_¡©e_cÚn_couÁ
()

335  
	`aùive_æag_couÁ
(
m_bcs
.
æags
.
cÚÃùed_æags
);

336 
	}
}

339 
ušt32_t
 
	$bË_cÚn_¡©e_ûÁ¿l_cÚn_couÁ
()

341 
Äf_©æags_t
 
ûÁ¿l_cÚn_æags
 = 
m_bcs
.
æags
.
ûÁ¿l_æags
;

342 
	`UNUSED_RETURN_VALUE
(
	`Äf_©omic_u32_ªd
(&
ûÁ¿l_cÚn_æags
, 
m_bcs
.
æags
.
cÚÃùed_æags
));

344  
	`aùive_æag_couÁ
(
ûÁ¿l_cÚn_æags
);

345 
	}
}

348 
ušt32_t
 
	$bË_cÚn_¡©e_³rh”®_cÚn_couÁ
()

350 
Äf_©æags_t
 
³rh”®_cÚn_æags
 = ~
m_bcs
.
æags
.
ûÁ¿l_æags
;

351 
	`UNUSED_RETURN_VALUE
(
	`Äf_©omic_u32_ªd
(&
³rh”®_cÚn_æags
, 
m_bcs
.
æags
.
cÚÃùed_æags
));

353  
	`aùive_æag_couÁ
(
³rh”®_cÚn_æags
);

354 
	}
}

357 
bË_cÚn_¡©e_cÚn_hªdË_li¡_t
 
	$bË_cÚn_¡©e_cÚn_hªdËs
()

359  
	`cÚn_hªdË_li¡_g‘
(
m_bcs
.
æags
.
v®id_æags
);

360 
	}
}

363 
bË_cÚn_¡©e_cÚn_hªdË_li¡_t
 
	$bË_cÚn_¡©e_ûÁ¿l_hªdËs
()

365 
Äf_©æags_t
 
ûÁ¿l_cÚn_æags
 = 
m_bcs
.
æags
.
ûÁ¿l_æags
;

366 
	`UNUSED_RETURN_VALUE
(
	`Äf_©omic_u32_ªd
(&
ûÁ¿l_cÚn_æags
, 
m_bcs
.
æags
.
cÚÃùed_æags
));

368  
	`cÚn_hªdË_li¡_g‘
(
ûÁ¿l_cÚn_æags
);

369 
	}
}

372 
bË_cÚn_¡©e_cÚn_hªdË_li¡_t
 
	$bË_cÚn_¡©e_³rh_hªdËs
()

374 
Äf_©æags_t
 
³rh”®_cÚn_æags
 = ~
m_bcs
.
æags
.
ûÁ¿l_æags
;

375 
	`UNUSED_RETURN_VALUE
(
	`Äf_©omic_u32_ªd
(&
³rh”®_cÚn_æags
, 
m_bcs
.
æags
.
cÚÃùed_æags
));

377  
	`cÚn_hªdË_li¡_g‘
(
³rh”®_cÚn_æags
);

378 
	}
}

381 
ušt16_t
 
	$bË_cÚn_¡©e_cÚn_idx
(
ušt16_t
 
cÚn_hªdË
)

383 ià(
	`bË_cÚn_¡©e_v®id
(
cÚn_hªdË
))

385  
cÚn_hªdË
;

389  
BLE_CONN_STATE_MAX_CONNECTIONS
;

391 
	}
}

394 
bË_cÚn_¡©e_u£r_æag_id_t
 
	$bË_cÚn_¡©e_u£r_æag_acquœe
()

396 
ušt32_t
 
acquœed_æag
 = 
	`Äf_©æags_fšd_ªd_£t_æag
(&
m_bcs
.
acquœed_æags
,

397 
BLE_CONN_STATE_USER_FLAG_COUNT
);

399 ià(
acquœed_æag
 =ğ
BLE_CONN_STATE_USER_FLAG_COUNT
)

401  
BLE_CONN_STATE_USER_FLAG_INVALID
;

403  (
bË_cÚn_¡©e_u£r_æag_id_t
)
acquœed_æag
;

404 
	}
}

407 
boŞ
 
	$bË_cÚn_¡©e_u£r_æag_g‘
(
ušt16_t
 
cÚn_hªdË
, 
bË_cÚn_¡©e_u£r_æag_id_t
 
æag_id
)

409 ià(
	`u£r_æag_is_acquœed
(
æag_id
è&& 
	`bË_cÚn_¡©e_v®id
(
cÚn_hªdË
))

411  
	`Äf_©æags_g‘
(&
m_bcs
.
æags
.
u£r_æags
[
æag_id
], 
cÚn_hªdË
);

415  
çl£
;

417 
	}
}

420 
	$bË_cÚn_¡©e_u£r_æag_£t
(
ušt16_t
 
cÚn_hªdË
,

421 
bË_cÚn_¡©e_u£r_æag_id_t
 
æag_id
,

422 
boŞ
 
v®ue
)

424 ià(
	`u£r_æag_is_acquœed
(
æag_id
è&& 
	`bË_cÚn_¡©e_v®id
(
cÚn_hªdË
))

426 ià(
v®ue
)

428 
	`Äf_©æags_£t
(&
m_bcs
.
æags
.
u£r_æags
[
æag_id
], 
cÚn_hªdË
);

432 
	`Äf_©æags_ş—r
(&
m_bcs
.
æags
.
u£r_æags
[
æag_id
], 
cÚn_hªdË
);

435 
	}
}

438 
ušt32_t
 
	$fÜ_—ch_£t_æag
(
Äf_©æags_t
 
æags
,

439 
bË_cÚn_¡©e_u£r_funùiÚ_t
 
u£r_funùiÚ
,

440 * 
p_cÚ‹xt
)

442 ià(
u£r_funùiÚ
 =ğ
NULL
)

447 
ušt32_t
 
ÿÎ_couÁ
 = 0;

449 ià(
æags
 != 0)

451 
ušt32_t
 
i
 = 0; i < 
BLE_CONN_STATE_MAX_CONNECTIONS
; i++)

453 ià(
	`Äf_©æags_g‘
(&
æags
, 
i
))

455 
	`u£r_funùiÚ
(
i
, 
p_cÚ‹xt
);

456 
ÿÎ_couÁ
 += 1;

460  
ÿÎ_couÁ
;

461 
	}
}

464 
ušt32_t
 
	$bË_cÚn_¡©e_fÜ_—ch_cÚÃùed
(
bË_cÚn_¡©e_u£r_funùiÚ_t
 
u£r_funùiÚ
,

465 * 
p_cÚ‹xt
)

467  
	`fÜ_—ch_£t_æag
(
m_bcs
.
æags
.
cÚÃùed_æags
, 
u£r_funùiÚ
, 
p_cÚ‹xt
);

468 
	}
}

471 
ušt32_t
 
	$bË_cÚn_¡©e_fÜ_—ch_£t_u£r_æag
(
bË_cÚn_¡©e_u£r_æag_id_t
 
æag_id
,

472 
bË_cÚn_¡©e_u£r_funùiÚ_t
 
u£r_funùiÚ
,

473 * 
p_cÚ‹xt
)

475 ià(!
	`u£r_æag_is_acquœed
(
æag_id
))

480  
	`fÜ_—ch_£t_æag
(
m_bcs
.
æags
.
u£r_æags
[
æag_id
], 
u£r_funùiÚ
, 
p_cÚ‹xt
);

481 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\ble\common\ble_srv_common.c

45 
	~"bË_¤v_commÚ.h
"

46 
	~<¡ršg.h
>

47 
	~"nÜdic_commÚ.h
"

48 
	~"­p_”rÜ.h
"

49 
	~"bË.h
"

51 
boŞ
 
	$bË_¤v_is_nÙifiÿtiÚ_’abËd
(
ušt8_t
 cÚ¡ * 
p_’coded_d©a
)

53 
ušt16_t
 
cccd_v®ue
 = 
	`ušt16_decode
(
p_’coded_d©a
);

54  ((
cccd_v®ue
 & 
BLE_GATT_HVX_NOTIFICATION
) != 0);

55 
	}
}

57 
boŞ
 
	$bË_¤v_is_šdiÿtiÚ_’abËd
(
ušt8_t
 cÚ¡ * 
p_’coded_d©a
)

59 
ušt16_t
 
cccd_v®ue
 = 
	`ušt16_decode
(
p_’coded_d©a
);

60  ((
cccd_v®ue
 & 
BLE_GATT_HVX_INDICATION
) != 0);

61 
	}
}

63 
ušt8_t
 
	$bË_¤v_»pÜt_»f_’code
(
ušt8_t
 * 
p_’coded_bufãr
,

64 cÚ¡ 
bË_¤v_»pÜt_»f_t
 * 
p_»pÜt_»f
)

66 
ušt8_t
 
Ën
 = 0;

68 
p_’coded_bufãr
[
Ën
++] = 
p_»pÜt_»f
->
»pÜt_id
;

69 
p_’coded_bufãr
[
Ën
++] = 
p_»pÜt_»f
->
»pÜt_ty³
;

71 
	`APP_ERROR_CHECK_BOOL
(
Ën
 =ğ
BLE_SRV_ENCODED_REPORT_REF_LEN
);

72  
Ën
;

73 
	}
}

76 
	$bË_¤v_ascii_to_utf8
(
bË_¤v_utf8_¡r_t
 * 
p_utf8
, * 
p_ascii
)

78 
p_utf8
->
Ëngth
 = (
ušt16_t
)
	`¡¾’
(
p_ascii
);

79 
p_utf8
->
p_¡r
 = (
ušt8_t
 *)
p_ascii
;

80 
	}
}

90 
šlše
 
	$£t_£cur™y_»q
(
£cur™y_»q_t
 
Ëv–
, 
bË_g­_cÚn_£c_mode_t
 * 
p_³rm
)

94 
	`BLE_GAP_CONN_SEC_MODE_SET_NO_ACCESS
(
p_³rm
);

95 
Ëv–
)

97 
SEC_NO_ACCESS
:

98 
	`BLE_GAP_CONN_SEC_MODE_SET_NO_ACCESS
(
p_³rm
);

100 
SEC_OPEN
:

101 
	`BLE_GAP_CONN_SEC_MODE_SET_OPEN
(
p_³rm
);

103 
SEC_JUST_WORKS
:

104 
	`BLE_GAP_CONN_SEC_MODE_SET_ENC_NO_MITM
(
p_³rm
);

106 
SEC_MITM
:

107 
	`BLE_GAP_CONN_SEC_MODE_SET_ENC_WITH_MITM
(
p_³rm
);

109 
SEC_SIGNED
:

110 
	`BLE_GAP_CONN_SEC_MODE_SET_SIGNED_NO_MITM
(
p_³rm
);

112 
SEC_SIGNED_MITM
:

113 
	`BLE_GAP_CONN_SEC_MODE_SET_SIGNED_WITH_MITM
(
p_³rm
);

117 
	}
}

120 
ušt32_t
 
	$ch¬aù”i¡ic_add
(
ušt16_t
 
£rviû_hªdË
,

121 
bË_add_ch¬_·¿ms_t
 * 
p_ch¬_´İs
,

122 
bË_g©ts_ch¬_hªdËs_t
 * 
p_ch¬_hªdË
)

124 
bË_g©ts_ch¬_md_t
 
ch¬_md
;

125 
bË_g©ts_©Œ_t
 
©Œ_ch¬_v®ue
;

126 
bË_uuid_t
 
ch¬_uuid
;

127 
bË_g©ts_©Œ_md_t
 
©Œ_md
;

128 
bË_g©ts_©Œ_md_t
 
u£r_desü_©Œ_md
;

129 
bË_g©ts_©Œ_md_t
 
cccd_md
;

131 ià(
p_ch¬_´İs
->
uuid_ty³
 == 0)

133 
ch¬_uuid
.
ty³
 = 
BLE_UUID_TYPE_BLE
;

137 
ch¬_uuid
.
ty³
 = 
p_ch¬_´İs
->
uuid_ty³
;

139 
ch¬_uuid
.
uuid
 = 
p_ch¬_´İs
->uuid;

141 
	`mem£t
(&
©Œ_md
, 0, (
bË_g©ts_©Œ_md_t
));

142 
	`£t_£cur™y_»q
(
p_ch¬_´İs
->
»ad_acûss
, &
©Œ_md
.
»ad_³rm
);

143 
	`£t_£cur™y_»q
(
p_ch¬_´İs
->
wr™e_acûss
, & 
©Œ_md
.
wr™e_³rm
);

144 
©Œ_md
.
rd_auth
 = (
p_ch¬_´İs
->
is_deã»d_»ad
 ? 1 : 0);

145 
©Œ_md
.
wr_auth
 = (
p_ch¬_´İs
->
is_deã»d_wr™e
 ? 1 : 0);

146 
©Œ_md
.
vËn
 = (
p_ch¬_´İs
->
is_v¬_Ën
 ? 1 : 0);

147 
©Œ_md
.
vloc
 = (
p_ch¬_´İs
->
is_v®ue_u£r
 ? 
BLE_GATTS_VLOC_USER
 : 
BLE_GATTS_VLOC_STACK
);

150 
	`mem£t
(&
ch¬_md
, 0, (
bË_g©ts_ch¬_md_t
));

151 ià((
p_ch¬_´İs
->
ch¬_´İs
.
nÙify
 =ğ1)||Õ_ch¬_´İs->ch¬_´İs.
šdiÿ‹
 == 1))

154 
	`mem£t
(&
cccd_md
, 0, (cccd_md));

155 
	`£t_£cur™y_»q
(
p_ch¬_´İs
->
cccd_wr™e_acûss
, &
cccd_md
.
wr™e_³rm
);

156 
	`BLE_GAP_CONN_SEC_MODE_SET_OPEN
(&
cccd_md
.
»ad_³rm
);

158 
cccd_md
.
vloc
 = 
BLE_GATTS_VLOC_STACK
;

160 
ch¬_md
.
p_cccd_md
 = &
cccd_md
;

162 
ch¬_md
.
ch¬_´İs
 = 
p_ch¬_´İs
->char_props;

163 
ch¬_md
.
ch¬_ext_´İs
 = 
p_ch¬_´İs
->char_ext_props;

165 
	`mem£t
(&
©Œ_ch¬_v®ue
, 0, (
bË_g©ts_©Œ_t
));

166 
©Œ_ch¬_v®ue
.
p_uuid
 = &
ch¬_uuid
;

167 
©Œ_ch¬_v®ue
.
p_©Œ_md
 = &
©Œ_md
;

168 
©Œ_ch¬_v®ue
.
max_Ën
 = 
p_ch¬_´İs
->max_len;

169 ià(
p_ch¬_´İs
->
p_š™_v®ue
 !ğ
NULL
)

171 
©Œ_ch¬_v®ue
.
š™_Ën
 = 
p_ch¬_´İs
->init_len;

172 
©Œ_ch¬_v®ue
.
p_v®ue
 = 
p_ch¬_´İs
->
p_š™_v®ue
;

174 ià(
p_ch¬_´İs
->
p_u£r_desü
 !ğ
NULL
)

176 
	`mem£t
(&
u£r_desü_©Œ_md
, 0, (
bË_g©ts_©Œ_md_t
));

177 
ch¬_md
.
ch¬_u£r_desc_max_size
 = 
p_ch¬_´İs
->
p_u£r_desü
->
max_size
;

178 
ch¬_md
.
ch¬_u£r_desc_size
 = 
p_ch¬_´İs
->
p_u£r_desü
->
size
;

179 
ch¬_md
.
p_ch¬_u£r_desc
 = 
p_ch¬_´İs
->
p_u£r_desü
->p_char_user_desc;

181 
ch¬_md
.
p_u£r_desc_md
 = &
u£r_desü_©Œ_md
;

183 
	`£t_£cur™y_»q
(
p_ch¬_´İs
->
p_u£r_desü
->
»ad_acûss
, &
u£r_desü_©Œ_md
.
»ad_³rm
);

184 
	`£t_£cur™y_»q
(
p_ch¬_´İs
->
p_u£r_desü
->
wr™e_acûss
, &
u£r_desü_©Œ_md
.
wr™e_³rm
);

186 
u£r_desü_©Œ_md
.
rd_auth
 = (
p_ch¬_´İs
->
p_u£r_desü
->
is_deã»d_»ad
 ? 1 : 0);

187 
u£r_desü_©Œ_md
.
wr_auth
 = (
p_ch¬_´İs
->
p_u£r_desü
->
is_deã»d_wr™e
 ? 1 : 0);

188 
u£r_desü_©Œ_md
.
vËn
 = (
p_ch¬_´İs
->
p_u£r_desü
->
is_v¬_Ën
 ? 1 : 0);

189 
u£r_desü_©Œ_md
.
vloc
 = (
p_ch¬_´İs
->
p_u£r_desü
->
is_v®ue_u£r
 ? 
BLE_GATTS_VLOC_USER
 : 
BLE_GATTS_VLOC_STACK
);

191 ià(
p_ch¬_´İs
->
p_´e£Á©iÚ_fÜm©
 !ğ
NULL
)

193 
ch¬_md
.
p_ch¬_pf
 = 
p_ch¬_´İs
->
p_´e£Á©iÚ_fÜm©
;

195  
	`sd_bË_g©ts_ch¬aù”i¡ic_add
(
£rviû_hªdË
,

196 &
ch¬_md
,

197 &
©Œ_ch¬_v®ue
,

198 
p_ch¬_hªdË
);

199 
	}
}

202 
ušt32_t
 
	$desütÜ_add
(
ušt16_t
 
ch¬_hªdË
,

203 
bË_add_desü_·¿ms_t
 * 
p_desü_´İs
,

204 
ušt16_t
 * 
p_desü_hªdË
)

206 
bË_g©ts_©Œ_t
 
desü_·¿ms
;

207 
bË_uuid_t
 
desc_uuid
;

208 
bË_g©ts_©Œ_md_t
 
©Œ_md
;

210 
	`mem£t
(&
desü_·¿ms
, 0, (descr_params));

211 ià(
p_desü_´İs
->
uuid_ty³
 == 0)

213 
desc_uuid
.
ty³
 = 
BLE_UUID_TYPE_BLE
;

217 
desc_uuid
.
ty³
 = 
p_desü_´İs
->
uuid_ty³
;

219 
desc_uuid
.
uuid
 = 
p_desü_´İs
->uuid;

220 
desü_·¿ms
.
p_uuid
 = &
desc_uuid
;

222 
	`£t_£cur™y_»q
(
p_desü_´İs
->
»ad_acûss
, &
©Œ_md
.
»ad_³rm
);

223 
	`£t_£cur™y_»q
(
p_desü_´İs
->
wr™e_acûss
,&
©Œ_md
.
wr™e_³rm
);

225 
©Œ_md
.
rd_auth
 = (
p_desü_´İs
->
is_deã»d_»ad
 ? 1 : 0);

226 
©Œ_md
.
wr_auth
 = (
p_desü_´İs
->
is_deã»d_wr™e
 ? 1 : 0);

227 
©Œ_md
.
vËn
 = (
p_desü_´İs
->
is_v¬_Ën
 ? 1 : 0);

228 
©Œ_md
.
vloc
 = (
p_desü_´İs
->
is_v®ue_u£r
 ? 
BLE_GATTS_VLOC_USER
 : 
BLE_GATTS_VLOC_STACK
);

229 
desü_·¿ms
.
p_©Œ_md
 = &
©Œ_md
;

231 
desü_·¿ms
.
š™_Ën
 = 
p_desü_´İs
->init_len;

232 
desü_·¿ms
.
š™_offs
 = 
p_desü_´İs
->init_offs;

233 
desü_·¿ms
.
max_Ën
 = 
p_desü_´İs
->max_len;

234 
desü_·¿ms
.
p_v®ue
 = 
p_desü_´İs
->p_value;

236  
	`sd_bË_g©ts_desütÜ_add
(
ch¬_hªdË
, &
desü_·¿ms
, 
p_desü_hªdË
);

237 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\ble\nrf_ble_gatt\nrf_ble_gatt.c

41 
	~"sdk_commÚ.h
"

42 #ià
NRF_MODULE_ENABLED
(
NRF_BLE_GATT
)

44 
	~"Äf_bË_g©t.h
"

46 
	#NRF_LOG_MODULE_NAME
 
Äf_bË_g©t


	)

47 
	~"Äf_log.h
"

48 
NRF_LOG_MODULE_REGISTER
();

50 
	~"Äf_¡»¼Ü.h
"

52 
	#BLE_GAP_DATA_LENGTH_DEFAULT
 27

53 
	#BLE_GAP_DATA_LENGTH_MAX
 251

54 

	)

56 
STATIC_ASSERT
(
NRF_SDH_BLE_GAP_DATA_LENGTH
 < 252);

60 
	$lšk_š™
(
Äf_bË_g©t_lšk_t
 * 
p_lšk
)

62 
p_lšk
->
©t_mtu_desœed
 = 
NRF_SDH_BLE_GATT_MAX_MTU_SIZE
;

63 
p_lšk
->
©t_mtu_efãùive
 = 
BLE_GATT_ATT_MTU_DEFAULT
;

64 
p_lšk
->
©t_mtu_exchªge_³ndšg
 = 
çl£
;

65 
p_lšk
->
©t_mtu_exchªge_»que¡ed
 = 
çl£
;

66 #ià!
	`defšed
 (
S112
)

67 
p_lšk
->
d©a_Ëngth_desœed
 = 
NRF_SDH_BLE_GAP_DATA_LENGTH
;

68 
p_lšk
->
d©a_Ëngth_efãùive
 = 
BLE_GAP_DATA_LENGTH_DEFAULT
;

70 
	}
}

73 #ià!
defšed
 (
S112
)

74 
»t_code_t
 
	$d©a_Ëngth_upd©e
(
ušt16_t
 
cÚn_hªdË
, ušt16_ˆ
d©a_Ëngth
)

76 
	`NRF_LOG_DEBUG
("Updating data†engtho %u on connection 0x%x.",

77 
d©a_Ëngth
, 
cÚn_hªdË
);

79 
bË_g­_d©a_Ëngth_·¿ms_t
 cÚ¡ 
dÍ
 =

81 .
max_rx_où‘s
 = 
d©a_Ëngth
,

82 .
max_tx_où‘s
 = 
d©a_Ëngth
,

83 .
max_rx_time_us
 = 
BLE_GAP_DATA_LENGTH_AUTO
,

84 .
max_tx_time_us
 = 
BLE_GAP_DATA_LENGTH_AUTO
,

87 
bË_g­_d©a_Ëngth_lim™©iÚ_t
 
dÎ
 = {0};

89 
»t_code_t
 
”r_code
 = 
	`sd_bË_g­_d©a_Ëngth_upd©e
(
cÚn_hªdË
, &
dÍ
, &
dÎ
);

90 ià(
”r_code
 !ğ
NRF_SUCCESS
)

92 
	`NRF_LOG_ERROR
("sd_ble_gap_data_length_update() (request) on connection 0x%x„eturned %s.",

93 
cÚn_hªdË
, 
	`Äf_¡»¼Ü_g‘
(
”r_code
));

95 iàĞ(
dÎ
.
tx_·ylßd_lim™ed_où‘s
 != 0)

96 || (
dÎ
.
rx_·ylßd_lim™ed_où‘s
 != 0))

98 
	`NRF_LOG_ERROR
("The„equested TX/RX…acket†ength isoo†ong by %u/%u octets.",

99 
dÎ
.
tx_·ylßd_lim™ed_où‘s
, dÎ.
rx_·ylßd_lim™ed_où‘s
);

102 ià(
dÎ
.
tx_rx_time_lim™ed_us
 != 0)

104 
	`NRF_LOG_ERROR
("The„equested combination of TX‡nd RX…acket†engths "

106 
dÎ
.
tx_rx_time_lim™ed_us
);

110  
”r_code
;

111 
	}
}

122 
	$Ú_cÚÃùed_evt
(
Äf_bË_g©t_t
 * 
p_g©t
, 
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

124 
»t_code_t
 
”r_code
;

125 
ušt16_t
 
cÚn_hªdË
 = 
p_bË_evt
->
evt
.
commÚ_evt
.conn_handle;

126 
Äf_bË_g©t_lšk_t
 * 
p_lšk
 = &
p_g©t
->
lšks
[
cÚn_hªdË
];

129 #ià!
	`defšed
 (
S112
)

130 
p_lšk
->
d©a_Ëngth_desœed
 = 
p_g©t
->
d©a_Ëngth
;

133 
p_bË_evt
->
evt
.
g­_evt
.
·¿ms
.
cÚÃùed
.
rŞe
)

135 
BLE_GAP_ROLE_PERIPH
:

136 
p_lšk
->
©t_mtu_desœed
 = 
p_g©t
->
©t_mtu_desœed_³rh
;

139 #ià!
	`defšed
 (
S112
)

140 
BLE_GAP_ROLE_CENTRAL
:

141 
p_lšk
->
©t_mtu_desœed
 = 
p_g©t
->
©t_mtu_desœed_ûÁ¿l
;

151 ià(
p_lšk
->
©t_mtu_desœed
 >…_lšk->
©t_mtu_efãùive
)

153 
	`NRF_LOG_DEBUG
("Requestingo update ATT MTUo %u bytes on connection 0x%x.",

154 
p_lšk
->
©t_mtu_desœed
, 
cÚn_hªdË
);

156 
”r_code
 = 
	`sd_bË_g©tc_exchªge_mtu_»que¡
(
cÚn_hªdË
, 
p_lšk
->
©t_mtu_desœed
);

158 ià(
”r_code
 =ğ
NRF_SUCCESS
)

160 
p_lšk
->
©t_mtu_exchªge_»que¡ed
 = 
Œue
;

162 ià(
”r_code
 =ğ
NRF_ERROR_BUSY
)

164 
p_lšk
->
©t_mtu_exchªge_³ndšg
 = 
Œue
;

165 
	`NRF_LOG_DEBUG
("sd_ble_gattc_exchange_mtu_request()"

166 " oÀcÚÃùiÚ 0x%x„‘uºed busy, wÈ»Œy.", 
cÚn_hªdË
);

170 
	`NRF_LOG_ERROR
("sd_ble_gattc_exchange_mtu_request()„eturned %s.",

171 
	`Äf_¡»¼Ü_g‘
(
”r_code
));

175 #ià!
	`defšed
 (
S112
)

177 ià(
p_lšk
->
d©a_Ëngth_desœed
 >…_lšk->
d©a_Ëngth_efãùive
)

179 (è
	`d©a_Ëngth_upd©e
(
cÚn_hªdË
, 
p_lšk
->
d©a_Ëngth_desœed
);

182 
	}
}

185 
	$Ú_discÚÃùed_evt
(
Äf_bË_g©t_t
 * 
p_g©t
, 
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

188 
	`lšk_š™
(&
p_g©t
->
lšks
[
p_bË_evt
->
evt
.
g­_evt
.
cÚn_hªdË
]);

189 
	}
}

201 
	$Ú_exchªge_mtu_r¥_evt
(
Äf_bË_g©t_t
 * 
p_g©t
, 
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

203 
ušt16_t
 
cÚn_hªdË
 = 
p_bË_evt
->
evt
.
g©tc_evt
.conn_handle;

204 
ušt16_t
 
£rv”_rx_mtu
 = 
p_bË_evt
->
evt
.
g©tc_evt
.
·¿ms
.
exchªge_mtu_r¥
.server_rx_mtu;

206 
Äf_bË_g©t_lšk_t
 * 
p_lšk
 = &
p_g©t
->
lšks
[
cÚn_hªdË
];

210 
p_lšk
->
©t_mtu_efãùive
 = 
	`MIN
(
£rv”_rx_mtu
,…_lšk->
©t_mtu_desœed
);

211 
p_lšk
->
©t_mtu_efãùive
 = 
	`MAX
Õ_lšk->©t_mtu_efãùive, 
BLE_GATT_ATT_MTU_DEFAULT
);

213 
	`NRF_LOG_DEBUG
("ATT MTU updatedo %u bytes on connection 0x%x (response).",

214 
p_lšk
->
©t_mtu_efãùive
, 
cÚn_hªdË
);

218 ià((
p_g©t
->
evt_hªdËr
 !ğ
NULL
è&& (
p_lšk
->
©t_mtu_exchªge_»que¡ed
))

220 
Äf_bË_g©t_evt_t
 cÚ¡ 
evt
 =

222 .
evt_id
 = 
NRF_BLE_GATT_EVT_ATT_MTU_UPDATED
,

223 .
cÚn_hªdË
 = conn_handle,

224 .
·¿ms
.
©t_mtu_efãùive
 = 
p_lšk
->att_mtu_effective,

227 
p_g©t
->
	`evt_hªdËr
Õ_g©t, &
evt
);

230 
p_lšk
->
©t_mtu_exchªge_»que¡ed
 = 
çl£
;

231 
p_lšk
->
©t_mtu_exchªge_³ndšg
 = 
çl£
;

232 
	}
}

240 
	$Ú_exchªge_mtu_»que¡_evt
(
Äf_bË_g©t_t
 * 
p_g©t
, 
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

242 
»t_code_t
 
”r_code
;

243 
ušt16_t
 
cÚn_hªdË
 = 
p_bË_evt
->
evt
.
g©ts_evt
.conn_handle;

244 
ušt16_t
 
ş›Á_mtu
 = 
p_bË_evt
->
evt
.
g©ts_evt
.
·¿ms
.
exchªge_mtu_»que¡
.
ş›Á_rx_mtu
;

246 
Äf_bË_g©t_lšk_t
 * 
p_lšk
 = &
p_g©t
->
lšks
[
cÚn_hªdË
];

248 
	`NRF_LOG_DEBUG
("Peer on connection 0x%x„equested‡n ATT MTU of %u bytes.",

249 
cÚn_hªdË
, 
ş›Á_mtu
);

251 
ş›Á_mtu
 = 
	`MAX
(ş›Á_mtu, 
BLE_GATT_ATT_MTU_DEFAULT
);

252 
p_lšk
->
©t_mtu_efãùive
 = 
	`MIN
(
ş›Á_mtu
,…_lšk->
©t_mtu_desœed
);

253 
p_lšk
->
©t_mtu_exchªge_³ndšg
 = 
çl£
;

255 
	`NRF_LOG_DEBUG
("Updating ATT MTUo %u bytes (desired: %u) on connection 0x%x.",

256 
p_lšk
->
©t_mtu_efãùive
,…_lšk->
©t_mtu_desœed
, 
cÚn_hªdË
);

258 
”r_code
 = 
	`sd_bË_g©ts_exchªge_mtu_»¶y
(
cÚn_hªdË
, 
p_lšk
->
©t_mtu_desœed
);

260 ià(
”r_code
 !ğ
NRF_SUCCESS
)

262 
	`NRF_LOG_ERROR
("sd_bË_g©ts_exchªge_mtu_»¶y(è»tuºed %s.", 
	`Äf_¡»¼Ü_g‘
(
”r_code
));

268 ià(
p_lšk
->
©t_mtu_exchªge_»que¡ed
)

274 ià(
p_g©t
->
evt_hªdËr
 !ğ
NULL
)

276 
Äf_bË_g©t_evt_t
 cÚ¡ 
evt
 =

278 .
evt_id
 = 
NRF_BLE_GATT_EVT_ATT_MTU_UPDATED
,

279 .
cÚn_hªdË
 = conn_handle,

280 .
·¿ms
.
©t_mtu_efãùive
 = 
p_lšk
->att_mtu_effective,

283 
p_g©t
->
	`evt_hªdËr
Õ_g©t, &
evt
);

285 
	}
}

295 #ià!
defšed
 (
S112
)

296 
	$Ú_d©a_Ëngth_upd©e_evt
(
Äf_bË_g©t_t
 * 
p_g©t
, 
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

298 
bË_g­_evt_t
 cÚ¡ 
g­_evt
 = 
p_bË_evt
->
evt
.gap_evt;

299 
ušt16_t
 cÚ¡ 
cÚn_hªdË
 = 
g­_evt
.conn_handle;

303 
p_g©t
->
lšks
[
cÚn_hªdË
].
d©a_Ëngth_efãùive
 =

304 
g­_evt
.
·¿ms
.
d©a_Ëngth_upd©e
.
efãùive_·¿ms
.
max_tx_où‘s
;

306 
	`NRF_LOG_DEBUG
("Data†ength updatedo %u on connection 0x%0x.",

307 
p_g©t
->
lšks
[
cÚn_hªdË
].
d©a_Ëngth_efãùive
,

308 
cÚn_hªdË
);

310 
	`NRF_LOG_DEBUG
("max_rx_octets: %u",

311 
g­_evt
.
·¿ms
.
d©a_Ëngth_upd©e
.
efãùive_·¿ms
.
max_rx_où‘s
);

312 
	`NRF_LOG_DEBUG
("max_tx_octets: %u",

313 
g­_evt
.
·¿ms
.
d©a_Ëngth_upd©e
.
efãùive_·¿ms
.
max_tx_où‘s
);

314 
	`NRF_LOG_DEBUG
("max_rx_time: %u",

315 
g­_evt
.
·¿ms
.
d©a_Ëngth_upd©e
.
efãùive_·¿ms
.
max_rx_time_us
);

316 
	`NRF_LOG_DEBUG
("max_tx_time: %u",

317 
g­_evt
.
·¿ms
.
d©a_Ëngth_upd©e
.
efãùive_·¿ms
.
max_tx_time_us
);

319 ià(
p_g©t
->
evt_hªdËr
 !ğ
NULL
)

321 
Äf_bË_g©t_evt_t
 cÚ¡ 
evt
 =

323 .
evt_id
 = 
NRF_BLE_GATT_EVT_DATA_LENGTH_UPDATED
,

324 .
cÚn_hªdË
 = conn_handle,

325 .
·¿ms
.
d©a_Ëngth
 = 
p_g©t
->
lšks
[
cÚn_hªdË
].
d©a_Ëngth_efãùive
,

328 
p_g©t
->
	`evt_hªdËr
Õ_g©t, &
evt
);

330 
	}
}

348 
	$Ú_d©a_Ëngth_upd©e_»que¡_evt
(
Äf_bË_g©t_t
 * 
p_g©t
, 
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

350 
bË_g­_evt_t
 cÚ¡ * 
p_g­_evt
 = &
p_bË_evt
->
evt
.
g­_evt
;

351 
Äf_bË_g©t_lšk_t
 * 
p_lšk
 = &
p_g©t
->
lšks
[
p_g­_evt
->
cÚn_hªdË
];

354 
ušt8_t
 cÚ¡ 
d©a_Ëngth_»que¡ed
 =

355 
p_g­_evt
->
·¿ms
.
d©a_Ëngth_upd©e_»que¡
.
³”_·¿ms
.
max_tx_où‘s
;

357 
	`NRF_LOG_DEBUG
("Peer on connection 0x%x„equested‡ data†ength of %u bytes.",

358 
p_g­_evt
->
cÚn_hªdË
, 
d©a_Ëngth_»que¡ed
);

360 
ušt8_t
 cÚ¡ 
d©a_Ëngth_efãùive
 = 
	`MIN
(
p_lšk
->
d©a_Ëngth_desœed
, 
d©a_Ëngth_»que¡ed
);

362 (è
	`d©a_Ëngth_upd©e
(
p_g­_evt
->
cÚn_hªdË
, 
d©a_Ëngth_efãùive
);

363 
	}
}

367 
»t_code_t
 
	$Äf_bË_g©t_š™
(
Äf_bË_g©t_t
 * 
p_g©t
, 
Äf_bË_g©t_evt_hªdËr_t
 
evt_hªdËr
)

369 
	`VERIFY_PARAM_NOT_NULL
(
p_g©t
);

371 
p_g©t
->
evt_hªdËr
 =ƒvt_handler;

372 
p_g©t
->
©t_mtu_desœed_³rh
 = 
NRF_SDH_BLE_GATT_MAX_MTU_SIZE
;

373 
p_g©t
->
©t_mtu_desœed_ûÁ¿l
 = 
NRF_SDH_BLE_GATT_MAX_MTU_SIZE
;

374 
p_g©t
->
d©a_Ëngth
 = 
NRF_SDH_BLE_GAP_DATA_LENGTH
;

376 
ušt32_t
 
i
 = 0; i < 
NRF_BLE_GATT_LINK_COUNT
; i++)

378 
	`lšk_š™
(&
p_g©t
->
lšks
[
i
]);

381  
NRF_SUCCESS
;

382 
	}
}

385 
»t_code_t
 
	$Äf_bË_g©t_©t_mtu_³rh_£t
(
Äf_bË_g©t_t
 * 
p_g©t
, 
ušt16_t
 
desœed_mtu
)

387 
	`VERIFY_PARAM_NOT_NULL
(
p_g©t
);

389 ià((
desœed_mtu
 < 
BLE_GATT_ATT_MTU_DEFAULT
è|| (desœed_mtu > 
NRF_SDH_BLE_GATT_MAX_MTU_SIZE
))

391  
NRF_ERROR_INVALID_PARAM
;

394 
p_g©t
->
©t_mtu_desœed_³rh
 = 
desœed_mtu
;

395  
NRF_SUCCESS
;

396 
	}
}

399 
»t_code_t
 
	$Äf_bË_g©t_©t_mtu_ûÁ¿l_£t
(
Äf_bË_g©t_t
 * 
p_g©t
, 
ušt16_t
 
desœed_mtu
)

401 
	`VERIFY_PARAM_NOT_NULL
(
p_g©t
);

403 ià((
desœed_mtu
 < 
BLE_GATT_ATT_MTU_DEFAULT
è|| (desœed_mtu > 
NRF_SDH_BLE_GATT_MAX_MTU_SIZE
))

405  
NRF_ERROR_INVALID_PARAM
;

408 
p_g©t
->
©t_mtu_desœed_ûÁ¿l
 = 
desœed_mtu
;

409  
NRF_SUCCESS
;

410 
	}
}

413 
ušt16_t
 
	$Äf_bË_g©t_eff_mtu_g‘
(
Äf_bË_g©t_t
 cÚ¡ * 
p_g©t
, 
ušt16_t
 
cÚn_hªdË
)

415 ià((
p_g©t
 =ğ
NULL
è|| (
cÚn_hªdË
 >ğ
NRF_BLE_GATT_LINK_COUNT
))

420  
p_g©t
->
lšks
[
cÚn_hªdË
].
©t_mtu_efãùive
;

421 
	}
}

423 #ià!
defšed
 (
S112
)

424 
»t_code_t
 
	$Äf_bË_g©t_d©a_Ëngth_£t
(
Äf_bË_g©t_t
 * 
p_g©t
,

425 
ušt16_t
 
cÚn_hªdË
,

426 
ušt8_t
 
d©a_Ëngth
)

428 ià(
p_g©t
 =ğ
NULL
)

430  
NRF_ERROR_NULL
;

434 iàĞ(
d©a_Ëngth
 > 
BLE_GAP_DATA_LENGTH_MAX
)

435 || (
d©a_Ëngth
 < 
BLE_GAP_DATA_LENGTH_DEFAULT
))

437  
NRF_ERROR_INVALID_PARAM
;

440 ià(
cÚn_hªdË
 =ğ
BLE_CONN_HANDLE_INVALID
)

443 
p_g©t
->
d©a_Ëngth
 = data_length;

444  
NRF_SUCCESS
;

447 ià(
cÚn_hªdË
 >ğ
NRF_BLE_GATT_LINK_COUNT
)

449  
NRF_ERROR_INVALID_PARAM
;

453 
p_g©t
->
lšks
[
cÚn_hªdË
].
d©a_Ëngth_desœed
 = 
d©a_Ëngth
;

455  
	`d©a_Ëngth_upd©e
(
cÚn_hªdË
, 
d©a_Ëngth
);

456 
	}
}

459 
»t_code_t
 
	$Äf_bË_g©t_d©a_Ëngth_g‘
(
Äf_bË_g©t_t
 cÚ¡ * 
p_g©t
,

460 
ušt16_t
 
cÚn_hªdË
,

461 
ušt8_t
 * 
p_d©a_Ëngth
)

463 ià((
p_g©t
 =ğ
NULL
è|| (
p_d©a_Ëngth
 == NULL))

465  
NRF_ERROR_NULL
;

468 ià(
cÚn_hªdË
 =ğ
BLE_CONN_HANDLE_INVALID
)

470 *
p_d©a_Ëngth
 = 
p_g©t
->
d©a_Ëngth
;

471  
NRF_SUCCESS
;

474 ià(
cÚn_hªdË
 >ğ
NRF_BLE_GATT_LINK_COUNT
)

476  
NRF_ERROR_INVALID_PARAM
;

479 *
p_d©a_Ëngth
 = 
p_g©t
->
lšks
[
cÚn_hªdË
].
d©a_Ëngth_efãùive
;

480  
NRF_SUCCESS
;

481 
	}
}

485 
	$Äf_bË_g©t_Ú_bË_evt
(
bË_evt_t
 cÚ¡ * 
p_bË_evt
, * 
p_cÚ‹xt
)

487 
Äf_bË_g©t_t
 * 
p_g©t
 = (Äf_bË_g©t_ˆ*)
p_cÚ‹xt
;

488 
ušt16_t
 
cÚn_hªdË
 = 
p_bË_evt
->
evt
.
commÚ_evt
.conn_handle;

490 ià(
cÚn_hªdË
 >ğ
NRF_BLE_GATT_LINK_COUNT
)

495 
p_bË_evt
->
h—d”
.
evt_id
)

497 
BLE_GAP_EVT_CONNECTED
:

498 
	`Ú_cÚÃùed_evt
(
p_g©t
, 
p_bË_evt
);

501 
BLE_GAP_EVT_DISCONNECTED
:

502 
	`Ú_discÚÃùed_evt
(
p_g©t
, 
p_bË_evt
);

505 
BLE_GATTC_EVT_EXCHANGE_MTU_RSP
:

506 
	`Ú_exchªge_mtu_r¥_evt
(
p_g©t
, 
p_bË_evt
);

509 
BLE_GATTS_EVT_EXCHANGE_MTU_REQUEST
:

510 
	`Ú_exchªge_mtu_»que¡_evt
(
p_g©t
, 
p_bË_evt
);

513 #ià!
	`defšed
 (
S112
)

514 
BLE_GAP_EVT_DATA_LENGTH_UPDATE
:

515 
	`Ú_d©a_Ëngth_upd©e_evt
(
p_g©t
, 
p_bË_evt
);

518 
BLE_GAP_EVT_DATA_LENGTH_UPDATE_REQUEST
:

519 
	`Ú_d©a_Ëngth_upd©e_»que¡_evt
(
p_g©t
, 
p_bË_evt
);

527 ià(
p_g©t
->
lšks
[
cÚn_hªdË
].
©t_mtu_exchªge_³ndšg
)

529 
»t_code_t
 
”r_code
;

531 
”r_code
 = 
	`sd_bË_g©tc_exchªge_mtu_»que¡
(
cÚn_hªdË
,

532 
p_g©t
->
lšks
[
cÚn_hªdË
].
©t_mtu_desœed
);

534 ià(
”r_code
 =ğ
NRF_SUCCESS
)

536 
p_g©t
->
lšks
[
cÚn_hªdË
].
©t_mtu_exchªge_³ndšg
 = 
çl£
;

537 
p_g©t
->
lšks
[
cÚn_hªdË
].
©t_mtu_exchªge_»que¡ed
 = 
Œue
;

539 
	`NRF_LOG_DEBUG
("Requestingo update ATT MTUo %u bytes on connection 0x%x (retry).",

540 
p_g©t
->
lšks
[
cÚn_hªdË
].
©t_mtu_desœed
, conn_handle);

542 ià(
”r_code
 !ğ
NRF_ERROR_BUSY
)

544 
	`NRF_LOG_ERROR
("sd_ble_gattc_exchange_mtu_request()„eturned %s.",

545 
	`Äf_¡»¼Ü_g‘
(
”r_code
));

548 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\ble\nrf_ble_qwr\nrf_ble_qwr.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
NRF_BLE_QWR
)

42 
	~<¡dlib.h
>

43 
	~"Äf_bË_qwr.h
"

44 
	~"bË.h
"

45 
	~"bË_¤v_commÚ.h
"

48 
	#NRF_BLE_QWR_INITIALIZED
 0xDE

49 
	#MODULE_INITIALIZED
 (
p_qwr
->
š™Ÿlized
 =ğ
NRF_BLE_QWR_INITIALIZED
)

	)

50 
	~"sdk_maüos.h
"

52 
»t_code_t
 
	$Äf_bË_qwr_š™
(
Äf_bË_qwr_t
 * 
p_qwr
,

53 
Äf_bË_qwr_š™_t
 cÚ¡ * 
p_qwr_š™
)

55 
	`VERIFY_PARAM_NOT_NULL
(
p_qwr
);

56 
	`VERIFY_PARAM_NOT_NULL
(
p_qwr_š™
);

57 ià(
MODULE_INITIALIZED
)

59  
NRF_ERROR_INVALID_STATE
;

62 
p_qwr
->
”rÜ_hªdËr
 = 
p_qwr_š™
->error_handler;

63 
p_qwr
->
š™Ÿlized
 = 
NRF_BLE_QWR_INITIALIZED
;

64 
p_qwr
->
cÚn_hªdË
 = 
BLE_CONN_HANDLE_INVALID
;

65 #ià(
NRF_BLE_QWR_MAX_ATTR
 > 0)

66 
	`mem£t
(
p_qwr
->
©Œ_hªdËs
, 0, (p_qwr->attr_handles));

67 
p_qwr
->
nb_»gi¡”ed_©Œ
 = 0;

68 
p_qwr
->
is_u£r_mem_»¶y_³ndšg
 = 
çl£
;

69 
p_qwr
->
mem_bufãr
 = 
p_qwr_š™
->mem_buffer;

70 
p_qwr
->
ÿÎback
 = 
p_qwr_š™
->callback;

71 
p_qwr
->
nb_wr™‹n_hªdËs
 = 0;

73  
NRF_SUCCESS
;

74 
	}
}

77 #ià(
NRF_BLE_QWR_MAX_ATTR
 > 0)

78 
»t_code_t
 
	$Äf_bË_qwr_©Œ_»gi¡”
(
Äf_bË_qwr_t
 * 
p_qwr
, 
ušt16_t
 
©Œ_hªdË
)

80 
	`VERIFY_PARAM_NOT_NULL
(
p_qwr
);

81 
	`VERIFY_MODULE_INITIALIZED
();

83 ià((
p_qwr
->
nb_»gi¡”ed_©Œ
 =ğ
NRF_BLE_QWR_MAX_ATTR
)

84 || (
p_qwr
->
mem_bufãr
.
p_mem
 =ğ
NULL
)

85 || (
p_qwr
->
mem_bufãr
.
Ën
 == 0))

87  (
NRF_ERROR_NO_MEM
);

90 ià(
©Œ_hªdË
 =ğ
BLE_GATT_HANDLE_INVALID
)

92  
NRF_ERROR_INVALID_PARAM
;

95 
p_qwr
->
©Œ_hªdËs
[p_qwr->
nb_»gi¡”ed_©Œ
] = 
©Œ_hªdË
;

96 
p_qwr
->
nb_»gi¡”ed_©Œ
++;

98  
NRF_SUCCESS
;

99 
	}
}

102 
»t_code_t
 
	$Äf_bË_qwr_v®ue_g‘
(
Äf_bË_qwr_t
 * 
p_qwr
,

103 
ušt16_t
 
©Œ_hªdË
,

104 
ušt8_t
 * 
p_mem
,

105 
ušt16_t
 * 
p_Ën
)

107 
	`VERIFY_PARAM_NOT_NULL
(
p_qwr
);

108 
	`VERIFY_PARAM_NOT_NULL
(
p_mem
);

109 
	`VERIFY_PARAM_NOT_NULL
(
p_Ën
);

110 
	`VERIFY_MODULE_INITIALIZED
();

112 
ušt16_t
 
i
 = 0;

113 
ušt16_t
 
hªdË
 = 
BLE_GATT_HANDLE_INVALID
;

114 
ušt16_t
 
v®_Ën
 = 0;

115 
ušt16_t
 
v®_off£t
 = 0;

116 
ušt16_t
 
cur_Ën
 = 0;

120 
hªdË
 = 
	`ušt16_decode
(&(
p_qwr
->
mem_bufãr
.
p_mem
[
i
]));

122 ià(
hªdË
 =ğ
BLE_GATT_HANDLE_INVALID
)

127 
i
 +ğ(
ušt16_t
);

128 
v®_off£t
 = 
	`ušt16_decode
(&(
p_qwr
->
mem_bufãr
.
p_mem
[
i
]));

129 
i
 +ğ(
ušt16_t
);

130 
v®_Ën
 = 
	`ušt16_decode
(&(
p_qwr
->
mem_bufãr
.
p_mem
[
i
]));

131 
i
 +ğ(
ušt16_t
);

133 ià(
hªdË
 =ğ
©Œ_hªdË
)

135 
cur_Ën
 = 
v®_off£t
 + 
v®_Ën
;

136 ià(
cur_Ën
 <ğ*
p_Ën
)

138 
	`memıy
((
p_mem
 + 
v®_off£t
), &(
p_qwr
->
mem_bufãr
.p_mem[
i
]), 
v®_Ën
);

142  
NRF_ERROR_NO_MEM
;

146 
i
 +ğ
v®_Ën
;

148 
i
 < 
p_qwr
->
mem_bufãr
.
Ën
);

150 *
p_Ën
 = 
cur_Ën
;

151  
NRF_SUCCESS
;

152 
	}
}

156 
»t_code_t
 
	$Äf_bË_qwr_cÚn_hªdË_assign
(
Äf_bË_qwr_t
 * 
p_qwr
,

157 
ušt16_t
 
cÚn_hªdË
)

159 
	`VERIFY_PARAM_NOT_NULL
(
p_qwr
);

160 
	`VERIFY_MODULE_INITIALIZED
();

161 
p_qwr
->
cÚn_hªdË
 = conn_handle;

162  
NRF_SUCCESS
;

163 
	}
}

170 
	$u£r_mem_»¶y
(
Äf_bË_qwr_t
 * 
p_qwr
)

172 ià(
p_qwr
->
is_u£r_mem_»¶y_³ndšg
)

174 
»t_code_t
 
”r_code
;

175 #ià(
NRF_BLE_QWR_MAX_ATTR
 == 0)

176 
”r_code
 = 
	`sd_bË_u£r_mem_»¶y
(
p_qwr
->
cÚn_hªdË
, 
NULL
);

178 
”r_code
 = 
	`sd_bË_u£r_mem_»¶y
(
p_qwr
->
cÚn_hªdË
, &p_qwr->
mem_bufãr
);

180 ià(
”r_code
 =ğ
NRF_SUCCESS
)

182 
p_qwr
->
is_u£r_mem_»¶y_³ndšg
 = 
çl£
;

184 ià(
”r_code
 =ğ
NRF_ERROR_BUSY
)

186 
p_qwr
->
is_u£r_mem_»¶y_³ndšg
 = 
Œue
;

190 
p_qwr
->
	`”rÜ_hªdËr
(
”r_code
);

193 
	}
}

201 
	$Ú_u£r_mem_»que¡
(
Äf_bË_qwr_t
 * 
p_qwr
,

202 
bË_commÚ_evt_t
 cÚ¡ * 
p_commÚ_evt
)

204 ià((
p_commÚ_evt
->
·¿ms
.
u£r_mem_»que¡
.
ty³
 =ğ
BLE_USER_MEM_TYPE_GATTS_QUEUED_WRITES
) &&

205 (
p_commÚ_evt
->
cÚn_hªdË
 =ğ
p_qwr
->conn_handle))

207 
p_qwr
->
is_u£r_mem_»¶y_³ndšg
 = 
Œue
;

208 
	`u£r_mem_»¶y
(
p_qwr
);

210 
	}
}

218 
	$Ú_u£r_mem_»Ëa£
(
Äf_bË_qwr_t
 * 
p_qwr
,

219 
bË_commÚ_evt_t
 cÚ¡ * 
p_commÚ_evt
)

221 #ià(
NRF_BLE_QWR_MAX_ATTR
 > 0)

222 ià((
p_commÚ_evt
->
·¿ms
.
u£r_mem_»Ëa£
.
ty³
 =ğ
BLE_USER_MEM_TYPE_GATTS_QUEUED_WRITES
) &&

223 (
p_commÚ_evt
->
cÚn_hªdË
 =ğ
p_qwr
->conn_handle))

226 
p_qwr
->
nb_wr™‹n_hªdËs
 = 0;

229 
	}
}

232 #ià(
NRF_BLE_QWR_MAX_ATTR
 > 0)

238 
	$Ú_´•¬e_wr™e
(
Äf_bË_qwr_t
 * 
p_qwr
,

239 
bË_g©ts_evt_wr™e_t
 cÚ¡ * 
p_evt_wr™e
)

241 
ušt32_t
 
”r_code
;

242 
bË_g©ts_rw_authÜize_»¶y_·¿ms_t
 
auth_»¶y
;

243 
	`mem£t
(&
auth_»¶y
, 0, (auth_reply));

245 
auth_»¶y
.
·¿ms
.
wr™e
.
g©t_¡©us
 = 
NRF_BLE_QWR_REJ_REQUEST_ERR_CODE
;

246 
auth_»¶y
.
ty³
 = 
BLE_GATTS_AUTHORIZE_TYPE_WRITE
;

248 
ušt32_t
 
i
;

250 
i
 = 0; i < 
p_qwr
->
nb_wr™‹n_hªdËs
; i++)

252 ià(
p_qwr
->
wr™‹n_©Œ_hªdËs
[
i
] =ğ
p_evt_wr™e
->
hªdË
)

254 
auth_»¶y
.
·¿ms
.
wr™e
.
g©t_¡©us
 = 
BLE_GATT_STATUS_SUCCESS
;

259 ià(
auth_»¶y
.
·¿ms
.
wr™e
.
g©t_¡©us
 !ğ
BLE_GATT_STATUS_SUCCESS
)

261 
i
 = 0; i < 
p_qwr
->
nb_»gi¡”ed_©Œ
; i++)

263 ià(
p_qwr
->
©Œ_hªdËs
[
i
] =ğ
p_evt_wr™e
->
hªdË
)

265 
auth_»¶y
.
·¿ms
.
wr™e
.
g©t_¡©us
 = 
BLE_GATT_STATUS_SUCCESS
;

266 
p_qwr
->
wr™‹n_©Œ_hªdËs
[p_qwr->
nb_wr™‹n_hªdËs
++] = 
p_evt_wr™e
->
hªdË
;

272 
”r_code
 = 
	`sd_bË_g©ts_rw_authÜize_»¶y
(
p_qwr
->
cÚn_hªdË
, &
auth_»¶y
);

273 ià(
”r_code
 !ğ
NRF_SUCCESS
)

276 
p_qwr
->
nb_wr™‹n_hªdËs
 = 0;

279 
p_qwr
->
	`”rÜ_hªdËr
(
”r_code
);

282 
	}
}

290 
	$Ú_execu‹_wr™e
(
Äf_bË_qwr_t
 * 
p_qwr
,

291 
bË_g©ts_evt_wr™e_t
 cÚ¡ * 
p_evt_wr™e
)

293 
ušt32_t
 
”r_code
;

294 
bË_g©ts_rw_authÜize_»¶y_·¿ms_t
 
auth_»¶y
;

295 
	`mem£t
(&
auth_»¶y
, 0, (auth_reply));

297 
auth_»¶y
.
·¿ms
.
wr™e
.
g©t_¡©us
 = 
BLE_GATT_STATUS_SUCCESS
;

298 
auth_»¶y
.
ty³
 = 
BLE_GATTS_AUTHORIZE_TYPE_WRITE
;

300 ià(
p_qwr
->
nb_wr™‹n_hªdËs
 == 0)

302 
auth_»¶y
.
·¿ms
.
wr™e
.
g©t_¡©us
 = 
NRF_BLE_QWR_REJ_REQUEST_ERR_CODE
;

303 
”r_code
 = 
	`sd_bË_g©ts_rw_authÜize_»¶y
(
p_qwr
->
cÚn_hªdË
, &
auth_»¶y
);

304 ià(
”r_code
 !ğ
NRF_SUCCESS
)

307 
p_qwr
->
	`”rÜ_hªdËr
(
”r_code
);

312 
ušt16_t
 
i
 = 0; i < 
p_qwr
->
nb_wr™‹n_hªdËs
; i++)

314 
Äf_bË_qwr_evt_t
 
evt
;

315 
ušt16_t
 
»t_v®
;

317 
evt
.
evt_ty³
 = 
NRF_BLE_QWR_EVT_AUTH_REQUEST
;

318 
evt
.
©Œ_hªdË
 = 
p_qwr
->
wr™‹n_©Œ_hªdËs
[
i
];

319 
»t_v®
 = 
p_qwr
->
	`ÿÎback
Õ_qwr, &
evt
);

320 ià(
»t_v®
 !ğ
BLE_GATT_STATUS_SUCCESS
)

322 
auth_»¶y
.
·¿ms
.
wr™e
.
g©t_¡©us
 = 
»t_v®
;

326 
”r_code
 = 
	`sd_bË_g©ts_rw_authÜize_»¶y
(
p_qwr
->
cÚn_hªdË
, &
auth_»¶y
);

327 ià(
”r_code
 !ğ
NRF_SUCCESS
)

330 
p_qwr
->
	`”rÜ_hªdËr
(
”r_code
);

334 ià(
auth_»¶y
.
·¿ms
.
wr™e
.
g©t_¡©us
 =ğ
BLE_GATT_STATUS_SUCCESS
)

336 
ušt16_t
 
i
 = 0; i < 
p_qwr
->
nb_wr™‹n_hªdËs
; i++)

338 
Äf_bË_qwr_evt_t
 
evt
;

339 
evt
.
evt_ty³
 = 
NRF_BLE_QWR_EVT_EXECUTE_WRITE
;

340 
evt
.
©Œ_hªdË
 = 
p_qwr
->
wr™‹n_©Œ_hªdËs
[
i
];

342 
p_qwr
->
	`ÿÎback
Õ_qwr, &
evt
);

345 
auth_»¶y
.
·¿ms
.
wr™e
.
g©t_¡©us
 = 
BLE_GATT_STATUS_SUCCESS
;

348 
p_qwr
->
nb_wr™‹n_hªdËs
 = 0;

349 
	}
}

357 
	$Ú_ÿnûl_wr™e
(
Äf_bË_qwr_t
 * 
p_qwr
,

358 
bË_g©ts_evt_wr™e_t
 cÚ¡ * 
p_evt_wr™e
)

360 
ušt32_t
 
”r_code
;

361 
bË_g©ts_rw_authÜize_»¶y_·¿ms_t
 
auth_»¶y
;

362 
	`mem£t
(&
auth_»¶y
, 0, (auth_reply));

364 
auth_»¶y
.
ty³
 = 
BLE_GATTS_AUTHORIZE_TYPE_WRITE
;

365 
auth_»¶y
.
·¿ms
.
wr™e
.
g©t_¡©us
 = 
BLE_GATT_STATUS_SUCCESS
;

367 
”r_code
 = 
	`sd_bË_g©ts_rw_authÜize_»¶y
(
p_qwr
->
cÚn_hªdË
, &
auth_»¶y
);

368 ià(
”r_code
 !ğ
NRF_SUCCESS
)

371 
p_qwr
->
	`”rÜ_hªdËr
(
”r_code
);

373 
p_qwr
->
nb_wr™‹n_hªdËs
 = 0;

374 
	}
}

382 
	$Ú_rw_authÜize_»que¡
(
Äf_bË_qwr_t
 * 
p_qwr
,

383 
bË_g©ts_evt_t
 cÚ¡ * 
p_g©ts_evt
)

385 ià(
p_g©ts_evt
->
cÚn_hªdË
 !ğ
p_qwr
->conn_handle)

390 
bË_g©ts_evt_rw_authÜize_»que¡_t
 cÚ¡ * 
p_auth_»q
 = &
p_g©ts_evt
->
·¿ms
.
authÜize_»que¡
;

392 ià(
p_auth_»q
->
ty³
 !ğ
BLE_GATTS_AUTHORIZE_TYPE_WRITE
)

397 #ià(
NRF_BLE_QWR_MAX_ATTR
 == 0)

399 ià((
p_auth_»q
->
»que¡
.
wr™e
.
İ
 !ğ
BLE_GATTS_OP_PREP_WRITE_REQ
) &&

400 (
p_auth_»q
->
»que¡
.
wr™e
.
İ
 !ğ
BLE_GATTS_OP_EXEC_WRITE_REQ_NOW
) &&

401 (
p_auth_»q
->
»que¡
.
wr™e
.
İ
 !ğ
BLE_GATTS_OP_EXEC_WRITE_REQ_CANCEL
))

407 
bË_g©ts_rw_authÜize_»¶y_·¿ms_t
 
auth_»¶y
 = {0};

409 
auth_»¶y
.
ty³
 = 
BLE_GATTS_AUTHORIZE_TYPE_WRITE
;

410 
auth_»¶y
.
·¿ms
.
wr™e
.
g©t_¡©us
 = 
NRF_BLE_QWR_REJ_REQUEST_ERR_CODE
;

411 ià(
p_auth_»q
->
»que¡
.
wr™e
.
İ
 =ğ
BLE_GATTS_OP_EXEC_WRITE_REQ_CANCEL
)

413 
auth_»¶y
.
·¿ms
.
wr™e
.
g©t_¡©us
 = 
BLE_GATT_STATUS_SUCCESS
;

416 
»t_code_t
 
”r_code
 = 
	`sd_bË_g©ts_rw_authÜize_»¶y
(
p_g©ts_evt
->
cÚn_hªdË
, &
auth_»¶y
);

417 ià(
”r_code
 !ğ
NRF_SUCCESS
)

420 
p_qwr
->
	`”rÜ_hªdËr
(
”r_code
);

423 
p_auth_»q
->
»que¡
.
wr™e
.
İ
)

425 
BLE_GATTS_OP_PREP_WRITE_REQ
:

426 
	`Ú_´•¬e_wr™e
(
p_qwr
, &
p_auth_»q
->
»que¡
.
wr™e
);

429 
BLE_GATTS_OP_EXEC_WRITE_REQ_NOW
:

430 
	`Ú_execu‹_wr™e
(
p_qwr
, &
p_auth_»q
->
»que¡
.
wr™e
);

433 
BLE_GATTS_OP_EXEC_WRITE_REQ_CANCEL
:

434 
	`Ú_ÿnûl_wr™e
(
p_qwr
, &
p_auth_»q
->
»que¡
.
wr™e
);

442 
	}
}

445 
	$Äf_bË_qwr_Ú_bË_evt
(
bË_evt_t
 cÚ¡ * 
p_bË_evt
, * 
p_cÚ‹xt
)

447 
	`VERIFY_PARAM_NOT_NULL_VOID
(
p_cÚ‹xt
);

448 
	`VERIFY_PARAM_NOT_NULL_VOID
(
p_bË_evt
);

450 
Äf_bË_qwr_t
 * 
p_qwr
 = (Äf_bË_qwr_ˆ*)
p_cÚ‹xt
;

452 
	`VERIFY_MODULE_INITIALIZED_VOID
();

454 ià(
p_bË_evt
->
evt
.
commÚ_evt
.
cÚn_hªdË
 =ğ
p_qwr
->conn_handle)

456 
	`u£r_mem_»¶y
(
p_qwr
);

459 
p_bË_evt
->
h—d”
.
evt_id
)

461 
BLE_EVT_USER_MEM_REQUEST
:

462 
	`Ú_u£r_mem_»que¡
(
p_qwr
, &
p_bË_evt
->
evt
.
commÚ_evt
);

465 
BLE_EVT_USER_MEM_RELEASE
:

466 
	`Ú_u£r_mem_»Ëa£
(
p_qwr
, &
p_bË_evt
->
evt
.
commÚ_evt
);

469 
BLE_GATTS_EVT_RW_AUTHORIZE_REQUEST
:

470 
	`Ú_rw_authÜize_»que¡
(
p_qwr
, &
p_bË_evt
->
evt
.
g©ts_evt
);

473 
BLE_GAP_EVT_DISCONNECTED
:

474 ià(
p_bË_evt
->
evt
.
g­_evt
.
cÚn_hªdË
 =ğ
p_qwr
->conn_handle)

476 
p_qwr
->
cÚn_hªdË
 = 
BLE_CONN_HANDLE_INVALID
;

477 #ià(
NRF_BLE_QWR_MAX_ATTR
 > 0)

478 
p_qwr
->
nb_wr™‹n_hªdËs
 = 0;

487 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\ble\peer_manager\auth_status_tracker.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
PEER_MANAGER
è&& NRF_MODULE_ENABLED(
PM_RA_PROTECTION
)

42 
	~"auth_¡©us_Œack”.h
"

44 
	~"­p_tim”.h
"

45 
	~"id_mªag”.h
"

47 
	#NRF_LOG_MODULE_NAME
 
³”_mªag”_a¡


	)

48 #ià
PM_LOG_ENABLED


49 
	#NRF_LOG_LEVEL
 
PM_LOG_LEVEL


	)

50 
	#NRF_LOG_INFO_COLOR
 
PM_LOG_INFO_COLOR


	)

51 
	#NRF_LOG_DEBUG_COLOR
 
PM_LOG_DEBUG_COLOR


	)

53 
	#NRF_LOG_LEVEL
 0

	)

55 
	~"Äf_log.h
"

56 
NRF_LOG_MODULE_REGISTER
();

57 
	~"Äf_¡»¼Ü.h
"

61 
	#PAIR_REWARD_TICKS
 
	`APP_TIMER_TICKS
(
PM_RA_PROTECTION_REWARD_PERIOD
)

	)

62 
	#PENALITY_LVL_TO_PENALITY_MS
(
_lvl
è(
PM_RA_PROTECTION_MIN_WAIT_INTERVAL
 * (1 << _lvl))

	)

63 
	#PENALITY_LVL_TO_PENALITY_TICKS
(
_lvl
è
	`APP_TIMER_TICKS
(
	`PENALITY_LVL_TO_PENALITY_MS
(_lvl))

	)

64 
	#PENALITY_LVL_NEXT_SET
(
_lvl
) \

65 
_lvl
 = (
	`PENALITY_LVL_TO_PENALITY_MS
(_lvlè>ğ(
PM_RA_PROTECTION_MAX_WAIT_INTERVAL
)) ? \

66 (
_lvl
è: (_lvÈ+ 1)

	)

72 
bË_g­_addr_t
 
	m³”_addr
;

73 
ušt32_t
 
	m»w¬d_ticks
;

75 
ušt32_t
 
	m³Çl™y_ticks
;

77 
ušt8_t
 
	m³Çl™y_lvl
;

79 
boŞ
 
	mis_aùive
;

81 
boŞ
 
	mis_v®id
;

82 } 
	tbÏckli¡ed_³”_t
;

84 
APP_TIMER_DEF
(
m_·œšg_©‹m±_tim”
);

85 
bÏckli¡ed_³”_t
 
	gm_bÏckli¡ed_³”s
[
PM_RA_PROTECTION_TRACKED_PEERS_NUM
];

86 
ušt32_t
 
	gm_ticks_út
;

94 
ušt32_t
 
	$bÏckli¡ed_³”s_¡©e_upd©e
(
ušt32_t
 
ticks_·s£d
)

96 
ušt32_t
 
mšim®_ticks
 = 
UINT32_MAX
;

98 
ušt32_t
 
id
 = 0; id < 
	`ARRAY_SIZE
(
m_bÏckli¡ed_³”s
); id++)

100 
bÏckli¡ed_³”_t
 * 
p_bl_³”
 = &
m_bÏckli¡ed_³”s
[
id
];

102 ià(
p_bl_³”
->
is_v®id
)

104 ià(
p_bl_³”
->
is_aùive
)

106 ià(
p_bl_³”
->
³Çl™y_ticks
 > 
ticks_·s£d
)

108 
p_bl_³”
->
³Çl™y_ticks
 -ğ
ticks_·s£d
;

109 
mšim®_ticks
 = 
	`MIN
(mšim®_ticks, 
p_bl_³”
->
³Çl™y_ticks
);

113 
p_bl_³”
->
is_aùive
 = 
çl£
;

115 ià(
p_bl_³”
->
³Çl™y_lvl
 == 0)

117 
p_bl_³”
->
is_v®id
 = 
çl£
;

118 
	`NRF_LOG_DEBUG
("Peer has been„emoved fromhe blacklist, its‡ddress:");

119 
	`NRF_LOG_HEXDUMP_DEBUG
(
p_bl_³”
->
³”_addr
.
addr
,

120 (
p_bl_³”
->
³”_addr
.
addr
));

124 
mšim®_ticks
 = 
	`MIN
(mšim®_ticks, 
PAIR_REWARD_TICKS
);

127 
	`NRF_LOG_DEBUG
("Pairing waiting interval hasƒxpired for:");

128 
	`NRF_LOG_HEXDUMP_DEBUG
(
p_bl_³”
->
³”_addr
.
addr
,

129 (
p_bl_³”
->
³”_addr
.
addr
));

134 ià(
p_bl_³”
->
³Çl™y_lvl
 == 0)

136 
p_bl_³”
->
is_v®id
 = 
çl£
;

137 
	`NRF_LOG_DEBUG
("Peer has been„emoved fromhe blacklist, its‡ddress:");

138 
	`NRF_LOG_HEXDUMP_DEBUG
(
p_bl_³”
->
³”_addr
.
addr
,

139 (
p_bl_³”
->
³”_addr
.
addr
));

143 
p_bl_³”
->
»w¬d_ticks
 +ğ
ticks_·s£d
;

144 ià(
p_bl_³”
->
»w¬d_ticks
 >ğ
PAIR_REWARD_TICKS
)

146 
p_bl_³”
->
³Çl™y_lvl
--;

147 
p_bl_³”
->
»w¬d_ticks
 -ğ
PAIR_REWARD_TICKS
;

148 
	`NRF_LOG_DEBUG
("Peer…enality†evel has decreasedo %d for device:",

149 
p_bl_³”
->
³Çl™y_lvl
);

150 
	`NRF_LOG_HEXDUMP_DEBUG
(
p_bl_³”
->
³”_addr
.
addr
,

151 (
p_bl_³”
->
³”_addr
.
addr
));

154 
mšim®_ticks
 = 
	`MIN
(minimal_ticks,

155 (
PAIR_REWARD_TICKS
 - 
p_bl_³”
->
»w¬d_ticks
));

161  
mšim®_ticks
;

162 
	}
}

169 
	$bÏckli¡ed_³”s_¡©e_Œªs™iÚ_hªdË
(* 
cÚ‹xt
)

171 
»t_code_t
 
”r_code
;

172 
ušt32_t
 
mšim®_ticks
;

173 
ušt32_t
 
ticks_·s£d
 = (ušt32_tè
cÚ‹xt
;

175 
mšim®_ticks
 = 
	`bÏckli¡ed_³”s_¡©e_upd©e
(
ticks_·s£d
);

176 
m_ticks_út
 = 
	`­p_tim”_út_g‘
();

178 ià(
mšim®_ticks
 !ğ
UINT32_MAX
)

180 
”r_code
 = 
	`­p_tim”_¡¬t
(
m_·œšg_©‹m±_tim”
,

181 
mšim®_ticks
,

182 (*è
mšim®_ticks
);

183 ià(
”r_code
 !ğ
NRF_SUCCESS
)

185 
	`NRF_LOG_WARNING
("­p_tim”_¡¬t(è»tuºed %s", 
	`Äf_¡»¼Ü_g‘
(
”r_code
));

187 
	`NRF_LOG_DEBUG
("Restartingheimer");

189 
	}
}

192 
»t_code_t
 
	$a¡_š™
()

194 
»t_code_t
 
”r_code
 = 
	`­p_tim”_ü—‹
(&
m_·œšg_©‹m±_tim”
,

195 
APP_TIMER_MODE_SINGLE_SHOT
,

196 
bÏckli¡ed_³”s_¡©e_Œªs™iÚ_hªdË
);

198  
”r_code
;

199 
	}
}

202 
	$a¡_auth_”rÜ_nÙify
(
ušt16_t
 
cÚn_hªdË
)

204 
»t_code_t
 
”r_code
;

205 
bË_g­_addr_t
 
³”_addr
;

206 
ušt32_t
 
Ãw_timeout
;

207 
ušt32_t
 
ä“_id
 = 
	`ARRAY_SIZE
(
m_bÏckli¡ed_³”s
);

208 
boŞ
 
Ãw_bl_’Œy
 = 
Œue
;

211 
”r_code
 = 
	`im_bË_addr_g‘
(
cÚn_hªdË
, &
³”_addr
);

212 ià(
”r_code
 !ğ
NRF_SUCCESS
)

214 
	`NRF_LOG_WARNING
("im_ble_addr_get()„eturned %s. conn_handle: %d. "

216 
	`Äf_¡»¼Ü_g‘
(
”r_code
),

217 
cÚn_hªdË
);

222 
”r_code
 = 
	`­p_tim”_¡İ
(
m_·œšg_©‹m±_tim”
);

223 ià(
”r_code
 !ğ
NRF_SUCCESS
)

225 
	`NRF_LOG_WARNING
("­p_tim”_¡İ(è»tuºed %s", 
	`Äf_¡»¼Ü_g‘
(
”r_code
));

229 
Ãw_timeout
 = 
	`bÏckli¡ed_³”s_¡©e_upd©e
(
	`­p_tim”_út_diff_compu‹
(
	`­p_tim”_út_g‘
(),

230 
m_ticks_út
));

231 
m_ticks_út
 = 
	`­p_tim”_út_g‘
();

234 
ušt32_t
 
id
 = 0; id < 
	`ARRAY_SIZE
(
m_bÏckli¡ed_³”s
); id++)

236 
bÏckli¡ed_³”_t
 * 
p_bl_³”
 = &
m_bÏckli¡ed_³”s
[
id
];

238 ià(
p_bl_³”
->
is_v®id
)

240 ià(
	`memcmp
(
³”_addr
.
addr
, 
p_bl_³”
->³”_addr.addr, 
BLE_GAP_ADDR_LEN
) == 0)

242 
ušt8_t
 
lvl
 = 
p_bl_³”
->
³Çl™y_lvl
;

244 
	`PENALITY_LVL_NEXT_SET
(
lvl
);

245 
p_bl_³”
->
³Çl™y_lvl
 = 
lvl
;

246 
p_bl_³”
->
»w¬d_ticks
 = 0;

247 
p_bl_³”
->
³Çl™y_ticks
 = 
	`PENALITY_LVL_TO_PENALITY_TICKS
(
lvl
);

249 
Ãw_timeout
 = 
	`MIN
Òew_timeout, 
p_bl_³”
->
³Çl™y_ticks
);

251 
p_bl_³”
->
is_aùive
 = 
Œue
;

252 
Ãw_bl_’Œy
 = 
çl£
;

254 
	`NRF_LOG_DEBUG
("Pairing waiting interval has been„enewed. "

256 
lvl
);

257 
	`NRF_LOG_HEXDUMP_DEBUG
(
p_bl_³”
->
³”_addr
.
addr
,

258 (
p_bl_³”
->
³”_addr
.
addr
));

263 
ä“_id
 = 
id
;

268 ià(
Ãw_bl_’Œy
)

270 ià(
ä“_id
 < 
	`ARRAY_SIZE
(
m_bÏckli¡ed_³”s
))

272 
bÏckli¡ed_³”_t
 * 
p_bl_³”
 = &
m_bÏckli¡ed_³”s
[
ä“_id
];

274 
	`memıy
(&
p_bl_³”
->
³”_addr
, &peer_addr, (peer_addr));

276 
p_bl_³”
->
³Çl™y_lvl
 = 0;

277 
p_bl_³”
->
»w¬d_ticks
 = 0;

278 
p_bl_³”
->
³Çl™y_ticks
 = 
	`PENALITY_LVL_TO_PENALITY_TICKS
Õ_bl_³”->
³Çl™y_lvl
);

280 
Ãw_timeout
 = 
	`MIN
Òew_timeout, 
p_bl_³”
->
³Çl™y_ticks
);

282 
p_bl_³”
->
is_aùive
 = 
Œue
;

283 
p_bl_³”
->
is_v®id
 = 
Œue
;

284 
	`NRF_LOG_DEBUG
("New…eer has been‡ddedohe blacklist:");

285 
	`NRF_LOG_HEXDUMP_DEBUG
(
p_bl_³”
->
³”_addr
.
addr
, (p_bl_peer->peer_addr.addr));

289 
	`NRF_LOG_WARNING
("No spaceo blacklist‡nother…eer ID");

294 ià(
Ãw_timeout
 !ğ
UINT32_MAX
)

296 
”r_code
 = 
	`­p_tim”_¡¬t
(
m_·œšg_©‹m±_tim”
,

297 
Ãw_timeout
,

298 (*è
Ãw_timeout
);

299 ià(
”r_code
 !ğ
NRF_SUCCESS
)

301 
	`NRF_LOG_WARNING
("­p_tim”_¡¬t(è»tuºed %s", 
	`Äf_¡»¼Ü_g‘
(
”r_code
));

304 
	}
}

307 
boŞ
 
	$a¡_³”_bÏckli¡ed
(
ušt16_t
 
cÚn_hªdË
)

309 
»t_code_t
 
”r_code
;

310 
bË_g­_addr_t
 
³”_addr
;

312 
”r_code
 = 
	`im_bË_addr_g‘
(
cÚn_hªdË
, &
³”_addr
);

313 ià(
”r_code
 !ğ
NRF_SUCCESS
)

315 
	`NRF_LOG_WARNING
("im_ble_addr_get()„eturned %s. conn_handle: %d. "

317 
	`Äf_¡»¼Ü_g‘
(
”r_code
),

318 
cÚn_hªdË
);

319  
Œue
;

322 
ušt32_t
 
id
 = 0; id < 
	`ARRAY_SIZE
(
m_bÏckli¡ed_³”s
); id++)

324 
bÏckli¡ed_³”_t
 * 
p_bl_³”
 = &
m_bÏckli¡ed_³”s
[
id
];

326 ià(
p_bl_³”
->
is_v®id
)

328 ià((
	`memcmp
(
³”_addr
.
addr
, 
p_bl_³”
->³”_addr.addr, 
BLE_GAP_ADDR_LEN
) == 0) &&

329 (
p_bl_³”
->
is_aùive
))

331  
Œue
;

336  
çl£
;

337 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\ble\peer_manager\gatt_cache_manager.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
PEER_MANAGER
)

42 
	~"g©t_ÿche_mªag”.h
"

44 
	~"bË_g­.h
"

45 
	~"bË_”r.h
"

46 
	~"bË_cÚn_¡©e.h
"

47 
	~"³”_mªag”_ty³s.h
"

48 
	~"³”_mªag”_š‹º®.h
"

49 
	~"id_mªag”.h
"

50 
	~"g©ts_ÿche_mªag”.h
"

51 
	~"³”_d©a_¡Üage.h
"

52 
	~"³”_d©aba£.h
"

53 
	~"Äf_mtx.h
"

55 
	#NRF_LOG_MODULE_NAME
 
³”_mªag”_gcm


	)

56 #ià
PM_LOG_ENABLED


57 
	#NRF_LOG_LEVEL
 
PM_LOG_LEVEL


	)

58 
	#NRF_LOG_INFO_COLOR
 
PM_LOG_INFO_COLOR


	)

59 
	#NRF_LOG_DEBUG_COLOR
 
PM_LOG_DEBUG_COLOR


	)

61 
	#NRF_LOG_LEVEL
 0

	)

63 
	~"Äf_log.h
"

64 
	~"Äf_log_ù¾.h
"

65 
NRF_LOG_MODULE_REGISTER
();

66 
	~"Äf_¡»¼Ü.h
"

69 
	#GCM_EVENT_HANDLERS_CNT
 ((
m_evt_hªdËrs
è/ (m_evt_hªdËrs[0]))

	)

72 
pm_gcm_evt_hªdËr
(
pm_evt_t
 * 
p_gcm_evt
);

76 
pm_evt_hªdËr_š‹º®_t
 
	gm_evt_hªdËrs
[] =

78 
pm_gcm_evt_hªdËr


81 
boŞ
 
	gm_moduË_š™Ÿlized
;

82 
Äf_mtx_t
 
	gm_db_upd©e_š_´og»ss_mu‹x
;

83 
bË_cÚn_¡©e_u£r_æag_id_t
 
	gm_æag_loÿl_db_upd©e_³ndšg
;

84 
bË_cÚn_¡©e_u£r_æag_id_t
 
	gm_æag_loÿl_db_­¶y_³ndšg
;

85 
bË_cÚn_¡©e_u£r_æag_id_t
 
	gm_æag_£rviû_chªged_³ndšg
;

86 
bË_cÚn_¡©e_u£r_æag_id_t
 
	gm_æag_£rviû_chªged_£Á
;

87 
bË_cÚn_¡©e_u£r_æag_id_t
 
	gm_æag_ÿr_upd©e_³ndšg
;

89 #ifdeà
PM_SERVICE_CHANGED_ENABLED


90 
STATIC_ASSERT
(
PM_SERVICE_CHANGED_ENABLED
 || !
NRF_SDH_BLE_SERVICE_CHANGED
,

93 
	#PM_SERVICE_CHANGED_ENABLED
 1

	)

100 
	$š‹º®_¡©e_»£t
()

102 
m_moduË_š™Ÿlized
 = 
çl£
;

103 
	}
}

106 
	$evt_£nd
(
pm_evt_t
 * 
p_gcm_evt
)

108 
p_gcm_evt
->
³”_id
 = 
	`im_³”_id_g‘_by_cÚn_hªdË
Õ_gcm_evt->
cÚn_hªdË
);

110 
ušt32_t
 
i
 = 0; i < 
GCM_EVENT_HANDLERS_CNT
; i++)

112 
m_evt_hªdËrs
[
i
](
p_gcm_evt
);

114 
	}
}

124 
boŞ
 
	$cccd_wr™‹n
(
bË_g©ts_evt_wr™e_t
 cÚ¡ * 
p_wr™e_evt
)

126  ( (
p_wr™e_evt
->
İ
 =ğ
BLE_GATTS_OP_WRITE_REQ
)

127 && (
p_wr™e_evt
->
uuid
.
ty³
 =ğ
BLE_UUID_TYPE_BLE
)

128 && (
p_wr™e_evt
->
uuid
.uuid =ğ
BLE_UUID_DESCRIPTOR_CLIENT_CHAR_CONFIG
)

130 
	}
}

138 
	$£nd_uÃx³ùed_”rÜ
(
ušt16_t
 
cÚn_hªdË
, 
»t_code_t
 
”r_code
)

140 
pm_evt_t
 
”rÜ_evt
 =

142 .
evt_id
 = 
PM_EVT_ERROR_UNEXPECTED
,

143 .
cÚn_hªdË
 = conn_handle,

144 .
·¿ms
 =

146 .
”rÜ_uÃx³ùed
 =

148 .
”rÜ
 = 
”r_code
,

149 .
fds_”rÜ
 = 
çl£


153 
	`evt_£nd
(&
”rÜ_evt
);

154 
	}
}

165 
	$loÿl_db_­¶y_š_evt
(
ušt16_t
 
cÚn_hªdË
)

167 
boŞ
 
£t_´oûdu»_as_³ndšg
 = 
çl£
;

168 
»t_code_t
 
”r_code
;

169 
pm_evt_t
 
ev’t
 =

171 .
cÚn_hªdË
 = conn_handle,

174 ià(
cÚn_hªdË
 =ğ
BLE_CONN_HANDLE_INVALID
)

179 
”r_code
 = 
	`gscm_loÿl_db_ÿche_­¶y
(
cÚn_hªdË
);

181 
”r_code
)

183 
NRF_SUCCESS
:

184 
ev’t
.
evt_id
 = 
PM_EVT_LOCAL_DB_CACHE_APPLIED
;

186 
	`evt_£nd
(&
ev’t
);

189 
NRF_ERROR_BUSY
:

190 
£t_´oûdu»_as_³ndšg
 = 
Œue
;

193 
NRF_ERROR_INVALID_DATA
:

194 
ev’t
.
evt_id
 = 
PM_EVT_LOCAL_DB_CACHE_APPLY_FAILED
;

196 
	`NRF_LOG_WARNING
("The†ocal database has changed, so some subscriptionso‚otifications "\

198 
cÚn_hªdË
);

199 
	`evt_£nd
(&
ev’t
);

202 
BLE_ERROR_INVALID_CONN_HANDLE
:

207 
	`NRF_LOG_ERROR
("gscm_local_db_cache_apply()„eturned %s which should‚ot happen. "\

209 
	`Äf_¡»¼Ü_g‘
(
”r_code
),

210 
cÚn_hªdË
);

211 
	`£nd_uÃx³ùed_”rÜ
(
cÚn_hªdË
, 
”r_code
);

215 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
, 
m_æag_loÿl_db_­¶y_³ndšg
, 
£t_´oûdu»_as_³ndšg
);

216 
	}
}

226 
__INLINE
 
	$loÿl_db_upd©e
(
ušt16_t
 
cÚn_hªdË
, 
boŞ
 
upd©e
)

228 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
, 
m_æag_loÿl_db_upd©e_³ndšg
, 
upd©e
);

229 
	}
}

240 
boŞ
 
	$loÿl_db_upd©e_š_evt
(
ušt16_t
 
cÚn_hªdË
)

242 
boŞ
 
£t_´oûdu»_as_³ndšg
 = 
çl£
;

243 
boŞ
 
sucûss
 = 
çl£
;

244 
»t_code_t
 
”r_code
 = 
	`gscm_loÿl_db_ÿche_upd©e
(
cÚn_hªdË
);

246 
”r_code
)

248 
NRF_SUCCESS
:

249 
sucûss
 = 
Œue
;

252 
BLE_ERROR_INVALID_CONN_HANDLE
:

256 
NRF_ERROR_BUSY
:

257 
£t_´oûdu»_as_³ndšg
 = 
Œue
;

260 
NRF_ERROR_STORAGE_FULL
:

262 
pm_evt_t
 
ev’t
 =

264 .
evt_id
 = 
PM_EVT_STORAGE_FULL
,

265 .
cÚn_hªdË
 = conn_handle,

268 
	`NRF_LOG_WARNING
("FÏsh fuÎ. Could‚Ù stÜd©¨fÜ cÚn_hªdË: %d", 
cÚn_hªdË
);

269 
	`evt_£nd
(&
ev’t
);

274 
	`NRF_LOG_ERROR
("gscm_local_db_cache_update()„eturned %s for conn_handle: %d",

275 
	`Äf_¡»¼Ü_g‘
(
”r_code
),

276 
cÚn_hªdË
);

277 
	`£nd_uÃx³ùed_”rÜ
(
cÚn_hªdË
, 
”r_code
);

281 
	`loÿl_db_upd©e
(
cÚn_hªdË
, 
£t_´oûdu»_as_³ndšg
);

283  
sucûss
;

284 
	}
}

286 #ià
PM_SERVICE_CHANGED_ENABLED


295 
	$£rviû_chªged_£nd_š_evt
(
ušt16_t
 
cÚn_hªdË
)

297 
boŞ
 
sc_³ndšg_¡©e
 = 
Œue
;

298 
boŞ
 
sc_£Á_¡©e
 = 
çl£
;

299 
»t_code_t
 
”r_code
 = 
	`gscm_£rviû_chªged_šd_£nd
(
cÚn_hªdË
);

301 
”r_code
)

303 
NRF_SUCCESS
:

305 
pm_evt_t
 
ev’t
 =

307 .
evt_id
 = 
PM_EVT_SERVICE_CHANGED_IND_SENT
,

308 .
cÚn_hªdË
 = conn_handle,

311 
sc_£Á_¡©e
 = 
Œue
;

313 
	`evt_£nd
(&
ev’t
);

317 
NRF_ERROR_BUSY
:

321 
NRF_ERROR_INVALID_STATE
:

325 
NRF_ERROR_NOT_SUPPORTED
:

327 
sc_³ndšg_¡©e
 = 
çl£
;

328 
	`gscm_db_chªge_nÙifiÿtiÚ_dÚe
(
	`im_³”_id_g‘_by_cÚn_hªdË
(
cÚn_hªdË
));

331 
BLE_ERROR_GATTS_SYS_ATTR_MISSING
:

332 
	`loÿl_db_­¶y_š_evt
(
cÚn_hªdË
);

335 
BLE_ERROR_INVALID_CONN_HANDLE
:

340 
	`NRF_LOG_ERROR
("gscm_service_changed_ind_send()„eturned %s for conn_handle: %d",

341 
	`Äf_¡»¼Ü_g‘
(
”r_code
),

342 
cÚn_hªdË
);

343 
	`£nd_uÃx³ùed_”rÜ
(
cÚn_hªdË
, 
”r_code
);

347 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
, 
m_æag_£rviû_chªged_³ndšg
, 
sc_³ndšg_¡©e
);

348 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
, 
m_æag_£rviû_chªged_£Á
, 
sc_£Á_¡©e
);

349 
	}
}

352 
	$­¶y_³ndšg_hªdË
(
ušt16_t
 
cÚn_hªdË
, * 
p_cÚ‹xt
)

354 
	`UNUSED_PARAMETER
(
p_cÚ‹xt
);

355 
	`loÿl_db_­¶y_š_evt
(
cÚn_hªdË
);

356 
	}
}

359 
__INLINE
 
	$­¶y_³ndšg_æags_check
()

361 
	`UNUSED_RETURN_VALUE
(
	`bË_cÚn_¡©e_fÜ_—ch_£t_u£r_æag
(
m_æag_loÿl_db_­¶y_³ndšg
,

362 
­¶y_³ndšg_hªdË
,

363 
NULL
));

364 
	}
}

367 
	$db_upd©e_³ndšg_hªdË
(
ušt16_t
 
cÚn_hªdË
, * 
p_cÚ‹xt
)

369 
	`UNUSED_PARAMETER
(
p_cÚ‹xt
);

370 ià(
	`Äf_mtx_Œylock
(&
m_db_upd©e_š_´og»ss_mu‹x
))

372 ià(
	`loÿl_db_upd©e_š_evt
(
cÚn_hªdË
))

379 
	`Äf_mtx_uÆock
(&
m_db_upd©e_š_´og»ss_mu‹x
);

382 
	}
}

385 #ià
PM_SERVICE_CHANGED_ENABLED


386 
	$sc_£nd_³ndšg_hªdË
(
ušt16_t
 
cÚn_hªdË
, * 
p_cÚ‹xt
)

388 
	`UNUSED_PARAMETER
(
p_cÚ‹xt
);

389 ià(!
	`bË_cÚn_¡©e_u£r_æag_g‘
(
cÚn_hªdË
, 
m_æag_£rviû_chªged_£Á
))

391 
	`£rviû_chªged_£nd_š_evt
(
cÚn_hªdË
);

393 
	}
}

396 
__INLINE
 
	$£rviû_chªged_³ndšg_æags_check
()

398 
	`UNUSED_RETURN_VALUE
(
	`bË_cÚn_¡©e_fÜ_—ch_£t_u£r_æag
(
m_æag_£rviû_chªged_³ndšg
,

399 
sc_£nd_³ndšg_hªdË
,

400 
NULL
));

401 
	}
}

404 
	$£rviû_chªged_Ãeded
(
ušt16_t
 
cÚn_hªdË
)

406 ià(
	`gscm_£rviû_chªged_šd_Ãeded
(
cÚn_hªdË
))

408 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
, 
m_æag_£rviû_chªged_³ndšg
, 
Œue
);

410 
	}
}

414 
	$ÿr_upd©e_³ndšg_hªdË
(
ušt16_t
 
cÚn_hªdË
, * 
p_cÚ‹xt
)

416 
	`UNUSED_PARAMETER
(
p_cÚ‹xt
);

418 
bË_uuid_t
 
ÿr_uuid
;

419 
	`mem£t
(&
ÿr_uuid
, 0, (
bË_uuid_t
));

420 
ÿr_uuid
.
uuid
 = 
BLE_UUID_GAP_CHARACTERISTIC_CAR
;

421 
ÿr_uuid
.
ty³
 = 
BLE_UUID_TYPE_BLE
;

423 
bË_g©tc_hªdË_¿nge_t
 cÚ¡ 
ÿr_hªdË_¿nge
 = {1, 0xFFFF};

425 
»t_code_t
 
”r_code
 = 
	`sd_bË_g©tc_ch¬_v®ue_by_uuid_»ad
(
cÚn_hªdË
, &
ÿr_uuid
, &
ÿr_hªdË_¿nge
);

426 
	`UNUSED_RETURN_VALUE
(
”r_code
);

427 
	}
}

430 
	$ÿr_upd©e_Ãeded
(
ušt16_t
 
cÚn_hªdË
)

432 
pm_³”_d©a_t
 
³”_d©a
;

433 ià(
	`pds_³”_d©a_»ad
(
	`im_³”_id_g‘_by_cÚn_hªdË
(
cÚn_hªdË
),

434 
PM_PEER_DATA_ID_CENTRAL_ADDR_RES
,

435 &
³”_d©a
,

436 
NULL
è=ğ
NRF_ERROR_NOT_FOUND
)

438 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
, 
m_æag_ÿr_upd©e_³ndšg
, 
Œue
);

440 
	}
}

443 
__INLINE
 
	$upd©e_³ndšg_æags_check
()

445 
ušt32_t
 
couÁ
 = 
	`bË_cÚn_¡©e_fÜ_—ch_£t_u£r_æag
(
m_æag_loÿl_db_upd©e_³ndšg
,

446 
db_upd©e_³ndšg_hªdË
,

447 
NULL
);

448 ià(
couÁ
 == 0)

450 
couÁ
 = 
	`bË_cÚn_¡©e_fÜ_—ch_£t_u£r_æag
(
m_æag_ÿr_upd©e_³ndšg
,

451 
ÿr_upd©e_³ndšg_hªdË
,

452 
NULL
);

453 
	`UNUSED_RETURN_VALUE
(
couÁ
);

455 
	}
}

463 
	$gcm_im_evt_hªdËr
(
pm_evt_t
 * 
p_ev’t
)

465 
p_ev’t
->
evt_id
)

467 
PM_EVT_BONDED_PEER_CONNECTED
:

468 
	`loÿl_db_­¶y_š_evt
(
p_ev’t
->
cÚn_hªdË
);

469 #ià(
PM_SERVICE_CHANGED_ENABLED
 == 1)

470 
	`£rviû_chªged_Ãeded
(
p_ev’t
->
cÚn_hªdË
);

472 
	`ÿr_upd©e_Ãeded
(
p_ev’t
->
cÚn_hªdË
);

473 
	`upd©e_³ndšg_æags_check
();

478 
	}
}

486 
	$gcm_pdb_evt_hªdËr
(
pm_evt_t
 * 
p_ev’t
)

488 iàĞ
p_ev’t
->
evt_id
 =ğ
PM_EVT_PEER_DATA_UPDATE_SUCCEEDED


489 && 
p_ev’t
->
·¿ms
.
³”_d©a_upd©e_sucûeded
.
aùiÚ
 =ğ
PM_PEER_DATA_OP_UPDATE
)

491 
p_ev’t
->
·¿ms
.
³”_d©a_upd©e_sucûeded
.
d©a_id
)

493 
PM_PEER_DATA_ID_BONDING
:

495 
ušt16_t
 
cÚn_hªdË
 = 
	`im_cÚn_hªdË_g‘
(
p_ev’t
->
³”_id
);

497 ià(
cÚn_hªdË
 !ğ
BLE_CONN_HANDLE_INVALID
)

499 
	`loÿl_db_upd©e
(
cÚn_hªdË
, 
Œue
);

500 
	`ÿr_upd©e_Ãeded
(
cÚn_hªdË
);

505 #ià
PM_SERVICE_CHANGED_ENABLED


506 
PM_PEER_DATA_ID_SERVICE_CHANGED_PENDING
:

508 
»t_code_t
 
”r_code
;

509 
pm_³”_d©a_æash_t
 
³”_d©a
;

511 
”r_code
 = 
	`pdb_³”_d©a_±r_g‘
(
p_ev’t
->
³”_id
,

512 
PM_PEER_DATA_ID_SERVICE_CHANGED_PENDING
,

513 &
³”_d©a
);

515 ià(
”r_code
 =ğ
NRF_SUCCESS
)

517 ià(*
³”_d©a
.
p_£rviû_chªged_³ndšg
)

519 
ušt16_t
 
cÚn_hªdË
 = 
	`im_cÚn_hªdË_g‘
(
p_ev’t
->
³”_id
);

520 ià(
cÚn_hªdË
 !ğ
BLE_CONN_HANDLE_INVALID
)

522 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
, 
m_æag_£rviû_chªged_³ndšg
, 
Œue
);

523 
	`£rviû_chªged_³ndšg_æags_check
();

531 
PM_PEER_DATA_ID_GATT_LOCAL
:

532 ià(
m_db_upd©e_š_´og»ss_mu‹x
 =ğ
NRF_MTX_LOCKED
)

534 
	`Äf_mtx_uÆock
(&
m_db_upd©e_š_´og»ss_mu‹x
);

546 
	`upd©e_³ndšg_æags_check
();

547 
	}
}

550 
»t_code_t
 
	$gcm_š™
()

552 
	`NRF_PM_DEBUG_CHECK
(!
m_moduË_š™Ÿlized
);

554 
	`š‹º®_¡©e_»£t
();

556 
m_æag_loÿl_db_upd©e_³ndšg
 = 
	`bË_cÚn_¡©e_u£r_æag_acquœe
();

557 
m_æag_loÿl_db_­¶y_³ndšg
 = 
	`bË_cÚn_¡©e_u£r_æag_acquœe
();

558 
m_æag_£rviû_chªged_³ndšg
 = 
	`bË_cÚn_¡©e_u£r_æag_acquœe
();

559 
m_æag_£rviû_chªged_£Á
 = 
	`bË_cÚn_¡©e_u£r_æag_acquœe
();

560 
m_æag_ÿr_upd©e_³ndšg
 = 
	`bË_cÚn_¡©e_u£r_æag_acquœe
();

562 ià((
m_æag_loÿl_db_upd©e_³ndšg
 =ğ
BLE_CONN_STATE_USER_FLAG_INVALID
)

563 || (
m_æag_loÿl_db_­¶y_³ndšg
 =ğ
BLE_CONN_STATE_USER_FLAG_INVALID
)

564 || (
m_æag_£rviû_chªged_³ndšg
 =ğ
BLE_CONN_STATE_USER_FLAG_INVALID
)

565 || (
m_æag_£rviû_chªged_£Á
 =ğ
BLE_CONN_STATE_USER_FLAG_INVALID
)

566 || (
m_æag_ÿr_upd©e_³ndšg
 =ğ
BLE_CONN_STATE_USER_FLAG_INVALID
)

569 
	`NRF_LOG_ERROR
("Could‚ot‡cquire conn_state user flags. Increase "\

571  
NRF_ERROR_INTERNAL
;

574 
	`Äf_mtx_š™
(&
m_db_upd©e_š_´og»ss_mu‹x
);

576 
m_moduË_š™Ÿlized
 = 
Œue
;

578  
NRF_SUCCESS
;

579 
	}
}

583 
	$¡Üe_ÿr_v®ue
(
ušt16_t
 
cÚn_hªdË
, 
boŞ
 
ÿr_v®ue
)

586 cÚ¡ 
ušt32_t
 
ÿr_v®ue_Œue
 = 
Œue
;

587 cÚ¡ 
ušt32_t
 
ÿr_v®ue_çl£
 = 
çl£
;

589 
pm_³”_d©a_cÚ¡_t
 
³”_d©a
 =

591 .
d©a_id
 = 
PM_PEER_DATA_ID_CENTRAL_ADDR_RES
,

592 .
Ëngth_wÜds
 = 1,

594 
³”_d©a
.
p_ûÁ¿l_addr_»s
 = 
ÿr_v®ue
 ? &
ÿr_v®ue_Œue
 : &
ÿr_v®ue_çl£
;

595 
»t_code_t
 
”r_code
 = 
	`pds_³”_d©a_¡Üe
(
	`im_³”_id_g‘_by_cÚn_hªdË
(
cÚn_hªdË
), &
³”_d©a
, 
NULL
);

596 ià(
”r_code
 !ğ
NRF_SUCCESS
)

598 
	`NRF_LOG_WARNING
("CAR ch¬ v®ucouldn'ˆb¡Üed (”rÜ: %s). R—‰em± wÈh­³ÀÚhÃxˆcÚÃùiÚ.", 
	`Äf_¡»¼Ü_g‘
(
”r_code
));

600 
	}
}

608 
	$gcm_bË_evt_hªdËr
(
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

610 
ušt16_t
 
cÚn_hªdË
 = 
p_bË_evt
->
evt
.
g©ts_evt
.conn_handle;

612 
p_bË_evt
->
h—d”
.
evt_id
)

614 
BLE_GATTS_EVT_SYS_ATTR_MISSING
:

615 
	`loÿl_db_­¶y_š_evt
(
cÚn_hªdË
);

618 #ià
PM_SERVICE_CHANGED_ENABLED


619 
BLE_GATTS_EVT_SC_CONFIRM
:

621 
pm_evt_t
 
ev’t
 =

623 .
evt_id
 = 
PM_EVT_SERVICE_CHANGED_IND_CONFIRMED
,

624 .
³”_id
 = 
	`im_³”_id_g‘_by_cÚn_hªdË
(
cÚn_hªdË
),

625 .
cÚn_hªdË
 = conn_handle,

628 
	`gscm_db_chªge_nÙifiÿtiÚ_dÚe
(
ev’t
.
³”_id
);

630 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
, 
m_æag_£rviû_chªged_£Á
, 
çl£
);

631 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
, 
m_æag_£rviû_chªged_³ndšg
, 
çl£
);

632 
	`evt_£nd
(&
ev’t
);

637 
BLE_GATTS_EVT_WRITE
:

638 ià(
	`cccd_wr™‹n
(&
p_bË_evt
->
evt
.
g©ts_evt
.
·¿ms
.
wr™e
))

640 
	`loÿl_db_upd©e
(
cÚn_hªdË
, 
Œue
);

641 
	`upd©e_³ndšg_æags_check
();

645 
BLE_GATTC_EVT_CHAR_VAL_BY_UUID_READ_RSP
:

647 
boŞ
 
ÿr_v®ue
 = 
çl£
;

648 
cÚn_hªdË
 = 
p_bË_evt
->
evt
.
g©tc_evt
.conn_handle;

650 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
, 
m_æag_ÿr_upd©e_³ndšg
, 
çl£
);

652 ià(
p_bË_evt
->
evt
.
g©tc_evt
.
g©t_¡©us
 =ğ
BLE_GATT_STATUS_ATTERR_ATTRIBUTE_NOT_FOUND
)

656 ià(
p_bË_evt
->
evt
.
g©tc_evt
.
g©t_¡©us
 !ğ
BLE_GATT_STATUS_SUCCESS
)

658 
	`NRF_LOG_WARNING
("Unexpected GATT status while getting CAR char value: 0x%x",

659 
p_bË_evt
->
evt
.
g©tc_evt
.
g©t_¡©us
);

664 ià(
p_bË_evt
->
evt
.
g©tc_evt
.
·¿ms
.
ch¬_v®_by_uuid_»ad_r¥
.
couÁ
 != 1)

666 
	`NRF_LOG_WARNING
("Multiple (%d) CAR characteristics found, usinghe first.",

667 
p_bË_evt
->
evt
.
g©tc_evt
.
·¿ms
.
ch¬_v®_by_uuid_»ad_r¥
.
couÁ
);

670 ià(
p_bË_evt
->
evt
.
g©tc_evt
.
·¿ms
.
ch¬_v®_by_uuid_»ad_r¥
.
v®ue_Ën
 != 1)

672 
	`NRF_LOG_WARNING
("Unexpected CAR characteristic value†ength (%d), store 0.",

673 
p_bË_evt
->
evt
.
g©tc_evt
.
·¿ms
.
ch¬_v®_by_uuid_»ad_r¥
.
v®ue_Ën
);

678 
ÿr_v®ue
 = *
p_bË_evt
->
evt
.
g©tc_evt
.
·¿ms
.
ch¬_v®_by_uuid_»ad_r¥
.
hªdË_v®ue
;

682 
	`¡Üe_ÿr_v®ue
(
cÚn_hªdË
, 
ÿr_v®ue
);

687 
	`­¶y_³ndšg_æags_check
();

688 #ià
PM_SERVICE_CHANGED_ENABLED


689 
	`£rviû_chªged_³ndšg_æags_check
();

691 
	}
}

694 
»t_code_t
 
	$gcm_loÿl_db_ÿche_upd©e
(
ušt16_t
 
cÚn_hªdË
)

696 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

698 
	`loÿl_db_upd©e
(
cÚn_hªdË
, 
Œue
);

699 
	`upd©e_³ndšg_æags_check
();

701  
NRF_SUCCESS
;

702 
	}
}

705 #ià
PM_SERVICE_CHANGED_ENABLED


706 
	$gcm_loÿl_d©aba£_has_chªged
()

708 
	`gscm_loÿl_d©aba£_has_chªged
();

710 
bË_cÚn_¡©e_cÚn_hªdË_li¡_t
 
cÚn_hªdËs
 = 
	`bË_cÚn_¡©e_cÚn_hªdËs
();

712 
ušt16_t
 
i
 = 0; i < 
cÚn_hªdËs
.
Ën
; i++)

714 ià(
	`im_³”_id_g‘_by_cÚn_hªdË
(
cÚn_hªdËs
.cÚn_hªdËs[
i
]è=ğ
PM_PEER_ID_INVALID
)

716 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdËs
.cÚn_hªdËs[
i
], 
m_æag_£rviû_chªged_³ndšg
, 
Œue
);

720 
	`£rviû_chªged_³ndšg_æags_check
();

721 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\ble\peer_manager\gatts_cache_manager.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
PEER_MANAGER
)

42 
	~"g©ts_ÿche_mªag”.h
"

44 
	~<¡ršg.h
>

45 
	~"bË_g­.h
"

46 
	~"bË_”r.h
"

47 
	~"³”_mªag”_ty³s.h
"

48 
	~"³”_mªag”_š‹º®.h
"

49 
	~"³”_d©aba£.h
"

50 
	~"³”_d©a_¡Üage.h
"

51 
	~"id_mªag”.h
"

53 
	#NRF_LOG_MODULE_NAME
 
³”_mªag”_gscm


	)

54 #ià
PM_LOG_ENABLED


55 
	#NRF_LOG_LEVEL
 
PM_LOG_LEVEL


	)

56 
	#NRF_LOG_INFO_COLOR
 
PM_LOG_INFO_COLOR


	)

57 
	#NRF_LOG_DEBUG_COLOR
 
PM_LOG_DEBUG_COLOR


	)

59 
	#NRF_LOG_LEVEL
 0

	)

61 
	~"Äf_log.h
"

62 
	~"Äf_log_ù¾.h
"

63 
NRF_LOG_MODULE_REGISTER
();

64 
	~"Äf_¡»¼Ü.h
"

67 
	#SYS_ATTR_SYS
 (
BLE_GATTS_SYS_ATTR_FLAG_SYS_SRVCS
)

	)

68 
	#SYS_ATTR_USR
 (
BLE_GATTS_SYS_ATTR_FLAG_USR_SRVCS
)

	)

69 
	#SYS_ATTR_BOTH
 (
SYS_ATTR_SYS
 | 
SYS_ATTR_USR
)

	)

71 
boŞ
 
	gm_moduË_š™Ÿlized
;

72 
pm_³”_id_t
 
	gm_cu¼’t_sc_¡Üe_³”_id
;

77 
	$š‹º®_¡©e_»£t
()

79 
m_moduË_š™Ÿlized
 = 
çl£
;

80 
m_cu¼’t_sc_¡Üe_³”_id
 = 
PM_PEER_ID_INVALID
;

83 
	`UNUSED_VARIABLE
(
m_cu¼’t_sc_¡Üe_³”_id
);

84 
	}
}

87 #ià!
defšed
(
PM_SERVICE_CHANGED_ENABLED
) || (PM_SERVICE_CHANGED_ENABLED == 1)

94 
	$£rviû_chªged_³ndšg_£t
()

96 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

98 
»t_code_t
 
”r_code
;

100 cÚ¡ 
ušt32_t
 
£rviû_chªged_³ndšg
 = 
Œue
;

103 
pm_³”_d©a_cÚ¡_t
 
³”_d©a
 =

105 .
d©a_id
 = 
PM_PEER_DATA_ID_SERVICE_CHANGED_PENDING
,

106 .
Ëngth_wÜds
 = 
	`PM_SC_STATE_N_WORDS
(),

107 .
p_£rviû_chªged_³ndšg
 = (
boŞ
*)&
£rviû_chªged_³ndšg
,

111 
”r_code
 = 
	`pds_³”_d©a_¡Üe
(
m_cu¼’t_sc_¡Üe_³”_id
, &
³”_d©a
, 
NULL
);

112 (
m_cu¼’t_sc_¡Üe_³”_id
 !ğ
PM_PEER_ID_INVALID
è&& (
”r_code
 !ğ
NRF_ERROR_BUSY
))

114 
m_cu¼’t_sc_¡Üe_³”_id
 = 
	`pds_Ãxt_³”_id_g‘
(m_current_sc_store_peer_id);

115 
”r_code
 = 
	`pds_³”_d©a_¡Üe
(
m_cu¼’t_sc_¡Üe_³”_id
, &
³”_d©a
, 
NULL
);

117 
	}
}

127 
	$gscm_pdb_evt_hªdËr
(
pm_evt_t
 * 
p_ev’t
)

129 ià(
m_cu¼’t_sc_¡Üe_³”_id
 !ğ
PM_PEER_ID_INVALID
)

131 
	`£rviû_chªged_³ndšg_£t
();

133 
	}
}

137 
»t_code_t
 
	$gscm_š™
()

139 
	`NRF_PM_DEBUG_CHECK
(!
m_moduË_š™Ÿlized
);

141 
	`š‹º®_¡©e_»£t
();

142 
m_moduË_š™Ÿlized
 = 
Œue
;

144  
NRF_SUCCESS
;

145 
	}
}

148 
»t_code_t
 
	$gscm_loÿl_db_ÿche_upd©e
(
ušt16_t
 
cÚn_hªdË
)

150 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

152 
pm_³”_id_t
 
³”_id
 = 
	`im_³”_id_g‘_by_cÚn_hªdË
(
cÚn_hªdË
);

153 
»t_code_t
 
”r_code
;

155 ià(
³”_id
 =ğ
PM_PEER_ID_INVALID
)

157  
BLE_ERROR_INVALID_CONN_HANDLE
;

161 
pm_³”_d©a_t
 
³”_d©a
;

162 
ušt16_t
 
n_bufs
 = 1;

163 
boŞ
 
»Œy_w™h_bigg”_bufãr
 = 
çl£
;

167 
»Œy_w™h_bigg”_bufãr
 = 
çl£
;

169 
”r_code
 = 
	`pdb_wr™e_buf_g‘
(
³”_id
, 
PM_PEER_DATA_ID_GATT_LOCAL
, 
n_bufs
++, &
³”_d©a
);

170 ià(
”r_code
 =ğ
NRF_SUCCESS
)

172 
pm_³”_d©a_loÿl_g©t_db_t
 * 
p_loÿl_g©t_db
 = 
³”_d©a
.p_local_gatt_db;

174 
p_loÿl_g©t_db
->
æags
 = 
SYS_ATTR_BOTH
;

176 
”r_code
 = 
	`sd_bË_g©ts_sys_©Œ_g‘
(
cÚn_hªdË
, &
p_loÿl_g©t_db
->
d©a
[0], &p_loÿl_g©t_db->
Ën
,…_loÿl_g©t_db->
æags
);

178 ià(
”r_code
 =ğ
NRF_SUCCESS
)

180 
”r_code
 = 
	`pdb_wr™e_buf_¡Üe
(
³”_id
, 
PM_PEER_DATA_ID_GATT_LOCAL
,…eer_id);

184 ià(
”r_code
 =ğ
NRF_ERROR_DATA_SIZE
)

187 
»Œy_w™h_bigg”_bufãr
 = 
Œue
;

189 ià(
”r_code
 =ğ
NRF_ERROR_NOT_FOUND
)

192 
”r_code
 = 
NRF_SUCCESS
;

195 
»t_code_t
 
”r_code_»Ëa£
 = 
	`pdb_wr™e_buf_»Ëa£
(
³”_id
, 
PM_PEER_DATA_ID_GATT_LOCAL
);

196 ià(
”r_code_»Ëa£
 !ğ
NRF_SUCCESS
)

198 
	`NRF_LOG_ERROR
("Did‡notherhread manipulate PM_PEER_DATA_ID_GATT_LOCAL for "\

200 
³”_id
,

201 
	`Äf_¡»¼Ü_g‘
(
”r_code_»Ëa£
));

202 
”r_code
 = 
NRF_ERROR_INTERNAL
;

206 ià(
”r_code
 =ğ
NRF_ERROR_INVALID_PARAM
)

209 
”r_code
 = 
NRF_ERROR_DATA_SIZE
;

211 } 
»Œy_w™h_bigg”_bufãr
);

214  
”r_code
;

215 
	}
}

218 
»t_code_t
 
	$gscm_loÿl_db_ÿche_­¶y
(
ušt16_t
 
cÚn_hªdË
)

220 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

222 
pm_³”_id_t
 
³”_id
 = 
	`im_³”_id_g‘_by_cÚn_hªdË
(
cÚn_hªdË
);

223 
»t_code_t
 
”r_code
;

224 
pm_³”_d©a_æash_t
 
³”_d©a
;

225 
ušt8_t
 cÚ¡ * 
p_sys_©Œ_d©a
 = 
NULL
;

226 
ušt16_t
 
sys_©Œ_Ën
 = 0;

227 
ušt32_t
 
sys_©Œ_æags
 = (
SYS_ATTR_BOTH
);

228 
boŞ
 
®l_©Œibu‹s_­¶›d
 = 
Œue
;

230 ià(
³”_id
 !ğ
PM_PEER_ID_INVALID
)

232 
”r_code
 = 
	`pdb_³”_d©a_±r_g‘
(
³”_id
, 
PM_PEER_DATA_ID_GATT_LOCAL
, &
³”_d©a
);

233 ià(
”r_code
 =ğ
NRF_SUCCESS
)

235 
pm_³”_d©a_loÿl_g©t_db_t
 cÚ¡ * 
p_loÿl_g©t_db
;

237 
p_loÿl_g©t_db
 = 
³”_d©a
.p_local_gatt_db;

238 
p_sys_©Œ_d©a
 = 
p_loÿl_g©t_db
->
d©a
;

239 
sys_©Œ_Ën
 = 
p_loÿl_g©t_db
->
Ën
;

240 
sys_©Œ_æags
 = 
p_loÿl_g©t_db
->
æags
;

246 
”r_code
 = 
	`sd_bË_g©ts_sys_©Œ_£t
(
cÚn_hªdË
, 
p_sys_©Œ_d©a
, 
sys_©Œ_Ën
, 
sys_©Œ_æags
);

248 ià(
”r_code
 =ğ
NRF_ERROR_NO_MEM
)

250 
”r_code
 = 
NRF_ERROR_BUSY
;

252 ià(
”r_code
 =ğ
NRF_ERROR_INVALID_STATE
)

254 
”r_code
 = 
NRF_SUCCESS
;

256 ià(
”r_code
 =ğ
NRF_ERROR_INVALID_DATA
)

258 
®l_©Œibu‹s_­¶›d
 = 
çl£
;

260 ià(
sys_©Œ_æags
 & 
SYS_ATTR_USR
)

263 
sys_©Œ_æags
 = 
SYS_ATTR_SYS
;

265 ià(
p_sys_©Œ_d©a
 || 
sys_©Œ_Ën
)

268 
p_sys_©Œ_d©a
 = 
NULL
;

269 
sys_©Œ_Ën
 = 0;

270 
sys_©Œ_æags
 = 
SYS_ATTR_BOTH
;

274 
	`NRF_LOG_ERROR
("sd_ble_gatts_sys_attr_set()„eturned NRF_ERROR_INVALID_DATA for NULL "\

276 
cÚn_hªdË
);

277 
”r_code
 = 
NRF_ERROR_INTERNAL
;

280 } 
”r_code
 =ğ
NRF_ERROR_INVALID_DATA
);

282 ià(!
®l_©Œibu‹s_­¶›d
)

284 
”r_code
 = 
NRF_ERROR_INVALID_DATA
;

287  
”r_code
;

288 
	}
}

290 #ià!
defšed
(
PM_SERVICE_CHANGED_ENABLED
) || (PM_SERVICE_CHANGED_ENABLED == 1)

291 
	$gscm_loÿl_d©aba£_has_chªged
()

293 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

294 
m_cu¼’t_sc_¡Üe_³”_id
 = 
	`pds_Ãxt_³”_id_g‘
(
PM_PEER_ID_INVALID
);

295 
	`£rviû_chªged_³ndšg_£t
();

296 
	}
}

299 
boŞ
 
	$gscm_£rviû_chªged_šd_Ãeded
(
ušt16_t
 
cÚn_hªdË
)

301 
»t_code_t
 
”r_code
;

302 
boŞ
 
£rviû_chªged_¡©e
;

303 
pm_³”_d©a_æash_t
 
³”_d©a
;

305 
³”_d©a
.
p_£rviû_chªged_³ndšg
 = &
£rviû_chªged_¡©e
;

306 
pm_³”_id_t
 
³”_id
 = 
	`im_³”_id_g‘_by_cÚn_hªdË
(
cÚn_hªdË
);

308 
”r_code
 = 
	`pdb_³”_d©a_±r_g‘
(
³”_id
, 
PM_PEER_DATA_ID_SERVICE_CHANGED_PENDING
, &
³”_d©a
);

310 ià(
”r_code
 !ğ
NRF_SUCCESS
)

312  
çl£
;

315  *
³”_d©a
.
p_£rviû_chªged_³ndšg
;

316 
	}
}

319 
»t_code_t
 
	$gscm_£rviû_chªged_šd_£nd
(
ušt16_t
 
cÚn_hªdË
)

321 
ušt16_t
 
¡¬t_hªdË
;

322 cÚ¡ 
ušt16_t
 
’d_hªdË
 = 0xFFFF;

323 
»t_code_t
 
”r_code
;

325 
”r_code
 = 
	`sd_bË_g©ts_š™Ÿl_u£r_hªdË_g‘
(&
¡¬t_hªdË
);

327 ià(
”r_code
 !ğ
NRF_SUCCESS
)

329 
	`NRF_LOG_ERROR
("sd_ble_gatts_initial_user_handle_get()„eturned %s which should‚ot happen.",

330 
	`Äf_¡»¼Ü_g‘
(
”r_code
));

331  
NRF_ERROR_INTERNAL
;

336 
”r_code
 = 
	`sd_bË_g©ts_£rviû_chªged
(
cÚn_hªdË
, 
¡¬t_hªdË
, 
’d_hªdË
);

337 ià(
”r_code
 =ğ
BLE_ERROR_INVALID_ATTR_HANDLE
)

339 
¡¬t_hªdË
 += 1;

341 } 
”r_code
 =ğ
BLE_ERROR_INVALID_ATTR_HANDLE
);

343  
”r_code
;

344 
	}
}

347 
	$gscm_db_chªge_nÙifiÿtiÚ_dÚe
(
pm_³”_id_t
 
³”_id
)

349 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

352 cÚ¡ 
ušt32_t
 
£rviû_chªged_³ndšg
 = 
çl£
;

355 
pm_³”_d©a_cÚ¡_t
 
³”_d©a
 =

357 .
d©a_id
 = 
PM_PEER_DATA_ID_SERVICE_CHANGED_PENDING
,

358 .
Ëngth_wÜds
 = 
	`PM_SC_STATE_N_WORDS
(),

359 .
p_£rviû_chªged_³ndšg
 = (
boŞ
*)&
£rviû_chªged_³ndšg
,

365 (è
	`pds_³”_d©a_¡Üe
(
³”_id
, &
³”_d©a
, 
NULL
);

367 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\ble\peer_manager\id_manager.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
PEER_MANAGER
)

42 
	~"id_mªag”.h
"

44 
	~<¡ršg.h
>

45 
	~"bË.h
"

46 
	~"bË_g­.h
"

47 
	~"bË_”r.h
"

48 
	~"³”_mªag”_ty³s.h
"

49 
	~"³”_d©aba£.h
"

50 
	~"³”_d©a_¡Üage.h
"

51 
	~"Äf_soc.h
"

52 
	~"bË_cÚn_¡©e.h
"

54 
	#NRF_LOG_MODULE_NAME
 
³”_mªag”_im


	)

55 #ià
PM_LOG_ENABLED


56 
	#NRF_LOG_LEVEL
 
PM_LOG_LEVEL


	)

57 
	#NRF_LOG_INFO_COLOR
 
PM_LOG_INFO_COLOR


	)

58 
	#NRF_LOG_DEBUG_COLOR
 
PM_LOG_DEBUG_COLOR


	)

60 
	#NRF_LOG_LEVEL
 0

	)

62 
	~"Äf_log.h
"

63 
	~"Äf_log_ù¾.h
"

64 
NRF_LOG_MODULE_REGISTER
();

66 
	#IM_MAX_CONN_HANDLES
 (20)

	)

67 
	#IM_NO_INVALID_CONN_HANDLES
 (0xFF)

	)

68 
	#IM_ADDR_CLEARTEXT_LENGTH
 (3)

	)

69 
	#IM_ADDR_CIPHERTEXT_LENGTH
 (3)

	)

72 
	#IM_EVENT_HANDLERS_CNT
 ((
m_evt_hªdËrs
è/ (m_evt_hªdËrs[0]))

	)

76 
pm_im_evt_hªdËr
(
pm_evt_t
 * 
p_ev’t
);

77 
gcm_im_evt_hªdËr
(
pm_evt_t
 * 
p_ev’t
);

81 
pm_evt_hªdËr_š‹º®_t
 cÚ¡ 
	gm_evt_hªdËrs
[] =

83 
pm_im_evt_hªdËr
,

84 
gcm_im_evt_hªdËr


89 
pm_³”_id_t
 
	m³”_id
;

90 
bË_g­_addr_t
 
	m³”_add»ss
;

91 } 
	tim_cÚÃùiÚ_t
;

93 
im_cÚÃùiÚ_t
 
	gm_cÚÃùiÚs
[
IM_MAX_CONN_HANDLES
];

94 
ušt8_t
 
	gm_wli¡ed_³”_út
;

95 
pm_³”_id_t
 
	gm_wli¡ed_³”s
[
BLE_GAP_WHITELIST_ADDR_MAX_COUNT
];

102 
	$evt_£nd
(
pm_evt_t
 * 
p_ev’t
)

104 
ušt32_t
 
i
 = 0; i < 
IM_EVENT_HANDLERS_CNT
; i++)

106 
m_evt_hªdËrs
[
i
](
p_ev’t
);

108 
	}
}

120 
boŞ
 
	$is_v®id_œk
(
bË_g­_œk_t
 cÚ¡ * 
p_œk
)

122 
	`NRF_PM_DEBUG_CHECK
(
p_œk
 !ğ
NULL
);

124 
ušt32_t
 
i
 = 0; i < 
BLE_GAP_SEC_KEY_LEN
; i++)

126 ià(
p_œk
->
œk
[
i
] != 0)

128  
Œue
;

131  
çl£
;

132 
	}
}

145 
boŞ
 
	$addr_com·»
(
bË_g­_addr_t
 cÚ¡ * 
p_addr1
, bË_g­_addr_ˆcÚ¡ * 
p_addr2
)

148 ià((
p_addr1
 =ğ
NULL
è|| (
p_addr2
 == NULL))

150  
çl£
;

154 ià(
p_addr1
->
addr_ty³
 !ğ
p_addr2
->addr_type)

156  
çl£
;

160  (
	`memcmp
(
p_addr1
->
addr
, 
p_addr2
->addr, 
BLE_GAP_ADDR_LEN
) == 0);

161 
	}
}

164 
	$im_bË_evt_hªdËr
(
bË_evt_t
 cÚ¡ * 
bË_evt
)

166 
bË_g­_evt_t
 
g­_evt
;

167 
pm_³”_id_t
 
bÚded_m©chšg_³”_id
;

169 ià(
bË_evt
->
h—d”
.
evt_id
 !ğ
BLE_GAP_EVT_CONNECTED
)

175 
g­_evt
 = 
bË_evt
->
evt
.gap_evt;

176 
bÚded_m©chšg_³”_id
 = 
PM_PEER_ID_INVALID
;

178 iàĞ
g­_evt
.
·¿ms
.
cÚÃùed
.
³”_addr
.
addr_ty³


179 !ğ
BLE_GAP_ADDR_TYPE_RANDOM_PRIVATE_NON_RESOLVABLE
)

187 
pm_³”_id_t
 
³”_id
;

188 
pm_³”_d©a_æash_t
 
³”_d©a
;

190 
	`pds_³”_d©a_™”©e_´•¬e
();

192 
g­_evt
.
·¿ms
.
cÚÃùed
.
³”_addr
.
addr_ty³
)

194 
BLE_GAP_ADDR_TYPE_PUBLIC
:

195 
BLE_GAP_ADDR_TYPE_RANDOM_STATIC
:

197 
	`pds_³”_d©a_™”©e
(
PM_PEER_DATA_ID_BONDING
, &
³”_id
, &
³”_d©a
))

199 ià(
	`addr_com·»
(&
g­_evt
.
·¿ms
.
cÚÃùed
.
³”_addr
,

200 &
³”_d©a
.
p_bÚdšg_d©a
->
³”_bË_id
.
id_addr_šfo
))

202 
bÚded_m©chšg_³”_id
 = 
³”_id
;

209 
BLE_GAP_ADDR_TYPE_RANDOM_PRIVATE_RESOLVABLE
:

211 
	`pds_³”_d©a_™”©e
(
PM_PEER_DATA_ID_BONDING
, &
³”_id
, &
³”_d©a
))

213 ià(
	`im_add»ss_»sŞve
(&
g­_evt
.
·¿ms
.
cÚÃùed
.
³”_addr
,

214 &
³”_d©a
.
p_bÚdšg_d©a
->
³”_bË_id
.
id_šfo
))

216 
bÚded_m©chšg_³”_id
 = 
³”_id
;

224 
	`NRF_PM_DEBUG_CHECK
(
çl£
);

229 
m_cÚÃùiÚs
[
g­_evt
.
cÚn_hªdË
].
³”_id
 = 
bÚded_m©chšg_³”_id
;

230 
m_cÚÃùiÚs
[
g­_evt
.
cÚn_hªdË
].
³”_add»ss
 = g­_evt.
·¿ms
.
cÚÃùed
.
³”_addr
;

232 ià(
bÚded_m©chšg_³”_id
 !ğ
PM_PEER_ID_INVALID
)

235 
pm_evt_t
 
im_evt
;

236 
im_evt
.
cÚn_hªdË
 = 
g­_evt
.conn_handle;

237 
im_evt
.
³”_id
 = 
bÚded_m©chšg_³”_id
;

238 
im_evt
.
evt_id
 = 
PM_EVT_BONDED_PEER_CONNECTED
;

239 
	`evt_£nd
(&
im_evt
);

241 
	}
}

252 
boŞ
 
	$im_is_du¶iÿ‹_bÚdšg_d©a
(
pm_³”_d©a_bÚdšg_t
 cÚ¡ * 
p_bÚdšg_d©a1
,

253 
pm_³”_d©a_bÚdšg_t
 cÚ¡ * 
p_bÚdšg_d©a2
)

255 
	`NRF_PM_DEBUG_CHECK
(
p_bÚdšg_d©a1
 !ğ
NULL
);

256 
	`NRF_PM_DEBUG_CHECK
(
p_bÚdšg_d©a2
 !ğ
NULL
);

258 
bË_g­_addr_t
 cÚ¡ * 
p_addr1
 = &
p_bÚdšg_d©a1
->
³”_bË_id
.
id_addr_šfo
;

259 
bË_g­_addr_t
 cÚ¡ * 
p_addr2
 = &
p_bÚdšg_d©a2
->
³”_bË_id
.
id_addr_šfo
;

261 
boŞ
 
du¶iÿ‹_œk
 = ((
	`memcmp
(
p_bÚdšg_d©a1
->
³”_bË_id
.
id_šfo
.
œk
,

262 
p_bÚdšg_d©a2
->
³”_bË_id
.
id_šfo
.
œk
,

263 
BLE_GAP_SEC_KEY_LEN
) == 0)

264 && 
	`is_v®id_œk
(&
p_bÚdšg_d©a1
->
³”_bË_id
.
id_šfo
)

265 && 
	`is_v®id_œk
(&
p_bÚdšg_d©a2
->
³”_bË_id
.
id_šfo
));

267 
boŞ
 
du¶iÿ‹_addr
 = 
	`addr_com·»
(
p_addr1
, 
p_addr2
);

269 
boŞ
 
id_addrs
 = ((
p_addr1
->
addr_ty³
 !ğ
BLE_GAP_ADDR_TYPE_RANDOM_PRIVATE_RESOLVABLE
)

270 && (
p_addr1
->
addr_ty³
 !ğ
BLE_GAP_ADDR_TYPE_RANDOM_PRIVATE_NON_RESOLVABLE
)

271 && (
p_addr2
->
addr_ty³
 !ğ
BLE_GAP_ADDR_TYPE_RANDOM_PRIVATE_RESOLVABLE
)

272 && (
p_addr2
->
addr_ty³
 !ğ
BLE_GAP_ADDR_TYPE_RANDOM_PRIVATE_NON_RESOLVABLE
));

274  (
du¶iÿ‹_addr
 && 
id_addrs
è|| (
du¶iÿ‹_œk
 && !id_addrs);

275 
	}
}

278 
pm_³”_id_t
 
	$im_fšd_du¶iÿ‹_bÚdšg_d©a
(
pm_³”_d©a_bÚdšg_t
 cÚ¡ * 
p_bÚdšg_d©a
,

279 
pm_³”_id_t
 
³”_id_sk
)

281 
pm_³”_id_t
 
³”_id
;

282 
pm_³”_d©a_æash_t
 
³”_d©a_du¶iÿ‹
;

284 
	`NRF_PM_DEBUG_CHECK
(
p_bÚdšg_d©a
 !ğ
NULL
);

286 
	`pds_³”_d©a_™”©e_´•¬e
();

288 
	`pds_³”_d©a_™”©e
(
PM_PEER_DATA_ID_BONDING
, &
³”_id
, &
³”_d©a_du¶iÿ‹
))

290 iàĞ(
³”_id
 !ğ
³”_id_sk
)

291 && 
	`im_is_du¶iÿ‹_bÚdšg_d©a
(
p_bÚdšg_d©a
,

292 
³”_d©a_du¶iÿ‹
.
p_bÚdšg_d©a
))

294  
³”_id
;

297  
PM_PEER_ID_INVALID
;

298 
	}
}

301 
pm_³”_id_t
 
	$im_³”_id_g‘_by_cÚn_hªdË
(
ušt16_t
 
cÚn_hªdË
)

303 ià((
cÚn_hªdË
 >ğ
IM_MAX_CONN_HANDLES
è|| !
	`bË_cÚn_¡©e_v®id
(conn_handle))

305  
PM_PEER_ID_INVALID
;

308  
m_cÚÃùiÚs
[
cÚn_hªdË
].
³”_id
;

309 
	}
}

312 
»t_code_t
 
	$im_bË_addr_g‘
(
ušt16_t
 
cÚn_hªdË
, 
bË_g­_addr_t
 * 
p_bË_addr
)

314 
	`NRF_PM_DEBUG_CHECK
(
p_bË_addr
 !ğ
NULL
);

316 ià((
cÚn_hªdË
 >ğ
IM_MAX_CONN_HANDLES
è|| !
	`bË_cÚn_¡©e_v®id
(conn_handle))

318  
BLE_ERROR_INVALID_CONN_HANDLE
;

321 *
p_bË_addr
 = 
m_cÚÃùiÚs
[
cÚn_hªdË
].
³”_add»ss
;

322  
NRF_SUCCESS
;

323 
	}
}

326 
boŞ
 
	$im_ma¡”_ids_com·»
(
bË_g­_ma¡”_id_t
 cÚ¡ * 
p_ma¡”_id1
,

327 
bË_g­_ma¡”_id_t
 cÚ¡ * 
p_ma¡”_id2
)

329 
	`NRF_PM_DEBUG_CHECK
(
p_ma¡”_id1
 !ğ
NULL
);

330 
	`NRF_PM_DEBUG_CHECK
(
p_ma¡”_id2
 !ğ
NULL
);

332 ià(!
	`im_ma¡”_id_is_v®id
(
p_ma¡”_id1
))

334  
çl£
;

337 ià(
p_ma¡”_id1
->
ediv
 !ğ
p_ma¡”_id2
->ediv)

339  
çl£
;

342  (
	`memcmp
(
p_ma¡”_id1
->
¿nd
, 
p_ma¡”_id2
->¿nd, 
BLE_GAP_SEC_RAND_LEN
) == 0);

343 
	}
}

346 
pm_³”_id_t
 
	$im_³”_id_g‘_by_ma¡”_id
(
bË_g­_ma¡”_id_t
 cÚ¡ * 
p_ma¡”_id
)

348 
pm_³”_id_t
 
³”_id
;

349 
pm_³”_d©a_æash_t
 
³”_d©a
;

351 
	`NRF_PM_DEBUG_CHECK
(
p_ma¡”_id
 !ğ
NULL
);

353 
	`pds_³”_d©a_™”©e_´•¬e
();

356 
	`pds_³”_d©a_™”©e
(
PM_PEER_DATA_ID_BONDING
, &
³”_id
, &
³”_d©a
))

358 ià(
	`im_ma¡”_ids_com·»
(
p_ma¡”_id
, &
³”_d©a
.
p_bÚdšg_d©a
->
own_Ék
.
ma¡”_id
) ||

359 
	`im_ma¡”_ids_com·»
(
p_ma¡”_id
, &
³”_d©a
.
p_bÚdšg_d©a
->
³”_Ék
.
ma¡”_id
))

362  
³”_id
;

367  
PM_PEER_ID_INVALID
;

368 
	}
}

371 
ušt16_t
 
	$im_cÚn_hªdË_g‘
(
pm_³”_id_t
 
³”_id
)

373 ià(
³”_id
 =ğ
PM_PEER_ID_INVALID
)

375  
BLE_CONN_HANDLE_INVALID
;

378 
ušt16_t
 
cÚn_hªdË
 = 0; cÚn_hªdË < 
IM_MAX_CONN_HANDLES
; conn_handle++)

380 ià((
m_cÚÃùiÚs
[
cÚn_hªdË
].
³”_id
 =ğ³”_idè&& 
	`bË_cÚn_¡©e_v®id
(conn_handle))

382  
cÚn_hªdË
;

385  
BLE_CONN_HANDLE_INVALID
;

386 
	}
}

389 
boŞ
 
	$im_ma¡”_id_is_v®id
(
bË_g­_ma¡”_id_t
 cÚ¡ * 
p_ma¡”_id
)

391 ià(
p_ma¡”_id
->
ediv
 != 0)

393  
Œue
;

396 
ušt32_t
 
i
 = 0; i < 
BLE_GAP_SEC_RAND_LEN
; i++)

398 ià(
p_ma¡”_id
->
¿nd
[
i
] != 0)

400  
Œue
;

403  
çl£
;

404 
	}
}

407 
	$im_Ãw_³”_id
(
ušt16_t
 
cÚn_hªdË
, 
pm_³”_id_t
 
³”_id
)

409 ià(
cÚn_hªdË
 < 
IM_MAX_CONN_HANDLES
)

411 
m_cÚÃùiÚs
[
cÚn_hªdË
].
³”_id
 =…eer_id;

413 
	}
}

416 
»t_code_t
 
	$im_³”_ä“
(
pm_³”_id_t
 
³”_id
)

418 
ušt16_t
 
cÚn_hªdË
;

419 
»t_code_t
 
»t
;

421 
cÚn_hªdË
 = 
	`im_cÚn_hªdË_g‘
(
³”_id
);

422 
»t
 = 
	`pdb_³”_ä“
(
³”_id
);

424 ià(
»t
 =ğ
NRF_SUCCESS
 && (
cÚn_hªdË
 < 
IM_MAX_CONN_HANDLES
))

426 
m_cÚÃùiÚs
[
cÚn_hªdË
].
³”_id
 = 
PM_PEER_ID_INVALID
;

428  
»t
;

429 
	}
}

434 
»t_code_t
 
	$³”s_id_keys_g‘
(
pm_³”_id_t
 cÚ¡ * 
p_³”s
,

435 
ušt32_t
 
³”_út
,

436 
bË_g­_addr_t
 * 
p_g­_addrs
,

437 
ušt32_t
 * 
p_addr_út
,

438 
bË_g­_œk_t
 * 
p_g­_œks
,

439 
ušt32_t
 * 
p_œk_út
)

441 
»t_code_t
 
»t
;

443 
pm_³”_d©a_bÚdšg_t
 
bÚd_d©a
;

444 
pm_³”_d©a_t
 
³”_d©a
;

446 
ušt16_t
 cÚ¡ 
buf_size
 = (
bÚd_d©a
);

448 
boŞ
 
cİy_addrs
 = 
çl£
;

449 
boŞ
 
cİy_œks
 = 
çl£
;

451 
	`NRF_PM_DEBUG_CHECK
(
p_³”s
 !ğ
NULL
);

454 
	`NRF_PM_DEBUG_CHECK
((
p_g­_addrs
 !ğ
NULL
è|| (
p_g­_œks
 != NULL));

456 ià((
p_g­_addrs
 !ğ
NULL
è&& (
p_addr_út
 != NULL))

458 
	`NRF_PM_DEBUG_CHECK
((*
p_addr_út
è>ğ
³”_út
);

460 
cİy_addrs
 = 
Œue
;

461 *
p_addr_út
 = 0;

464 ià((
p_g­_œks
 !ğ
NULL
è&& (
p_œk_út
 != NULL))

466 
	`NRF_PM_DEBUG_CHECK
((*
p_œk_út
è>ğ
³”_út
);

468 
cİy_œks
 = 
Œue
;

469 *
p_œk_út
 = 0;

472 
	`mem£t
(&
³”_d©a
, 0x00, (peer_data));

473 
³”_d©a
.
p_bÚdšg_d©a
 = &
bÚd_d©a
;

477 
ušt32_t
 
i
 = 0; i < 
³”_út
; i++)

479 
	`mem£t
(&
bÚd_d©a
, 0x00, (bond_data));

482 
»t
 = 
	`pds_³”_d©a_»ad
(
p_³”s
[
i
], 
PM_PEER_DATA_ID_BONDING
,

483 &
³”_d©a
, &
buf_size
);

485 ià((
»t
 =ğ
NRF_ERROR_NOT_FOUND
è|| (»ˆ=ğ
NRF_ERROR_INVALID_PARAM
))

488  
NRF_ERROR_NOT_FOUND
;

491 
ušt8_t
 cÚ¡ 
addr_ty³
 = 
bÚd_d©a
.
³”_bË_id
.
id_addr_šfo
.addr_type;

493 ià((
addr_ty³
 !ğ
BLE_GAP_ADDR_TYPE_PUBLIC
) &&

494 (
addr_ty³
 !ğ
BLE_GAP_ADDR_TYPE_RANDOM_STATIC
))

497  
BLE_ERROR_GAP_INVALID_BLE_ADDR
;

501 ià(
cİy_addrs
)

503 
	`memıy
(&
p_g­_addrs
[
i
], &
bÚd_d©a
.
³”_bË_id
.
id_addr_šfo
, (
bË_g­_addr_t
));

504 (*
p_addr_út
)++;

508 ià(
cİy_œks
)

510 
	`memıy
(&
p_g­_œks
[
i
], 
bÚd_d©a
.
³”_bË_id
.
id_šfo
.
œk
, 
BLE_GAP_SEC_KEY_LEN
);

511 (*
p_œk_út
)++;

515  
NRF_SUCCESS
;

516 
	}
}

519 
»t_code_t
 
	$im_deviû_id’t™›s_li¡_£t
(
pm_³”_id_t
 cÚ¡ * 
p_³”s
,

520 
ušt32_t
 
³”_út
)

522 
»t_code_t
 
»t
;

523 
pm_³”_d©a_t
 
³”_d©a
;

524 
pm_³”_d©a_bÚdšg_t
 
bÚd_d©a
;

526 
bË_g­_id_key_t
 
keys
[
BLE_GAP_DEVICE_IDENTITIES_MAX_COUNT
];

527 
bË_g­_id_key_t
 cÚ¡ * 
key_±rs
[
BLE_GAP_DEVICE_IDENTITIES_MAX_COUNT
];

529 ià((
p_³”s
 =ğ
NULL
è|| (
³”_út
 == 0))

532  
	`sd_bË_g­_deviû_id’t™›s_£t
(
NULL
, NULL, 0);

535 
³”_d©a
.
p_bÚdšg_d©a
 = &
bÚd_d©a
;

536 
ušt16_t
 cÚ¡ 
buf_size
 = (
bÚd_d©a
);

538 
	`mem£t
(
keys
, 0x00, (keys));

539 
ušt32_t
 
i
 = 0; i < 
BLE_GAP_DEVICE_IDENTITIES_MAX_COUNT
; i++)

541 
key_±rs
[
i
] = &
keys
[i];

544 
ušt32_t
 
i
 = 0; i < 
³”_út
; i++)

546 
	`mem£t
(&
bÚd_d©a
, 0x00, (bond_data));

549 
»t
 = 
	`pds_³”_d©a_»ad
(
p_³”s
[
i
], 
PM_PEER_DATA_ID_BONDING
,

550 &
³”_d©a
, &
buf_size
);

552 ià((
»t
 =ğ
NRF_ERROR_NOT_FOUND
è|| (»ˆ=ğ
NRF_ERROR_INVALID_PARAM
))

554 
	`NRF_LOG_WARNING
("peer id %d: Peer data could‚ot be found in flash. Removehe…eer ID "

556 
p_³”s
[
i
]);

557  
NRF_ERROR_NOT_FOUND
;

560 
ušt8_t
 cÚ¡ 
addr_ty³
 = 
bÚd_d©a
.
³”_bË_id
.
id_addr_šfo
.addr_type;

562 ià((
addr_ty³
 !ğ
BLE_GAP_ADDR_TYPE_PUBLIC
) &&

563 (
addr_ty³
 !ğ
BLE_GAP_ADDR_TYPE_RANDOM_STATIC
))

565 
	`NRF_LOG_WARNING
("peer id %d: The‡ddress shared byhe…eer during bonding cannot be "

567 
p_³”s
[
i
]);

568  
BLE_ERROR_GAP_INVALID_BLE_ADDR
;

572 
	`memıy
(&
keys
[
i
], &
bÚd_d©a
.
³”_bË_id
, (
bË_g­_id_key_t
));

575  
	`sd_bË_g­_deviû_id’t™›s_£t
(
key_±rs
, 
NULL
, 
³”_út
);

576 
	}
}

579 
»t_code_t
 
	$im_id_addr_£t
(
bË_g­_addr_t
 cÚ¡ * 
p_addr
)

581  
	`sd_bË_g­_addr_£t
(
p_addr
);

582 
	}
}

585 
»t_code_t
 
	$im_id_addr_g‘
(
bË_g­_addr_t
 * 
p_addr
)

587 
	`NRF_PM_DEBUG_CHECK
(
p_addr
 !ğ
NULL
);

589  
	`sd_bË_g­_addr_g‘
(
p_addr
);

590 
	}
}

593 
»t_code_t
 
	$im_´ivacy_£t
(
pm_´ivacy_·¿ms_t
 cÚ¡ * 
p_´ivacy_·¿ms
)

595  
	`sd_bË_g­_´ivacy_£t
(
p_´ivacy_·¿ms
);

596 
	}
}

599 
»t_code_t
 
	$im_´ivacy_g‘
(
pm_´ivacy_·¿ms_t
 * 
p_´ivacy_·¿ms
)

601  
	`sd_bË_g­_´ivacy_g‘
(
p_´ivacy_·¿ms
);

602 
	}
}

608 
»t_code_t
 
	$im_wh™–i¡_g‘
(
bË_g­_addr_t
 * 
p_addrs
,

609 
ušt32_t
 * 
p_addr_út
,

610 
bË_g­_œk_t
 * 
p_œks
,

611 
ušt32_t
 * 
p_œk_út
)

614 
	`NRF_PM_DEBUG_CHECK
((
p_addrs
 !ğ
NULL
è|| (
p_œks
 != NULL));

615 
	`NRF_PM_DEBUG_CHECK
((
p_addr_út
 !ğ
NULL
è|| (
p_œk_út
 != NULL));

617 ià(((
p_addr_út
 !ğ
NULL
è&& (
m_wli¡ed_³”_út
 > *p_addr_cnt)) ||

618 ((
p_œk_út
 !ğ
NULL
è&& (
m_wli¡ed_³”_út
 > *p_irk_cnt)))

621  
NRF_ERROR_NO_MEM
;

627  
	`³”s_id_keys_g‘
(
m_wli¡ed_³”s
, 
m_wli¡ed_³”_út
,

628 
p_addrs
, 
p_addr_út
,

629 
p_œks
, 
p_œk_út
);

630 
	}
}

638 
»t_code_t
 
	$im_wh™–i¡_£t
(
pm_³”_id_t
 cÚ¡ * 
p_³”s
,

639 
ušt32_t
 
³”_út
)

642 
	`mem£t
(
m_wli¡ed_³”s
, 0x00, (m_wlisted_peers));

644 ià((
p_³”s
 =ğ
NULL
è|| (
³”_út
 == 0))

647 
m_wli¡ed_³”_út
 = 0;

651  
	`sd_bË_g­_wh™–i¡_£t
(
NULL
, 0);

655 
m_wli¡ed_³”_út
 = 
³”_út
;

656 
	`memıy
(
m_wli¡ed_³”s
, 
p_³”s
, (
pm_³”_id_t
è* 
³”_út
);

658 
»t_code_t
 
»t
;

659 
ušt32_t
 
wli¡_addr_út
 = 0;

661 
bË_g­_addr_t
 cÚ¡ * 
addr_±rs
[
BLE_GAP_WHITELIST_ADDR_MAX_COUNT
];

662 
bË_g­_addr_t
 
addrs
[
BLE_GAP_WHITELIST_ADDR_MAX_COUNT
];

664 
	`mem£t
(
addrs
, 0x00, (addrs));

667 
»t
 = 
	`³”s_id_keys_g‘
(
p_³”s
, 
³”_út
, 
addrs
, &
wli¡_addr_út
, 
NULL
, NULL);

669 ià(
»t
 !ğ
NRF_SUCCESS
)

673  
»t
;

676 
ušt32_t
 
i
 = 0; i < 
BLE_GAP_WHITELIST_ADDR_MAX_COUNT
; i++)

678 
addr_±rs
[
i
] = &
addrs
[i];

683  
	`sd_bË_g­_wh™–i¡_£t
(
addr_±rs
, 
³”_út
);

684 
	}
}

710 
	$ah
(
ušt8_t
 cÚ¡ * 
p_k
, ušt8_ˆcÚ¡ * 
p_r
, ušt8_ˆ* 
p_loÿl_hash
)

712 
Äf_ecb_h®_d©a_t
 
ecb_h®_d©a
;

714 
ušt32_t
 
i
 = 0; i < 
SOC_ECB_KEY_LENGTH
; i++)

716 
ecb_h®_d©a
.
key
[
i
] = 
p_k
[
SOC_ECB_KEY_LENGTH
 - 1 - i];

719 
	`mem£t
(
ecb_h®_d©a
.
ş—¹ext
, 0, 
SOC_ECB_KEY_LENGTH
 - 
IM_ADDR_CLEARTEXT_LENGTH
);

721 
ušt32_t
 
i
 = 0; i < 
IM_ADDR_CLEARTEXT_LENGTH
; i++)

723 
ecb_h®_d©a
.
ş—¹ext
[
SOC_ECB_KEY_LENGTH
 - 1 - 
i
] = 
p_r
[i];

727 (è
	`sd_ecb_block_’üy±
(&
ecb_h®_d©a
);

729 
ušt32_t
 
i
 = 0; i < 
IM_ADDR_CIPHERTEXT_LENGTH
; i++)

731 
p_loÿl_hash
[
i
] = 
ecb_h®_d©a
.
ch”‹xt
[
SOC_ECB_KEY_LENGTH
 - 1 - i];

733 
	}
}

736 
boŞ
 
	$im_add»ss_»sŞve
(
bË_g­_addr_t
 cÚ¡ * 
p_addr
, 
bË_g­_œk_t
 cÚ¡ * 
p_œk
)

738 
ušt8_t
 
hash
[
IM_ADDR_CIPHERTEXT_LENGTH
];

739 
ušt8_t
 
loÿl_hash
[
IM_ADDR_CIPHERTEXT_LENGTH
];

740 
ušt8_t
 
´ªd
[
IM_ADDR_CLEARTEXT_LENGTH
];

742 ià(
p_addr
->
addr_ty³
 !ğ
BLE_GAP_ADDR_TYPE_RANDOM_PRIVATE_RESOLVABLE
)

744  
çl£
;

747 
	`memıy
(
hash
, 
p_addr
->
addr
, 
IM_ADDR_CIPHERTEXT_LENGTH
);

748 
	`memıy
(
´ªd
, &
p_addr
->
addr
[
IM_ADDR_CIPHERTEXT_LENGTH
], 
IM_ADDR_CLEARTEXT_LENGTH
);

749 
	`ah
(
p_œk
->
œk
, 
´ªd
, 
loÿl_hash
);

751  (
	`memcmp
(
hash
, 
loÿl_hash
, 
IM_ADDR_CIPHERTEXT_LENGTH
) == 0);

752 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\ble\peer_manager\peer_data_storage.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
PEER_MANAGER
)

42 
	~"³”_d©a_¡Üage.h
"

44 
	~<¡dšt.h
>

45 
	~<¡ršg.h
>

46 
	~"sdk_”rÜs.h
"

47 
	~"³”_mªag”_ty³s.h
"

48 
	~"³”_mªag”_š‹º®.h
"

49 
	~"³”_id.h
"

50 
	~"fds.h
"

52 
	#NRF_LOG_MODULE_NAME
 
³”_mªag”_pds


	)

53 #ià
PM_LOG_ENABLED


54 
	#NRF_LOG_LEVEL
 
PM_LOG_LEVEL


	)

55 
	#NRF_LOG_INFO_COLOR
 
PM_LOG_INFO_COLOR


	)

56 
	#NRF_LOG_DEBUG_COLOR
 
PM_LOG_DEBUG_COLOR


	)

58 
	#NRF_LOG_LEVEL
 0

	)

60 
	~"Äf_log.h
"

61 
	~"Äf_log_ù¾.h
"

62 
NRF_LOG_MODULE_REGISTER
();

65 
	#VERIFY_PEER_ID_IN_RANGE
(
id
è
	`VERIFY_FALSE
((id >ğ
PM_PEER_ID_N_AVAILABLE_IDS
), \

66 
NRF_ERROR_INVALID_PARAM
)

	)

69 
	#VERIFY_PEER_DATA_ID_IN_RANGE
(
id
è
	`VERIFY_TRUE
(
	`³”_d©a_id_is_v®id
(id), \

70 
NRF_ERROR_INVALID_PARAM
)

	)

73 
	#PDS_EVENT_HANDLERS_CNT
 ((
m_evt_hªdËrs
è/ (m_evt_hªdËrs[0]))

	)

77 
pdb_pds_evt_hªdËr
(
pm_evt_t
 *);

81 
pm_evt_hªdËr_š‹º®_t
 cÚ¡ 
	gm_evt_hªdËrs
[] =

83 
pdb_pds_evt_hªdËr
,

86 
boŞ
 
	gm_moduË_š™Ÿlized
 = 
çl£
;

87 vŞ©
boŞ
 
	gm_³”_d–‘e_deã¼ed
 = 
çl£
;

90 
fds_fšd_tok’_t
 
	gm_fds_áok
;

94 
	$pds_evt_£nd
(
pm_evt_t
 * 
p_ev’t
)

96 
p_ev’t
->
cÚn_hªdË
 = 
BLE_CONN_HANDLE_INVALID
;

98 
ušt32_t
 
i
 = 0; i < 
PDS_EVENT_HANDLERS_CNT
; i++)

100 
m_evt_hªdËrs
[
i
](
p_ev’t
);

102 
	}
}

106 
ušt16_t
 
	$³”_id_to_fe_id
(
pm_³”_id_t
 
³”_id
)

108  (
ušt16_t
)(
³”_id
 + 
PEER_ID_TO_FILE_ID
);

109 
	}
}

113 
pm_³”_id_t
 
	$fe_id_to_³”_id
(
ušt16_t
 
fe_id
)

115  (
pm_³”_id_t
)(
fe_id
 + 
FILE_ID_TO_PEER_ID
);

116 
	}
}

120 
ušt16_t
 
	$³”_d©a_id_to_»cÜd_key
(
pm_³”_d©a_id_t
 
³”_d©a_id
)

122  (
ušt16_t
)(
³”_d©a_id
 + 
DATA_ID_TO_RECORD_KEY
);

123 
	}
}

127 
pm_³”_d©a_id_t
 
	$»cÜd_key_to_³”_d©a_id
(
ušt16_t
 
»cÜd_key
)

129  (
pm_³”_d©a_id_t
)(
»cÜd_key
 + 
RECORD_KEY_TO_DATA_ID
);

130 
	}
}

134 
boŞ
 
	$fe_id_w™hš_pm_¿nge
(
ušt16_t
 
fe_id
)

136  ((
PDS_FIRST_RESERVED_FILE_ID
 <ğ
fe_id
)

137 && (
fe_id
 <ğ
PDS_LAST_RESERVED_FILE_ID
));

138 
	}
}

142 
boŞ
 
	$»cÜd_key_w™hš_pm_¿nge
(
ušt16_t
 
»cÜd_key
)

144  ((
PDS_FIRST_RESERVED_RECORD_KEY
 <ğ
»cÜd_key
)

145 && (
»cÜd_key
 <ğ
PDS_LAST_RESERVED_RECORD_KEY
));

146 
	}
}

149 
boŞ
 
	$³”_d©a_id_is_v®id
(
pm_³”_d©a_id_t
 
d©a_id
)

151  ((
d©a_id
 =ğ
PM_PEER_DATA_ID_BONDING
) ||

152 (
d©a_id
 =ğ
PM_PEER_DATA_ID_SERVICE_CHANGED_PENDING
) ||

153 (
d©a_id
 =ğ
PM_PEER_DATA_ID_GATT_LOCAL
) ||

154 (
d©a_id
 =ğ
PM_PEER_DATA_ID_GATT_REMOTE
) ||

155 (
d©a_id
 =ğ
PM_PEER_DATA_ID_PEER_RANK
) ||

156 (
d©a_id
 =ğ
PM_PEER_DATA_ID_CENTRAL_ADDR_RES
) ||

157 (
d©a_id
 =ğ
PM_PEER_DATA_ID_APPLICATION
));

158 
	}
}

167 
	$£nd_uÃx³ùed_”rÜ
(
pm_³”_id_t
 
³”_id
, 
»t_code_t
 
”r_code
, 
boŞ
 
fds_”rÜ
)

169 
pm_evt_t
 
”rÜ_evt
 =

171 .
evt_id
 = 
PM_EVT_ERROR_UNEXPECTED
,

172 .
³”_id
 =…eer_id,

173 .
·¿ms
 =

175 .
”rÜ_uÃx³ùed
 =

177 .
”rÜ
 = 
”r_code
,

178 .
fds_”rÜ
 = fds_error,

182 
	`pds_evt_£nd
(&
”rÜ_evt
);

183 
	}
}

188 
	$³”_d©a_d–‘e_´oûss
()

190 
»t_code_t
 
»t
;

191 
pm_³”_id_t
 
³”_id
;

192 
ušt16_t
 
fe_id
;

193 
fds_»cÜd_desc_t
 
desc
;

194 
fds_fšd_tok’_t
 
áok
;

196 
m_³”_d–‘e_deã¼ed
 = 
çl£
;

198 
	`mem£t
(&
áok
, 0x00, (
fds_fšd_tok’_t
));

199 
³”_id
 = 
	`³”_id_g‘_Ãxt_d–‘ed
(
PM_PEER_ID_INVALID
);

201  (
³”_id
 !ğ
PM_PEER_ID_INVALID
)

202 && (
	`fds_»cÜd_fšd_š_fe
(
	`³”_id_to_fe_id
(
³”_id
), &
desc
, &
áok
)

203 =ğ
FDS_ERR_NOT_FOUND
))

205 
	`³”_id_ä“
(
³”_id
);

206 
³”_id
 = 
	`³”_id_g‘_Ãxt_d–‘ed
(peer_id);

209 ià(
³”_id
 !ğ
PM_PEER_ID_INVALID
)

211 
fe_id
 = 
	`³”_id_to_fe_id
(
³”_id
);

212 
»t
 = 
	`fds_fe_d–‘e
(
fe_id
);

214 ià(
»t
 =ğ
FDS_ERR_NO_SPACE_IN_QUEUES
)

216 
m_³”_d–‘e_deã¼ed
 = 
Œue
;

218 ià(
»t
 !ğ
FDS_SUCCESS
)

220 
	`NRF_LOG_ERROR
("Could‚ot delete…eer data. fds_file_delete()„eturned 0x%x for…eer_id: %d",

221 
»t
,

222 
³”_id
);

223 
	`£nd_uÃx³ùed_”rÜ
(
³”_id
, 
»t
, 
Œue
);

226 
	}
}

229 
»t_code_t
 
	$³”_d©a_fšd
(
pm_³”_id_t
 
³”_id
,

230 
pm_³”_d©a_id_t
 
d©a_id
,

231 
fds_»cÜd_desc_t
 * cÚ¡ 
p_desc
)

233 
»t_code_t
 
»t
;

234 
fds_fšd_tok’_t
 
áok
;

236 
	`NRF_PM_DEBUG_CHECK
(
³”_id
 < 
PM_PEER_ID_N_AVAILABLE_IDS
);

237 
	`NRF_PM_DEBUG_CHECK
(
	`³”_d©a_id_is_v®id
(
d©a_id
));

238 
	`NRF_PM_DEBUG_CHECK
(
p_desc
 !ğ
NULL
);

240 
	`mem£t
(&
áok
, 0x00, (
fds_fšd_tok’_t
));

242 
ušt16_t
 
fe_id
 = 
	`³”_id_to_fe_id
(
³”_id
);

243 
ušt16_t
 
»cÜd_key
 = 
	`³”_d©a_id_to_»cÜd_key
(
d©a_id
);

245 
»t
 = 
	`fds_»cÜd_fšd
(
fe_id
, 
»cÜd_key
, 
p_desc
, &
áok
);

247 ià(
»t
 !ğ
FDS_SUCCESS
)

249  
NRF_ERROR_NOT_FOUND
;

252  
NRF_SUCCESS
;

253 
	}
}

256 
	$³”_ids_lßd
()

258 
fds_»cÜd_desc_t
 
»cÜd_desc
;

259 
fds_æash_»cÜd_t
 
»cÜd
;

260 
fds_fšd_tok’_t
 
áok
;

262 
	`mem£t
(&
áok
, 0x00, (
fds_fšd_tok’_t
));

264 
ušt16_t
 cÚ¡ 
»cÜd_key
 = 
	`³”_d©a_id_to_»cÜd_key
(
PM_PEER_DATA_ID_BONDING
);

266 
	`fds_»cÜd_fšd_by_key
(
»cÜd_key
, &
»cÜd_desc
, &
áok
è=ğ
FDS_SUCCESS
)

268 
pm_³”_id_t
 
³”_id
;

272 ()
	`fds_»cÜd_İ’
(&
»cÜd_desc
, &
»cÜd
);

273 
³”_id
 = 
	`fe_id_to_³”_id
(
»cÜd
.
p_h—d”
->
fe_id
);

274 ()
	`fds_»cÜd_şo£
(&
»cÜd_desc
);

276 ()
	`³”_id_®loÿ‹
(
³”_id
);

278 
	}
}

281 
	$fds_evt_hªdËr
(
fds_evt_t
 cÚ¡ * cÚ¡ 
p_fds_evt
)

283 
pm_evt_t
 
pds_evt
 =

285 .
³”_id
 = 
	`fe_id_to_³”_id
(
p_fds_evt
->
wr™e
.
fe_id
)

288 
p_fds_evt
->
id
)

290 
FDS_EVT_WRITE
:

291 
FDS_EVT_UPDATE
:

292 
FDS_EVT_DEL_RECORD
:

293 iàĞ
	`fe_id_w™hš_pm_¿nge
(
p_fds_evt
->
wr™e
.
fe_id
)

294 || 
	`»cÜd_key_w™hš_pm_¿nge
(
p_fds_evt
->
wr™e
.
»cÜd_key
))

296 
pds_evt
.
·¿ms
.
³”_d©a_upd©e_sucûeded
.
d©a_id


297 ğ
	`»cÜd_key_to_³”_d©a_id
(
p_fds_evt
->
wr™e
.
»cÜd_key
);

298 
pds_evt
.
·¿ms
.
³”_d©a_upd©e_sucûeded
.
aùiÚ


299 ğ(
p_fds_evt
->
id
 =ğ
FDS_EVT_DEL_RECORD
è? 
PM_PEER_DATA_OP_DELETE


300 : 
PM_PEER_DATA_OP_UPDATE
;

301 
pds_evt
.
·¿ms
.
³”_d©a_upd©e_sucûeded
.
tok’
 = 
p_fds_evt
->
wr™e
.
»cÜd_id
;

303 ià(
p_fds_evt
->
»suÉ
 =ğ
FDS_SUCCESS
)

305 
pds_evt
.
evt_id
 = 
PM_EVT_PEER_DATA_UPDATE_SUCCEEDED
;

306 
pds_evt
.
·¿ms
.
³”_d©a_upd©e_sucûeded
.
æash_chªged
 = 
Œue
;

310 
pds_evt
.
evt_id
 = 
PM_EVT_PEER_DATA_UPDATE_FAILED
;

311 
pds_evt
.
·¿ms
.
³”_d©a_upd©e_çed
.
”rÜ
 = 
p_fds_evt
->
»suÉ
;

312 
pds_evt
.
·¿ms
.
³”_d©a_upd©e_çed
.
fds_”rÜ
 = 
Œue
;

315 
	`pds_evt_£nd
(&
pds_evt
);

319 
FDS_EVT_DEL_FILE
:

320 iàĞ
	`fe_id_w™hš_pm_¿nge
(
p_fds_evt
->
d–
.
fe_id
)

321 && (
p_fds_evt
->
d–
.
»cÜd_key
 =ğ
FDS_RECORD_KEY_DIRTY
))

323 ià(
p_fds_evt
->
»suÉ
 =ğ
FDS_SUCCESS
)

325 
pds_evt
.
evt_id
 = 
PM_EVT_PEER_DELETE_SUCCEEDED
;

326 
	`³”_id_ä“
(
pds_evt
.
³”_id
);

330 
pds_evt
.
evt_id
 = 
PM_EVT_PEER_DELETE_FAILED
;

331 
pds_evt
.
·¿ms
.
³”_d–‘e_çed
.
”rÜ
 = 
p_fds_evt
->
»suÉ
;

332 
pds_evt
.
·¿ms
.
³”_d–‘e_çed
.
fds_”rÜ
 = 
Œue
;

335 
m_³”_d–‘e_deã¼ed
 = 
Œue
;

337 
	`pds_evt_£nd
(&
pds_evt
);

341 
FDS_EVT_GC
:

342 ià(
p_fds_evt
->
»suÉ
 =ğ
FDS_SUCCESS
)

344 
pds_evt
.
evt_id
 = 
PM_EVT_FLASH_GARBAGE_COLLECTED
;

348 
pds_evt
.
evt_id
 = 
PM_EVT_FLASH_GARBAGE_COLLECTION_FAILED
;

349 
pds_evt
.
·¿ms
.
g¬bage_cŞËùiÚ_çed
.
”rÜ
 = 
p_fds_evt
->
»suÉ
;

350 
pds_evt
.
·¿ms
.
g¬bage_cŞËùiÚ_çed
.
fds_”rÜ
 = 
Œue
;

352 
pds_evt
.
³”_id
 = 
PM_PEER_ID_INVALID
;

353 
	`pds_evt_£nd
(&
pds_evt
);

361 ià(
m_³”_d–‘e_deã¼ed
)

363 
	`³”_d©a_d–‘e_´oûss
();

365 
	}
}

368 
»t_code_t
 
	$pds_š™
()

370 
»t_code_t
 
»t
;

373 
	`NRF_PM_DEBUG_CHECK
(!
m_moduË_š™Ÿlized
);

375 
»t
 = 
	`fds_»gi¡”
(
fds_evt_hªdËr
);

376 ià(
»t
 !ğ
NRF_SUCCESS
)

378 
	`NRF_LOG_ERROR
("Could‚Ù in™Ÿlizæash stÜage. fds_»gi¡”(è»tuºed 0x%x.", 
»t
);

379  
NRF_ERROR_INTERNAL
;

382 
»t
 = 
	`fds_š™
();

383 ià(
»t
 !ğ
NRF_SUCCESS
)

385 
	`NRF_LOG_ERROR
("Could‚Ù in™Ÿlizæash stÜage. fds_š™(è»tuºed 0x%x.", 
»t
);

386  
NRF_ERROR_STORAGE_FULL
;

389 
	`³”_id_š™
();

390 
	`³”_ids_lßd
();

392 
m_moduË_š™Ÿlized
 = 
Œue
;

394  
NRF_SUCCESS
;

395 
	}
}

398 
»t_code_t
 
	$pds_³”_d©a_»ad
(
pm_³”_id_t
 
³”_id
,

399 
pm_³”_d©a_id_t
 
d©a_id
,

400 
pm_³”_d©a_t
 * cÚ¡ 
p_d©a
,

401 
ušt16_t
 cÚ¡ * cÚ¡ 
p_buf_Ën
)

403 
»t_code_t
 
»t
;

404 
fds_»cÜd_desc_t
 
»c_desc
;

405 
fds_æash_»cÜd_t
 
»c_æash
;

407 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

408 
	`NRF_PM_DEBUG_CHECK
(
p_d©a
 !ğ
NULL
);

410 
	`VERIFY_PEER_ID_IN_RANGE
(
³”_id
);

411 
	`VERIFY_PEER_DATA_ID_IN_RANGE
(
d©a_id
);

413 
»t
 = 
	`³”_d©a_fšd
(
³”_id
, 
d©a_id
, &
»c_desc
);

415 ià(
»t
 !ğ
NRF_SUCCESS
)

417  
NRF_ERROR_NOT_FOUND
;

421 
»t
 = 
	`fds_»cÜd_İ’
(&
»c_desc
, &
»c_æash
);

423 ià(
»t
 !ğ
NRF_SUCCESS
)

425  
NRF_ERROR_NOT_FOUND
;

428 
p_d©a
->
d©a_id
 = data_id;

429 
p_d©a
->
Ëngth_wÜds
 = 
»c_æash
.
p_h—d”
->length_words;

433 ià(
p_buf_Ën
 =ğ
NULL
)

438 
p_d©a
->
p_®l_d©a
 = (*)
»c_æash
.p_data;

442 
ušt32_t
 cÚ¡ 
d©a_Ën_by‹s
 = (
p_d©a
->
Ëngth_wÜds
 * (uint32_t));

443 
ušt32_t
 cÚ¡ 
cİy_Ën_by‹s
 = 
	`MIN
((*
p_buf_Ën
), (
p_d©a
->
Ëngth_wÜds
 * (uint32_t)));

445 
	`memıy
(
p_d©a
->
p_®l_d©a
, 
»c_æash
.p_d©a, 
cİy_Ën_by‹s
);

447 ià(
cİy_Ën_by‹s
 < 
d©a_Ën_by‹s
)

449  
NRF_ERROR_DATA_SIZE
;

454 ()
	`fds_»cÜd_şo£
(&
»c_desc
);

456  
NRF_SUCCESS
;

457 
	}
}

460 
	$pds_³”_d©a_™”©e_´•¬e
()

462 
	`mem£t
(&
m_fds_áok
, 0x00, (
fds_fšd_tok’_t
));

463 
	}
}

466 
boŞ
 
	$pds_³”_d©a_™”©e
(
pm_³”_d©a_id_t
 
d©a_id
,

467 
pm_³”_id_t
 * cÚ¡ 
p_³”_id
,

468 
pm_³”_d©a_æash_t
 * cÚ¡ 
p_d©a
)

470 
»t_code_t
 
»t
;

471 
ušt16_t
 
»c_key
;

472 
fds_»cÜd_desc_t
 
»c_desc
;

473 
fds_æash_»cÜd_t
 
»c_æash
;

475 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

476 
	`NRF_PM_DEBUG_CHECK
(
p_³”_id
 !ğ
NULL
);

477 
	`NRF_PM_DEBUG_CHECK
(
p_d©a
 !ğ
NULL
);

479 
	`VERIFY_PEER_DATA_ID_IN_RANGE
(
d©a_id
);

481 
»c_key
 = 
	`³”_d©a_id_to_»cÜd_key
(
d©a_id
);

483 ià(
	`fds_»cÜd_fšd_by_key
(
»c_key
, &
»c_desc
, &
m_fds_áok
è!ğ
NRF_SUCCESS
)

485  
çl£
;

488 
»t
 = 
	`fds_»cÜd_İ’
(&
»c_desc
, &
»c_æash
);

490 ià(
»t
 !ğ
NRF_SUCCESS
)

495  
çl£
;

498 
p_d©a
->
d©a_id
 = data_id;

499 
p_d©a
->
Ëngth_wÜds
 = 
»c_æash
.
p_h—d”
->length_words;

500 
p_d©a
->
p_®l_d©a
 = 
»c_æash
.p_data;

502 *
p_³”_id
 = 
	`fe_id_to_³”_id
(
»c_æash
.
p_h—d”
->
fe_id
);

504 ()
	`fds_»cÜd_şo£
(&
»c_desc
);

506  
Œue
;

507 
	}
}

510 
»t_code_t
 
	$pds_³”_d©a_¡Üe
(
pm_³”_id_t
 
³”_id
,

511 
pm_³”_d©a_cÚ¡_t
 cÚ¡ * 
p_³”_d©a
,

512 
pm_¡Üe_tok’_t
 * 
p_¡Üe_tok’
)

514 
»t_code_t
 
»t
;

515 
fds_»cÜd_t
 
»c
;

516 
fds_»cÜd_desc_t
 
»c_desc
;

518 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

519 
	`NRF_PM_DEBUG_CHECK
(
p_³”_d©a
 !ğ
NULL
);

521 
	`VERIFY_PEER_ID_IN_RANGE
(
³”_id
);

522 
	`VERIFY_PEER_DATA_ID_IN_RANGE
(
p_³”_d©a
->
d©a_id
);

525 
»c
.
fe_id
 = 
	`³”_id_to_fe_id
(
³”_id
);

526 
»c
.
key
 = 
	`³”_d©a_id_to_»cÜd_key
(
p_³”_d©a
->
d©a_id
);

527 
»c
.
d©a
.
p_d©a
 = (*)
p_³”_d©a
->
p_®l_d©a
;

528 
»c
.
d©a
.
Ëngth_wÜds
 = 
p_³”_d©a
->length_words;

530 
»t
 = 
	`³”_d©a_fšd
(
³”_id
, 
p_³”_d©a
->
d©a_id
, &
»c_desc
);

532 ià(
»t
 =ğ
NRF_ERROR_NOT_FOUND
)

534 
»t
 = 
	`fds_»cÜd_wr™e
(&
»c_desc
, &
»c
);

539 
»t
 = 
	`fds_»cÜd_upd©e
(&
»c_desc
, &
»c
);

542 
»t
)

544 
FDS_SUCCESS
:

545 ià(
p_¡Üe_tok’
 !ğ
NULL
)

548 ()
	`fds_»cÜd_id_äom_desc
(&
»c_desc
, (
ušt32_t
*)
p_¡Üe_tok’
);

550  
NRF_SUCCESS
;

552 
FDS_ERR_BUSY
:

553 
FDS_ERR_NO_SPACE_IN_QUEUES
:

554  
NRF_ERROR_BUSY
;

556 
FDS_ERR_NO_SPACE_IN_FLASH
:

557  
NRF_ERROR_STORAGE_FULL
;

560 
	`NRF_LOG_ERROR
("Could‚ot write datao flash. fds_record_{write|update}()„eturned 0x%x. "\

562 
»t
,

563 
³”_id
);

564  
NRF_ERROR_INTERNAL
;

566 
	}
}

569 
»t_code_t
 
	$pds_³”_d©a_d–‘e
(
pm_³”_id_t
 
³”_id
, 
pm_³”_d©a_id_t
 
d©a_id
)

571 
»t_code_t
 
»t
;

572 
fds_»cÜd_desc_t
 
»cÜd_desc
;

574 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

576 
	`VERIFY_PEER_ID_IN_RANGE
(
³”_id
);

577 
	`VERIFY_PEER_DATA_ID_IN_RANGE
(
d©a_id
);

579 
»t
 = 
	`³”_d©a_fšd
(
³”_id
, 
d©a_id
, &
»cÜd_desc
);

581 ià(
»t
 !ğ
NRF_SUCCESS
)

583  
NRF_ERROR_NOT_FOUND
;

586 
»t
 = 
	`fds_»cÜd_d–‘e
(&
»cÜd_desc
);

588 
»t
)

590 
FDS_SUCCESS
:

591  
NRF_SUCCESS
;

593 
FDS_ERR_NO_SPACE_IN_QUEUES
:

594  
NRF_ERROR_BUSY
;

597 
	`NRF_LOG_ERROR
("Could‚ot delete…eer. fds_record_delete()„eturned 0x%x.…eer_id: %d, "\

599 
»t
,

600 
³”_id
,

601 
d©a_id
);

602  
NRF_ERROR_INTERNAL
;

604 
	}
}

607 
pm_³”_id_t
 
	$pds_³”_id_®loÿ‹
()

609 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

610  
	`³”_id_®loÿ‹
(
PM_PEER_ID_INVALID
);

611 
	}
}

614 
»t_code_t
 
	$pds_³”_id_ä“
(
pm_³”_id_t
 
³”_id
)

616 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

617 
	`VERIFY_PEER_ID_IN_RANGE
(
³”_id
);

619 ()
	`³”_id_d–‘e
(
³”_id
);

620 
	`³”_d©a_d–‘e_´oûss
();

622  
NRF_SUCCESS
;

623 
	}
}

626 
boŞ
 
	$pds_³”_id_is_®loÿ‹d
(
pm_³”_id_t
 
³”_id
)

628 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

629  
	`³”_id_is_®loÿ‹d
(
³”_id
);

630 
	}
}

633 
boŞ
 
	$pds_³”_id_is_d–‘ed
(
pm_³”_id_t
 
³”_id
)

635 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

636  
	`³”_id_is_d–‘ed
(
³”_id
);

637 
	}
}

640 
pm_³”_id_t
 
	$pds_Ãxt_³”_id_g‘
(
pm_³”_id_t
 
´ev_³”_id
)

642 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

643  
	`³”_id_g‘_Ãxt_u£d
(
´ev_³”_id
);

644 
	}
}

647 
pm_³”_id_t
 
	$pds_Ãxt_d–‘ed_³”_id_g‘
(
pm_³”_id_t
 
´ev_³”_id
)

649 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

650  
	`³”_id_g‘_Ãxt_d–‘ed
(
´ev_³”_id
);

651 
	}
}

654 
ušt32_t
 
	$pds_³”_couÁ_g‘
()

656 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

657  
	`³”_id_n_ids
();

658 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\ble\peer_manager\peer_database.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
PEER_MANAGER
)

42 
	~"³”_d©aba£.h
"

44 
	~<¡ršg.h
>

45 
	~"³”_mªag”_ty³s.h
"

46 
	~"³”_mªag”_š‹º®.h
"

47 
	~"³”_d©a_¡Üage.h
"

48 
	~"pm_bufãr.h
"

50 
	#NRF_LOG_MODULE_NAME
 
³”_mªag”_pdb


	)

51 #ià
PM_LOG_ENABLED


52 
	#NRF_LOG_LEVEL
 
PM_LOG_LEVEL


	)

53 
	#NRF_LOG_INFO_COLOR
 
PM_LOG_INFO_COLOR


	)

54 
	#NRF_LOG_DEBUG_COLOR
 
PM_LOG_DEBUG_COLOR


	)

56 
	#NRF_LOG_LEVEL
 0

	)

58 
	~"Äf_log.h
"

59 
	~"Äf_log_ù¾.h
"

60 
NRF_LOG_MODULE_REGISTER
();

61 
	~"Äf_¡»¼Ü.h
"

68 
	#VERIFY_DATA_ID_WRITE_BUF
(
d©a_id
) \

71 ià(((
d©a_id
è!ğ
PM_PEER_DATA_ID_BONDING
è&& ((d©a_idè!ğ
PM_PEER_DATA_ID_GATT_LOCAL
)) \

73  
NRF_ERROR_INVALID_PARAM
; \

75 } 0)

	)

79 
	#PDB_EVENT_HANDLERS_CNT
 ((
m_evt_hªdËrs
è/ (m_evt_hªdËrs[0]))

	)

83 
pm_pdb_evt_hªdËr
(
pm_evt_t
 * 
p_ev’t
);

84 
sm_pdb_evt_hªdËr
(
pm_evt_t
 * 
p_ev’t
);

85 #ià!
defšed
(
PM_SERVICE_CHANGED_ENABLED
) || (PM_SERVICE_CHANGED_ENABLED == 1)

86 
gscm_pdb_evt_hªdËr
(
pm_evt_t
 * 
p_ev’t
);

88 
gcm_pdb_evt_hªdËr
(
pm_evt_t
 * 
p_ev’t
);

92 
pm_evt_hªdËr_š‹º®_t
 cÚ¡ 
	gm_evt_hªdËrs
[] =

94 
pm_pdb_evt_hªdËr
,

95 
sm_pdb_evt_hªdËr
,

96 #ià!
defšed
(
PM_SERVICE_CHANGED_ENABLED
) || (PM_SERVICE_CHANGED_ENABLED == 1)

97 
gscm_pdb_evt_hªdËr
,

99 
gcm_pdb_evt_hªdËr
,

108 
pm_³”_id_t
 
	m³”_id
;

109 
pm_³”_d©a_id_t
 
	md©a_id
;

110 
pm_¡Üe_tok’_t
 
	m¡Üe_tok’
;

111 
ušt8_t
 
	mn_bufs
;

112 
ušt8_t
 
	mbufãr_block_id
;

113 
ušt8_t
 
	m¡Üe_æash_fuÎ
 : 1;

114 
ušt8_t
 
	m¡Üe_busy
 : 1;

115 } 
	tpdb_bufãr_»cÜd_t
;

118 
boŞ
 
	gm_moduË_š™Ÿlized
;

119 
pm_bufãr_t
 
	gm_wr™e_bufãr
;

120 
pdb_bufãr_»cÜd_t
 
	gm_wr™e_bufãr_»cÜds
[
PM_FLASH_BUFFERS
];

121 
boŞ
 
	gm_³ndšg_¡Üe
 = 
çl£
;

129 
	$wr™e_bufãr_»cÜd_šv®id©e
(
pdb_bufãr_»cÜd_t
 * 
p_»cÜd
)

131 
p_»cÜd
->
³”_id
 = 
PM_PEER_ID_INVALID
;

132 
p_»cÜd
->
d©a_id
 = 
PM_PEER_DATA_ID_INVALID
;

133 
p_»cÜd
->
bufãr_block_id
 = 
PM_BUFFER_INVALID_ID
;

134 
p_»cÜd
->
¡Üe_busy
 = 
çl£
;

135 
p_»cÜd
->
¡Üe_æash_fuÎ
 = 
çl£
;

136 
p_»cÜd
->
n_bufs
 = 0;

137 
p_»cÜd
->
¡Üe_tok’
 = 
PM_STORE_TOKEN_INVALID
;

138 
	}
}

148 
pdb_bufãr_»cÜd_t
 * 
	$wr™e_bufãr_»cÜd_fšd_Ãxt
(
pm_³”_id_t
 
³”_id
, 
ušt32_t
 * 
p_šdex
)

150 
ušt32_t
 
i
 = *
p_šdex
; i < 
PM_FLASH_BUFFERS
; i++)

152 ià((
m_wr™e_bufãr_»cÜds
[
i
].
³”_id
 ==…eer_id))

154 *
p_šdex
 = 
i
;

155  &
m_wr™e_bufãr_»cÜds
[
i
];

158  
NULL
;

159 
	}
}

169 
pdb_bufãr_»cÜd_t
 * 
	$wr™e_bufãr_»cÜd_fšd
(
pm_³”_id_t
 
³”_id
,

170 
pm_³”_d©a_id_t
 
d©a_id
)

172 
ušt32_t
 
šdex
 = 0;

173 
pdb_bufãr_»cÜd_t
 * 
p_»cÜd
 = 
	`wr™e_bufãr_»cÜd_fšd_Ãxt
(
³”_id
, &
šdex
);

175 (
p_»cÜd
 !ğ
NULL
è&& ( (p_»cÜd->
d©a_id
 != data_id)

176 || (
p_»cÜd
->
¡Üe_busy
)

177 || (
p_»cÜd
->
¡Üe_æash_fuÎ
)

178 || (
p_»cÜd
->
¡Üe_tok’
 !ğ
PM_STORE_TOKEN_INVALID
)))

180 
šdex
++;

181 
p_»cÜd
 = 
	`wr™e_bufãr_»cÜd_fšd_Ãxt
(
³”_id
, &
šdex
);

184  
p_»cÜd
;

185 
	}
}

194 
pdb_bufãr_»cÜd_t
 * 
	$wr™e_bufãr_»cÜd_fšd_¡Üed
(
pm_¡Üe_tok’_t
 
¡Üe_tok’
)

196 
i
 = 0; i < 
PM_FLASH_BUFFERS
; i++)

198 ià(
m_wr™e_bufãr_»cÜds
[
i
].
¡Üe_tok’
 == store_token)

200  &
m_wr™e_bufãr_»cÜds
[
i
];

203  
NULL
;

204 
	}
}

211 
pdb_bufãr_»cÜd_t
 * 
	$wr™e_bufãr_»cÜd_fšd_unu£d
()

213  
	`wr™e_bufãr_»cÜd_fšd
(
PM_PEER_ID_INVALID
, 
PM_PEER_DATA_ID_INVALID
);

214 
	}
}

225 
	$wr™e_bufãr_»cÜd_»Ëa£
(
pdb_bufãr_»cÜd_t
 * 
p_wr™e_bufãr_»cÜd
)

227 
ušt32_t
 
i
 = 0; i < 
p_wr™e_bufãr_»cÜd
->
n_bufs
; i++)

229 
	`pm_bufãr_»Ëa£
(&
m_wr™e_bufãr
, 
p_wr™e_bufãr_»cÜd
->
bufãr_block_id
 + 
i
);

232 
	`wr™e_bufãr_»cÜd_šv®id©e
(
p_wr™e_bufãr_»cÜd
);

233 
	}
}

242 
	$wr™e_bufãr_»cÜd_acquœe
(
pdb_bufãr_»cÜd_t
 ** 
µ_wr™e_bufãr_»cÜd
,

243 
pm_³”_id_t
 
³”_id
,

244 
pm_³”_d©a_id_t
 
d©a_id
)

246 ià(
µ_wr™e_bufãr_»cÜd
 =ğ
NULL
)

250 *
µ_wr™e_bufãr_»cÜd
 = 
	`wr™e_bufãr_»cÜd_fšd_unu£d
();

251 ià(*
µ_wr™e_bufãr_»cÜd
 =ğ
NULL
)

256 (*
µ_wr™e_bufãr_»cÜd
)->
³”_id
 =…eer_id;

257 (*
µ_wr™e_bufãr_»cÜd
)->
d©a_id
 = data_id;

258 
	}
}

265 
	$pdb_evt_£nd
(
pm_evt_t
 * 
p_ev’t
)

267 
ušt32_t
 
i
 = 0; i < 
PDB_EVENT_HANDLERS_CNT
; i++)

269 
m_evt_hªdËrs
[
i
](
p_ev’t
);

271 
	}
}

278 
	$š‹º®_¡©e_»£t
()

280 
ušt32_t
 
i
 = 0; i < 
PM_FLASH_BUFFERS
; i++)

282 
	`wr™e_bufãr_»cÜd_šv®id©e
(&
m_wr™e_bufãr_»cÜds
[
i
]);

284 
	}
}

287 
	$³”_d©a_pošt_to_bufãr
(
pm_³”_d©a_t
 * 
p_³”_d©a
, 
pm_³”_d©a_id_t
 
d©a_id
, 
ušt8_t
 * 
p_bufãr_memÜy
, 
ušt16_t
 
n_bufs
)

289 
ušt16_t
 
n_by‹s
 = 
n_bufs
 * 
PDB_WRITE_BUF_SIZE
;

290 
p_³”_d©a
->
d©a_id
 = data_id;

292 
p_³”_d©a
->
p_®l_d©a
 = (
pm_³”_d©a_bÚdšg_t
 *)
p_bufãr_memÜy
;

293 
p_³”_d©a
->
Ëngth_wÜds
 = 
	`BYTES_TO_WORDS
(
n_by‹s
);

294 
	}
}

297 
	$³”_d©a_cÚ¡_pošt_to_bufãr
(
pm_³”_d©a_cÚ¡_t
 * 
p_³”_d©a
, 
pm_³”_d©a_id_t
 
d©a_id
, 
ušt8_t
 * 
p_bufãr_memÜy
, 
ušt32_t
 
n_bufs
)

299 
	`³”_d©a_pošt_to_bufãr
((
pm_³”_d©a_t
*)
p_³”_d©a
, 
d©a_id
, 
p_bufãr_memÜy
, 
n_bufs
);

300 
	}
}

303 
	$wr™e_buf_Ëngth_wÜds_£t
(
pm_³”_d©a_cÚ¡_t
 * 
p_³”_d©a
)

305 
p_³”_d©a
->
d©a_id
)

307 
PM_PEER_DATA_ID_BONDING
:

308 
p_³”_d©a
->
Ëngth_wÜds
 = 
	`PM_BONDING_DATA_N_WORDS
();

310 
PM_PEER_DATA_ID_SERVICE_CHANGED_PENDING
:

311 
p_³”_d©a
->
Ëngth_wÜds
 = 
	`PM_SC_STATE_N_WORDS
();

313 
PM_PEER_DATA_ID_PEER_RANK
:

314 
p_³”_d©a
->
Ëngth_wÜds
 = 
	`PM_USAGE_INDEX_N_WORDS
();

316 
PM_PEER_DATA_ID_GATT_LOCAL
:

317 
p_³”_d©a
->
Ëngth_wÜds
 = 
	`PM_LOCAL_DB_N_WORDS
Õ_³”_d©a->
p_loÿl_g©t_db
->
Ën
);

323 
	}
}

340 
»t_code_t
 
	$wr™e_buf_¡Üe
(
pdb_bufãr_»cÜd_t
 * 
p_wr™e_bufãr_»cÜd
)

342 
»t_code_t
 
”r_code
 = 
NRF_SUCCESS
;

343 
pm_³”_d©a_cÚ¡_t
 
³”_d©a
 = {.
d©a_id
 = 
p_wr™e_bufãr_»cÜd
->data_id};

344 
ušt8_t
 * 
p_bufãr_memÜy
;

346 
p_bufãr_memÜy
 = 
	`pm_bufãr_±r_g‘
(&
m_wr™e_bufãr
, 
p_wr™e_bufãr_»cÜd
->
bufãr_block_id
);

347 ià(
p_bufãr_memÜy
 =ğ
NULL
)

349 
	`NRF_LOG_ERROR
("pm_buffer_ptr_get() could‚ot„etrieve RAM buffer. block_id: %d",

350 
p_wr™e_bufãr_»cÜd
->
bufãr_block_id
);

351  
NRF_ERROR_INTERNAL
;

354 
	`³”_d©a_cÚ¡_pošt_to_bufãr
(&
³”_d©a
,

355 
p_wr™e_bufãr_»cÜd
->
d©a_id
,

356 
p_bufãr_memÜy
,

357 
p_wr™e_bufãr_»cÜd
->
n_bufs
);

358 
	`wr™e_buf_Ëngth_wÜds_£t
(&
³”_d©a
);

360 
”r_code
 = 
	`pds_³”_d©a_¡Üe
(
p_wr™e_bufãr_»cÜd
->
³”_id
,

361 &
³”_d©a
,

362 &
p_wr™e_bufãr_»cÜd
->
¡Üe_tok’
);

365 
”r_code
)

367 
NRF_SUCCESS
:

368 
p_wr™e_bufãr_»cÜd
->
¡Üe_busy
 = 
çl£
;

369 
p_wr™e_bufãr_»cÜd
->
¡Üe_æash_fuÎ
 = 
çl£
;

372 
NRF_ERROR_BUSY
:

373 
p_wr™e_bufãr_»cÜd
->
¡Üe_busy
 = 
Œue
;

374 
p_wr™e_bufãr_»cÜd
->
¡Üe_æash_fuÎ
 = 
çl£
;

375 
m_³ndšg_¡Üe
 = 
Œue
;

377 
”r_code
 = 
NRF_SUCCESS
;

380 
NRF_ERROR_STORAGE_FULL
:

381 
p_wr™e_bufãr_»cÜd
->
¡Üe_busy
 = 
çl£
;

382 
p_wr™e_bufãr_»cÜd
->
¡Üe_æash_fuÎ
 = 
Œue
;

383 
m_³ndšg_¡Üe
 = 
Œue
;

386 
NRF_ERROR_INVALID_PARAM
:

391 
	`NRF_LOG_ERROR
("pds_peer_data_store()„eturned %s.…eer_id: %d",

392 
	`Äf_¡»¼Ü_g‘
(
”r_code
),

393 
p_wr™e_bufãr_»cÜd
->
³”_id
);

394 
”r_code
 = 
NRF_ERROR_INTERNAL
;

398  
”r_code
;

399 
	}
}

408 
boŞ
 
	$wr™e_buf_¡Üe_š_ev’t
(
pdb_bufãr_»cÜd_t
 * 
p_wr™e_bufãr_»cÜd
)

410 
»t_code_t
 
”r_code
;

411 
pm_evt_t
 
ev’t
;

413 
”r_code
 = 
	`wr™e_buf_¡Üe
(
p_wr™e_bufãr_»cÜd
);

414 ià(
”r_code
 !ğ
NRF_SUCCESS
)

416 
ev’t
.
cÚn_hªdË
 = 
BLE_CONN_HANDLE_INVALID
;

417 
ev’t
.
³”_id
 = 
p_wr™e_bufãr_»cÜd
->peer_id;

419 ià(
”r_code
 =ğ
NRF_ERROR_STORAGE_FULL
)

421 
ev’t
.
evt_id
 = 
PM_EVT_STORAGE_FULL
;

425 
ev’t
.
evt_id
 = 
PM_EVT_ERROR_UNEXPECTED
;

426 
ev’t
.
·¿ms
.
”rÜ_uÃx³ùed
.
”rÜ
 = 
”r_code
;

427 
ev’t
.
·¿ms
.
”rÜ_uÃx³ùed
.
fds_”rÜ
 = 
çl£
;

429 
	`NRF_LOG_ERROR
("Some…eer data was‚ot…roperly writteno flash. write_buf_store() "\

431 
	`Äf_¡»¼Ü_g‘
(
”r_code
),

432 
p_wr™e_bufãr_»cÜd
->
³”_id
);

435 
	`pdb_evt_£nd
(&
ev’t
);

437  
çl£
;

440  
Œue
;

441 
	}
}

450 
	$»©‹m±_´evious_İ”©iÚs
(
boŞ
 
»Œy_æash_fuÎ
)

452 ià(!
m_³ndšg_¡Üe
)

457 
m_³ndšg_¡Üe
 = 
çl£
;

459 
ušt32_t
 
i
 = 0; i < 
PM_FLASH_BUFFERS
; i++)

461 ià((
m_wr™e_bufãr_»cÜds
[
i
].
¡Üe_busy
)

462 || (
m_wr™e_bufãr_»cÜds
[
i
].
¡Üe_æash_fuÎ
))

464 
m_³ndšg_¡Üe
 = 
Œue
;

466 ià(
m_wr™e_bufãr_»cÜds
[
i
].
¡Üe_busy
 || 
»Œy_æash_fuÎ
)

468 ià(!
	`wr™e_buf_¡Üe_š_ev’t
(&
m_wr™e_bufãr_»cÜds
[
i
]))

475 
	}
}

483 
	$pdb_pds_evt_hªdËr
(
pm_evt_t
 * 
p_ev’t
)

485 
pdb_bufãr_»cÜd_t
 * 
p_wr™e_bufãr_»cÜd
;

486 
boŞ
 
evt_£nd
 = 
Œue
;

487 
boŞ
 
»Œy_æash_fuÎ
 = 
çl£
;

489 
p_wr™e_bufãr_»cÜd
 = 
	`wr™e_bufãr_»cÜd_fšd_¡Üed
(
p_ev’t
->
·¿ms
.
³”_d©a_upd©e_sucûeded
.
tok’
);

491 
p_ev’t
->
evt_id
)

493 
PM_EVT_PEER_DATA_UPDATE_SUCCEEDED
:

494 iàĞ(
p_ev’t
->
·¿ms
.
³”_d©a_upd©e_sucûeded
.
aùiÚ
 =ğ
PM_PEER_DATA_OP_UPDATE
)

495 && (
p_wr™e_bufãr_»cÜd
 !ğ
NULL
))

498 
	`wr™e_bufãr_»cÜd_»Ëa£
(
p_wr™e_bufãr_»cÜd
);

502 
PM_EVT_PEER_DATA_UPDATE_FAILED
:

503 iàĞ(
p_ev’t
->
·¿ms
.
³”_d©a_upd©e_sucûeded
.
aùiÚ
 =ğ
PM_PEER_DATA_OP_UPDATE
)

504 && (
p_wr™e_bufãr_»cÜd
 !ğ
NULL
))

507 
p_wr™e_bufãr_»cÜd
->
¡Üe_tok’
 = 
PM_STORE_TOKEN_INVALID
;

508 
p_wr™e_bufãr_»cÜd
->
¡Üe_busy
 = 
Œue
;

509 
m_³ndšg_¡Üe
 = 
Œue
;

510 
evt_£nd
 = 
çl£
;

514 
PM_EVT_FLASH_GARBAGE_COLLECTED
:

515 
»Œy_æash_fuÎ
 = 
Œue
;

522 ià(
evt_£nd
)

525 
	`pdb_evt_£nd
(
p_ev’t
);

528 
	`»©‹m±_´evious_İ”©iÚs
(
»Œy_æash_fuÎ
);

529 
	}
}

532 
»t_code_t
 
	$pdb_š™
()

534 
»t_code_t
 
”r_code
;

536 
	`NRF_PM_DEBUG_CHECK
(!
m_moduË_š™Ÿlized
);

538 
	`š‹º®_¡©e_»£t
();

540 
	`PM_BUFFER_INIT
(&
m_wr™e_bufãr
, 
PM_FLASH_BUFFERS
, 
PDB_WRITE_BUF_SIZE
, 
”r_code
);

542 ià(
”r_code
 !ğ
NRF_SUCCESS
)

544 
	`NRF_LOG_ERROR
("PM_BUFFER_INIT(è»tuºed %s.", 
	`Äf_¡»¼Ü_g‘
(
”r_code
));

545  
NRF_ERROR_INTERNAL
;

548 
m_moduË_š™Ÿlized
 = 
Œue
;

550  
NRF_SUCCESS
;

551 
	}
}

554 
»t_code_t
 
	$pdb_³”_ä“
(
pm_³”_id_t
 
³”_id
)

556 
»t_code_t
 
”r_code
;

558 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

560 
ušt32_t
 
šdex
 = 0;

561 
pdb_bufãr_»cÜd_t
 * 
p_»cÜd
 = 
	`wr™e_bufãr_»cÜd_fšd_Ãxt
(
³”_id
, &
šdex
);

563 
p_»cÜd
 !ğ
NULL
)

565 
”r_code
 = 
	`pdb_wr™e_buf_»Ëa£
(
³”_id
, 
p_»cÜd
->
d©a_id
);

566 
	`UNUSED_VARIABLE
(
”r_code
);

568 ià((
”r_code
 !ğ
NRF_SUCCESS
è&& (”r_cod!ğ
NRF_ERROR_NOT_FOUND
))

570 
	`NRF_LOG_ERROR
("pdb_write_buf_release()„eturned %s which should‚ot happen.…eer_id: %d, "\

572 
	`Äf_¡»¼Ü_g‘
(
”r_code
),

573 
³”_id
,

574 
p_»cÜd
->
d©a_id
);

575  
NRF_ERROR_INTERNAL
;

578 
šdex
++;

579 
p_»cÜd
 = 
	`wr™e_bufãr_»cÜd_fšd_Ãxt
(
³”_id
, &
šdex
);

582 
”r_code
 = 
	`pds_³”_id_ä“
(
³”_id
);

584 ià((
”r_code
 =ğ
NRF_SUCCESS
è|| (”r_cod=ğ
NRF_ERROR_INVALID_PARAM
))

586  
”r_code
;

590 
	`NRF_LOG_ERROR
("Peer ID %d was‚ot…roperly„eleased.…ds_peer_id_free()„eturned %s. "\

592 
³”_id
,

593 
	`Äf_¡»¼Ü_g‘
(
”r_code
));

594  
NRF_ERROR_INTERNAL
;

596 
	}
}

599 
»t_code_t
 
	$pdb_³”_d©a_±r_g‘
(
pm_³”_id_t
 
³”_id
,

600 
pm_³”_d©a_id_t
 
d©a_id
,

601 
pm_³”_d©a_æash_t
 * cÚ¡ 
p_³”_d©a
)

603 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

604 
	`NRF_PM_DEBUG_CHECK
(
p_³”_d©a
 !ğ
NULL
);

607  
	`pds_³”_d©a_»ad
(
³”_id
, 
d©a_id
, (
pm_³”_d©a_t
*)
p_³”_d©a
, 
NULL
);

608 
	}
}

612 
»t_code_t
 
	$pdb_wr™e_buf_g‘
(
pm_³”_id_t
 
³”_id
,

613 
pm_³”_d©a_id_t
 
d©a_id
,

614 
ušt32_t
 
n_bufs
,

615 
pm_³”_d©a_t
 * 
p_³”_d©a
)

617 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

619 
	`VERIFY_PARAM_NOT_NULL
(
p_³”_d©a
);

620 
	`VERIFY_DATA_ID_WRITE_BUF
(
d©a_id
);

622 ià((
n_bufs
 =ğ0è|| (n_buf > 
PM_FLASH_BUFFERS
))

624  
NRF_ERROR_INVALID_PARAM
;

627 
pdb_bufãr_»cÜd_t
 * 
p_wr™e_bufãr_»cÜd
;

628 
ušt8_t
 * 
p_bufãr_memÜy
;

629 
boŞ
 
Ãw_»cÜd
 = 
çl£
;

631 
p_wr™e_bufãr_»cÜd
 = 
	`wr™e_bufãr_»cÜd_fšd
(
³”_id
, 
d©a_id
);

633 ià(
p_wr™e_bufãr_»cÜd
 =ğ
NULL
)

636 
	`wr™e_bufãr_»cÜd_acquœe
(&
p_wr™e_bufãr_»cÜd
, 
³”_id
, 
d©a_id
);

637 ià(
p_wr™e_bufãr_»cÜd
 =ğ
NULL
)

639  
NRF_ERROR_BUSY
;

642 ià(
p_wr™e_bufãr_»cÜd
->
n_bufs
 !=‚_bufs)

645  
NRF_ERROR_FORBIDDEN
;

648 ià(
p_wr™e_bufãr_»cÜd
->
bufãr_block_id
 =ğ
PM_BUFFER_INVALID_ID
)

650 
p_wr™e_bufãr_»cÜd
->
bufãr_block_id
 = 
	`pm_bufãr_block_acquœe
(&
m_wr™e_bufãr
, 
n_bufs
);

652 ià(
p_wr™e_bufãr_»cÜd
->
bufãr_block_id
 =ğ
PM_BUFFER_INVALID_ID
)

654 
	`wr™e_bufãr_»cÜd_šv®id©e
(
p_wr™e_bufãr_»cÜd
);

655  
NRF_ERROR_BUSY
;

658 
Ãw_»cÜd
 = 
Œue
;

661 
p_wr™e_bufãr_»cÜd
->
n_bufs
 =‚_bufs;

663 
p_bufãr_memÜy
 = 
	`pm_bufãr_±r_g‘
(&
m_wr™e_bufãr
, 
p_wr™e_bufãr_»cÜd
->
bufãr_block_id
);

665 ià(
p_bufãr_memÜy
 =ğ
NULL
)

667 
	`NRF_LOG_ERROR
("Cannot store datao flash because…m_buffer_ptr_get() could‚ot„etrieve "\

669 
p_wr™e_bufãr_»cÜd
->
bufãr_block_id
);

670  
NRF_ERROR_INTERNAL
;

673 
	`³”_d©a_pošt_to_bufãr
(
p_³”_d©a
, 
d©a_id
, 
p_bufãr_memÜy
, 
n_bufs
);

674 ià(
Ãw_»cÜd
 && (
d©a_id
 =ğ
PM_PEER_DATA_ID_GATT_LOCAL
))

676 
p_³”_d©a
->
p_loÿl_g©t_db
->
Ën
 = 
	`PM_LOCAL_DB_LEN
Õ_³”_d©a->
Ëngth_wÜds
);

679  
NRF_SUCCESS
;

680 
	}
}

683 
»t_code_t
 
	$pdb_wr™e_buf_»Ëa£
(
pm_³”_id_t
 
³”_id
, 
pm_³”_d©a_id_t
 
d©a_id
)

685 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

687 
pdb_bufãr_»cÜd_t
 * 
p_wr™e_bufãr_»cÜd
;

688 
p_wr™e_bufãr_»cÜd
 = 
	`wr™e_bufãr_»cÜd_fšd
(
³”_id
, 
d©a_id
);

690 ià(
p_wr™e_bufãr_»cÜd
 =ğ
NULL
)

692  
NRF_ERROR_NOT_FOUND
;

695 
	`wr™e_bufãr_»cÜd_»Ëa£
(
p_wr™e_bufãr_»cÜd
);

697  
NRF_SUCCESS
;

698 
	}
}

701 
»t_code_t
 
	$pdb_wr™e_buf_¡Üe
(
pm_³”_id_t
 
³”_id
,

702 
pm_³”_d©a_id_t
 
d©a_id
,

703 
pm_³”_id_t
 
Ãw_³”_id
)

705 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

707 
	`VERIFY_DATA_ID_WRITE_BUF
(
d©a_id
);

709 ià(!
	`pds_³”_id_is_®loÿ‹d
(
Ãw_³”_id
))

711  
NRF_ERROR_INVALID_PARAM
;

714 
pdb_bufãr_»cÜd_t
 * 
p_wr™e_bufãr_»cÜd
 = 
	`wr™e_bufãr_»cÜd_fšd
(
³”_id
, 
d©a_id
);

716 ià(
p_wr™e_bufãr_»cÜd
 =ğ
NULL
)

718  
NRF_ERROR_NOT_FOUND
;

721 
p_wr™e_bufãr_»cÜd
->
³”_id
 = 
Ãw_³”_id
;

722 
p_wr™e_bufãr_»cÜd
->
d©a_id
 = data_id;

723  
	`wr™e_buf_¡Üe
(
p_wr™e_bufãr_»cÜd
);

724 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\ble\peer_manager\peer_id.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
PEER_MANAGER
)

42 
	~"³”_id.h
"

44 
	~<¡dšt.h
>

45 
	~<¡ršg.h
>

46 
	~"sdk_”rÜs.h
"

47 
	~"³”_mªag”_ty³s.h
"

48 
	~"Äf_©æags.h
"

53 
NRF_ATFLAGS_DEF_MEMBER
(
u£d_³”_ids
, 
PM_PEER_ID_N_AVAILABLE_IDS
);

54 
NRF_ATFLAGS_DEF_MEMBER
(
d–‘ed_³”_ids
, 
PM_PEER_ID_N_AVAILABLE_IDS
);

55 } 
	tpi_t
;

58 
pi_t
 
	gm_pi
 = {{0}, {0}};

61 
	$š‹º®_¡©e_»£t
(
pi_t
 * 
p_pi
)

63 
	`mem£t
(
p_pi
, 0, (
pi_t
));

64 
	}
}

67 
	$³”_id_š™
()

69 
	`š‹º®_¡©e_»£t
(&
m_pi
);

70 
	}
}

73 
pm_³”_id_t
 
	$şaim
(
pm_³”_id_t
 
³”_id
, 
Äf_©æags_t
 * 
p_³”_id_æags
)

75 
pm_³”_id_t
 
®loÿ‹d_³”_id
 = 
PM_PEER_ID_INVALID
;

76 ià(
³”_id
 =ğ
PM_PEER_ID_INVALID
)

78 
®loÿ‹d_³”_id
 = 
	`Äf_©æags_fšd_ªd_£t_æag
(
p_³”_id_æags
, 
PM_PEER_ID_N_AVAILABLE_IDS
);

79 ià(
®loÿ‹d_³”_id
 =ğ
PM_PEER_ID_N_AVAILABLE_IDS
)

81 
®loÿ‹d_³”_id
 = 
PM_PEER_ID_INVALID
;

84 ià(
³”_id
 < 
PM_PEER_ID_N_AVAILABLE_IDS
)

86 
boŞ
 
lock_sucûss
 = !
	`Äf_©æags_ãtch_£t
(
p_³”_id_æags
, 
³”_id
);

87 
®loÿ‹d_³”_id
 = 
lock_sucûss
 ? 
³”_id
 : 
PM_PEER_ID_INVALID
;

89  
®loÿ‹d_³”_id
;

90 
	}
}

93 
	$»Ëa£
(
pm_³”_id_t
 
³”_id
, 
Äf_©æags_t
 * 
p_³”_id_æags
)

95 ià(
³”_id
 < 
PM_PEER_ID_N_AVAILABLE_IDS
)

97 
	`Äf_©æags_ş—r
(
p_³”_id_æags
, 
³”_id
);

99 
	}
}

102 
pm_³”_id_t
 
	$³”_id_®loÿ‹
(
pm_³”_id_t
 
³”_id
)

104  
	`şaim
(
³”_id
, 
m_pi
.
u£d_³”_ids
);

105 
	}
}

108 
boŞ
 
	$³”_id_d–‘e
(
pm_³”_id_t
 
³”_id
)

110 
pm_³”_id_t
 
d–‘ed_³”_id
;

112 ià(
³”_id
 =ğ
PM_PEER_ID_INVALID
)

114  
çl£
;

117 
d–‘ed_³”_id
 = 
	`şaim
(
³”_id
, 
m_pi
.
d–‘ed_³”_ids
);

119  (
d–‘ed_³”_id
 =ğ
³”_id
);

120 
	}
}

123 
	$³”_id_ä“
(
pm_³”_id_t
 
³”_id
)

125 
	`»Ëa£
(
³”_id
, 
m_pi
.
u£d_³”_ids
);

126 
	`»Ëa£
(
³”_id
, 
m_pi
.
d–‘ed_³”_ids
);

127 
	}
}

130 
boŞ
 
	$³”_id_is_®loÿ‹d
(
pm_³”_id_t
 
³”_id
)

132 ià(
³”_id
 < 
PM_PEER_ID_N_AVAILABLE_IDS
)

134  
	`Äf_©æags_g‘
(
m_pi
.
u£d_³”_ids
, 
³”_id
);

136  
çl£
;

137 
	}
}

140 
boŞ
 
	$³”_id_is_d–‘ed
(
pm_³”_id_t
 
³”_id
)

142 ià(
³”_id
 < 
PM_PEER_ID_N_AVAILABLE_IDS
)

144  
	`Äf_©æags_g‘
(
m_pi
.
d–‘ed_³”_ids
, 
³”_id
);

146  
çl£
;

147 
	}
}

150 
pm_³”_id_t
 
	$Ãxt_id_g‘
(
pm_³”_id_t
 
´ev_³”_id
, 
Äf_©æags_t
 * 
p_³”_id_æags
)

152 
pm_³”_id_t
 
i
 = (
´ev_³”_id
 =ğ
PM_PEER_ID_INVALID
) ? 0 : (prev_peer_id + 1);

153 ; 
i
 < 
PM_PEER_ID_N_AVAILABLE_IDS
; i++)

155 ià(
	`Äf_©æags_g‘
(
p_³”_id_æags
, 
i
))

157  
i
;

161  
PM_PEER_ID_INVALID
;

162 
	}
}

165 
pm_³”_id_t
 
	$³”_id_g‘_Ãxt_u£d
(
pm_³”_id_t
 
³”_id
)

167 
³”_id
 = 
	`Ãxt_id_g‘
Õ“r_id, 
m_pi
.
u£d_³”_ids
);

169 
³”_id
 !ğ
PM_PEER_ID_INVALID
)

171 ià(!
	`³”_id_is_d–‘ed
(
³”_id
))

173  
³”_id
;

176 
³”_id
 = 
	`Ãxt_id_g‘
Õ“r_id, 
m_pi
.
u£d_³”_ids
);

179  
³”_id
;

180 
	}
}

183 
pm_³”_id_t
 
	$³”_id_g‘_Ãxt_d–‘ed
(
pm_³”_id_t
 
´ev_³”_id
)

185  
	`Ãxt_id_g‘
(
´ev_³”_id
, 
m_pi
.
d–‘ed_³”_ids
);

186 
	}
}

189 
ušt32_t
 
	$³”_id_n_ids
()

191 
ušt32_t
 
n_ids
 = 0;

193 
pm_³”_id_t
 
i
 = 0; i < 
PM_PEER_ID_N_AVAILABLE_IDS
; i++)

195 
n_ids
 +ğ
	`Äf_©æags_g‘
(
m_pi
.
u£d_³”_ids
, 
i
);

198  
n_ids
;

199 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\ble\peer_manager\peer_manager.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
PEER_MANAGER
)

42 
	~"bË_”r.h
"

43 
	~"³”_mªag”.h
"

44 
	~<¡ršg.h
>

45 
	~"£cur™y_mªag”.h
"

46 
	~"£cur™y_di¥©ch”.h
"

47 
	~"g©t_ÿche_mªag”.h
"

48 
	~"g©ts_ÿche_mªag”.h
"

49 
	~"³”_d©aba£.h
"

50 
	~"³”_d©a_¡Üage.h
"

51 
	~"id_mªag”.h
"

52 
	~"bË_cÚn_¡©e.h
"

53 
	~"³”_mªag”_š‹º®.h
"

54 
	~"Äf_sdh_bË.h
"

56 
	#NRF_LOG_MODULE_NAME
 
³”_mªag”


	)

57 #ià
PM_LOG_ENABLED


58 
	#NRF_LOG_LEVEL
 
PM_LOG_LEVEL


	)

59 
	#NRF_LOG_INFO_COLOR
 
PM_LOG_INFO_COLOR


	)

60 
	#NRF_LOG_DEBUG_COLOR
 
PM_LOG_DEBUG_COLOR


	)

62 
	#NRF_LOG_LEVEL
 0

	)

64 
	~"Äf_log.h
"

65 
	~"Äf_log_ù¾.h
"

66 
NRF_LOG_MODULE_REGISTER
();

67 
	~"Äf_¡»¼Ü.h
"

70 #iâdeà
PM_PEER_RANKS_ENABLED


71 
	#PM_PEER_RANKS_ENABLED
 1

	)

74 
	#MODULE_INITIALIZED
 (
m_moduË_š™Ÿlized
è

	)

77 
boŞ
 
	gm_moduË_š™Ÿlized
;

78 
boŞ
 
	gm_³”_¿nk_š™Ÿlized
;

79 
boŞ
 
	gm_d–‘šg_®l
;

80 
pm_¡Üe_tok’_t
 
	gm_³”_¿nk_tok’
;

81 
ušt32_t
 
	gm_cu¼’t_highe¡_³”_¿nk
;

82 
pm_³”_id_t
 
	gm_highe¡_¿nked_³”
;

83 
pm_evt_hªdËr_t
 
	gm_evt_hªdËrs
[
PM_MAX_REGISTRANTS
];

84 
ušt8_t
 
	gm_n_»gi¡¿Ás
;

91 
	$evt_£nd
(
pm_evt_t
 cÚ¡ * 
p_pm_evt
)

93 
i
 = 0; i < 
m_n_»gi¡¿Ás
; i++)

95 
m_evt_hªdËrs
[
i
](
p_pm_evt
);

97 
	}
}

100 #ià
PM_PEER_RANKS_ENABLED
 == 1

103 
	$¿nk_v¬s_upd©e
()

105 
»t_code_t
 
”r_code
 = 
	`pm_³”_¿nks_g‘
(&
m_highe¡_¿nked_³”
,

106 &
m_cu¼’t_highe¡_³”_¿nk
,

107 
NULL
,

108 
NULL
);

110 
m_³”_¿nk_š™Ÿlized
 = ((
”r_code
 =ğ
NRF_SUCCESS
è|| (”r_cod=ğ
NRF_ERROR_NOT_FOUND
));

111 
	}
}

120 
	$pm_pdb_evt_hªdËr
(
pm_evt_t
 * 
p_pdb_evt
)

122 
boŞ
 
£nd_evt
 = 
Œue
;

124 
p_pdb_evt
->
cÚn_hªdË
 = 
	`im_cÚn_hªdË_g‘
Õ_pdb_evt->
³”_id
);

126 
p_pdb_evt
->
evt_id
)

128 #ià
PM_PEER_RANKS_ENABLED
 == 1

129 
PM_EVT_PEER_DATA_UPDATE_SUCCEEDED
:

130 ià(
p_pdb_evt
->
·¿ms
.
³”_d©a_upd©e_sucûeded
.
aùiÚ
 =ğ
PM_PEER_DATA_OP_UPDATE
)

132 iàĞ(
m_³”_¿nk_tok’
 !ğ
PM_STORE_TOKEN_INVALID
)

133 && (
m_³”_¿nk_tok’
 =ğ
p_pdb_evt
->
·¿ms
.
³”_d©a_upd©e_sucûeded
.
tok’
))

135 
m_³”_¿nk_tok’
 = 
PM_STORE_TOKEN_INVALID
;

136 
m_highe¡_¿nked_³”
 = 
p_pdb_evt
->
³”_id
;

138 
p_pdb_evt
->
·¿ms
.
³”_d©a_upd©e_sucûeded
.
tok’
 = 
PM_STORE_TOKEN_INVALID
;

140 iàĞ
m_³”_¿nk_š™Ÿlized


141 && (
p_pdb_evt
->
³”_id
 =ğ
m_highe¡_¿nked_³”
)

142 && (
p_pdb_evt
->
·¿ms
.
³”_d©a_upd©e_sucûeded
.
d©a_id


143 =ğ
PM_PEER_DATA_ID_PEER_RANK
))

146 
	`¿nk_v¬s_upd©e
();

149 ià(
p_pdb_evt
->
·¿ms
.
³”_d©a_upd©e_sucûeded
.
aùiÚ
 =ğ
PM_PEER_DATA_OP_DELETE
)

151 iàĞ
m_³”_¿nk_š™Ÿlized


152 && (
p_pdb_evt
->
³”_id
 =ğ
m_highe¡_¿nked_³”
)

153 && (
p_pdb_evt
->
·¿ms
.
³”_d©a_upd©e_sucûeded
.
d©a_id
 =ğ
PM_PEER_DATA_ID_PEER_RANK
))

156 
	`¿nk_v¬s_upd©e
();

161 
PM_EVT_PEER_DATA_UPDATE_FAILED
:

162 ià(
p_pdb_evt
->
·¿ms
.
³”_d©a_upd©e_sucûeded
.
aùiÚ
 =ğ
PM_PEER_DATA_OP_UPDATE
)

164 iàĞ(
m_³”_¿nk_tok’
 !ğ
PM_STORE_TOKEN_INVALID
)

165 && (
m_³”_¿nk_tok’
 =ğ
p_pdb_evt
->
·¿ms
.
³”_d©a_upd©e_çed
.
tok’
))

167 
m_³”_¿nk_tok’
 = 
PM_STORE_TOKEN_INVALID
;

168 
m_cu¼’t_highe¡_³”_¿nk
 -= 1;

170 
p_pdb_evt
->
·¿ms
.
³”_d©a_upd©e_sucûeded
.
tok’
 = 
PM_STORE_TOKEN_INVALID
;

176 
PM_EVT_PEER_DELETE_SUCCEEDED
:

178 ià(
m_d–‘šg_®l


179 && (
	`pds_Ãxt_³”_id_g‘
(
PM_PEER_ID_INVALID
) == PM_PEER_ID_INVALID)

180 && (
	`pds_Ãxt_d–‘ed_³”_id_g‘
(
PM_PEER_ID_INVALID
) == PM_PEER_ID_INVALID))

183 
m_d–‘šg_®l
 = 
çl£
;

185 
pm_evt_t
 
pm_d–‘e_®l_evt
;

186 
	`mem£t
(&
pm_d–‘e_®l_evt
, 0, (
pm_evt_t
));

187 
pm_d–‘e_®l_evt
.
evt_id
 = 
PM_EVT_PEERS_DELETE_SUCCEEDED
;

188 
pm_d–‘e_®l_evt
.
³”_id
 = 
PM_PEER_ID_INVALID
;

189 
pm_d–‘e_®l_evt
.
cÚn_hªdË
 = 
BLE_CONN_HANDLE_INVALID
;

191 
£nd_evt
 = 
çl£
;

194 
	`evt_£nd
(
p_pdb_evt
);

195 
	`evt_£nd
(&
pm_d–‘e_®l_evt
);

198 #ià
PM_PEER_RANKS_ENABLED
 == 1

199 ià(
m_³”_¿nk_š™Ÿlized
 && (
p_pdb_evt
->
³”_id
 =ğ
m_highe¡_¿nked_³”
))

202 
	`¿nk_v¬s_upd©e
();

207 
PM_EVT_PEER_DELETE_FAILED
:

208 ià(
m_d–‘šg_®l
)

212 
m_d–‘šg_®l
 = 
çl£
;

214 
pm_evt_t
 
pm_d–‘e_®l_evt
;

215 
	`mem£t
(&
pm_d–‘e_®l_evt
, 0, (
pm_evt_t
));

216 
pm_d–‘e_®l_evt
.
evt_id
 = 
PM_EVT_PEERS_DELETE_FAILED
;

217 
pm_d–‘e_®l_evt
.
³”_id
 = 
PM_PEER_ID_INVALID
;

218 
pm_d–‘e_®l_evt
.
cÚn_hªdË
 = 
BLE_CONN_HANDLE_INVALID
;

219 
pm_d–‘e_®l_evt
.
·¿ms
.
³”s_d–‘e_çed_evt
.
”rÜ


220 ğ
p_pdb_evt
->
·¿ms
.
³”_d–‘e_çed
.
”rÜ
;

221 
pm_d–‘e_®l_evt
.
·¿ms
.
³”s_d–‘e_çed_evt
.
fds_”rÜ


222 ğ
p_pdb_evt
->
·¿ms
.
³”_d–‘e_çed
.
fds_”rÜ
;

224 
£nd_evt
 = 
çl£
;

227 
	`evt_£nd
(
p_pdb_evt
);

228 
	`evt_£nd
(&
pm_d–‘e_®l_evt
);

237 ià(
£nd_evt
)

240 
	`evt_£nd
(
p_pdb_evt
);

242 
	}
}

250 
	$pm_sm_evt_hªdËr
(
pm_evt_t
 * 
p_sm_evt
)

252 
	`VERIFY_PARAM_NOT_NULL_VOID
(
p_sm_evt
);

255 
	`evt_£nd
(
p_sm_evt
);

256 
	}
}

264 
	$pm_gcm_evt_hªdËr
(
pm_evt_t
 * 
p_gcm_evt
)

267 
	`evt_£nd
(
p_gcm_evt
);

268 
	}
}

276 
	$pm_im_evt_hªdËr
(
pm_evt_t
 * 
p_im_evt
)

279 
	`evt_£nd
(
p_im_evt
);

280 
	}
}

288 
	$bË_evt_hªdËr
(
bË_evt_t
 cÚ¡ * 
p_bË_evt
, * 
p_cÚ‹xt
)

290 
	`VERIFY_MODULE_INITIALIZED_VOID
();

292 
	`im_bË_evt_hªdËr
(
p_bË_evt
);

293 
	`sm_bË_evt_hªdËr
(
p_bË_evt
);

294 
	`gcm_bË_evt_hªdËr
(
p_bË_evt
);

295 
	}
}

297 
NRF_SDH_BLE_OBSERVER
(
m_bË_evt_ob£rv”
, 
PM_BLE_OBSERVER_PRIO
, 
bË_evt_hªdËr
, 
NULL
);

302 
	$š‹º®_¡©e_»£t
()

304 
m_highe¡_¿nked_³”
 = 
PM_PEER_ID_INVALID
;

305 
m_³”_¿nk_tok’
 = 
PM_STORE_TOKEN_INVALID
;

306 
	}
}

309 
»t_code_t
 
	$pm_š™
()

311 
»t_code_t
 
”r_code
;

313 
”r_code
 = 
	`pds_š™
();

314 ià(
”r_code
 !ğ
NRF_SUCCESS
)

316 
	`NRF_LOG_ERROR
("% çed beÿu£…ds_š™(è»tuºed %s.", 
__func__
, 
	`Äf_¡»¼Ü_g‘
(
”r_code
));

317  
NRF_ERROR_INTERNAL
;

320 
”r_code
 = 
	`pdb_š™
();

321 ià(
”r_code
 !ğ
NRF_SUCCESS
)

323 
	`NRF_LOG_ERROR
("% çed beÿu£…db_š™(è»tuºed %s.", 
__func__
, 
	`Äf_¡»¼Ü_g‘
(
”r_code
));

324  
NRF_ERROR_INTERNAL
;

327 
”r_code
 = 
	`sm_š™
();

328 ià(
”r_code
 !ğ
NRF_SUCCESS
)

330 
	`NRF_LOG_ERROR
("% çed beÿu£ sm_š™(è»tuºed %s.", 
__func__
, 
	`Äf_¡»¼Ü_g‘
(
”r_code
));

331  
NRF_ERROR_INTERNAL
;

334 
”r_code
 = 
	`smd_š™
();

335 ià(
”r_code
 !ğ
NRF_SUCCESS
)

337 
	`NRF_LOG_ERROR
("% çed beÿu£ smd_š™(è»tuºed %s.", 
__func__
, 
	`Äf_¡»¼Ü_g‘
(
”r_code
));

338  
NRF_ERROR_INTERNAL
;

341 
”r_code
 = 
	`gcm_š™
();

342 ià(
”r_code
 !ğ
NRF_SUCCESS
)

344 
	`NRF_LOG_ERROR
("% çed beÿu£ gcm_š™(è»tuºed %s.", 
__func__
, 
	`Äf_¡»¼Ü_g‘
(
”r_code
));

345  
NRF_ERROR_INTERNAL
;

348 
”r_code
 = 
	`gscm_š™
();

349 ià(
”r_code
 !ğ
NRF_SUCCESS
)

351 
	`NRF_LOG_ERROR
("% çed beÿu£ gscm_š™(è»tuºed %s.", 
__func__
, 
	`Äf_¡»¼Ü_g‘
(
”r_code
));

352  
NRF_ERROR_INTERNAL
;

355 
	`š‹º®_¡©e_»£t
();

357 
m_³”_¿nk_š™Ÿlized
 = 
çl£
;

358 
m_moduË_š™Ÿlized
 = 
Œue
;

361 
	`UNUSED_VARIABLE
(
m_³”_¿nk_š™Ÿlized
);

362 
	`UNUSED_VARIABLE
(
m_³”_¿nk_tok’
);

363 
	`UNUSED_VARIABLE
(
m_cu¼’t_highe¡_³”_¿nk
);

364 
	`UNUSED_VARIABLE
(
m_highe¡_¿nked_³”
);

366  
NRF_SUCCESS
;

367 
	}
}

370 
»t_code_t
 
	$pm_»gi¡”
(
pm_evt_hªdËr_t
 
ev’t_hªdËr
)

372 
	`VERIFY_MODULE_INITIALIZED
();

374 ià(
m_n_»gi¡¿Ás
 >ğ
PM_MAX_REGISTRANTS
)

376  
NRF_ERROR_NO_MEM
;

379 
m_evt_hªdËrs
[
m_n_»gi¡¿Ás
] = 
ev’t_hªdËr
;

380 
m_n_»gi¡¿Ás
 += 1;

382  
NRF_SUCCESS
;

383 
	}
}

386 
»t_code_t
 
	$pm_£c_·¿ms_£t
(
bË_g­_£c_·¿ms_t
 * 
p_£c_·¿ms
)

388 
	`VERIFY_MODULE_INITIALIZED
();

390 
»t_code_t
 
”r_code
;

392 
”r_code
 = 
	`sm_£c_·¿ms_£t
(
p_£c_·¿ms
);

396  
”r_code
;

397 
	}
}

400 
»t_code_t
 
	$pm_cÚn_£cu»
(
ušt16_t
 
cÚn_hªdË
, 
boŞ
 
fÜû_»·œšg
)

402 
	`VERIFY_MODULE_INITIALIZED
();

404 
»t_code_t
 
”r_code
;

406 
”r_code
 = 
	`sm_lšk_£cu»
(
cÚn_hªdË
, 
fÜû_»·œšg
);

408 ià(
”r_code
 =ğ
NRF_ERROR_INVALID_STATE
)

410 
”r_code
 = 
NRF_ERROR_BUSY
;

413  
”r_code
;

414 
	}
}

417 
	$pm_cÚn_£c_cÚfig_»¶y
(
ušt16_t
 
cÚn_hªdË
, 
pm_cÚn_£c_cÚfig_t
 * 
p_cÚn_£c_cÚfig
)

419 ià(
p_cÚn_£c_cÚfig
 !ğ
NULL
)

421 
	`sm_cÚn_£c_cÚfig_»¶y
(
cÚn_hªdË
, 
p_cÚn_£c_cÚfig
);

423 
	}
}

426 
»t_code_t
 
	$pm_cÚn_£c_·¿ms_»¶y
(
ušt16_t
 
cÚn_hªdË
,

427 
bË_g­_£c_·¿ms_t
 * 
p_£c_·¿ms
,

428 cÚ¡ * 
p_cÚ‹xt
)

430 
	`VERIFY_MODULE_INITIALIZED
();

432  
	`sm_£c_·¿ms_»¶y
(
cÚn_hªdË
, 
p_£c_·¿ms
, 
p_cÚ‹xt
);

433 
	}
}

436 
	$pm_loÿl_d©aba£_has_chªged
()

438 #ià!
	`defšed
(
PM_SERVICE_CHANGED_ENABLED
) || (PM_SERVICE_CHANGED_ENABLED == 1)

439 
	`VERIFY_MODULE_INITIALIZED_VOID
();

441 
	`gcm_loÿl_d©aba£_has_chªged
();

443 
	}
}

446 
»t_code_t
 
	$pm_id_addr_£t
(
bË_g­_addr_t
 cÚ¡ * 
p_addr
)

448 
	`VERIFY_MODULE_INITIALIZED
();

449  
	`im_id_addr_£t
(
p_addr
);

450 
	}
}

453 
»t_code_t
 
	$pm_id_addr_g‘
(
bË_g­_addr_t
 * 
p_addr
)

455 
	`VERIFY_MODULE_INITIALIZED
();

456 
	`VERIFY_PARAM_NOT_NULL
(
p_addr
);

457  
	`im_id_addr_g‘
(
p_addr
);

458 
	}
}

461 
»t_code_t
 
	$pm_´ivacy_£t
(
pm_´ivacy_·¿ms_t
 cÚ¡ * 
p_´ivacy_·¿ms
)

463 
	`VERIFY_MODULE_INITIALIZED
();

464 
	`VERIFY_PARAM_NOT_NULL
(
p_´ivacy_·¿ms
);

465  
	`im_´ivacy_£t
(
p_´ivacy_·¿ms
);

466 
	}
}

469 
»t_code_t
 
	$pm_´ivacy_g‘
(
pm_´ivacy_·¿ms_t
 * 
p_´ivacy_·¿ms
)

471 
	`VERIFY_MODULE_INITIALIZED
();

472 
	`VERIFY_PARAM_NOT_NULL
(
p_´ivacy_·¿ms
);

473 
	`VERIFY_PARAM_NOT_NULL
(
p_´ivacy_·¿ms
->
p_deviû_œk
);

474  
	`im_´ivacy_g‘
(
p_´ivacy_·¿ms
);

475 
	}
}

478 
boŞ
 
	$pm_add»ss_»sŞve
(
bË_g­_addr_t
 cÚ¡ * 
p_addr
, 
bË_g­_œk_t
 cÚ¡ * 
p_œk
)

480 
	`VERIFY_MODULE_INITIALIZED
();

482 ià((
p_addr
 =ğ
NULL
è|| (
p_œk
 == NULL))

484  
çl£
;

488  
	`im_add»ss_»sŞve
(
p_addr
, 
p_œk
);

490 
	}
}

493 
»t_code_t
 
	$pm_wh™–i¡_£t
(
pm_³”_id_t
 cÚ¡ * 
p_³”s
,

494 
ušt32_t
 
³”_út
)

496 
	`VERIFY_MODULE_INITIALIZED
();

497  
	`im_wh™–i¡_£t
(
p_³”s
, 
³”_út
);

498 
	}
}

501 
»t_code_t
 
	$pm_wh™–i¡_g‘
(
bË_g­_addr_t
 * 
p_addrs
,

502 
ušt32_t
 * 
p_addr_út
,

503 
bË_g­_œk_t
 * 
p_œks
,

504 
ušt32_t
 * 
p_œk_út
)

506 
	`VERIFY_MODULE_INITIALIZED
();

508 ià(((
p_addrs
 =ğ
NULL
è&& (
p_œks
 == NULL)) ||

509 ((
p_addrs
 !ğ
NULL
è&& (
p_addr_út
 == NULL)) ||

510 ((
p_œks
 !ğ
NULL
è&& (
p_œk_út
 == NULL)))

513  
NRF_ERROR_NULL
;

516  
	`im_wh™–i¡_g‘
(
p_addrs
, 
p_addr_út
, 
p_œks
, 
p_œk_út
);

517 
	}
}

520 
»t_code_t
 
	$pm_deviû_id’t™›s_li¡_£t
(
pm_³”_id_t
 cÚ¡ * 
p_³”s
,

521 
ušt32_t
 
³”_út
)

523 
	`VERIFY_MODULE_INITIALIZED
();

524  
	`im_deviû_id’t™›s_li¡_£t
(
p_³”s
, 
³”_út
);

525 
	}
}

528 
»t_code_t
 
	$pm_cÚn_£c_¡©us_g‘
(
ušt16_t
 
cÚn_hªdË
, 
pm_cÚn_£c_¡©us_t
 * 
p_cÚn_£c_¡©us
)

530 
	`VERIFY_MODULE_INITIALIZED
();

531 
	`VERIFY_PARAM_NOT_NULL
(
p_cÚn_£c_¡©us
);

533 
bË_cÚn_¡©e_¡©us_t
 
¡©us
 = 
	`bË_cÚn_¡©e_¡©us
(
cÚn_hªdË
);

535 ià(
¡©us
 =ğ
BLE_CONN_STATUS_INVALID
)

537  
BLE_ERROR_INVALID_CONN_HANDLE
;

540 
p_cÚn_£c_¡©us
->
cÚÃùed
 = (
¡©us
 =ğ
BLE_CONN_STATUS_CONNECTED
);

541 
p_cÚn_£c_¡©us
->
bÚded
 = (
	`im_³”_id_g‘_by_cÚn_hªdË
(
cÚn_hªdË
è!ğ
PM_PEER_ID_INVALID
);

542 
p_cÚn_£c_¡©us
->
’üy±ed
 = 
	`bË_cÚn_¡©e_’üy±ed
(
cÚn_hªdË
);

543 
p_cÚn_£c_¡©us
->
m™m_´Ùeùed
 = 
	`bË_cÚn_¡©e_m™m_´Ùeùed
(
cÚn_hªdË
);

544  
NRF_SUCCESS
;

545 
	}
}

548 
»t_code_t
 
	$pm_Ësc_public_key_£t
(
bË_g­_Ësc_p256_pk_t
 * 
p_public_key
)

550 
	`VERIFY_MODULE_INITIALIZED
();

551  
	`sm_Ësc_public_key_£t
(
p_public_key
);

552 
	}
}

555 
»t_code_t
 
	$pm_cÚn_hªdË_g‘
(
pm_³”_id_t
 
³”_id
, 
ušt16_t
 * 
p_cÚn_hªdË
)

557 
	`VERIFY_MODULE_INITIALIZED
();

558 
	`VERIFY_PARAM_NOT_NULL
(
p_cÚn_hªdË
);

559 *
p_cÚn_hªdË
 = 
	`im_cÚn_hªdË_g‘
(
³”_id
);

560  
NRF_SUCCESS
;

561 
	}
}

564 
»t_code_t
 
	$pm_³”_id_g‘
(
ušt16_t
 
cÚn_hªdË
, 
pm_³”_id_t
 * 
p_³”_id
)

566 
	`VERIFY_MODULE_INITIALIZED
();

567 
	`VERIFY_PARAM_NOT_NULL
(
p_³”_id
);

568 *
p_³”_id
 = 
	`im_³”_id_g‘_by_cÚn_hªdË
(
cÚn_hªdË
);

569  
NRF_SUCCESS
;

570 
	}
}

573 
ušt32_t
 
	$pm_³”_couÁ
()

575 ià(!
MODULE_INITIALIZED
)

579  
	`pds_³”_couÁ_g‘
();

580 
	}
}

583 
pm_³”_id_t
 
	$pm_Ãxt_³”_id_g‘
(
pm_³”_id_t
 
´ev_³”_id
)

585 
pm_³”_id_t
 
Ãxt_³”_id
 = 
´ev_³”_id
;

587 ià(!
MODULE_INITIALIZED
)

589  
PM_PEER_ID_INVALID
;

594 
Ãxt_³”_id
 = 
	`pds_Ãxt_³”_id_g‘
(next_peer_id);

595 } 
	`pds_³”_id_is_d–‘ed
(
Ãxt_³”_id
));

597  
Ãxt_³”_id
;

598 
	}
}

605 
boŞ
 
	$³”_is_œk
(
bË_g­_œk_t
 cÚ¡ * cÚ¡ 
p_œk
)

607 
ušt32_t
 
i
 = 0; i < 
	`ARRAY_SIZE
(
p_œk
->
œk
); i++)

609 ià(
p_œk
->
œk
[
i
] != 0)

611  
Œue
;

615  
çl£
;

616 
	}
}

619 
»t_code_t
 
	$pm_³”_id_li¡
(
pm_³”_id_t
 * 
p_³”_li¡
,

620 
ušt32_t
 * cÚ¡ 
p_li¡_size
,

621 
pm_³”_id_t
 
fœ¡_³”_id
,

622 
pm_³”_id_li¡_sk_t
 
sk_id
)

624 
	`VERIFY_MODULE_INITIALIZED
();

625 
	`VERIFY_PARAM_NOT_NULL
(
p_li¡_size
);

626 
	`VERIFY_PARAM_NOT_NULL
(
p_³”_li¡
);

628 
»t_code_t
 
”r_code
;

629 
ušt32_t
 
size
 = *
p_li¡_size
;

630 
ušt32_t
 
cu¼’t_size
 = 0;

631 
pm_³”_d©a_t
 
pm_ÿr_d©a
;

632 
pm_³”_d©a_t
 
pm_bÚd_d©a
;

633 
pm_³”_id_t
 
cu¼’t_³”_id
 = 
fœ¡_³”_id
;

634 
bË_g­_addr_t
 cÚ¡ * 
p_g­_addr
;

635 
boŞ
 
sk_no_addr
 = 
sk_id
 & 
PM_PEER_ID_LIST_SKIP_NO_ID_ADDR
;

636 
boŞ
 
sk_no_œk
 = 
sk_id
 & 
PM_PEER_ID_LIST_SKIP_NO_IRK
;

637 
boŞ
 
sk_no_ÿr
 = 
sk_id
 & 
PM_PEER_ID_LIST_SKIP_NO_CAR
;

640 ià((*
p_li¡_size
 < 1) ||

641 (
sk_id
 > (
PM_PEER_ID_LIST_SKIP_NO_ID_ADDR
 | 
PM_PEER_ID_LIST_SKIP_ALL
)))

643  
NRF_ERROR_INVALID_PARAM
;

647 *
p_li¡_size
 = 0;

649 ià(
cu¼’t_³”_id
 =ğ
PM_PEER_ID_INVALID
)

651 
cu¼’t_³”_id
 = 
	`pm_Ãxt_³”_id_g‘
(current_peer_id);

653 ià(
cu¼’t_³”_id
 =ğ
PM_PEER_ID_INVALID
)

655  
NRF_SUCCESS
;

659 
	`mem£t
(&
pm_ÿr_d©a
, 0, (
pm_³”_d©a_t
));

660 
	`mem£t
(&
pm_bÚd_d©a
, 0, (
pm_³”_d©a_t
));

662 
cu¼’t_³”_id
 !ğ
PM_PEER_ID_INVALID
)

664 
boŞ
 
sk
 = 
çl£
;

666 ià(
sk_no_addr
 || 
sk_no_œk
)

669 
pm_bÚd_d©a
.
p_bÚdšg_d©a
 = 
NULL
;

671 
”r_code
 = 
	`pds_³”_d©a_»ad
(
cu¼’t_³”_id
,

672 
PM_PEER_DATA_ID_BONDING
,

673 &
pm_bÚd_d©a
,

674 
NULL
);

676 ià(
”r_code
 =ğ
NRF_ERROR_NOT_FOUND
)

678 
sk
 = 
Œue
;

682 
	`VERIFY_SUCCESS
(
”r_code
);

686 ià(
sk_no_addr
)

688 
p_g­_addr
 = &
pm_bÚd_d©a
.
p_bÚdšg_d©a
->
³”_bË_id
.
id_addr_šfo
;

690 ià((
p_g­_addr
->
addr_ty³
 !ğ
BLE_GAP_ADDR_TYPE_PUBLIC
) &&

691 (
p_g­_addr
->
addr_ty³
 !ğ
BLE_GAP_ADDR_TYPE_RANDOM_STATIC
))

693 
sk
 = 
Œue
;

696 ià(
sk_no_œk
)

698 ià(!
	`³”_is_œk
(&
pm_bÚd_d©a
.
p_bÚdšg_d©a
->
³”_bË_id
.
id_šfo
))

700 
sk
 = 
Œue
;

705 ià(
sk_no_ÿr
)

708 
pm_ÿr_d©a
.
p_ûÁ¿l_addr_»s
 = 
NULL
;

710 
”r_code
 = 
	`pds_³”_d©a_»ad
(
cu¼’t_³”_id
,

711 
PM_PEER_DATA_ID_CENTRAL_ADDR_RES
,

712 &
pm_ÿr_d©a
,

713 
NULL
);

715 ià(
”r_code
 =ğ
NRF_ERROR_NOT_FOUND
)

717 
sk
 = 
Œue
;

721 
	`VERIFY_SUCCESS
(
”r_code
);

725 ià(*
pm_ÿr_d©a
.
p_ûÁ¿l_addr_»s
 == 0)

727 
sk
 = 
Œue
;

731 ià(!
sk
)

733 
p_³”_li¡
[
cu¼’t_size
++] = 
cu¼’t_³”_id
;

735 ià(
cu¼’t_size
 >ğ
size
)

741 
cu¼’t_³”_id
 = 
	`pm_Ãxt_³”_id_g‘
(current_peer_id);

744 *
p_li¡_size
 = 
cu¼’t_size
;

746  
NRF_SUCCESS
;

747 
	}
}

750 
»t_code_t
 
	$pm_³”_d©a_lßd
(
pm_³”_id_t
 
³”_id
,

751 
pm_³”_d©a_id_t
 
d©a_id
,

752 * 
p_d©a
,

753 
ušt16_t
 * 
p_Ëngth
)

755 
	`VERIFY_MODULE_INITIALIZED
();

756 
	`VERIFY_PARAM_NOT_NULL
(
p_d©a
);

757 
	`VERIFY_PARAM_NOT_NULL
(
p_Ëngth
);

759 
pm_³”_d©a_t
 
³”_d©a
;

760 
	`mem£t
(&
³”_d©a
, 0, (peer_data));

761 
³”_d©a
.
p_®l_d©a
 = 
p_d©a
;

763  
	`pds_³”_d©a_»ad
(
³”_id
, 
d©a_id
, &
³”_d©a
, 
p_Ëngth
);

764 
	}
}

767 
»t_code_t
 
	$pm_³”_d©a_bÚdšg_lßd
(
pm_³”_id_t
 
³”_id
,

768 
pm_³”_d©a_bÚdšg_t
 * 
p_d©a
)

770 
ušt16_t
 
Ëngth
 = (
pm_³”_d©a_bÚdšg_t
);

771  
	`pm_³”_d©a_lßd
(
³”_id
,

772 
PM_PEER_DATA_ID_BONDING
,

773 
p_d©a
,

774 &
Ëngth
);

775 
	}
}

778 
»t_code_t
 
	$pm_³”_d©a_»mÙe_db_lßd
(
pm_³”_id_t
 
³”_id
,

779 
bË_g©t_db_¤v_t
 * 
p_d©a
,

780 
ušt16_t
 * 
p_Ëngth
)

782  
	`pm_³”_d©a_lßd
(
³”_id
,

783 
PM_PEER_DATA_ID_GATT_REMOTE
,

784 
p_d©a
,

785 
p_Ëngth
);

786 
	}
}

789 
»t_code_t
 
	$pm_³”_d©a_­p_d©a_lßd
(
pm_³”_id_t
 
³”_id
,

790 * 
p_d©a
,

791 
ušt16_t
 * 
p_Ëngth
)

793  
	`pm_³”_d©a_lßd
(
³”_id
,

794 
PM_PEER_DATA_ID_APPLICATION
,

795 
p_d©a
,

796 
p_Ëngth
);

797 
	}
}

800 
»t_code_t
 
	$pm_³”_d©a_¡Üe
(
pm_³”_id_t
 
³”_id
,

801 
pm_³”_d©a_id_t
 
d©a_id
,

802 cÚ¡ * 
p_d©a
,

803 
ušt16_t
 
Ëngth
,

804 
pm_¡Üe_tok’_t
 * 
p_tok’
)

806 
	`VERIFY_MODULE_INITIALIZED
();

807 
	`VERIFY_PARAM_NOT_NULL
(
p_d©a
);

808 ià(
	`ALIGN_NUM
(4, 
Ëngth
) !=†ength)

810  
NRF_ERROR_INVALID_PARAM
;

813 ià(
d©a_id
 =ğ
PM_PEER_DATA_ID_BONDING
)

815 
pm_³”_id_t
 
du¶_³”_id
;

816 
du¶_³”_id
 = 
	`im_fšd_du¶iÿ‹_bÚdšg_d©a
((
pm_³”_d©a_bÚdšg_t
 *è
p_d©a
, 
³”_id
);

818 ià(
du¶_³”_id
 !ğ
PM_PEER_ID_INVALID
)

820  
NRF_ERROR_FORBIDDEN
;

824 
pm_³”_d©a_æash_t
 
³”_d©a
;

825 
	`mem£t
(&
³”_d©a
, 0, (peer_data));

826 
³”_d©a
.
Ëngth_wÜds
 = 
	`BYTES_TO_WORDS
(
Ëngth
);

827 
³”_d©a
.
d©a_id
 = data_id;

828 
³”_d©a
.
p_®l_d©a
 = 
p_d©a
;

830  
	`pds_³”_d©a_¡Üe
(
³”_id
, &
³”_d©a
, 
p_tok’
);

831 
	}
}

834 
»t_code_t
 
	$pm_³”_d©a_bÚdšg_¡Üe
(
pm_³”_id_t
 
³”_id
,

835 
pm_³”_d©a_bÚdšg_t
 cÚ¡ * 
p_d©a
,

836 
pm_¡Üe_tok’_t
 * 
p_tok’
)

838  
	`pm_³”_d©a_¡Üe
(
³”_id
,

839 
PM_PEER_DATA_ID_BONDING
,

840 
p_d©a
,

841 
	`ALIGN_NUM
(4, (
pm_³”_d©a_bÚdšg_t
)),

842 
p_tok’
);

843 
	}
}

846 
»t_code_t
 
	$pm_³”_d©a_»mÙe_db_¡Üe
(
pm_³”_id_t
 
³”_id
,

847 
bË_g©t_db_¤v_t
 cÚ¡ * 
p_d©a
,

848 
ušt16_t
 
Ëngth
,

849 
pm_¡Üe_tok’_t
 * 
p_tok’
)

851  
	`pm_³”_d©a_¡Üe
(
³”_id
,

852 
PM_PEER_DATA_ID_GATT_REMOTE
,

853 
p_d©a
,

854 
Ëngth
,

855 
p_tok’
);

856 
	}
}

859 
»t_code_t
 
	$pm_³”_d©a_­p_d©a_¡Üe
(
pm_³”_id_t
 
³”_id
,

860 cÚ¡ * 
p_d©a
,

861 
ušt16_t
 
Ëngth
,

862 
pm_¡Üe_tok’_t
 * 
p_tok’
)

864  
	`pm_³”_d©a_¡Üe
(
³”_id
,

865 
PM_PEER_DATA_ID_APPLICATION
,

866 
p_d©a
,

867 
Ëngth
,

868 
p_tok’
);

869 
	}
}

872 
»t_code_t
 
	$pm_³”_d©a_d–‘e
(
pm_³”_id_t
 
³”_id
, 
pm_³”_d©a_id_t
 
d©a_id
)

874 
	`VERIFY_MODULE_INITIALIZED
();

876 ià(
d©a_id
 =ğ
PM_PEER_DATA_ID_BONDING
)

878  
NRF_ERROR_INVALID_PARAM
;

881  
	`pds_³”_d©a_d–‘e
(
³”_id
, 
d©a_id
);

882 
	}
}

885 
»t_code_t
 
	$pm_³”_Ãw
(
pm_³”_id_t
 * 
p_Ãw_³”_id
,

886 
pm_³”_d©a_bÚdšg_t
 * 
p_bÚdšg_d©a
,

887 
pm_¡Üe_tok’_t
 * 
p_tok’
)

889 
»t_code_t
 
”r_code
;

890 
pm_³”_id_t
 
³”_id
;

891 
pm_³”_d©a_æash_t
 
³”_d©a
;

893 
	`VERIFY_MODULE_INITIALIZED
();

894 
	`VERIFY_PARAM_NOT_NULL
(
p_bÚdšg_d©a
);

895 
	`VERIFY_PARAM_NOT_NULL
(
p_Ãw_³”_id
);

897 
	`mem£t
(&
³”_d©a
, 0, (
pm_³”_d©a_æash_t
));

900 
	`pds_³”_d©a_™”©e_´•¬e
();

903 
	`pds_³”_d©a_™”©e
(
PM_PEER_DATA_ID_BONDING
, &
³”_id
, &
³”_d©a
))

905 ià(
	`im_is_du¶iÿ‹_bÚdšg_d©a
(
p_bÚdšg_d©a
, 
³”_d©a
.p_bonding_data))

907 *
p_Ãw_³”_id
 = 
³”_id
;

908  
NRF_SUCCESS
;

914 *
p_Ãw_³”_id
 = 
	`pds_³”_id_®loÿ‹
();

916 ià(*
p_Ãw_³”_id
 =ğ
PM_PEER_ID_INVALID
)

918  
NRF_ERROR_NO_MEM
;

921 
	`mem£t
(&
³”_d©a
, 0, (
pm_³”_d©a_æash_t
));

923 
³”_d©a
.
d©a_id
 = 
PM_PEER_DATA_ID_BONDING
;

924 
³”_d©a
.
p_bÚdšg_d©a
 =…_bonding_data;

925 
³”_d©a
.
Ëngth_wÜds
 = 
	`BYTES_TO_WORDS
((
pm_³”_d©a_bÚdšg_t
));

927 
”r_code
 = 
	`pds_³”_d©a_¡Üe
(*
p_Ãw_³”_id
, &
³”_d©a
, 
p_tok’
);

929 ià(
”r_code
 !ğ
NRF_SUCCESS
)

931 
»t_code_t
 
”r_code_ä“
 = 
	`im_³”_ä“
(*
p_Ãw_³”_id
);

932 ià(
”r_code_ä“
 !ğ
NRF_SUCCESS
)

934 
	`NRF_LOG_ERROR
("Fatalƒrror during cleanup of‡ failed callo %s. im_peer_free() "\

936 
__func__
,

937 
	`Äf_¡»¼Ü_g‘
(
”r_code_ä“
),

938 *
p_Ãw_³”_id
);

939  
NRF_ERROR_INTERNAL
;

945  
”r_code
;

948  
NRF_SUCCESS
;

949 
	}
}

952 
»t_code_t
 
	$pm_³”_d–‘e
(
pm_³”_id_t
 
³”_id
)

954 
	`VERIFY_MODULE_INITIALIZED
();

956  
	`im_³”_ä“
(
³”_id
);

957 
	}
}

960 
»t_code_t
 
	$pm_³”s_d–‘e
()

962 
	`VERIFY_MODULE_INITIALIZED
();

964 
m_d–‘šg_®l
 = 
Œue
;

966 
pm_³”_id_t
 
cu¼’t_³”_id
 = 
	`pds_Ãxt_³”_id_g‘
(
PM_PEER_ID_INVALID
);

968 ià(
cu¼’t_³”_id
 =ğ
PM_PEER_ID_INVALID
)

971 
m_d–‘šg_®l
 = 
çl£
;

973 
pm_evt_t
 
pm_d–‘e_®l_evt
;

974 
	`mem£t
(&
pm_d–‘e_®l_evt
, 0, (
pm_evt_t
));

975 
pm_d–‘e_®l_evt
.
evt_id
 = 
PM_EVT_PEERS_DELETE_SUCCEEDED
;

976 
pm_d–‘e_®l_evt
.
³”_id
 = 
PM_PEER_ID_INVALID
;

977 
pm_d–‘e_®l_evt
.
cÚn_hªdË
 = 
BLE_CONN_HANDLE_INVALID
;

979 
	`evt_£nd
(&
pm_d–‘e_®l_evt
);

982 
cu¼’t_³”_id
 !ğ
PM_PEER_ID_INVALID
)

984 
»t_code_t
 
”r_code
 = 
	`pm_³”_d–‘e
(
cu¼’t_³”_id
);

985 ià(
”r_code
 !ğ
NRF_SUCCESS
)

987 
	`NRF_LOG_ERROR
("%s() failed because‡ callo…m_peer_delete()„eturned %s.…eer_id: %d",

988 
__func__
,

989 
	`Äf_¡»¼Ü_g‘
(
”r_code
),

990 
cu¼’t_³”_id
);

991  
NRF_ERROR_INTERNAL
;

994 
cu¼’t_³”_id
 = 
	`pds_Ãxt_³”_id_g‘
(current_peer_id);

997  
NRF_SUCCESS
;

998 
	}
}

1001 
»t_code_t
 
	$pm_³”_¿nks_g‘
(
pm_³”_id_t
 * 
p_highe¡_¿nked_³”
,

1002 
ušt32_t
 * 
p_highe¡_¿nk
,

1003 
pm_³”_id_t
 * 
p_lowe¡_¿nked_³”
,

1004 
ušt32_t
 * 
p_lowe¡_¿nk
)

1006 #ià
PM_PEER_RANKS_ENABLED
 == 0

1007  
NRF_ERROR_NOT_SUPPORTED
;

1009 
	`VERIFY_MODULE_INITIALIZED
();

1011 
pm_³”_id_t
 
³”_id
 = 
	`pds_Ãxt_³”_id_g‘
(
PM_PEER_ID_INVALID
);

1012 
ušt32_t
 
³”_¿nk
 = 0;

1014 
ušt16_t
 
Ëngth
 = (
³”_¿nk
);

1015 
pm_³”_d©a_t
 
³”_d©a
 = {.
p_³”_¿nk
 = &
³”_¿nk
};

1017 
»t_code_t
 
”r_code
 = 
	`pds_³”_d©a_»ad
(
³”_id
,

1018 
PM_PEER_DATA_ID_PEER_RANK
,

1019 &
³”_d©a
,

1020 &
Ëngth
);

1021 
ušt32_t
 
highe¡_¿nk
 = 0;

1022 
ušt32_t
 
lowe¡_¿nk
 = 0xFFFFFFFF;

1023 
pm_³”_id_t
 
highe¡_¿nked_³”
 = 
PM_PEER_ID_INVALID
;

1024 
pm_³”_id_t
 
lowe¡_¿nked_³”
 = 
PM_PEER_ID_INVALID
;

1026 ià(
”r_code
 =ğ
NRF_ERROR_INVALID_PARAM
)

1029  
NRF_ERROR_NOT_FOUND
;

1032 (
”r_code
 =ğ
NRF_SUCCESS
è|| (”r_cod=ğ
NRF_ERROR_NOT_FOUND
))

1034 ià(
”r_code
 =ğ
NRF_SUCCESS
)

1036 ià(
³”_¿nk
 >ğ
highe¡_¿nk
)

1038 
highe¡_¿nk
 = 
³”_¿nk
;

1039 
highe¡_¿nked_³”
 = 
³”_id
;

1041 ià(
³”_¿nk
 < 
lowe¡_¿nk
)

1043 
lowe¡_¿nk
 = 
³”_¿nk
;

1044 
lowe¡_¿nked_³”
 = 
³”_id
;

1047 
³”_id
 = 
	`pds_Ãxt_³”_id_g‘
(peer_id);

1048 
”r_code
 = 
	`pds_³”_d©a_»ad
(
³”_id
, 
PM_PEER_DATA_ID_PEER_RANK
, &
³”_d©a
, &
Ëngth
);

1050 ià(
³”_id
 =ğ
PM_PEER_ID_INVALID
)

1052 ià((
highe¡_¿nked_³”
 =ğ
PM_PEER_ID_INVALID
è|| (
lowe¡_¿nked_³”
 == PM_PEER_ID_INVALID))

1054 
”r_code
 = 
NRF_ERROR_NOT_FOUND
;

1058 
”r_code
 = 
NRF_SUCCESS
;

1061 ià(
p_highe¡_¿nked_³”
 !ğ
NULL
)

1063 *
p_highe¡_¿nked_³”
 = 
highe¡_¿nked_³”
;

1065 ià(
p_highe¡_¿nk
 !ğ
NULL
)

1067 *
p_highe¡_¿nk
 = 
highe¡_¿nk
;

1069 ià(
p_lowe¡_¿nked_³”
 !ğ
NULL
)

1071 *
p_lowe¡_¿nked_³”
 = 
lowe¡_¿nked_³”
;

1073 ià(
p_lowe¡_¿nk
 !ğ
NULL
)

1075 *
p_lowe¡_¿nk
 = 
lowe¡_¿nk
;

1080 
	`NRF_LOG_ERROR
("Could‚ot„etreive„anks.…db_peer_data_load()„eturned %s.…eer_id: %d",

1081 
	`Äf_¡»¼Ü_g‘
(
”r_code
),

1082 
³”_id
);

1083 
”r_code
 = 
NRF_ERROR_INTERNAL
;

1085  
”r_code
;

1087 
	}
}

1090 #ià
PM_PEER_RANKS_ENABLED
 == 1

1093 
	$¿nk_š™
()

1095 
	`¿nk_v¬s_upd©e
();

1096 
	}
}

1100 
»t_code_t
 
	$pm_³”_¿nk_highe¡
(
pm_³”_id_t
 
³”_id
)

1102 #ià
PM_PEER_RANKS_ENABLED
 == 0

1103  
NRF_ERROR_NOT_SUPPORTED
;

1105 
	`VERIFY_MODULE_INITIALIZED
();

1107 
»t_code_t
 
”r_code
;

1109 
pm_³”_d©a_æash_t
 
³”_d©a
 = {.
Ëngth_wÜds
 = 
	`BYTES_TO_WORDS
((
m_cu¼’t_highe¡_³”_¿nk
)),

1110 .
d©a_id
 = 
PM_PEER_DATA_ID_PEER_RANK
,

1111 .
p_³”_¿nk
 = &
m_cu¼’t_highe¡_³”_¿nk
};

1115 ià(!
m_³”_¿nk_š™Ÿlized
)

1117 
	`¿nk_š™
();

1120 ià(!
m_³”_¿nk_š™Ÿlized
 || (
m_³”_¿nk_tok’
 !ğ
PM_STORE_TOKEN_INVALID
))

1122 
”r_code
 = 
NRF_ERROR_BUSY
;

1126 ià((
³”_id
 =ğ
m_highe¡_¿nked_³”
è&& (
m_cu¼’t_highe¡_³”_¿nk
 > 0))

1128 
pm_evt_t
 
pm_evt
;

1131 
”r_code
 = 
NRF_SUCCESS
;

1133 
	`mem£t
(&
pm_evt
, 0, (pm_evt));

1134 
pm_evt
.
evt_id
 = 
PM_EVT_PEER_DATA_UPDATE_SUCCEEDED
;

1135 
pm_evt
.
cÚn_hªdË
 = 
	`im_cÚn_hªdË_g‘
(
³”_id
);

1136 
pm_evt
.
³”_id
 =…eer_id;

1137 
pm_evt
.
·¿ms
.
³”_d©a_upd©e_sucûeded
.
d©a_id
 = 
PM_PEER_DATA_ID_PEER_RANK
;

1138 
pm_evt
.
·¿ms
.
³”_d©a_upd©e_sucûeded
.
aùiÚ
 = 
PM_PEER_DATA_OP_UPDATE
;

1139 
pm_evt
.
·¿ms
.
³”_d©a_upd©e_sucûeded
.
tok’
 = 
PM_STORE_TOKEN_INVALID
;

1140 
pm_evt
.
·¿ms
.
³”_d©a_upd©e_sucûeded
.
æash_chªged
 = 
çl£
;

1142 
	`evt_£nd
(&
pm_evt
);

1146 ià(
m_cu¼’t_highe¡_³”_¿nk
 =ğ
UINT32_MAX
)

1148 
”r_code
 = 
NRF_ERROR_RESOURCES
;

1152 
m_cu¼’t_highe¡_³”_¿nk
 += 1;

1153 
”r_code
 = 
	`pds_³”_d©a_¡Üe
(
³”_id
, &
³”_d©a
, &
m_³”_¿nk_tok’
);

1154 ià(
”r_code
 !ğ
NRF_SUCCESS
)

1156 
m_³”_¿nk_tok’
 = 
PM_STORE_TOKEN_INVALID
;

1157 
m_cu¼’t_highe¡_³”_¿nk
 -= 1;

1158 ià((
”r_code
 !ğ
NRF_ERROR_BUSY
) &&

1159 (
”r_code
 !ğ
NRF_ERROR_STORAGE_FULL
) &&

1160 (
”r_code
 !ğ
NRF_ERROR_INVALID_PARAM
))

1162 
	`NRF_LOG_ERROR
("Could‚ot update„ank.…db_raw_store()„eturned %s. "\

1164 
	`Äf_¡»¼Ü_g‘
(
”r_code
),

1165 
³”_id
);

1166 
”r_code
 = 
NRF_ERROR_INTERNAL
;

1172  
”r_code
;

1174 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\ble\peer_manager\peer_manager_handler.c

40 
	~"³”_mªag”_hªdËr.h
"

41 
	~<¡dšt.h
>

42 
	~"sdk_”rÜs.h
"

43 
	~"­p_”rÜ.h
"

44 
	~"³”_mªag”.h
"

45 
	~"bË_g­.h
"

46 
	~"bË_g©tc.h
"

47 
	~"bË_cÚn_¡©e.h
"

48 
	~"fds.h
"

49 
	~"Äf_¡»¼Ü.h
"

50 
	~"sdk_cÚfig.h
"

52 #ià
PM_HANDLER_SEC_DELAY_MS
 > 0

53 
	~"­p_tim”.h
"

56 
	#NRF_LOG_MODULE_NAME
 
³”_mªag”_hªdËr


	)

57 #ià
PM_LOG_ENABLED


58 
	#NRF_LOG_LEVEL
 
PM_LOG_LEVEL


	)

59 
	#NRF_LOG_INFO_COLOR
 
PM_LOG_INFO_COLOR


	)

60 
	#NRF_LOG_DEBUG_COLOR
 
PM_LOG_DEBUG_COLOR


	)

62 
	#NRF_LOG_LEVEL
 0

	)

64 
	~"Äf_log.h
"

65 
	~"Äf_log_ù¾.h
"

66 
NRF_LOG_MODULE_REGISTER
();

67 
	~"Äf_¡»¼Ü.h
"

69 cÚ¡ * 
	gm_rŞes_¡r
[] =

76 cÚ¡ * 
	gm_£c_´oûdu»_¡r
[] =

83 
	#PM_EVT_STR
(
_Çme
è[_Çme] = 
	`STRINGIFY
(_Çme)

	)

85 cÚ¡ * 
	gm_ev’t_¡r
[] =

87 
PM_EVT_STR
(
PM_EVT_BONDED_PEER_CONNECTED
),

88 
PM_EVT_STR
(
PM_EVT_CONN_SEC_START
),

89 
PM_EVT_STR
(
PM_EVT_CONN_SEC_SUCCEEDED
),

90 
PM_EVT_STR
(
PM_EVT_CONN_SEC_FAILED
),

91 
PM_EVT_STR
(
PM_EVT_CONN_SEC_CONFIG_REQ
),

92 
PM_EVT_STR
(
PM_EVT_CONN_SEC_PARAMS_REQ
),

93 
PM_EVT_STR
(
PM_EVT_STORAGE_FULL
),

94 
PM_EVT_STR
(
PM_EVT_ERROR_UNEXPECTED
),

95 
PM_EVT_STR
(
PM_EVT_PEER_DATA_UPDATE_SUCCEEDED
),

96 
PM_EVT_STR
(
PM_EVT_PEER_DATA_UPDATE_FAILED
),

97 
PM_EVT_STR
(
PM_EVT_PEER_DELETE_SUCCEEDED
),

98 
PM_EVT_STR
(
PM_EVT_PEER_DELETE_FAILED
),

99 
PM_EVT_STR
(
PM_EVT_PEERS_DELETE_SUCCEEDED
),

100 
PM_EVT_STR
(
PM_EVT_PEERS_DELETE_FAILED
),

101 
PM_EVT_STR
(
PM_EVT_LOCAL_DB_CACHE_APPLIED
),

102 
PM_EVT_STR
(
PM_EVT_LOCAL_DB_CACHE_APPLY_FAILED
),

103 
PM_EVT_STR
(
PM_EVT_SERVICE_CHANGED_IND_SENT
),

104 
PM_EVT_STR
(
PM_EVT_SERVICE_CHANGED_IND_CONFIRMED
),

105 
PM_EVT_STR
(
PM_EVT_SLAVE_SECURITY_REQ
),

106 
PM_EVT_STR
(
PM_EVT_FLASH_GARBAGE_COLLECTED
),

107 
PM_EVT_STR
(
PM_EVT_FLASH_GARBAGE_COLLECTION_FAILED
),

110 cÚ¡ * 
	gm_d©a_id_¡r
[] =

124 cÚ¡ * 
	gm_d©a_aùiÚ_¡r
[] =

131 
	$_cÚn_£cu»
(
ušt16_t
 
cÚn_hªdË
, 
boŞ
 
fÜû
)

133 
»t_code_t
 
”r_code
;

135 ià(!
fÜû
)

137 
pm_cÚn_£c_¡©us_t
 
¡©us
;

138 
”r_code
 = 
	`pm_cÚn_£c_¡©us_g‘
(
cÚn_hªdË
, &
¡©us
);

139 ià(
”r_code
 !ğ
BLE_ERROR_INVALID_CONN_HANDLE
)

141 
	`APP_ERROR_CHECK
(
”r_code
);

145 ià(
¡©us
.
’üy±ed
)

147 
	`NRF_LOG_DEBUG
("Alreadyƒncrypted, skipping security.");

152 
”r_code
 = 
	`pm_cÚn_£cu»
(
cÚn_hªdË
, 
çl£
);

154 ià((
”r_code
 =ğ
NRF_SUCCESS
è|| (”r_cod=ğ
NRF_ERROR_BUSY
))

158 ià(
”r_code
 =ğ
NRF_ERROR_TIMEOUT
)

160 
	`NRF_LOG_WARNING
("pm_conn_secure() failed because‡n SMPimeout is…reventing security on "\

162 
cÚn_hªdË
);

164 
”r_code
 = 
	`sd_bË_g­_discÚÃù
(
cÚn_hªdË
, 
BLE_HCI_REMOTE_USER_TERMINATED_CONNECTION
);

165 ià(
”r_code
 !ğ
NRF_SUCCESS
)

167 
	`NRF_LOG_WARNING
("sd_ble_gap_disconnect()„eturned %s on conn_handle %d.",

168 
	`Äf_¡»¼Ü_g‘
(
”r_code
),

169 
cÚn_hªdË
);

172 ià(
”r_code
 =ğ
NRF_ERROR_INVALID_DATA
)

174 
	`NRF_LOG_WARNING
("pm_conn_secure() failed becausehe stored data for conn_handle %d does "\

176 
cÚn_hªdË
);

178 ià(
”r_code
 =ğ
BLE_ERROR_INVALID_CONN_HANDLE
)

180 
	`NRF_LOG_WARNING
("pm_conn_secure() failed because conn_handle %d is‚ot‡ valid connection.",

181 
cÚn_hªdË
);

185 
	`NRF_LOG_ERROR
("Asserting.…m_conn_secure()„eturned %s on conn_handle %d.",

186 
	`Äf_¡»¼Ü_g‘
(
”r_code
),

187 
cÚn_hªdË
);

188 
	`APP_ERROR_CHECK
(
”r_code
);

190 
	}
}

192 #ià
PM_HANDLER_SEC_DELAY_MS
 > 0

193 
APP_TIMER_DEF
(
£cu»_d–ay_tim”
);

199 
ušt16_t
 
	mcÚn_hªdË
;

200 
boŞ
 
	mfÜû
;

201 } 
	mv®ues
;

202 * 
	mp_void
;

203 } 
	tcÚn_£cu»_cÚ‹xt_t
;

205 
STATIC_ASSERT
((
cÚn_£cu»_cÚ‹xt_t
) <= (*), "conn_secure_context_t isoo†arge.");

207 
_cÚn_£cu»
(
ušt16_t
 
cÚn_hªdË
, 
boŞ
 
fÜû
);

209 
	$d–ayed_cÚn_£cu»
(* 
cÚ‹xt
)

211 
cÚn_£cu»_cÚ‹xt_t
 
£c_cÚ‹xt
 = {.
p_void
 = 
cÚ‹xt
};

212 
	`_cÚn_£cu»
(
£c_cÚ‹xt
.
v®ues
.
cÚn_hªdË
, sec_cÚ‹xt.v®ues.
fÜû
);

213 
	}
}

215 
	$cÚn_£cu»
(
ušt16_t
 
cÚn_hªdË
, 
boŞ
 
fÜû
)

217 
»t_code_t
 
”r_code
;

218 
boŞ
 
ü—‹d
 = 
çl£
;

219 ià(!
ü—‹d
)

221 
”r_code
 = 
	`­p_tim”_ü—‹
(&
£cu»_d–ay_tim”
,

222 
APP_TIMER_MODE_SINGLE_SHOT
,

223 
d–ayed_cÚn_£cu»
);

224 
	`APP_ERROR_CHECK
(
”r_code
);

225 
ü—‹d
 = 
Œue
;

228 
cÚn_£cu»_cÚ‹xt_t
 
£c_cÚ‹xt
 = {0};

229 
£c_cÚ‹xt
.
v®ues
.
cÚn_hªdË
 = conn_handle;

230 
£c_cÚ‹xt
.
v®ues
.
fÜû
 = force;

232 
”r_code
 = 
	`­p_tim”_¡¬t
(
£cu»_d–ay_tim”
,

233 
	`APP_TIMER_TICKS
(
PM_HANDLER_SEC_DELAY_MS
),

234 
£c_cÚ‹xt
.
p_void
);

235 
	`APP_ERROR_CHECK
(
”r_code
);

236 
	}
}

240 
	$cÚn_£cu»
(
ušt16_t
 
cÚn_hªdË
, 
boŞ
 
fÜû
)

242 
	`_cÚn_£cu»
(
cÚn_hªdË
, 
fÜû
);

243 
	}
}

247 
	$pm_hªdËr_Ú_pm_evt
(
pm_evt_t
 cÚ¡ * 
p_pm_evt
)

249 
	`pm_hªdËr_pm_evt_log
(
p_pm_evt
);

251 ià(
p_pm_evt
->
evt_id
 =ğ
PM_EVT_BONDED_PEER_CONNECTED
)

253 
	`cÚn_£cu»
(
p_pm_evt
->
cÚn_hªdË
, 
çl£
);

255 ià(
p_pm_evt
->
evt_id
 =ğ
PM_EVT_ERROR_UNEXPECTED
)

257 
	`NRF_LOG_ERROR
("Asserting.");

258 
	`APP_ERROR_CHECK
(
p_pm_evt
->
·¿ms
.
”rÜ_uÃx³ùed
.
”rÜ
);

260 
	}
}

263 
	$pm_hªdËr_æash_ş—n_Ú_»tuº
()

266 
pm_evt_t
 
¡Üage_fuÎ_evt
 = {.
evt_id
 = 
PM_EVT_STORAGE_FULL
};

267 
	`pm_hªdËr_æash_ş—n
(&
¡Üage_fuÎ_evt
);

268 
	}
}

271 
	$¿nk_highe¡
(
pm_³”_id_t
 
³”_id
)

274 
pm_evt_t
 
cÚÃùed_evt
 = {.
evt_id
 = 
PM_EVT_BONDED_PEER_CONNECTED
, .
³”_id
 =…eer_id};

275 
	`pm_hªdËr_æash_ş—n
(&
cÚÃùed_evt
);

276 
	}
}

279 
	$pm_hªdËr_æash_ş—n
(
pm_evt_t
 cÚ¡ * 
p_pm_evt
)

281 
»t_code_t
 
”r_code
;

282 
boŞ
 
æash_ş—nšg
 = 
çl£
;

283 
boŞ
 
æash_wr™e_aá”_gc
 = 
çl£
;

286 
	#RANK_QUEUE_SIZE
 8

287 
	#RANK_QUEUE_INIT
(è
PM_PEER_ID_INVALID
,

288 

	)

290 
pm_³”_id_t
 
¿nk_queue
[8] = {
	`MACRO_REPEAT
(
RANK_QUEUE_SIZE
, 
RANK_QUEUE_INIT
)};

293 
¿nk_queue_wr
 = 0;

295 
p_pm_evt
->
evt_id
)

297 
PM_EVT_BONDED_PEER_CONNECTED
:

298 
”r_code
 = 
	`pm_³”_¿nk_highe¡
(
p_pm_evt
->
³”_id
);

299 ià((
”r_code
 =ğ
NRF_ERROR_STORAGE_FULL
) ||

300 (
”r_code
 =ğ
NRF_ERROR_BUSY
))

303 
¿nk_queue
[
¿nk_queue_wr
] = 
p_pm_evt
->
³”_id
;

304 
¿nk_queue_wr
 = (¿nk_queue_w¸+ 1è% 
RANK_QUEUE_SIZE
;

305 
	`pm_hªdËr_æash_ş—n_Ú_»tuº
();

307 ià((
”r_code
 !ğ
NRF_ERROR_NOT_SUPPORTED
) &&

308 (
”r_code
 !ğ
NRF_ERROR_INVALID_PARAM
) &&

309 (
”r_code
 !ğ
NRF_ERROR_RESOURCES
))

311 
	`APP_ERROR_CHECK
(
”r_code
);

315 
	`NRF_LOG_DEBUG
("pm_peer_rank_highest()„eturned %s for…eer id %d",

316 
	`Äf_¡»¼Ü_g‘
(
”r_code
),

317 
p_pm_evt
->
³”_id
);

321 
PM_EVT_CONN_SEC_START
:

324 
PM_EVT_CONN_SEC_SUCCEEDED
:

325 iàĞ(
p_pm_evt
->
·¿ms
.
cÚn_£c_sucûeded
.
´oûdu»
 =ğ
PM_CONN_SEC_PROCEDURE_BONDING
)

326 || (
p_pm_evt
->
·¿ms
.
cÚn_£c_sucûeded
.
´oûdu»
 =ğ
PM_CONN_SEC_PROCEDURE_ENCRYPTION
))

329 
	`¿nk_highe¡
(
p_pm_evt
->
³”_id
);

333 
PM_EVT_CONN_SEC_FAILED
:

334 
PM_EVT_CONN_SEC_CONFIG_REQ
:

335 
PM_EVT_CONN_SEC_PARAMS_REQ
:

338 
PM_EVT_STORAGE_FULL
:

339 ià(!
æash_ş—nšg
)

341 
”r_code
 = 
NRF_SUCCESS
;

342 
	`NRF_LOG_INFO
("Attemptingo clean flash.");

343 ià(!
æash_wr™e_aá”_gc
)

345 
pm_³”_id_t
 
³”_id_to_d–‘e
;

346 
”r_code
 = 
	`pm_³”_¿nks_g‘
(
NULL
, NULL, &
³”_id_to_d–‘e
, NULL);

347 ià(
”r_code
 =ğ
NRF_SUCCESS
)

349 
	`NRF_LOG_INFO
("D–‘šg†owe¡„ªked…“¸Õ“r_id: %d)", 
³”_id_to_d–‘e
);

350 
”r_code
 = 
	`pm_³”_d–‘e
(
³”_id_to_d–‘e
);

351 
	`APP_ERROR_CHECK
(
”r_code
);

352 
æash_wr™e_aá”_gc
 = 
Œue
;

354 ià(
”r_code
 =ğ
NRF_ERROR_NOT_FOUND
)

356 
	`NRF_LOG_ERROR
("There‡re‚o…eerso delete.");

358 ià(
”r_code
 =ğ
NRF_ERROR_NOT_SUPPORTED
)

360 
	`NRF_LOG_WARNING
("Peer„anks functionality is disabled, so‚o…eers‡re deleted.");

364 
	`APP_ERROR_CHECK
(
”r_code
);

367 ià(
”r_code
 =ğ
NRF_SUCCESS
)

369 
”r_code
 = 
	`fds_gc
();

370 ià(
”r_code
 =ğ
NRF_SUCCESS
)

372 
	`NRF_LOG_DEBUG
("Running flash garbage collection.");

373 
æash_ş—nšg
 = 
Œue
;

375 ià(
”r_code
 !ğ
FDS_ERR_NO_SPACE_IN_QUEUES
)

377 
	`APP_ERROR_CHECK
(
”r_code
);

383 
PM_EVT_ERROR_UNEXPECTED
:

386 
PM_EVT_PEER_DATA_UPDATE_SUCCEEDED
:

387 
æash_wr™e_aá”_gc
 = 
Œue
;

390 
PM_EVT_PEER_DATA_UPDATE_FAILED
:

393 
PM_EVT_PEER_DELETE_SUCCEEDED
:

394 
æash_wr™e_aá”_gc
 = 
Œue
;

397 
PM_EVT_PEER_DELETE_FAILED
:

398 
PM_EVT_PEERS_DELETE_SUCCEEDED
:

399 
PM_EVT_PEERS_DELETE_FAILED
:

400 
PM_EVT_LOCAL_DB_CACHE_APPLIED
:

401 
PM_EVT_LOCAL_DB_CACHE_APPLY_FAILED
:

402 
PM_EVT_SERVICE_CHANGED_IND_SENT
:

403 
PM_EVT_SERVICE_CHANGED_IND_CONFIRMED
:

404 
PM_EVT_SLAVE_SECURITY_REQ
:

407 
PM_EVT_FLASH_GARBAGE_COLLECTED
:

408 
æash_ş—nšg
 = 
çl£
;

409 
æash_wr™e_aá”_gc
 = 
çl£
;

412 
¿nk_queue_rd
 = 
¿nk_queue_wr
;

413 
i
 = 0; i < 
RANK_QUEUE_SIZE
; i++)

415 
pm_³”_id_t
 
³”_id
 = 
¿nk_queue
[(
i
 + 
¿nk_queue_rd
è% 
RANK_QUEUE_SIZE
];

416 ià(
³”_id
 !ğ
PM_PEER_ID_INVALID
)

418 
¿nk_queue
[(
i
 + 
¿nk_queue_rd
è% 
RANK_QUEUE_SIZE
] = 
PM_PEER_ID_INVALID
;

419 
	`¿nk_highe¡
(
³”_id
);

425 
PM_EVT_FLASH_GARBAGE_COLLECTION_FAILED
:

426 
æash_ş—nšg
 = 
çl£
;

428 ià(
p_pm_evt
->
·¿ms
.
g¬bage_cŞËùiÚ_çed
.
fds_”rÜ


429 && (
p_pm_evt
->
·¿ms
.
g¬bage_cŞËùiÚ_çed
.
”rÜ
 =ğ
FDS_ERR_BUSY


430 || 
p_pm_evt
->
·¿ms
.
g¬bage_cŞËùiÚ_çed
.
”rÜ
 =ğ
FDS_ERR_OPERATION_TIMEOUT
))

433 
	`pm_hªdËr_æash_ş—n_Ú_»tuº
();

440 
	}
}

443 
	$pm_hªdËr_pm_evt_log
(
pm_evt_t
 cÚ¡ * 
p_pm_evt
)

445 
	`NRF_LOG_DEBUG
("Ev’ˆ%s", 
m_ev’t_¡r
[
p_pm_evt
->
evt_id
]);

447 
p_pm_evt
->
evt_id
)

449 
PM_EVT_BONDED_PEER_CONNECTED
:

450 
	`NRF_LOG_DEBUG
("Previously bonded…eer connected:„ole: %s, conn_handle: %d,…eer_id: %d",

451 
m_rŞes_¡r
[
	`bË_cÚn_¡©e_rŞe
(
p_pm_evt
->
cÚn_hªdË
)],

452 
p_pm_evt
->
cÚn_hªdË
,

453 
p_pm_evt
->
³”_id
);

456 
PM_EVT_CONN_SEC_START
:

457 
	`NRF_LOG_DEBUG
("Connection security…rocedure started:„ole: %s, conn_handle: %d,…rocedure: %s",

458 
m_rŞes_¡r
[
	`bË_cÚn_¡©e_rŞe
(
p_pm_evt
->
cÚn_hªdË
)],

459 
p_pm_evt
->
cÚn_hªdË
,

460 
m_£c_´oûdu»_¡r
[
p_pm_evt
->
·¿ms
.
cÚn_£c_¡¬t
.
´oûdu»
]);

463 
PM_EVT_CONN_SEC_SUCCEEDED
:

464 
	`NRF_LOG_INFO
("Connection secured:„ole: %s, conn_handle: %d,…rocedure: %s",

465 
m_rŞes_¡r
[
	`bË_cÚn_¡©e_rŞe
(
p_pm_evt
->
cÚn_hªdË
)],

466 
p_pm_evt
->
cÚn_hªdË
,

467 
m_£c_´oûdu»_¡r
[
p_pm_evt
->
·¿ms
.
cÚn_£c_¡¬t
.
´oûdu»
]);

470 
PM_EVT_CONN_SEC_FAILED
:

471 
	`NRF_LOG_INFO
("Connection security failed:„ole: %s, conn_handle: 0x%x,…rocedure: %s,ƒrror: %d",

472 
m_rŞes_¡r
[
	`bË_cÚn_¡©e_rŞe
(
p_pm_evt
->
cÚn_hªdË
)],

473 
p_pm_evt
->
cÚn_hªdË
,

474 
m_£c_´oûdu»_¡r
[
p_pm_evt
->
·¿ms
.
cÚn_£c_¡¬t
.
´oûdu»
],

475 
p_pm_evt
->
·¿ms
.
cÚn_£c_çed
.
”rÜ
);

478 
PM_EVT_CONN_SEC_CONFIG_REQ
:

479 
	`NRF_LOG_DEBUG
("Security configuration„equest");

482 
PM_EVT_CONN_SEC_PARAMS_REQ
:

483 
	`NRF_LOG_DEBUG
("Security…arameter„equest");

486 
PM_EVT_STORAGE_FULL
:

487 
	`NRF_LOG_WARNING
("Flash storage is full");

490 
PM_EVT_ERROR_UNEXPECTED
:

491 
	`NRF_LOG_ERROR
("Unexpected fatalƒrror occurred:ƒrror: %s",

492 
	`Äf_¡»¼Ü_g‘
(
p_pm_evt
->
·¿ms
.
”rÜ_uÃx³ùed
.
”rÜ
));

495 
PM_EVT_PEER_DATA_UPDATE_SUCCEEDED
:

496 
	`NRF_LOG_DEBUG
("Peer data updated in flash:…eer_id: %d, data_id: %s,‡ction: %s",

497 
p_pm_evt
->
³”_id
,

498 
m_d©a_id_¡r
[
p_pm_evt
->
·¿ms
.
³”_d©a_upd©e_sucûeded
.
d©a_id
],

499 
m_d©a_aùiÚ_¡r
[
p_pm_evt
->
·¿ms
.
³”_d©a_upd©e_sucûeded
.
aùiÚ
]);

502 
PM_EVT_PEER_DATA_UPDATE_FAILED
:

504 
	`NRF_LOG_WARNING
("Peer data updated failed:…eer_id: %d, data_id: %s,‡ction: %s,ƒrror: %s",

505 
p_pm_evt
->
³”_id
,

506 
m_d©a_id_¡r
[
p_pm_evt
->
·¿ms
.
³”_d©a_upd©e_çed
.
d©a_id
],

507 
m_d©a_aùiÚ_¡r
[
p_pm_evt
->
·¿ms
.
³”_d©a_upd©e_sucûeded
.
aùiÚ
],

508 
	`Äf_¡»¼Ü_g‘
(
p_pm_evt
->
·¿ms
.
³”_d©a_upd©e_çed
.
”rÜ
));

511 
PM_EVT_PEER_DELETE_SUCCEEDED
:

512 
	`NRF_LOG_ERROR
("P“¸d–‘ed sucûssfuÎy:…“r_id: %d", 
p_pm_evt
->
³”_id
);

515 
PM_EVT_PEER_DELETE_FAILED
:

516 
	`NRF_LOG_ERROR
("Peer deletion failed:…eer_id: %d,ƒrror: %s",

517 
p_pm_evt
->
³”_id
,

518 
	`Äf_¡»¼Ü_g‘
(
p_pm_evt
->
·¿ms
.
³”_d–‘e_çed
.
”rÜ
));

521 
PM_EVT_PEERS_DELETE_SUCCEEDED
:

522 
	`NRF_LOG_INFO
("All…eers deleted.");

525 
PM_EVT_PEERS_DELETE_FAILED
:

526 
	`NRF_LOG_ERROR
("All…eer deletion failed:ƒrror: %s",

527 
	`Äf_¡»¼Ü_g‘
(
p_pm_evt
->
·¿ms
.
³”s_d–‘e_çed_evt
.
”rÜ
));

530 
PM_EVT_LOCAL_DB_CACHE_APPLIED
:

531 
	`NRF_LOG_DEBUG
("Previously stored†ocal DB‡pplied: conn_handle: %d,…eer_id: %d",

532 
p_pm_evt
->
cÚn_hªdË
,

533 
p_pm_evt
->
³”_id
);

536 
PM_EVT_LOCAL_DB_CACHE_APPLY_FAILED
:

538 
	`NRF_LOG_WARNING
("Local DB could‚ot be‡pplied: conn_handle: %d,…eer_id: %d",

539 
p_pm_evt
->
cÚn_hªdË
,

540 
p_pm_evt
->
³”_id
);

543 
PM_EVT_SERVICE_CHANGED_IND_SENT
:

544 
	`NRF_LOG_DEBUG
("Sending Service Changed indication.");

547 
PM_EVT_SERVICE_CHANGED_IND_CONFIRMED
:

548 
	`NRF_LOG_DEBUG
("Service Changed indication confirmed.");

551 
PM_EVT_SLAVE_SECURITY_REQ
:

552 
	`NRF_LOG_DEBUG
("Security Request„eceived from…eer.");

555 
PM_EVT_FLASH_GARBAGE_COLLECTED
:

556 
	`NRF_LOG_DEBUG
("Flash garbage collection complete.");

559 
PM_EVT_FLASH_GARBAGE_COLLECTION_FAILED
:

560 
	`NRF_LOG_WARNING
("Flash garbage collection failed withƒrror %s.",

561 
	`Äf_¡»¼Ü_g‘
(
p_pm_evt
->
·¿ms
.
g¬bage_cŞËùiÚ_çed
.
”rÜ
));

565 
	`NRF_LOG_WARNING
("UÃx³ùed PMƒv’ˆID: 0x%x.", 
p_pm_evt
->
evt_id
);

568 
	}
}

571 
	$pm_hªdËr_discÚÃù_Ú_£c_çu»
(
pm_evt_t
 cÚ¡ * 
p_pm_evt
)

573 
»t_code_t
 
”r_code
;

575 ià(
p_pm_evt
->
evt_id
 =ğ
PM_EVT_CONN_SEC_FAILED
)

577 
	`NRF_LOG_WARNING
("DiscÚÃùšg cÚn_hªdË %d.", 
p_pm_evt
->
cÚn_hªdË
);

578 
”r_code
 = 
	`sd_bË_g­_discÚÃù
(
p_pm_evt
->
cÚn_hªdË
,

579 
BLE_HCI_REMOTE_USER_TERMINATED_CONNECTION
);

580 ià((
”r_code
 !ğ
NRF_ERROR_INVALID_STATE
è&& (”r_cod!ğ
BLE_ERROR_INVALID_CONN_HANDLE
))

582 
	`APP_ERROR_CHECK
(
”r_code
);

585 
	}
}

588 
	$pm_hªdËr_£cu»_Ú_cÚÃùiÚ
(
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

590 
p_bË_evt
->
h—d”
.
evt_id
)

592 
BLE_GAP_EVT_CONNECTED
:

593 
	`NRF_LOG_DEBUG
("CÚÃùed, securšg cÚÃùiÚ. cÚn_hªdË: %d", 
p_bË_evt
->
evt
.
g­_evt
.
cÚn_hªdË
);

594 
	`cÚn_£cu»
(
p_bË_evt
->
evt
.
g­_evt
.
cÚn_hªdË
, 
çl£
);

597 #ià
PM_HANDLER_SEC_DELAY_MS
 > 0

598 
BLE_GAP_EVT_DISCONNECTED
:

600 
»t_code_t
 
”r_code
 = 
	`­p_tim”_¡İ
(
£cu»_d–ay_tim”
);

601 
	`APP_ERROR_CHECK
(
”r_code
);

608 
	}
}

611 
	$pm_hªdËr_£cu»_Ú_”rÜ
(
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

613 ià((
p_bË_evt
->
h—d”
.
evt_id
 >ğ
BLE_GATTC_EVT_BASE
è&& (p_bË_evt->h—d”.evt_id <ğ
BLE_GATTC_EVT_LAST
))

615 ià((
p_bË_evt
->
evt
.
g©tc_evt
.
g©t_¡©us
 =ğ
BLE_GATT_STATUS_ATTERR_INSUF_ENCRYPTION
) ||

616 (
p_bË_evt
->
evt
.
g©tc_evt
.
g©t_¡©us
 =ğ
BLE_GATT_STATUS_ATTERR_INSUF_AUTHENTICATION
))

618 
	`NRF_LOG_INFO
("GATTC…rocedure (evt id 0x%x) failed because it‚eedsƒncryption. Bonding: conn_handle=%d",

619 
p_bË_evt
->
h—d”
.
evt_id
,

620 
p_bË_evt
->
evt
.
g©tc_evt
.
cÚn_hªdË
);

621 
	`cÚn_£cu»
(
p_bË_evt
->
evt
.
g©tc_evt
.
cÚn_hªdË
, 
Œue
);

624 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\ble\peer_manager\pm_buffer.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
PEER_MANAGER
)

42 
	~"pm_bufãr.h
"

44 
	~<¡dboŞ.h
>

45 
	~<¡ršg.h
>

46 
	~"Äf_”rÜ.h
"

47 
	~"Äf_©æags.h
"

50 
	#BUFFER_IS_VALID
(
p_bufãr
è(Õ_bufã¸!ğ
NULL
) \

51 && (
p_bufãr
->
p_memÜy
 !ğ
NULL
) \

52 && (
p_bufãr
->
p_mu‹x
 !ğ
NULL
))

	)

56 
boŞ
 
	$mu‹x_lock
(
Äf_©æags_t
 * 
p_mu‹x
, 
ušt32_t
 
mu‹x_id
)

58 
boŞ
 
locked
 = !
	`Äf_©æags_ãtch_£t
(
p_mu‹x
, 
mu‹x_id
);

59 
	`__DMB
();

60  
locked
;

61 
	}
}

64 
	$mu‹x_uÆock
(
Äf_©æags_t
 * 
p_mu‹x
, 
ušt32_t
 
mu‹x_id
)

66 
	`__DMB
();

67 
	`Äf_©æags_ş—r
(
p_mu‹x
, 
mu‹x_id
);

68 
	}
}

71 
boŞ
 
	$mu‹x_lock_¡©us_g‘
(
Äf_©æags_t
 * 
p_mu‹x
, 
ušt32_t
 
mu‹x_id
)

73 
	`__DMB
();

74  
	`Äf_©æags_g‘
(
p_mu‹x
, 
mu‹x_id
);

75 
	}
}

78 
»t_code_t
 
	$pm_bufãr_š™
(
pm_bufãr_t
 * 
p_bufãr
,

79 
ušt8_t
 * 
p_bufãr_memÜy
,

80 
ušt32_t
 
bufãr_memÜy_size
,

81 
Äf_©æags_t
 * 
p_mu‹x_memÜy
,

82 
ušt32_t
 
n_blocks
,

83 
ušt32_t
 
block_size
)

85 iàĞ(
p_bufãr
 !ğ
NULL
)

86 && (
p_bufãr_memÜy
 !ğ
NULL
)

87 && (
p_mu‹x_memÜy
 !ğ
NULL
)

88 && (
bufãr_memÜy_size
 >ğ(
n_blocks
 * 
block_size
))

89 && (
n_blocks
 != 0)

90 && (
block_size
 != 0))

92 
p_bufãr
->
p_memÜy
 = 
p_bufãr_memÜy
;

93 
p_bufãr
->
p_mu‹x
 = 
p_mu‹x_memÜy
;

94 
p_bufãr
->
n_blocks
 =‚_blocks;

95 
p_bufãr
->
block_size
 = block_size;

97  
NRF_SUCCESS
;

101  
NRF_ERROR_INVALID_PARAM
;

103 
	}
}

106 
ušt8_t
 
	$pm_bufãr_block_acquœe
(
pm_bufãr_t
 * 
p_bufãr
, 
ušt32_t
 
n_blocks
)

108 ià(!
	`BUFFER_IS_VALID
(
p_bufãr
))

110  ( 
PM_BUFFER_INVALID_ID
 );

113 
ušt8_t
 
fœ¡_locked_mu‹x
 = 
PM_BUFFER_INVALID_ID
;

115 
ušt8_t
 
i
 = 0; i < 
p_bufãr
->
n_blocks
; i++)

117 ià(
	`mu‹x_lock
(
p_bufãr
->
p_mu‹x
, 
i
))

119 ià(
fœ¡_locked_mu‹x
 =ğ
PM_BUFFER_INVALID_ID
)

121 
fœ¡_locked_mu‹x
 = 
i
;

123 ià((
i
 - 
fœ¡_locked_mu‹x
 + 1è=ğ
n_blocks
)

125  
fœ¡_locked_mu‹x
;

128 ià(
fœ¡_locked_mu‹x
 !ğ
PM_BUFFER_INVALID_ID
)

130 
ušt8_t
 
j
 = 
fœ¡_locked_mu‹x
; j < 
i
; j++)

132 
	`pm_bufãr_»Ëa£
(
p_bufãr
, 
j
);

134 
fœ¡_locked_mu‹x
 = 
PM_BUFFER_INVALID_ID
;

138  ( 
PM_BUFFER_INVALID_ID
 );

139 
	}
}

142 
ušt8_t
 * 
	$pm_bufãr_±r_g‘
(
pm_bufãr_t
 * 
p_bufãr
, 
ušt8_t
 
id
)

144 ià(!
	`BUFFER_IS_VALID
(
p_bufãr
))

146  ( 
NULL
 );

149 iàĞ(
id
 !ğ
PM_BUFFER_INVALID_ID
)

150 && 
	`mu‹x_lock_¡©us_g‘
(
p_bufãr
->
p_mu‹x
, 
id
) )

152  ( &
p_bufãr
->
p_memÜy
[
id
 *…_bufãr->
block_size
] );

156  ( 
NULL
 );

158 
	}
}

161 
	$pm_bufãr_»Ëa£
(
pm_bufãr_t
 * 
p_bufãr
, 
ušt8_t
 
id
)

163 iàĞ
	`BUFFER_IS_VALID
(
p_bufãr
)

164 && (
id
 !ğ
PM_BUFFER_INVALID_ID
)

165 && 
	`mu‹x_lock_¡©us_g‘
(
p_bufãr
->
p_mu‹x
, 
id
))

167 
	`mu‹x_uÆock
(
p_bufãr
->
p_mu‹x
, 
id
);

169 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\ble\peer_manager\security_dispatcher.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
PEER_MANAGER
)

42 
	~"£cur™y_di¥©ch”.h
"

44 
	~<¡ršg.h
>

45 
	~"bË.h
"

46 
	~"bË_g­.h
"

47 
	~"bË_”r.h
"

48 
	~"bË_cÚn_¡©e.h
"

49 
	~"³”_mªag”_ty³s.h
"

50 
	~"³”_d©a_¡Üage.h
"

51 
	~"³”_d©aba£.h
"

52 
	~"id_mªag”.h
"

53 #ià
PM_RA_PROTECTION_ENABLED


54 
	~"auth_¡©us_Œack”.h
"

57 
	#NRF_LOG_MODULE_NAME
 
³”_mªag”_smd


	)

58 #ià
PM_LOG_ENABLED


59 
	#NRF_LOG_LEVEL
 
PM_LOG_LEVEL


	)

60 
	#NRF_LOG_INFO_COLOR
 
PM_LOG_INFO_COLOR


	)

61 
	#NRF_LOG_DEBUG_COLOR
 
PM_LOG_DEBUG_COLOR


	)

63 
	#NRF_LOG_LEVEL
 0

	)

65 
	~"Äf_log.h
"

66 
	~"Äf_log_ù¾.h
"

67 
NRF_LOG_MODULE_REGISTER
();

68 
	~"Äf_¡»¼Ü.h
"

70 #iâdeà
PM_CENTRAL_ENABLED


71 
	#PM_CENTRAL_ENABLED
 1

	)

75 
	#SMD_EVENT_HANDLERS_CNT
 ((
m_evt_hªdËrs
è/ (m_evt_hªdËrs[0]))

	)

77 
STATIC_ASSERT
((
NRF_SDH_BLE_CENTRAL_LINK_COUNT
 =ğ0è|| 
PM_CENTRAL_ENABLED
,

81 
sm_smd_evt_hªdËr
(
pm_evt_t
 * 
p_ev’t
);

85 
pm_evt_hªdËr_š‹º®_t
 cÚ¡ 
	gm_evt_hªdËrs
[] =

87 
sm_smd_evt_hªdËr


90 
boŞ
 
	gm_moduË_š™Ÿlized
;

92 
bË_cÚn_¡©e_u£r_æag_id_t
 
	gm_æag_£c_´oc
 = 
BLE_CONN_STATE_USER_FLAG_INVALID
;

93 
bË_cÚn_¡©e_u£r_æag_id_t
 
	gm_æag_£c_´oc_·œšg
 = 
BLE_CONN_STATE_USER_FLAG_INVALID
;

94 
bË_cÚn_¡©e_u£r_æag_id_t
 
	gm_æag_£c_´oc_bÚdšg
 = 
BLE_CONN_STATE_USER_FLAG_INVALID
;

95 
bË_cÚn_¡©e_u£r_æag_id_t
 
	gm_æag_®low_»·œšg
 = 
BLE_CONN_STATE_USER_FLAG_INVALID
;

97 
bË_g­_Ësc_p256_pk_t
 
	gm_³”_pk
;

100 
__INLINE
 
boŞ
 
	$£c_´oûdu»
(
ušt16_t
 
cÚn_hªdË
)

102  
	`bË_cÚn_¡©e_u£r_æag_g‘
(
cÚn_hªdË
, 
m_æag_£c_´oc
);

103 
	}
}

105 
__INLINE
 
boŞ
 
	$·œšg
(
ušt16_t
 
cÚn_hªdË
)

107  
	`bË_cÚn_¡©e_u£r_æag_g‘
(
cÚn_hªdË
, 
m_æag_£c_´oc_·œšg
);

108 
	}
}

110 
__INLINE
 
boŞ
 
	$bÚdšg
(
ušt16_t
 
cÚn_hªdË
)

112  
	`bË_cÚn_¡©e_u£r_æag_g‘
(
cÚn_hªdË
, 
m_æag_£c_´oc_bÚdšg
);

113 
	}
}

115 
__INLINE
 
boŞ
 
	$®low_»·œšg
(
ušt16_t
 
cÚn_hªdË
)

117  
	`bË_cÚn_¡©e_u£r_æag_g‘
(
cÚn_hªdË
, 
m_æag_®low_»·œšg
);

118 
	}
}

125 
	$evt_£nd
(
pm_evt_t
 * 
p_ev’t
)

127 
p_ev’t
->
³”_id
 = 
	`im_³”_id_g‘_by_cÚn_hªdË
Õ_ev’t->
cÚn_hªdË
);

129 
ušt32_t
 
i
 = 0; i < 
SMD_EVENT_HANDLERS_CNT
; i++)

131 
m_evt_hªdËrs
[
i
](
p_ev’t
);

133 
	}
}

141 
	$£c_¡¬t_£nd
(
ušt16_t
 
cÚn_hªdË
,

142 
pm_cÚn_£c_´oûdu»_t
 
´oûdu»
)

144 
pm_evt_t
 
evt
 =

146 .
evt_id
 = 
PM_EVT_CONN_SEC_START
,

147 .
cÚn_hªdË
 = conn_handle,

148 .
·¿ms
 = {.
cÚn_£c_¡¬t
 = {.
´oûdu»
 =…rocedure}}

150 
	`evt_£nd
(&
evt
);

151 
	}
}

159 
	$£nd_uÃx³ùed_”rÜ
(
ušt16_t
 
cÚn_hªdË
, 
»t_code_t
 
”r_code
)

161 
pm_evt_t
 
”rÜ_evt
 =

163 .
evt_id
 = 
PM_EVT_ERROR_UNEXPECTED
,

164 .
cÚn_hªdË
 = conn_handle,

165 .
·¿ms
 =

167 .
”rÜ_uÃx³ùed
 =

169 .
”rÜ
 = 
”r_code
,

170 .
fds_”rÜ
 = 
çl£


174 
	`evt_£nd
(&
”rÜ_evt
);

175 
	}
}

182 
	$£nd_¡Üage_fuÎ_evt
(
ušt16_t
 
cÚn_hªdË
)

184 
pm_evt_t
 
evt
 =

186 .
evt_id
 = 
PM_EVT_STORAGE_FULL
,

187 .
cÚn_hªdË
 = conn_handle

189 
	`evt_£nd
(&
evt
);

190 
	}
}

200 
	$cÚn_£c_çu»
(
ušt16_t
 
cÚn_hªdË
,

201 
pm_cÚn_£c_´oûdu»_t
 
´oûdu»
,

202 
pm_£c_”rÜ_code_t
 
”rÜ
,

203 
ušt8_t
 
”rÜ_¤c
)

205 
pm_evt_t
 
evt
 =

207 .
evt_id
 = 
PM_EVT_CONN_SEC_FAILED
,

208 .
cÚn_hªdË
 = conn_handle,

209 .
·¿ms
 =

211 .
cÚn_£c_çed
 =

213 .
´oûdu»
 =…rocedure,

214 .
”rÜ
 =ƒrror,

215 .
”rÜ_¤c
 =ƒrror_src,

220 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
, 
m_æag_£c_´oc
, 
çl£
);

222 
	`evt_£nd
(&
evt
);

224 
	}
}

234 
	$·œšg_çu»
(
ušt16_t
 
cÚn_hªdË
,

235 
pm_£c_”rÜ_code_t
 
”rÜ
,

236 
ušt8_t
 
”rÜ_¤c
)

238 
»t_code_t
 
”r_code
 = 
NRF_SUCCESS
;

239 
pm_cÚn_£c_´oûdu»_t
 
´oûdu»
 = 
	`bÚdšg
(
cÚn_hªdË
è? 
PM_CONN_SEC_PROCEDURE_BONDING


240 : 
PM_CONN_SEC_PROCEDURE_PAIRING
;

242 
”r_code
 = 
	`pdb_wr™e_buf_»Ëa£
(
	`PDB_TEMP_PEER_ID
(
cÚn_hªdË
), 
PM_PEER_DATA_ID_BONDING
);

243 ià((
”r_code
 !ğ
NRF_SUCCESS
è&& (”r_cod!ğ
NRF_ERROR_NOT_FOUND
 ))

245 
	`NRF_LOG_ERROR
("Could‚ot clean up‡fter failed bonding…rocedure. "\

247 
	`Äf_¡»¼Ü_g‘
(
”r_code
),

248 
cÚn_hªdË
);

249 
	`£nd_uÃx³ùed_”rÜ
(
cÚn_hªdË
, 
”r_code
);

252 
	`cÚn_£c_çu»
(
cÚn_hªdË
, 
´oûdu»
, 
”rÜ
, 
”rÜ_¤c
);

255 
	}
}

264 
__INLINE
 
	$’üy±iÚ_çu»
(
ušt16_t
 
cÚn_hªdË
,

265 
pm_£c_”rÜ_code_t
 
”rÜ
,

266 
ušt8_t
 
”rÜ_¤c
)

268 
	`cÚn_£c_çu»
(
cÚn_hªdË
, 
PM_CONN_SEC_PROCEDURE_ENCRYPTION
, 
”rÜ
, 
”rÜ_¤c
);

271 
	}
}

280 
	$lšk_£cu»_çu»
(
ušt16_t
 
cÚn_hªdË
,

281 
pm_£c_”rÜ_code_t
 
”rÜ
,

282 
ušt8_t
 
”rÜ_¤c
)

284 ià(
	`£c_´oûdu»
(
cÚn_hªdË
))

286 ià(
	`·œšg
(
cÚn_hªdË
))

288 
	`·œšg_çu»
(
cÚn_hªdË
, 
”rÜ
, 
”rÜ_¤c
);

292 
	`’üy±iÚ_çu»
(
cÚn_hªdË
, 
”rÜ
, 
”rÜ_¤c
);

295 
	}
}

304 
	$£c_´oc_¡¬t
(
ušt16_t
 
cÚn_hªdË
,

305 
boŞ
 
sucûss
,

306 
pm_cÚn_£c_´oûdu»_t
 
´oûdu»
)

308 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
, 
m_æag_£c_´oc
, 
sucûss
);

309 ià(
sucûss
)

311 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
,

312 
m_æag_£c_´oc_·œšg
,

313 (
´oûdu»
 !ğ
PM_CONN_SEC_PROCEDURE_ENCRYPTION
));

314 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
,

315 
m_æag_£c_´oc_bÚdšg
,

316 (
´oûdu»
 =ğ
PM_CONN_SEC_PROCEDURE_BONDING
));

317 
	`£c_¡¬t_£nd
(
cÚn_hªdË
, 
´oûdu»
);

319 
	}
}

326 
	$£c_šfo_»que¡_´oûss
(
bË_g­_evt_t
 cÚ¡ * 
p_g­_evt
)

328 
»t_code_t
 
”r_code
;

329 
bË_g­_’c_šfo_t
 cÚ¡ * 
p_’c_šfo
 = 
NULL
;

330 
pm_³”_d©a_æash_t
 
³”_d©a
;

331 
pm_³”_id_t
 
³”_id
 = 
	`im_³”_id_g‘_by_ma¡”_id
(

332 &
p_g­_evt
->
·¿ms
.
£c_šfo_»que¡
.
ma¡”_id
);

334 ià(
³”_id
 =ğ
PM_PEER_ID_INVALID
)

336 
³”_id
 = 
	`im_³”_id_g‘_by_cÚn_hªdË
(
p_g­_evt
->
cÚn_hªdË
);

342 
	`im_Ãw_³”_id
(
p_g­_evt
->
cÚn_hªdË
, 
³”_id
);

345 
	`£c_´oc_¡¬t
(
p_g­_evt
->
cÚn_hªdË
, 
Œue
, 
PM_CONN_SEC_PROCEDURE_ENCRYPTION
);

347 ià(
³”_id
 !ğ
PM_PEER_ID_INVALID
)

349 
”r_code
 = 
	`pdb_³”_d©a_±r_g‘
(
³”_id
, 
PM_PEER_DATA_ID_BONDING
, &
³”_d©a
);

351 ià(
”r_code
 =ğ
NRF_SUCCESS
)

354 
bË_g­_’c_key_t
 cÚ¡ * 
p_exi¡šg_key
 = &
³”_d©a
.
p_bÚdšg_d©a
->
own_Ék
;

356 iàĞ
p_exi¡šg_key
->
’c_šfo
.
Ësc


357 || (
	`im_ma¡”_ids_com·»
(&
p_exi¡šg_key
->
ma¡”_id
,

358 &
p_g­_evt
->
·¿ms
.
£c_šfo_»que¡
.
ma¡”_id
)))

360 
p_’c_šfo
 = &
p_exi¡šg_key
->
’c_šfo
;

365 
”r_code
 = 
	`sd_bË_g­_£c_šfo_»¶y
(
p_g­_evt
->
cÚn_hªdË
, 
p_’c_šfo
, 
NULL
, NULL);

367 ià(
”r_code
 !ğ
NRF_SUCCESS
)

369 
	`NRF_LOG_ERROR
("Could‚ot completeƒncryption…rocedure. sd_ble_gap_sec_info_reply() "\

371 
	`Äf_¡»¼Ü_g‘
(
”r_code
),

372 
p_g­_evt
->
cÚn_hªdË
,

373 
³”_id
);

374 
	`£nd_uÃx³ùed_”rÜ
(
p_g­_evt
->
cÚn_hªdË
, 
”r_code
);

376 ià(
p_’c_šfo
 =ğ
NULL
)

378 
	`’üy±iÚ_çu»
(
p_g­_evt
->
cÚn_hªdË
,

379 
PM_CONN_SEC_ERROR_PIN_OR_KEY_MISSING
,

380 
BLE_GAP_SEC_STATUS_SOURCE_LOCAL
);

384 
	}
}

391 
	$£nd_cÚfig_»q
(
ušt16_t
 
cÚn_hªdË
)

393 
pm_evt_t
 
evt
;

394 
	`mem£t
(&
evt
, 0, (evt));

396 
evt
.
evt_id
 = 
PM_EVT_CONN_SEC_CONFIG_REQ
;

397 
evt
.
cÚn_hªdË
 = conn_handle;

399 
	`evt_£nd
(&
evt
);

400 
	}
}

403 
	$smd_cÚn_£c_cÚfig_»¶y
(
ušt16_t
 
cÚn_hªdË
, 
pm_cÚn_£c_cÚfig_t
 * 
p_cÚn_£c_cÚfig
)

405 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

406 
	`NRF_PM_DEBUG_CHECK
(
p_cÚn_£c_cÚfig
 !ğ
NULL
);

408 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
,

409 
m_æag_®low_»·œšg
,

410 
p_cÚn_£c_cÚfig
->
®low_»·œšg
);

411 
	}
}

418 
	$discÚÃù_´oûss
(
bË_g­_evt_t
 cÚ¡ * 
p_g­_evt
)

420 
pm_£c_”rÜ_code_t
 
”rÜ
 = (
p_g­_evt
->
·¿ms
.
discÚÃùed
.
»asÚ


421 =ğ
BLE_HCI_CONN_TERMINATED_DUE_TO_MIC_FAILURE
)

422 ? 
PM_CONN_SEC_ERROR_MIC_FAILURE
 : 
PM_CONN_SEC_ERROR_DISCONNECT
;

424 
	`lšk_£cu»_çu»
(
p_g­_evt
->
cÚn_hªdË
, 
”rÜ
, 
BLE_GAP_SEC_STATUS_SOURCE_LOCAL
);

425 
	}
}

434 
	$£nd_·¿ms_»q
(
ušt16_t
 
cÚn_hªdË
, 
bË_g­_£c_·¿ms_t
 cÚ¡ * 
p_³”_·¿ms
)

436 
pm_evt_t
 
evt
 =

438 .
evt_id
 = 
PM_EVT_CONN_SEC_PARAMS_REQ
,

439 .
cÚn_hªdË
 = conn_handle,

440 .
·¿ms
 =

442 .
cÚn_£c_·¿ms_»q
 =

444 .
p_³”_·¿ms
 =…_peer_params

449 
	`evt_£nd
(&
evt
);

450 
	}
}

457 
	$£c_·¿ms_»que¡_´oûss
(
bË_g­_evt_t
 cÚ¡ * 
p_g­_evt
)

459 ià(
	`bË_cÚn_¡©e_rŞe
(
p_g­_evt
->
cÚn_hªdË
è=ğ
BLE_GAP_ROLE_PERIPH
)

461 
	`£c_´oc_¡¬t
(
p_g­_evt
->
cÚn_hªdË
,

462 
Œue
,

463 
p_g­_evt
->
·¿ms
.
£c_·¿ms_»que¡
.
³”_·¿ms
.
bÚd


464 ? 
PM_CONN_SEC_PROCEDURE_BONDING


465 : 
PM_CONN_SEC_PROCEDURE_PAIRING
);

468 
	`£nd_·¿ms_»q
(
p_g­_evt
->
cÚn_hªdË
, &p_g­_evt->
·¿ms
.
£c_·¿ms_»que¡
.
³”_·¿ms
);

470 
	}
}

478 
	$·œšg_sucûss_evt_£nd
(
bË_g­_evt_t
 cÚ¡ * 
p_g­_evt
, 
boŞ
 
d©a_¡Üed
)

480 
pm_evt_t
 
·œšg_sucûss_evt
;

482 
·œšg_sucûss_evt
.
evt_id
 = 
PM_EVT_CONN_SEC_SUCCEEDED
;

483 
·œšg_sucûss_evt
.
cÚn_hªdË
 = 
p_g­_evt
->conn_handle;

484 
·œšg_sucûss_evt
.
·¿ms
.
cÚn_£c_sucûeded
.
´oûdu»
 = 
p_g­_evt
->·¿ms.
auth_¡©us
.
bÚded


485 ? 
PM_CONN_SEC_PROCEDURE_BONDING


486 : 
PM_CONN_SEC_PROCEDURE_PAIRING
;

487 
·œšg_sucûss_evt
.
·¿ms
.
cÚn_£c_sucûeded
.
d©a_¡Üed
 = data_stored;

489 
	`evt_£nd
(&
·œšg_sucûss_evt
);

490 
	}
}

498 
	$auth_¡©us_sucûss_´oûss
(
bË_g­_evt_t
 cÚ¡ * 
p_g­_evt
)

500 
»t_code_t
 
”r_code
;

501 
ušt16_t
 
cÚn_hªdË
 = 
p_g­_evt
->conn_handle;

502 
pm_³”_id_t
 
³”_id
;

503 
pm_³”_d©a_t
 
³”_d©a
;

504 
boŞ
 
Ãw_³”_id
 = 
çl£
;

506 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
, 
m_æag_£c_´oc
, 
çl£
);

508 ià(!
p_g­_evt
->
·¿ms
.
auth_¡©us
.
bÚded
)

510 
	`·œšg_sucûss_evt_£nd
(
p_g­_evt
, 
çl£
);

514 
”r_code
 = 
	`pdb_wr™e_buf_g‘
(
	`PDB_TEMP_PEER_ID
(
cÚn_hªdË
), 
PM_PEER_DATA_ID_BONDING
, 1, &
³”_d©a
);

515 ià(
”r_code
 !ğ
NRF_SUCCESS
)

517 
	`NRF_LOG_ERROR
("RAM buffer for‚ew bond was unavailable.…db_write_buf_get()„eturned %s. conn_handle: %d.",

518 
	`Äf_¡»¼Ü_g‘
(
”r_code
),

519 
cÚn_hªdË
);

520 
	`£nd_uÃx³ùed_”rÜ
(
cÚn_hªdË
, 
”r_code
);

521 
	`·œšg_sucûss_evt_£nd
(
p_g­_evt
, 
çl£
);

525 
³”_id
 = 
	`im_³”_id_g‘_by_cÚn_hªdË
(
cÚn_hªdË
);

527 ià(
³”_id
 =ğ
PM_PEER_ID_INVALID
)

529 
³”_id
 = 
	`im_fšd_du¶iÿ‹_bÚdšg_d©a
(
³”_d©a
.
p_bÚdšg_d©a
, 
PM_PEER_ID_INVALID
);

531 ià(
³”_id
 !ğ
PM_PEER_ID_INVALID
)

534 
	`im_Ãw_³”_id
(
cÚn_hªdË
, 
³”_id
);

537 ià(!
	`®low_»·œšg
(
cÚn_hªdË
))

539 
	`£nd_cÚfig_»q
(
cÚn_hªdË
);

540 ià(!
	`®low_»·œšg
(
cÚn_hªdË
))

542 
	`·œšg_sucûss_evt_£nd
(
p_g­_evt
, 
çl£
);

549 ià(
³”_id
 =ğ
PM_PEER_ID_INVALID
)

551 
³”_id
 = 
	`pds_³”_id_®loÿ‹
();

552 ià(
³”_id
 =ğ
PM_PEER_ID_INVALID
)

554 
	`NRF_LOG_ERROR
("Could‚ot‡llocate‚ew…eer_id for incoming bond.");

555 
	`£nd_uÃx³ùed_”rÜ
(
cÚn_hªdË
, 
NRF_ERROR_NO_MEM
);

556 
	`·œšg_sucûss_evt_£nd
(
p_g­_evt
, 
çl£
);

559 
	`im_Ãw_³”_id
(
cÚn_hªdË
, 
³”_id
);

560 
Ãw_³”_id
 = 
Œue
;

563 
”r_code
 = 
	`pdb_wr™e_buf_¡Üe
(
	`PDB_TEMP_PEER_ID
(
cÚn_hªdË
), 
PM_PEER_DATA_ID_BONDING
, 
³”_id
);

565 ià(
”r_code
 =ğ
NRF_SUCCESS
)

567 
	`·œšg_sucûss_evt_£nd
(
p_g­_evt
, 
Œue
);

569 ià(
”r_code
 =ğ
NRF_ERROR_STORAGE_FULL
)

571 
	`£nd_¡Üage_fuÎ_evt
(
cÚn_hªdË
);

572 
	`·œšg_sucûss_evt_£nd
(
p_g­_evt
, 
Œue
);

577 
	`NRF_LOG_ERROR
("Could‚ot store bond.…db_write_buf_store()„eturned %s. "\

579 
	`Äf_¡»¼Ü_g‘
(
”r_code
),

580 
cÚn_hªdË
,

581 
³”_id
);

582 
	`£nd_uÃx³ùed_”rÜ
(
cÚn_hªdË
, 
”r_code
);

583 
	`·œšg_sucûss_evt_£nd
(
p_g­_evt
, 
çl£
);

584 ià(
Ãw_³”_id
)

586 
	`UNUSED_RETURN_VALUE
(
	`im_³”_ä“
(
³”_id
));

591 
	}
}

599 
	$auth_¡©us_çu»_´oûss
(
bË_g­_evt_t
 cÚ¡ * 
p_g­_evt
)

601 
	`lšk_£cu»_çu»
(
p_g­_evt
->
cÚn_hªdË
,

602 
p_g­_evt
->
·¿ms
.
auth_¡©us
.auth_status,

603 
p_g­_evt
->
·¿ms
.
auth_¡©us
.
”rÜ_¤c
);

604 
	}
}

611 
	$auth_¡©us_´oûss
(
bË_g­_evt_t
 cÚ¡ * 
p_g­_evt
)

613 
p_g­_evt
->
·¿ms
.
auth_¡©us
.auth_status)

615 
BLE_GAP_SEC_STATUS_SUCCESS
:

616 
	`auth_¡©us_sucûss_´oûss
(
p_g­_evt
);

620 
	`auth_¡©us_çu»_´oûss
(
p_g­_evt
);

621 #ià
PM_RA_PROTECTION_ENABLED


622 
	`a¡_auth_”rÜ_nÙify
(
p_g­_evt
->
cÚn_hªdË
);

626 
	}
}

633 
	$cÚn_£c_upd©e_´oûss
(
bË_g­_evt_t
 cÚ¡ * 
p_g­_evt
)

635 ià(!
	`·œšg
(
p_g­_evt
->
cÚn_hªdË
))

639 ià(!
	`bË_cÚn_¡©e_’üy±ed
(
p_g­_evt
->
cÚn_hªdË
))

641 
	`’üy±iÚ_çu»
(
p_g­_evt
->
cÚn_hªdË
,

642 
PM_CONN_SEC_ERROR_PIN_OR_KEY_MISSING
,

643 
BLE_GAP_SEC_STATUS_SOURCE_REMOTE
);

647 
	`bË_cÚn_¡©e_u£r_æag_£t
(
p_g­_evt
->
cÚn_hªdË
, 
m_æag_£c_´oc
, 
çl£
);

649 
pm_evt_t
 
evt
;

651 
evt
.
evt_id
 = 
PM_EVT_CONN_SEC_SUCCEEDED
;

652 
evt
.
cÚn_hªdË
 = 
p_g­_evt
->conn_handle;

653 
evt
.
·¿ms
.
cÚn_£c_sucûeded
.
´oûdu»
 = 
PM_CONN_SEC_PROCEDURE_ENCRYPTION
;

654 
evt
.
·¿ms
.
cÚn_£c_sucûeded
.
d©a_¡Üed
 = 
çl£
;

656 
	`evt_£nd
(&
evt
);

659 
	}
}

666 
	$æag_id_š™
(
bË_cÚn_¡©e_u£r_æag_id_t
 * 
p_æag_id
)

668 ià(*
p_æag_id
 =ğ
BLE_CONN_STATE_USER_FLAG_INVALID
)

670 *
p_æag_id
 = 
	`bË_cÚn_¡©e_u£r_æag_acquœe
();

672 
	}
}

675 
»t_code_t
 
	$smd_š™
()

677 
	`NRF_PM_DEBUG_CHECK
(!
m_moduË_š™Ÿlized
);

679 
	`æag_id_š™
(&
m_æag_£c_´oc
);

680 
	`æag_id_š™
(&
m_æag_£c_´oc_·œšg
);

681 
	`æag_id_š™
(&
m_æag_£c_´oc_bÚdšg
);

682 
	`æag_id_š™
(&
m_æag_®low_»·œšg
);

684 ià((
m_æag_£c_´oc
 =ğ
BLE_CONN_STATE_USER_FLAG_INVALID
) ||

685 (
m_æag_£c_´oc_·œšg
 =ğ
BLE_CONN_STATE_USER_FLAG_INVALID
) ||

686 (
m_æag_£c_´oc_bÚdšg
 =ğ
BLE_CONN_STATE_USER_FLAG_INVALID
) ||

687 (
m_æag_®low_»·œšg
 =ğ
BLE_CONN_STATE_USER_FLAG_INVALID
))

689 
	`NRF_LOG_ERROR
("Could‚ot‡cquire conn_state user flags. Increase "\

691  
NRF_ERROR_INTERNAL
;

694 #ià
PM_RA_PROTECTION_ENABLED


695 
»t_code_t
 
”r_code
 = 
	`a¡_š™
();

696 ià(
”r_code
 !ğ
NRF_SUCCESS
)

698  
”r_code
;

702 
m_moduË_š™Ÿlized
 = 
Œue
;

704  
NRF_SUCCESS
;

705 
	}
}

721 
»t_code_t
 
	$£c_key£t_fl
(
ušt16_t
 
cÚn_hªdË
,

722 
ušt8_t
 
rŞe
,

723 
bË_g­_Ësc_p256_pk_t
 * 
p_public_key
,

724 
bË_g­_£c_key£t_t
 * 
p_£c_key£t
)

726 
»t_code_t
 
”r_code
;

727 
pm_³”_d©a_t
 
³”_d©a
;

729 ià(
p_£c_key£t
 =ğ
NULL
)

731 
	`NRF_LOG_ERROR
("IÁ”ÇÈ”rÜ: % »ûived NULL fÜ…_£c_key£t.", 
__func__
);

732  
NRF_ERROR_INTERNAL
;

736 
”r_code
 = 
	`pdb_wr™e_buf_g‘
(
	`PDB_TEMP_PEER_ID
(
cÚn_hªdË
), 
PM_PEER_DATA_ID_BONDING
, 1, &
³”_d©a
);

738 ià(
”r_code
 =ğ
NRF_ERROR_BUSY
)

742 ià(
”r_code
 !ğ
NRF_SUCCESS
)

744 
	`NRF_LOG_ERROR
("Could‚ot„etrieve RAM buffer for incoming bond.…db_write_buf_get() "\

746 
	`Äf_¡»¼Ü_g‘
(
”r_code
),

747 
cÚn_hªdË
);

748 
”r_code
 = 
NRF_ERROR_INTERNAL
;

752 
	`mem£t
(
³”_d©a
.
p_bÚdšg_d©a
, 0, (
pm_³”_d©a_bÚdšg_t
));

754 
³”_d©a
.
p_bÚdšg_d©a
->
own_rŞe
 = 
rŞe
;

756 
p_£c_key£t
->
keys_own
.
p_’c_key
 = &
³”_d©a
.
p_bÚdšg_d©a
->
own_Ék
;

757 
p_£c_key£t
->
keys_own
.
p_pk
 = 
p_public_key
;

758 
p_£c_key£t
->
keys_³”
.
p_’c_key
 = &
³”_d©a
.
p_bÚdšg_d©a
->
³”_Ék
;

759 
p_£c_key£t
->
keys_³”
.
p_id_key
 = &
³”_d©a
.
p_bÚdšg_d©a
->
³”_bË_id
;

760 
p_£c_key£t
->
keys_³”
.
p_pk
 = &
m_³”_pk
;

764 
”r_code
 = 
	`im_bË_addr_g‘
(
cÚn_hªdË
, &
³”_d©a
.
p_bÚdšg_d©a
->
³”_bË_id
.
id_addr_šfo
);

765 ià(
”r_code
 !ğ
NRF_SUCCESS
)

767 
	`NRF_LOG_WARNING
("im_ble_addr_get()„eturned %s. conn_handle: %d. Link was†ikely disconnected.",

768 
	`Äf_¡»¼Ü_g‘
(
”r_code
),

769 
cÚn_hªdË
);

770  
NRF_ERROR_INVALID_STATE
;

774  
”r_code
;

775 
	}
}

778 
»t_code_t
 
	$smd_·¿ms_»¶y
(
ušt16_t
 
cÚn_hªdË
,

779 
bË_g­_£c_·¿ms_t
 * 
p_£c_·¿ms
,

780 
bË_g­_Ësc_p256_pk_t
 * 
p_public_key
)

782 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

784 
ušt8_t
 
rŞe
 = 
	`bË_cÚn_¡©e_rŞe
(
cÚn_hªdË
);

785 
»t_code_t
 
”r_code
 = 
NRF_SUCCESS
;

786 
ušt8_t
 
£c_¡©us
 = 
BLE_GAP_SEC_STATUS_SUCCESS
;

787 
bË_g­_£c_key£t_t
 
£c_key£t
;

789 
	`mem£t
(&
£c_key£t
, 0, (
bË_g­_£c_key£t_t
));

790 ià(
rŞe
 =ğ
BLE_GAP_ROLE_PERIPH
)

793 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
, 
m_æag_®low_»·œšg
, 
çl£
);

796 ià(
rŞe
 =ğ
BLE_GAP_ROLE_INVALID
)

798  
BLE_ERROR_INVALID_CONN_HANDLE
;

801 #ià
PM_RA_PROTECTION_ENABLED


802 ià(
	`a¡_³”_bÏckli¡ed
(
cÚn_hªdË
))

804 
£c_¡©us
 = 
BLE_GAP_SEC_STATUS_REPEATED_ATTEMPTS
;

808 ià(
p_£c_·¿ms
 =ğ
NULL
)

811 
£c_¡©us
 = 
BLE_GAP_SEC_STATUS_PAIRING_NOT_SUPP
;

815 ià((
	`im_³”_id_g‘_by_cÚn_hªdË
(
cÚn_hªdË
è!ğ
PM_PEER_ID_INVALID
) &&

816 (
rŞe
 =ğ
BLE_GAP_ROLE_PERIPH
) &&

817 !
	`®low_»·œšg
(
cÚn_hªdË
))

820 
	`£nd_cÚfig_»q
(
cÚn_hªdË
);

821 ià(!
	`®low_»·œšg
(
cÚn_hªdË
))

824 
£c_¡©us
 = 
BLE_GAP_SEC_STATUS_PAIRING_NOT_SUPP
;

828 ià(!
p_£c_·¿ms
->
bÚd
)

831 
£c_key£t
.
keys_own
.
p_pk
 = 
p_public_key
;

832 
£c_key£t
.
keys_³”
.
p_pk
 = &
m_³”_pk
;

834 ià(
£c_¡©us
 !ğ
BLE_GAP_SEC_STATUS_PAIRING_NOT_SUPP
)

837 
”r_code
 = 
	`£c_key£t_fl
(
cÚn_hªdË
, 
rŞe
, 
p_public_key
, &
£c_key£t
);

841 ià(
”r_code
 =ğ
NRF_SUCCESS
)

845 ià(
rŞe
 =ğ
BLE_GAP_ROLE_PERIPH
)

847 
”r_code
 = 
	`sd_bË_g­_£c_·¿ms_»¶y
(
cÚn_hªdË
, 
£c_¡©us
, 
p_£c_·¿ms
, &
£c_key£t
);

851 
”r_code
 = 
	`sd_bË_g­_£c_·¿ms_»¶y
(
cÚn_hªdË
, 
£c_¡©us
, 
NULL
, &
£c_key£t
);

855  
”r_code
;

856 
	}
}

863 
»t_code_t
 
	$lšk_£cu»_auth’tiÿ‹
(
ušt16_t
 
cÚn_hªdË
,

864 
bË_g­_£c_·¿ms_t
 * 
p_£c_·¿ms
)

866 
»t_code_t
 
”r_code
 = 
	`sd_bË_g­_auth’tiÿ‹
(
cÚn_hªdË
, 
p_£c_·¿ms
);

868 ià(
”r_code
 =ğ
NRF_ERROR_NO_MEM
)

871 
”r_code
 = 
NRF_ERROR_BUSY
;

874  
”r_code
;

875 
	}
}

878 #ià
PM_CENTRAL_ENABLED


881 
»t_code_t
 
	$lšk_£cu»_ûÁ¿l_’üy±iÚ
(
ušt16_t
 
cÚn_hªdË
,

882 
pm_³”_id_t
 
³”_id
)

884 
pm_³”_d©a_æash_t
 
³”_d©a
;

885 
»t_code_t
 
”r_code
;

886 
bË_g­_’c_key_t
 cÚ¡ * 
p_exi¡šg_key
 = 
NULL
;

887 
boŞ
 
Ësc
 = 
çl£
;

889 
”r_code
 = 
	`pdb_³”_d©a_±r_g‘
(
³”_id
, 
PM_PEER_DATA_ID_BONDING
, &
³”_d©a
);

891 ià(
”r_code
 =ğ
NRF_SUCCESS
)

894 
p_exi¡šg_key
 = &(
³”_d©a
.
p_bÚdšg_d©a
->
³”_Ék
);

896 
Ësc
 = 
³”_d©a
.
p_bÚdšg_d©a
->
own_Ék
.
’c_šfo
.lesc;

897 ià(
Ësc
)

900 
p_exi¡šg_key
 = &(
³”_d©a
.
p_bÚdšg_d©a
->
own_Ék
);

904 ià((
”r_code
 !ğ
NRF_SUCCESS
è&& (”r_cod!ğ
NRF_ERROR_NOT_FOUND
))

906 ià(
”r_code
 !ğ
NRF_ERROR_BUSY
)

908 
	`NRF_LOG_ERROR
("Could‚ot„etrieve stored bond.…db_peer_data_ptr_get()„eturned %s. "\

910 
	`Äf_¡»¼Ü_g‘
(
”r_code
),

911 
³”_id
);

912 
”r_code
 = 
NRF_ERROR_INTERNAL
;

915 ià(
p_exi¡šg_key
 =ğ
NULL
)

919 
”r_code
 = 
NRF_ERROR_BUSY
;

921 ià(!
Ësc
 && !
	`im_ma¡”_id_is_v®id
(&(
p_exi¡šg_key
->
ma¡”_id
)))

924 
”r_code
 = 
NRF_ERROR_INVALID_DATA
;

929 
”r_code
 = 
	`sd_bË_g­_’üy±
(
cÚn_hªdË
,

930 &(
p_exi¡šg_key
->
ma¡”_id
),

931 &(
p_exi¡šg_key
->
’c_šfo
));

934 
	`£c_´oc_¡¬t
(
cÚn_hªdË
, 
”r_code
 =ğ
NRF_SUCCESS
, 
PM_CONN_SEC_PROCEDURE_ENCRYPTION
);

936  
”r_code
;

937 
	}
}

942 
»t_code_t
 
	$lšk_£cu»_ûÁ¿l
(
ušt16_t
 
cÚn_hªdË
,

943 
bË_g­_£c_·¿ms_t
 * 
p_£c_·¿ms
,

944 
boŞ
 
fÜû_»·œšg
)

946 
»t_code_t
 
”r_code
;

947 
pm_³”_id_t
 
³”_id
;

949 ià(
p_£c_·¿ms
 =ğ
NULL
)

951  
	`lšk_£cu»_auth’tiÿ‹
(
cÚn_hªdË
, 
NULL
);

955 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
, 
m_æag_®low_»·œšg
, 
fÜû_»·œšg
);

957 
³”_id
 = 
	`im_³”_id_g‘_by_cÚn_hªdË
(
cÚn_hªdË
);

959 ià((
³”_id
 !ğ
PM_PEER_ID_INVALID
è&& !
fÜû_»·œšg
)

963 
”r_code
 = 
	`lšk_£cu»_ûÁ¿l_’üy±iÚ
(
cÚn_hªdË
, 
³”_id
);

969 
”r_code
 = 
	`lšk_£cu»_auth’tiÿ‹
(
cÚn_hªdË
, 
p_£c_·¿ms
);

970 
pm_cÚn_£c_´oûdu»_t
 
´oûdu»
 = (
p_£c_·¿ms
 &&…_£c_·¿ms->
bÚd
) ?

971 
PM_CONN_SEC_PROCEDURE_BONDING
 :

972 
PM_CONN_SEC_PROCEDURE_PAIRING
;

973 
	`£c_´oc_¡¬t
(
cÚn_hªdË
, 
”r_code
 =ğ
NRF_SUCCESS
, 
´oûdu»
);

976  
”r_code
;

977 
	}
}

983 
	$£c_»que¡_´oûss
(
bË_g­_evt_t
 cÚ¡ * 
p_g­_evt
)

985 
pm_evt_t
 
evt
 =

987 .
evt_id
 = 
PM_EVT_SLAVE_SECURITY_REQ
,

988 .
cÚn_hªdË
 = 
p_g­_evt
->conn_handle,

989 .
·¿ms
 =

991 .
¦ave_£cur™y_»q
 =

993 .
bÚd
 = 
p_g­_evt
->
·¿ms
.
£c_»que¡
.bond,

994 .
m™m
 = 
p_g­_evt
->
·¿ms
.
£c_»que¡
.mitm,

998 
	`evt_£nd
(&
evt
);

1000 
	}
}

1006 
»t_code_t
 
	$lšk_£cu»_³rh”®
(
ušt16_t
 
cÚn_hªdË
, 
bË_g­_£c_·¿ms_t
 * 
p_£c_·¿ms
)

1008 
»t_code_t
 
”r_code
 = 
NRF_SUCCESS
;

1010 ià(
p_£c_·¿ms
 !ğ
NULL
)

1012 
”r_code
 = 
	`lšk_£cu»_auth’tiÿ‹
(
cÚn_hªdË
, 
p_£c_·¿ms
);

1015  
”r_code
;

1016 
	}
}

1019 
»t_code_t
 
	$smd_lšk_£cu»
(
ušt16_t
 
cÚn_hªdË
,

1020 
bË_g­_£c_·¿ms_t
 * 
p_£c_·¿ms
,

1021 
boŞ
 
fÜû_»·œšg
)

1023 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

1025 
ušt8_t
 
rŞe
 = 
	`bË_cÚn_¡©e_rŞe
(
cÚn_hªdË
);

1027 
rŞe
)

1029 #ià
PM_CENTRAL_ENABLED


1030 
BLE_GAP_ROLE_CENTRAL
:

1031  
	`lšk_£cu»_ûÁ¿l
(
cÚn_hªdË
, 
p_£c_·¿ms
, 
fÜû_»·œšg
);

1034 
BLE_GAP_ROLE_PERIPH
:

1035  
	`lšk_£cu»_³rh”®
(
cÚn_hªdË
, 
p_£c_·¿ms
);

1038  
BLE_ERROR_INVALID_CONN_HANDLE
;

1040 
	}
}

1043 
	$smd_bË_evt_hªdËr
(
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

1045 
p_bË_evt
->
h—d”
.
evt_id
)

1047 
BLE_GAP_EVT_DISCONNECTED
:

1048 
	`discÚÃù_´oûss
(&(
p_bË_evt
->
evt
.
g­_evt
));

1051 
BLE_GAP_EVT_SEC_PARAMS_REQUEST
:

1052 
	`£c_·¿ms_»que¡_´oûss
(&(
p_bË_evt
->
evt
.
g­_evt
));

1055 
BLE_GAP_EVT_SEC_INFO_REQUEST
:

1056 
	`£c_šfo_»que¡_´oûss
(&(
p_bË_evt
->
evt
.
g­_evt
));

1059 #ià
PM_CENTRAL_ENABLED


1060 
BLE_GAP_EVT_SEC_REQUEST
:

1061 
	`£c_»que¡_´oûss
(&(
p_bË_evt
->
evt
.
g­_evt
));

1065 
BLE_GAP_EVT_AUTH_STATUS
:

1066 
	`auth_¡©us_´oûss
(&(
p_bË_evt
->
evt
.
g­_evt
));

1069 
BLE_GAP_EVT_CONN_SEC_UPDATE
:

1070 
	`cÚn_£c_upd©e_´oûss
(&(
p_bË_evt
->
evt
.
g­_evt
));

1073 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\ble\peer_manager\security_manager.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
PEER_MANAGER
)

42 
	~"£cur™y_mªag”.h
"

44 
	~<¡ršg.h
>

45 
	~"bË_”r.h
"

46 
	~"£cur™y_di¥©ch”.h
"

47 
	~"³”_d©aba£.h
"

48 
	~"bË_cÚn_¡©e.h
"

49 
	~"id_mªag”.h
"

50 
	~"sdk_commÚ.h
"

52 #ià
PM_LESC_ENABLED


53 
	~"Äf_bË_Ësc.h
"

55 
	#NRF_LOG_MODULE_NAME
 
³”_mªag”_sm


	)

56 #ià
PM_LOG_ENABLED


57 
	#NRF_LOG_LEVEL
 
PM_LOG_LEVEL


	)

58 
	#NRF_LOG_INFO_COLOR
 
PM_LOG_INFO_COLOR


	)

59 
	#NRF_LOG_DEBUG_COLOR
 
PM_LOG_DEBUG_COLOR


	)

61 
	#NRF_LOG_LEVEL
 0

	)

63 
	~"Äf_log.h
"

64 
	~"Äf_log_ù¾.h
"

65 
NRF_LOG_MODULE_REGISTER
();

66 
	~"Äf_¡»¼Ü.h
"

70 
	#SM_EVENT_HANDLERS_CNT
 ((
m_evt_hªdËrs
è/ (m_evt_hªdËrs[0]))

	)

74 
pm_sm_evt_hªdËr
(
pm_evt_t
 * 
p_sm_evt
);

78 
pm_evt_hªdËr_š‹º®_t
 cÚ¡ 
	gm_evt_hªdËrs
[] =

80 
pm_sm_evt_hªdËr


87 
bË_g­_£c_·¿ms_t
 * 
	mp_£c_·¿ms
;

88 
bË_g­_£c_·¿ms_t
 
	m£c_·¿ms_mem
;

89 
boŞ
 
	m·¿ms_»¶y_ÿÎed
;

90 } 
	t£c_·¿ms_»¶y_cÚ‹xt_t
;

92 
boŞ
 
	gm_moduË_š™Ÿlized
;

94 
bË_g­_£c_·¿ms_t
 
	gm_£c_·¿ms
;

95 
bË_g­_£c_·¿ms_t
 * 
	gmp_£c_·¿ms
 = 
NULL
;

96 
boŞ
 
	gm_£c_·¿ms_£t
 = 
çl£
;

98 #ià
PM_LESC_ENABLED
 == 0

99 
bË_g­_Ësc_p256_pk_t
 * 
	gm_p_public_key
;

102 
bË_cÚn_¡©e_u£r_æag_id_t
 
	gm_æag_lšk_£cu»_³ndšg_busy
 = 
BLE_CONN_STATE_USER_FLAG_INVALID
;

103 
bË_cÚn_¡©e_u£r_æag_id_t
 
	gm_æag_lšk_£cu»_fÜû_»·œšg
 = 
BLE_CONN_STATE_USER_FLAG_INVALID
;

104 
bË_cÚn_¡©e_u£r_æag_id_t
 
	gm_æag_lšk_£cu»_nuÎ_·¿ms
 = 
BLE_CONN_STATE_USER_FLAG_INVALID
;

105 
bË_cÚn_¡©e_u£r_æag_id_t
 
	gm_æag_·¿ms_»¶y_³ndšg_busy
 = 
BLE_CONN_STATE_USER_FLAG_INVALID
;

112 
	$evt_£nd
(
pm_evt_t
 * 
p_ev’t
)

114 
ušt32_t
 
i
 = 0; i < 
SM_EVENT_HANDLERS_CNT
; i++)

116 
m_evt_hªdËrs
[
i
](
p_ev’t
);

118 
	}
}

129 
	$æags_£t_äom_”r_code
(
ušt16_t
 
cÚn_hªdË
, 
»t_code_t
 
”r_code
, 
boŞ
 
·¿ms_»¶y
)

131 
boŞ
 
æag_v®ue_busy
 = 
çl£
;

133 ià(
”r_code
 =ğ
NRF_ERROR_BUSY
)

135 
æag_v®ue_busy
 = 
Œue
;

139 
æag_v®ue_busy
 = 
çl£
;

142 ià(
·¿ms_»¶y
)

144 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
,

145 
m_æag_·¿ms_»¶y_³ndšg_busy
,

146 
æag_v®ue_busy
);

147 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
,

148 
m_æag_lšk_£cu»_³ndšg_busy
,

149 
çl£
);

153 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
,

154 
m_æag_lšk_£cu»_³ndšg_busy
,

155 
æag_v®ue_busy
);

157 
	}
}

169 
	$ev’ts_£nd_äom_”r_code
(
ušt16_t
 
cÚn_hªdË
,

170 
»t_code_t
 
”r_code
,

171 
bË_g­_£c_·¿ms_t
 * 
p_£c_·¿ms
)

173 ià((
”r_code
 !ğ
NRF_SUCCESS
è&& (”r_cod!ğ
NRF_ERROR_BUSY
è&& (”r_cod!ğ
NRF_ERROR_INVALID_STATE
))

175 
pm_evt_t
 
evt
 =

177 .
cÚn_hªdË
 = conn_handle,

178 .
³”_id
 = 
	`im_³”_id_g‘_by_cÚn_hªdË
(
cÚn_hªdË
),

180 ià(
”r_code
 =ğ
NRF_ERROR_TIMEOUT
)

182 
	`NRF_LOG_WARNING
("Cannot secure†ink because‡…revious security…rocedureƒnded inimeout. "\

185 
cÚn_hªdË
);

186 
evt
.
evt_id
 = 
PM_EVT_CONN_SEC_FAILED
;

187 
evt
.
·¿ms
.
cÚn_£c_çed
.
´oûdu»
 = ((
p_£c_·¿ms
 !ğ
NULL
è&&…_£c_·¿ms->
bÚd
)

188 ? 
PM_CONN_SEC_PROCEDURE_BONDING


189 : 
PM_CONN_SEC_PROCEDURE_PAIRING
;

190 
evt
.
·¿ms
.
cÚn_£c_çed
.
”rÜ_¤c
 = 
BLE_GAP_SEC_STATUS_SOURCE_LOCAL
;

191 
evt
.
·¿ms
.
cÚn_£c_çed
.
”rÜ
 = 
PM_CONN_SEC_ERROR_SMP_TIMEOUT
;

195 
	`NRF_LOG_ERROR
("Could‚ot…erform security…rocedure. smd_params_reply() or "\

197 
	`Äf_¡»¼Ü_g‘
(
”r_code
),

198 
cÚn_hªdË
);

199 
evt
.
evt_id
 = 
PM_EVT_ERROR_UNEXPECTED
;

200 
evt
.
·¿ms
.
”rÜ_uÃx³ùed
.
”rÜ
 = 
”r_code
;

201 
evt
.
·¿ms
.
”rÜ_uÃx³ùed
.
fds_”rÜ
 = 
çl£
;

203 
	`evt_£nd
(&
evt
);

205 
	}
}

215 
	$·¿ms_»q_£nd
(
ušt16_t
 
cÚn_hªdË
,

216 
bË_g­_£c_·¿ms_t
 cÚ¡ * 
p_³”_·¿ms
,

217 
£c_·¿ms_»¶y_cÚ‹xt_t
 * 
p_cÚ‹xt
)

219 
pm_evt_t
 
evt
;

220 
evt
.
evt_id
 = 
PM_EVT_CONN_SEC_PARAMS_REQ
;

221 
evt
.
cÚn_hªdË
 = conn_handle;

222 
evt
.
³”_id
 = 
	`im_³”_id_g‘_by_cÚn_hªdË
(
cÚn_hªdË
);

223 
evt
.
·¿ms
.
cÚn_£c_·¿ms_»q
.
p_³”_·¿ms
 =…_peer_params;

224 
evt
.
·¿ms
.
cÚn_£c_·¿ms_»q
.
p_cÚ‹xt
 =…_context;

226 
	`evt_£nd
(&
evt
);

227 
	}
}

234 
£c_·¿ms_»¶y_cÚ‹xt_t
 
	$Ãw_cÚ‹xt_g‘
()

236 
£c_·¿ms_»¶y_cÚ‹xt_t
 
Ãw_cÚ‹xt
 =

238 .
p_£c_·¿ms
 = 
mp_£c_·¿ms
,

239 .
·¿ms_»¶y_ÿÎed
 = 
çl£


241  
Ãw_cÚ‹xt
;

242 
	}
}

254 
»t_code_t
 
	$lšk_£cu»
(
ušt16_t
 
cÚn_hªdË
,

255 
boŞ
 
nuÎ_·¿ms
,

256 
boŞ
 
fÜû_»·œšg
,

257 
boŞ
 
£nd_ev’ts
)

259 
»t_code_t
 
”r_code
;

260 
»t_code_t
 
»tuº_”r_code
;

261 
bË_g­_£c_·¿ms_t
 * 
p_£c_·¿ms
;

263 ià(
nuÎ_·¿ms
)

265 
p_£c_·¿ms
 = 
NULL
;

269 
£c_·¿ms_»¶y_cÚ‹xt_t
 
cÚ‹xt
 = 
	`Ãw_cÚ‹xt_g‘
();

270 
	`·¿ms_»q_£nd
(
cÚn_hªdË
, 
NULL
, &
cÚ‹xt
);

271 
p_£c_·¿ms
 = 
cÚ‹xt
.p_sec_params;

273 ià(!
m_£c_·¿ms_£t
 && !
cÚ‹xt
.
·¿ms_»¶y_ÿÎed
)

276  
NRF_ERROR_NOT_FOUND
;

281 
”r_code
 = 
	`smd_lšk_£cu»
(
cÚn_hªdË
, 
p_£c_·¿ms
, 
fÜû_»·œšg
);

283 
	`æags_£t_äom_”r_code
(
cÚn_hªdË
, 
”r_code
, 
çl£
);

285 
”r_code
)

287 
NRF_ERROR_BUSY
:

288 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
, 
m_æag_lšk_£cu»_nuÎ_·¿ms
, 
nuÎ_·¿ms
);

289 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
, 
m_æag_lšk_£cu»_fÜû_»·œšg
, 
fÜû_»·œšg
);

290 
»tuº_”r_code
 = 
NRF_SUCCESS
;

292 
NRF_SUCCESS
:

293 
NRF_ERROR_TIMEOUT
:

294 
BLE_ERROR_INVALID_CONN_HANDLE
:

295 
NRF_ERROR_INVALID_STATE
:

296 
NRF_ERROR_INVALID_DATA
:

297 
»tuº_”r_code
 = 
”r_code
;

300 
	`NRF_LOG_ERROR
("Could‚ot…erform security…rocedure. smd_link_secure()„eturned %s. "\

302 
	`Äf_¡»¼Ü_g‘
(
”r_code
),

303 
cÚn_hªdË
);

304 
»tuº_”r_code
 = 
NRF_ERROR_INTERNAL
;

308 ià(
£nd_ev’ts
)

310 
	`ev’ts_£nd_äom_”r_code
(
cÚn_hªdË
, 
”r_code
, 
p_£c_·¿ms
);

313  
»tuº_”r_code
;

314 
	}
}

322 
	$smd_·¿ms_»¶y_³rfÜm
(
ušt16_t
 
cÚn_hªdË
, 
bË_g­_£c_·¿ms_t
 cÚ¡ * 
p_³”_·¿ms
)

324 
»t_code_t
 
”r_code
;

325 
bË_g­_Ësc_p256_pk_t
 * 
p_public_key
;

326 
£c_·¿ms_»¶y_cÚ‹xt_t
 
cÚ‹xt
 = 
	`Ãw_cÚ‹xt_g‘
();

328 
	`·¿ms_»q_£nd
(
cÚn_hªdË
, 
p_³”_·¿ms
, &
cÚ‹xt
);

330 #ià
PM_LESC_ENABLED


331 
p_public_key
 = 
	`Äf_bË_Ësc_public_key_g‘
();

333 
p_public_key
 = 
m_p_public_key
;

335 
”r_code
 = 
	`smd_·¿ms_»¶y
(
cÚn_hªdË
, 
cÚ‹xt
.
p_£c_·¿ms
, 
p_public_key
);

337 
	`æags_£t_äom_”r_code
(
cÚn_hªdË
, 
”r_code
, 
Œue
);

338 
	`ev’ts_£nd_äom_”r_code
(
cÚn_hªdË
, 
”r_code
, 
cÚ‹xt
.
p_£c_·¿ms
);

339 
	}
}

346 
__INLINE
 
	$·¿ms_»q_´oûss
(
pm_evt_t
 cÚ¡ * 
p_ev’t
)

348 
	`smd_·¿ms_»¶y_³rfÜm
(
p_ev’t
->
cÚn_hªdË
,…_ev’t->
·¿ms
.
cÚn_£c_·¿ms_»q
.
p_³”_·¿ms
);

349 
	}
}

356 
	$£c_»q_´oûss
(
pm_evt_t
 cÚ¡ * 
p_ev’t
)

358 
boŞ
 
nuÎ_·¿ms
 = 
çl£
;

359 ià(
mp_£c_·¿ms
 =ğ
NULL
)

361 
nuÎ_·¿ms
 = 
Œue
;

363 ià((
boŞ
)
m_£c_·¿ms
.
bÚd
 < (boŞ)
p_ev’t
->
·¿ms
.
¦ave_£cur™y_»q
.bond)

365 
nuÎ_·¿ms
 = 
Œue
;

367 ià((
boŞ
)
m_£c_·¿ms
.
m™m
 < (boŞ)
p_ev’t
->
·¿ms
.
¦ave_£cur™y_»q
.mitm)

369 
nuÎ_·¿ms
 = 
Œue
;

375 
»t_code_t
 
”r_code
 = 
	`lšk_£cu»
(
p_ev’t
->
cÚn_hªdË
, 
nuÎ_·¿ms
, 
çl£
, 
Œue
);

376 
	`UNUSED_VARIABLE
(
”r_code
);

378 
	}
}

385 
	$evt_fÜw¬d
(
pm_evt_t
 * 
p_ev’t
)

387 
	`evt_£nd
(
p_ev’t
);

388 
	}
}

396 
	$sm_smd_evt_hªdËr
(
pm_evt_t
 * 
p_ev’t
)

398 
p_ev’t
->
evt_id
)

400 
PM_EVT_CONN_SEC_PARAMS_REQ
:

401 
	`·¿ms_»q_´oûss
(
p_ev’t
);

403 
PM_EVT_SLAVE_SECURITY_REQ
:

404 
	`£c_»q_´oûss
(
p_ev’t
);

408 
	`evt_fÜw¬d
(
p_ev’t
);

411 
	}
}

416 
	$·¿ms_»¶y_³ndšg_hªdË
(
ušt16_t
 
cÚn_hªdË
, * 
p_cÚ‹xt
)

418 
	`UNUSED_PARAMETER
(
p_cÚ‹xt
);

419 
	`smd_·¿ms_»¶y_³rfÜm
(
cÚn_hªdË
, 
NULL
);

420 
	}
}

425 
	$lšk_£cu»_³ndšg_hªdË
(
ušt16_t
 
cÚn_hªdË
, * 
p_cÚ‹xt
)

427 
	`UNUSED_PARAMETER
(
p_cÚ‹xt
);

429 
boŞ
 
fÜû_»·œšg
 = 
	`bË_cÚn_¡©e_u£r_æag_g‘
(
cÚn_hªdË
, 
m_æag_lšk_£cu»_fÜû_»·œšg
);

430 
boŞ
 
nuÎ_·¿ms
 = 
	`bË_cÚn_¡©e_u£r_æag_g‘
(
cÚn_hªdË
, 
m_æag_lšk_£cu»_nuÎ_·¿ms
);

433 
»t_code_t
 
”r_code
 = 
	`lšk_£cu»
(
cÚn_hªdË
, 
nuÎ_·¿ms
, 
fÜû_»·œšg
, 
Œue
);

434 
	`UNUSED_VARIABLE
(
”r_code
);

435 
	}
}

443 
	$sm_pdb_evt_hªdËr
(
pm_evt_t
 * 
p_ev’t
)

445 
p_ev’t
->
evt_id
)

447 
PM_EVT_FLASH_GARBAGE_COLLECTED
:

448 
PM_EVT_PEER_DATA_UPDATE_SUCCEEDED
:

449 
PM_EVT_PEER_DATA_UPDATE_FAILED
:

450 
PM_EVT_PEER_DELETE_SUCCEEDED
:

451 
PM_EVT_PEER_DELETE_FAILED
:

452 (è
	`bË_cÚn_¡©e_fÜ_—ch_£t_u£r_æag
(
m_æag_·¿ms_»¶y_³ndšg_busy
,

453 
·¿ms_»¶y_³ndšg_hªdË
,

454 
NULL
);

455 (è
	`bË_cÚn_¡©e_fÜ_—ch_£t_u£r_æag
(
m_æag_lšk_£cu»_³ndšg_busy
,

456 
lšk_£cu»_³ndšg_hªdË
,

457 
NULL
);

463 
	}
}

470 
	$æag_id_š™
(
bË_cÚn_¡©e_u£r_æag_id_t
 * 
p_æag_id
)

472 ià(*
p_æag_id
 =ğ
BLE_CONN_STATE_USER_FLAG_INVALID
)

474 *
p_æag_id
 = 
	`bË_cÚn_¡©e_u£r_æag_acquœe
();

476 
	}
}

479 
»t_code_t
 
	$sm_š™
()

481 
	`NRF_PM_DEBUG_CHECK
(!
m_moduË_š™Ÿlized
);

483 #ià
PM_LESC_ENABLED


484 
»t_code_t
 
”r_code
 = 
	`Äf_bË_Ësc_š™
();

485 ià(
”r_code
 !ğ
NRF_SUCCESS
)

487  
”r_code
;

491 
	`æag_id_š™
(&
m_æag_lšk_£cu»_³ndšg_busy
);

492 
	`æag_id_š™
(&
m_æag_lšk_£cu»_fÜû_»·œšg
);

493 
	`æag_id_š™
(&
m_æag_lšk_£cu»_nuÎ_·¿ms
);

494 
	`æag_id_š™
(&
m_æag_·¿ms_»¶y_³ndšg_busy
);

496 ià(
m_æag_·¿ms_»¶y_³ndšg_busy
 =ğ
BLE_CONN_STATE_USER_FLAG_INVALID
)

498 
	`NRF_LOG_ERROR
("Could‚ot‡cquire conn_state user flags. Increase "\

500  
NRF_ERROR_INTERNAL
;

503 
m_moduË_š™Ÿlized
 = 
Œue
;

505  
NRF_SUCCESS
;

506 
	}
}

509 
	$sm_bË_evt_hªdËr
(
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

511 
	`NRF_PM_DEBUG_CHECK
(
p_bË_evt
 !ğ
NULL
);

513 
	`smd_bË_evt_hªdËr
(
p_bË_evt
);

514 #ià
PM_LESC_ENABLED


515 
	`Äf_bË_Ësc_Ú_bË_evt
(
p_bË_evt
);

517 (è
	`bË_cÚn_¡©e_fÜ_—ch_£t_u£r_æag
(
m_æag_·¿ms_»¶y_³ndšg_busy
,

518 
·¿ms_»¶y_³ndšg_hªdË
,

519 
NULL
);

520 (è
	`bË_cÚn_¡©e_fÜ_—ch_£t_u£r_æag
(
m_æag_lšk_£cu»_³ndšg_busy
,

521 
lšk_£cu»_³ndšg_hªdË
,

522 
NULL
);

523 
	}
}

532 
boŞ
 
	$£c_·¿ms_v”ify
(
bË_g­_£c_·¿ms_t
 * 
p_£c_·¿ms
)

535 ià(
p_£c_·¿ms
 =ğ
NULL
)

537  
çl£
;

541 ià(!
p_£c_·¿ms
->
m™m
 &&…_£c_·¿ms->
oob
)

543  
çl£
;

547 ià(
p_£c_·¿ms
->
io_ÿps
 > 
BLE_GAP_IO_CAPS_KEYBOARD_DISPLAY
)

549  
çl£
;

553 ià(
p_£c_·¿ms
->
m™m
 && (p_£c_·¿ms->
io_ÿps
 =ğ
BLE_GAP_IO_CAPS_NONE
è&& !p_£c_·¿ms->
oob
)

555  
çl£
;

559 ià(
p_£c_·¿ms
->
mš_key_size
 >…_£c_·¿ms->
max_key_size
)

561  
çl£
;

565 ià(
p_£c_·¿ms
->
mš_key_size
 < 7)

567  
çl£
;

571 ià(
p_£c_·¿ms
->
max_key_size
 > 16)

573  
çl£
;

577 ià(
p_£c_·¿ms
->
kdi¡_own
.
sign
 ||…_£c_·¿ms->
kdi¡_³”
.sign)

579  
çl£
;

583 ià(
p_£c_·¿ms
->
kdi¡_own
.
lšk
 ||…_£c_·¿ms->
kdi¡_³”
.link)

585  
çl£
;

589 ià(!
p_£c_·¿ms
->
bÚd
 && (…_£c_·¿ms->
kdi¡_own
.
’c


590 || 
p_£c_·¿ms
->
kdi¡_own
.
id


591 || 
p_£c_·¿ms
->
kdi¡_³”
.
’c


592 || 
p_£c_·¿ms
->
kdi¡_³”
.
id
))

594  
çl£
;

598 iàĞ
p_£c_·¿ms
->
bÚd


599 && !
p_£c_·¿ms
->
kdi¡_own
.
’c


600 && !
p_£c_·¿ms
->
kdi¡_own
.
id


601 && !
p_£c_·¿ms
->
kdi¡_³”
.
’c


602 && !
p_£c_·¿ms
->
kdi¡_³”
.
id
)

604  
çl£
;

607  
Œue
;

608 
	}
}

611 
»t_code_t
 
	$sm_£c_·¿ms_£t
(
bË_g­_£c_·¿ms_t
 * 
p_£c_·¿ms
)

613 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

615 ià(
p_£c_·¿ms
 =ğ
NULL
)

617 
mp_£c_·¿ms
 = 
NULL
;

618 
m_£c_·¿ms_£t
 = 
Œue
;

619  
NRF_SUCCESS
;

621 ià(
	`£c_·¿ms_v”ify
(
p_£c_·¿ms
))

623 
m_£c_·¿ms
 = *
p_£c_·¿ms
;

624 
mp_£c_·¿ms
 = &
m_£c_·¿ms
;

625 
m_£c_·¿ms_£t
 = 
Œue
;

626  
NRF_SUCCESS
;

630  
NRF_ERROR_INVALID_PARAM
;

632 
	}
}

635 
	$sm_cÚn_£c_cÚfig_»¶y
(
ušt16_t
 
cÚn_hªdË
, 
pm_cÚn_£c_cÚfig_t
 * 
p_cÚn_£c_cÚfig
)

637 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

638 
	`NRF_PM_DEBUG_CHECK
(
p_cÚn_£c_cÚfig
 !ğ
NULL
);

640 
	`smd_cÚn_£c_cÚfig_»¶y
(
cÚn_hªdË
, 
p_cÚn_£c_cÚfig
);

641 
	}
}

644 
»t_code_t
 
	$sm_£c_·¿ms_»¶y
(
ušt16_t
 
cÚn_hªdË
,

645 
bË_g­_£c_·¿ms_t
 * 
p_£c_·¿ms
,

646 cÚ¡ * 
p_cÚ‹xt
)

648 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

649 
	`VERIFY_PARAM_NOT_NULL
(
p_cÚ‹xt
);

651 
£c_·¿ms_»¶y_cÚ‹xt_t
 * 
p_£c_·¿ms_»¶y_cÚ‹xt
 = (£c_·¿ms_»¶y_cÚ‹xt_ˆ*)
p_cÚ‹xt
;

652 ià(
p_£c_·¿ms
 =ğ
NULL
)

655 
p_£c_·¿ms_»¶y_cÚ‹xt
->
p_£c_·¿ms
 = 
NULL
;

657 ià(
	`£c_·¿ms_v”ify
(
p_£c_·¿ms
))

660 
p_£c_·¿ms_»¶y_cÚ‹xt
->
£c_·¿ms_mem
 = *
p_£c_·¿ms
;

661 
p_£c_·¿ms_»¶y_cÚ‹xt
->
p_£c_·¿ms
 = &p_£c_·¿ms_»¶y_cÚ‹xt->
£c_·¿ms_mem
;

665  
NRF_ERROR_INVALID_PARAM
;

667 
p_£c_·¿ms_»¶y_cÚ‹xt
->
·¿ms_»¶y_ÿÎed
 = 
Œue
;

669  
NRF_SUCCESS
;

670 
	}
}

673 
»t_code_t
 
	$sm_Ësc_public_key_£t
(
bË_g­_Ësc_p256_pk_t
 * 
p_public_key
)

675 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

677 #ià
PM_LESC_ENABLED


678  
NRF_ERROR_FORBIDDEN
;

680 
m_p_public_key
 = 
p_public_key
;

682  
NRF_SUCCESS
;

684 
	}
}

687 
»t_code_t
 
	$sm_lšk_£cu»
(
ušt16_t
 
cÚn_hªdË
, 
boŞ
 
fÜû_»·œšg
)

689 
»t_code_t
 
»t
;

691 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

693 
»t
 = 
	`lšk_£cu»
(
cÚn_hªdË
, 
çl£
, 
fÜû_»·œšg
, false);

694  
»t
;

695 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\boards\boards.c

40 
	~"bßrds.h
"

41 #ià
defšed
(
BOARDS_WITH_USB_DFU_TRIGGER
è&& defšed(
BOARD_PCA10059
)

42 
	~"Äf_dfu_Œigg”_usb.h
"

44 
	~<¡dšt.h
>

45 
	~<¡dboŞ.h
>

47 #ià
LEDS_NUMBER
 > 0

48 cÚ¡ 
ušt8_t
 
	gm_bßrd_Ëd_li¡
[
LEDS_NUMBER
] = 
LEDS_LIST
;

51 #ià
BUTTONS_NUMBER
 > 0

52 cÚ¡ 
ušt8_t
 
	gm_bßrd_bŠ_li¡
[
BUTTONS_NUMBER
] = 
BUTTONS_LIST
;

55 #ià
LEDS_NUMBER
 > 0

56 
boŞ
 
	$b¥_bßrd_Ëd_¡©e_g‘
(
ušt32_t
 
Ëd_idx
)

58 
	`ASSERT
(
Ëd_idx
 < 
LEDS_NUMBER
);

59 
boŞ
 
pš_£t
 = 
	`Äf_gpio_pš_out_»ad
(
m_bßrd_Ëd_li¡
[
Ëd_idx
]è? 
Œue
 : 
çl£
;

60  (
pš_£t
 =ğ(
LEDS_ACTIVE_STATE
 ? 
Œue
 : 
çl£
));

61 
	}
}

63 
	$b¥_bßrd_Ëd_Ú
(
ušt32_t
 
Ëd_idx
)

65 
	`ASSERT
(
Ëd_idx
 < 
LEDS_NUMBER
);

66 
	`Äf_gpio_pš_wr™e
(
m_bßrd_Ëd_li¡
[
Ëd_idx
], 
LEDS_ACTIVE_STATE
 ? 1 : 0);

67 
	}
}

69 
	$b¥_bßrd_Ëd_off
(
ušt32_t
 
Ëd_idx
)

71 
	`ASSERT
(
Ëd_idx
 < 
LEDS_NUMBER
);

72 
	`Äf_gpio_pš_wr™e
(
m_bßrd_Ëd_li¡
[
Ëd_idx
], 
LEDS_ACTIVE_STATE
 ? 0 : 1);

73 
	}
}

75 
	$b¥_bßrd_Ëds_off
()

77 
ušt32_t
 
i
;

78 
i
 = 0; i < 
LEDS_NUMBER
; ++i)

80 
	`b¥_bßrd_Ëd_off
(
i
);

82 
	}
}

84 
	$b¥_bßrd_Ëds_Ú
()

86 
ušt32_t
 
i
;

87 
i
 = 0; i < 
LEDS_NUMBER
; ++i)

89 
	`b¥_bßrd_Ëd_Ú
(
i
);

91 
	}
}

93 
	$b¥_bßrd_Ëd_šv”t
(
ušt32_t
 
Ëd_idx
)

95 
	`ASSERT
(
Ëd_idx
 < 
LEDS_NUMBER
);

96 
	`Äf_gpio_pš_toggË
(
m_bßrd_Ëd_li¡
[
Ëd_idx
]);

97 
	}
}

99 #ià
defšed
(
BOARD_PCA10059
)

104 
	$gpio_ouut_vŞge_£tup
()

107 ià((
NRF_UICR
->
REGOUT0
 & 
UICR_REGOUT0_VOUT_Msk
) ==

108 (
UICR_REGOUT0_VOUT_DEFAULT
 << 
UICR_REGOUT0_VOUT_Pos
))

110 
NRF_NVMC
->
CONFIG
 = 
NVMC_CONFIG_WEN_W’
;

111 
NRF_NVMC
->
READY
 =ğ
NVMC_READY_READY_Busy
){}

113 
NRF_UICR
->
REGOUT0
 = (NRF_UICR->REGOUT0 & ~((
ušt32_t
)
UICR_REGOUT0_VOUT_Msk
)) |

114 (
UICR_REGOUT0_VOUT_3V0
 << 
UICR_REGOUT0_VOUT_Pos
);

116 
NRF_NVMC
->
CONFIG
 = 
NVMC_CONFIG_WEN_R’
;

117 
NRF_NVMC
->
READY
 =ğ
NVMC_READY_READY_Busy
){}

120 
	`NVIC_Sy¡emRe£t
();

122 
	}
}

125 
	$b¥_bßrd_Ëds_š™
()

127 #ià
	`defšed
(
BOARD_PCA10059
)

132 ià(
NRF_POWER
->
MAINREGSTATUS
 &

133 (
POWER_MAINREGSTATUS_MAINREGSTATUS_High
 << 
POWER_MAINREGSTATUS_MAINREGSTATUS_Pos
))

135 
	`gpio_ouut_vŞge_£tup
();

139 
ušt32_t
 
i
;

140 
i
 = 0; i < 
LEDS_NUMBER
; ++i)

142 
	`Äf_gpio_cfg_ouut
(
m_bßrd_Ëd_li¡
[
i
]);

144 
	`b¥_bßrd_Ëds_off
();

145 
	}
}

147 
ušt32_t
 
	$b¥_bßrd_Ëd_idx_to_pš
(
ušt32_t
 
Ëd_idx
)

149 
	`ASSERT
(
Ëd_idx
 < 
LEDS_NUMBER
);

150  
m_bßrd_Ëd_li¡
[
Ëd_idx
];

151 
	}
}

153 
ušt32_t
 
	$b¥_bßrd_pš_to_Ëd_idx
(
ušt32_t
 
pš_numb”
)

155 
ušt32_t
 
»t
 = 0xFFFFFFFF;

156 
ušt32_t
 
i
;

157 
i
 = 0; i < 
LEDS_NUMBER
; ++i)

159 ià(
m_bßrd_Ëd_li¡
[
i
] =ğ
pš_numb”
)

161 
»t
 = 
i
;

165  
»t
;

166 
	}
}

169 #ià
BUTTONS_NUMBER
 > 0

170 
boŞ
 
	$b¥_bßrd_bu‰Ú_¡©e_g‘
(
ušt32_t
 
bu‰Ú_idx
)

172 
	`ASSERT
(
bu‰Ú_idx
 < 
BUTTONS_NUMBER
);

173 
boŞ
 
pš_£t
 = 
	`Äf_gpio_pš_»ad
(
m_bßrd_bŠ_li¡
[
bu‰Ú_idx
]è? 
Œue
 : 
çl£
;

174  (
pš_£t
 =ğ(
BUTTONS_ACTIVE_STATE
 ? 
Œue
 : 
çl£
));

175 
	}
}

177 
	$b¥_bßrd_bu‰Ús_š™
()

179 
ušt32_t
 
i
;

180 
i
 = 0; i < 
BUTTONS_NUMBER
; ++i)

182 
	`Äf_gpio_cfg_šput
(
m_bßrd_bŠ_li¡
[
i
], 
BUTTON_PULL
);

184 
	}
}

186 
ušt32_t
 
	$b¥_bßrd_pš_to_bu‰Ú_idx
(
ušt32_t
 
pš_numb”
)

188 
ušt32_t
 
i
;

189 
ušt32_t
 
»t
 = 0xFFFFFFFF;

190 
i
 = 0; i < 
BUTTONS_NUMBER
; ++i)

192 ià(
m_bßrd_bŠ_li¡
[
i
] =ğ
pš_numb”
)

194 
»t
 = 
i
;

198  
»t
;

199 
	}
}

201 
ušt32_t
 
	$b¥_bßrd_bu‰Ú_idx_to_pš
(
ušt32_t
 
bu‰Ú_idx
)

203 
	`ASSERT
(
bu‰Ú_idx
 < 
BUTTONS_NUMBER
);

204  
m_bßrd_bŠ_li¡
[
bu‰Ú_idx
];

205 
	}
}

209 
	$b¥_bßrd_š™
(
ušt32_t
 
š™_æags
)

211 #ià
	`defšed
(
BOARDS_WITH_USB_DFU_TRIGGER
è&& defšed(
BOARD_PCA10059
)

212 (è
	`Äf_dfu_Œigg”_usb_š™
();

215 #ià
LEDS_NUMBER
 > 0

216 ià(
š™_æags
 & 
BSP_INIT_LEDS
)

218 
	`b¥_bßrd_Ëds_š™
();

222 #ià
BUTTONS_NUMBER
 > 0

223 ià(
š™_æags
 & 
BSP_INIT_BUTTONS
)

225 
	`b¥_bßrd_bu‰Ús_š™
();

228 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\atomic\nrf_atomic.c

40 
	~"Äf_©omic.h
"

42 #iâdeà
NRF_ATOMIC_USE_BUILD_IN


43 #ià(
defšed
(
__GNUC__
è&& defšed(
WIN32
))

44 
	#NRF_ATOMIC_USE_BUILD_IN
 1

	)

46 
	#NRF_ATOMIC_USE_BUILD_IN
 0

	)

50 #ià((
__CORTEX_M
 >ğ0x03Uè|| (
__CORTEX_SC
 >= 300U))

51 
	#STREX_LDREX_PRESENT


	)

53 
	~"­p_ut_¶©fÜm.h
"

57 #ià(
NRF_ATOMIC_USE_BUILD_IN
 =ğ0è&& 
defšed
(
STREX_LDREX_PRESENT
)

58 
	~"Äf_©omic_š‹º®.h
"

61 
ušt32_t
 
	$Äf_©omic_u32_ãtch_¡Üe
(
Äf_©omic_u32_t
 * 
p_d©a
, 
ušt32_t
 
v®ue
)

63 #ià
NRF_ATOMIC_USE_BUILD_IN


64  
	`__©omic_exchªge_n
(
p_d©a
, 
v®ue
, 
__ATOMIC_SEQ_CST
);

66 #–ià
	`defšed
(
STREX_LDREX_PRESENT
)

67 
ušt32_t
 
Şd_v®
;

68 
ušt32_t
 
Ãw_v®
;

69 
	`NRF_ATOMIC_OP
(
mov
, 
Şd_v®
, 
Ãw_v®
, 
p_d©a
, 
v®ue
);

71 
	`UNUSED_PARAMETER
(
Şd_v®
);

72 
	`UNUSED_PARAMETER
(
Ãw_v®
);

73  
Şd_v®
;

75 
	`CRITICAL_REGION_ENTER
();

76 
ušt32_t
 
Şd_v®
 = *
p_d©a
;

77 *
p_d©a
 = 
v®ue
;

78 
	`CRITICAL_REGION_EXIT
();

79  
Şd_v®
;

81 
	}
}

83 
ušt32_t
 
	$Äf_©omic_u32_¡Üe
(
Äf_©omic_u32_t
 * 
p_d©a
, 
ušt32_t
 
v®ue
)

85 #ià
NRF_ATOMIC_USE_BUILD_IN


86 
	`__©omic_¡Üe_n
(
p_d©a
, 
v®ue
, 
__ATOMIC_SEQ_CST
);

87  
v®ue
;

88 #–ià
	`defšed
(
STREX_LDREX_PRESENT
)

89 
ušt32_t
 
Şd_v®
;

90 
ušt32_t
 
Ãw_v®
;

92 
	`NRF_ATOMIC_OP
(
mov
, 
Şd_v®
, 
Ãw_v®
, 
p_d©a
, 
v®ue
);

94 
	`UNUSED_PARAMETER
(
Şd_v®
);

95 
	`UNUSED_PARAMETER
(
Ãw_v®
);

96  
Ãw_v®
;

98 
	`CRITICAL_REGION_ENTER
();

99 *
p_d©a
 = 
v®ue
;

100 
	`CRITICAL_REGION_EXIT
();

101  
v®ue
;

103 
	}
}

105 
ušt32_t
 
	$Äf_©omic_u32_ãtch_Ü
(
Äf_©omic_u32_t
 * 
p_d©a
, 
ušt32_t
 
v®ue
)

107 #ià
NRF_ATOMIC_USE_BUILD_IN


108  
	`__©omic_ãtch_Ü
(
p_d©a
, 
v®ue
, 
__ATOMIC_SEQ_CST
);

109 #–ià
	`defšed
(
STREX_LDREX_PRESENT
)

110 
ušt32_t
 
Şd_v®
;

111 
ušt32_t
 
Ãw_v®
;

113 
	`NRF_ATOMIC_OP
(
Ür
, 
Şd_v®
, 
Ãw_v®
, 
p_d©a
, 
v®ue
);

114 
	`UNUSED_PARAMETER
(
Şd_v®
);

115 
	`UNUSED_PARAMETER
(
Ãw_v®
);

116  
Şd_v®
;

118 
	`CRITICAL_REGION_ENTER
();

119 
ušt32_t
 
Şd_v®
 = *
p_d©a
;

120 *
p_d©a
 |ğ
v®ue
;

121 
	`CRITICAL_REGION_EXIT
();

122  
Şd_v®
;

124 
	}
}

126 
ušt32_t
 
	$Äf_©omic_u32_Ü
(
Äf_©omic_u32_t
 * 
p_d©a
, 
ušt32_t
 
v®ue
)

128 #ià
NRF_ATOMIC_USE_BUILD_IN


129  
	`__©omic_Ü_ãtch
(
p_d©a
, 
v®ue
, 
__ATOMIC_SEQ_CST
);

130 #–ià
	`defšed
(
STREX_LDREX_PRESENT
)

131 
ušt32_t
 
Şd_v®
;

132 
ušt32_t
 
Ãw_v®
;

134 
	`NRF_ATOMIC_OP
(
Ür
, 
Şd_v®
, 
Ãw_v®
, 
p_d©a
, 
v®ue
);

135 
	`UNUSED_PARAMETER
(
Şd_v®
);

136 
	`UNUSED_PARAMETER
(
Ãw_v®
);

137  
Ãw_v®
;

139 
	`CRITICAL_REGION_ENTER
();

140 *
p_d©a
 |ğ
v®ue
;

141 
ušt32_t
 
Ãw_v®ue
 = *
p_d©a
;

142 
	`CRITICAL_REGION_EXIT
();

143  
Ãw_v®ue
;

145 
	}
}

147 
ušt32_t
 
	$Äf_©omic_u32_ãtch_ªd
(
Äf_©omic_u32_t
 * 
p_d©a
, 
ušt32_t
 
v®ue
)

149 #ià
NRF_ATOMIC_USE_BUILD_IN


150  
	`__©omic_ãtch_ªd
(
p_d©a
, 
v®ue
, 
__ATOMIC_SEQ_CST
);

151 #–ià
	`defšed
(
STREX_LDREX_PRESENT
)

152 
ušt32_t
 
Şd_v®
;

153 
ušt32_t
 
Ãw_v®
;

155 
	`NRF_ATOMIC_OP
(
ªd
, 
Şd_v®
, 
Ãw_v®
, 
p_d©a
, 
v®ue
);

156 
	`UNUSED_PARAMETER
(
Şd_v®
);

157 
	`UNUSED_PARAMETER
(
Ãw_v®
);

158  
Şd_v®
;

160 
	`CRITICAL_REGION_ENTER
();

161 
ušt32_t
 
Şd_v®
 = *
p_d©a
;

162 *
p_d©a
 &ğ
v®ue
;

163 
	`CRITICAL_REGION_EXIT
();

164  
Şd_v®
;

166 
	}
}

168 
ušt32_t
 
	$Äf_©omic_u32_ªd
(
Äf_©omic_u32_t
 * 
p_d©a
, 
ušt32_t
 
v®ue
)

170 #ià
NRF_ATOMIC_USE_BUILD_IN


171  
	`__©omic_ªd_ãtch
(
p_d©a
, 
v®ue
, 
__ATOMIC_SEQ_CST
);

172 #–ià
	`defšed
(
STREX_LDREX_PRESENT
)

173 
ušt32_t
 
Şd_v®
;

174 
ušt32_t
 
Ãw_v®
;

176 
	`NRF_ATOMIC_OP
(
ªd
, 
Şd_v®
, 
Ãw_v®
, 
p_d©a
, 
v®ue
);

177 
	`UNUSED_PARAMETER
(
Şd_v®
);

178 
	`UNUSED_PARAMETER
(
Ãw_v®
);

179  
Ãw_v®
;

181 
	`CRITICAL_REGION_ENTER
();

182 *
p_d©a
 &ğ
v®ue
;

183 
ušt32_t
 
Ãw_v®ue
 = *
p_d©a
;

184 
	`CRITICAL_REGION_EXIT
();

185  
Ãw_v®ue
;

187 
	}
}

189 
ušt32_t
 
	$Äf_©omic_u32_ãtch_xÜ
(
Äf_©omic_u32_t
 * 
p_d©a
, 
ušt32_t
 
v®ue
)

191 #ià
NRF_ATOMIC_USE_BUILD_IN


192  
	`__©omic_ãtch_xÜ
(
p_d©a
, 
v®ue
, 
__ATOMIC_SEQ_CST
);

193 #–ià
	`defšed
(
STREX_LDREX_PRESENT
)

194 
ušt32_t
 
Şd_v®
;

195 
ušt32_t
 
Ãw_v®
;

197 
	`NRF_ATOMIC_OP
(
eÜ
, 
Şd_v®
, 
Ãw_v®
, 
p_d©a
, 
v®ue
);

198 
	`UNUSED_PARAMETER
(
Şd_v®
);

199 
	`UNUSED_PARAMETER
(
Ãw_v®
);

200  
Şd_v®
;

202 
	`CRITICAL_REGION_ENTER
();

203 
ušt32_t
 
Şd_v®
 = *
p_d©a
;

204 *
p_d©a
 ^ğ
v®ue
;

205 
	`CRITICAL_REGION_EXIT
();

206  
Şd_v®
;

208 
	}
}

210 
ušt32_t
 
	$Äf_©omic_u32_xÜ
(
Äf_©omic_u32_t
 * 
p_d©a
, 
ušt32_t
 
v®ue
)

212 #ià
NRF_ATOMIC_USE_BUILD_IN


213  
	`__©omic_xÜ_ãtch
(
p_d©a
, 
v®ue
, 
__ATOMIC_SEQ_CST
);

214 #–ià
	`defšed
(
STREX_LDREX_PRESENT
)

215 
ušt32_t
 
Şd_v®
;

216 
ušt32_t
 
Ãw_v®
;

218 
	`NRF_ATOMIC_OP
(
eÜ
, 
Şd_v®
, 
Ãw_v®
, 
p_d©a
, 
v®ue
);

219 
	`UNUSED_PARAMETER
(
Şd_v®
);

220 
	`UNUSED_PARAMETER
(
Ãw_v®
);

221  
Ãw_v®
;

223 
	`CRITICAL_REGION_ENTER
();

224 *
p_d©a
 ^ğ
v®ue
;

225 
ušt32_t
 
Ãw_v®ue
 = *
p_d©a
;

226 
	`CRITICAL_REGION_EXIT
();

227  
Ãw_v®ue
;

229 
	}
}

231 
ušt32_t
 
	$Äf_©omic_u32_ãtch_add
(
Äf_©omic_u32_t
 * 
p_d©a
, 
ušt32_t
 
v®ue
)

233 #ià
NRF_ATOMIC_USE_BUILD_IN


234  
	`__©omic_ãtch_add
(
p_d©a
, 
v®ue
, 
__ATOMIC_SEQ_CST
);

235 #–ià
	`defšed
(
STREX_LDREX_PRESENT
)

236 
ušt32_t
 
Şd_v®
;

237 
ušt32_t
 
Ãw_v®
;

239 
	`NRF_ATOMIC_OP
(
add
, 
Şd_v®
, 
Ãw_v®
, 
p_d©a
, 
v®ue
);

240 
	`UNUSED_PARAMETER
(
Şd_v®
);

241 
	`UNUSED_PARAMETER
(
Ãw_v®
);

242  
Şd_v®
;

244 
	`CRITICAL_REGION_ENTER
();

245 
ušt32_t
 
Şd_v®
 = *
p_d©a
;

246 *
p_d©a
 +ğ
v®ue
;

247 
	`CRITICAL_REGION_EXIT
();

248  
Şd_v®
;

250 
	}
}

252 
ušt32_t
 
	$Äf_©omic_u32_add
(
Äf_©omic_u32_t
 * 
p_d©a
, 
ušt32_t
 
v®ue
)

254 #ià
NRF_ATOMIC_USE_BUILD_IN


255  
	`__©omic_add_ãtch
(
p_d©a
, 
v®ue
, 
__ATOMIC_SEQ_CST
);

256 #–ià
	`defšed
(
STREX_LDREX_PRESENT
)

257 
ušt32_t
 
Şd_v®
;

258 
ušt32_t
 
Ãw_v®
;

260 
	`NRF_ATOMIC_OP
(
add
, 
Şd_v®
, 
Ãw_v®
, 
p_d©a
, 
v®ue
);

261 
	`UNUSED_PARAMETER
(
Şd_v®
);

262 
	`UNUSED_PARAMETER
(
Ãw_v®
);

263  
Ãw_v®
;

265 
	`CRITICAL_REGION_ENTER
();

266 *
p_d©a
 +ğ
v®ue
;

267 
ušt32_t
 
Ãw_v®ue
 = *
p_d©a
;

268 
	`CRITICAL_REGION_EXIT
();

269  
Ãw_v®ue
;

271 
	}
}

273 
ušt32_t
 
	$Äf_©omic_u32_ãtch_sub
(
Äf_©omic_u32_t
 * 
p_d©a
, 
ušt32_t
 
v®ue
)

275 #ià
NRF_ATOMIC_USE_BUILD_IN


276  
	`__©omic_ãtch_sub
(
p_d©a
, 
v®ue
, 
__ATOMIC_SEQ_CST
);

277 #–ià
	`defšed
(
STREX_LDREX_PRESENT
)

278 
ušt32_t
 
Şd_v®
;

279 
ušt32_t
 
Ãw_v®
;

281 
	`NRF_ATOMIC_OP
(
sub
, 
Şd_v®
, 
Ãw_v®
, 
p_d©a
, 
v®ue
);

282 
	`UNUSED_PARAMETER
(
Şd_v®
);

283 
	`UNUSED_PARAMETER
(
Ãw_v®
);

284  
Şd_v®
;

286 
	`CRITICAL_REGION_ENTER
();

287 
ušt32_t
 
Şd_v®
 = *
p_d©a
;

288 *
p_d©a
 -ğ
v®ue
;

289 
	`CRITICAL_REGION_EXIT
();

290  
Şd_v®
;

292 
	}
}

294 
ušt32_t
 
	$Äf_©omic_u32_sub
(
Äf_©omic_u32_t
 * 
p_d©a
, 
ušt32_t
 
v®ue
)

296 #ià
NRF_ATOMIC_USE_BUILD_IN


297  
	`__©omic_sub_ãtch
(
p_d©a
, 
v®ue
, 
__ATOMIC_SEQ_CST
);

298 #–ià
	`defšed
(
STREX_LDREX_PRESENT
)

299 
ušt32_t
 
Şd_v®
;

300 
ušt32_t
 
Ãw_v®
;

302 
	`NRF_ATOMIC_OP
(
sub
, 
Şd_v®
, 
Ãw_v®
, 
p_d©a
, 
v®ue
);

303 
	`UNUSED_PARAMETER
(
Şd_v®
);

304 
	`UNUSED_PARAMETER
(
Ãw_v®
);

305  
Ãw_v®
;

307 
	`CRITICAL_REGION_ENTER
();

308 *
p_d©a
 -ğ
v®ue
;

309 
ušt32_t
 
Ãw_v®ue
 = *
p_d©a
;

310 
	`CRITICAL_REGION_EXIT
();

311  
Ãw_v®ue
;

313 
	}
}

315 
boŞ
 
	$Äf_©omic_u32_cmp_exch
(
Äf_©omic_u32_t
 * 
p_d©a
,

316 
ušt32_t
 * 
p_ex³ùed
,

317 
ušt32_t
 
desœed
)

319 #ià
NRF_ATOMIC_USE_BUILD_IN


320  
	`__©omic_com·»_exchªge
(
p_d©a
,

321 
p_ex³ùed
,

322 &
desœed
,

324 
__ATOMIC_SEQ_CST
,

325 
__ATOMIC_SEQ_CST
);

326 #–ià
	`defšed
(
STREX_LDREX_PRESENT
)

327  
	`Äf_©omic_š‹º®_cmp_exch
(
p_d©a
, 
p_ex³ùed
, 
desœed
);

329 
boŞ
 
»t
;

330 
	`CRITICAL_REGION_ENTER
();

331 ià(*
p_d©a
 =ğ*
p_ex³ùed
)

333 *
p_d©a
 = 
desœed
;

334 
»t
 = 
Œue
;

338 *
p_ex³ùed
 = *
p_d©a
;

339 
»t
 = 
çl£
;

341 
	`CRITICAL_REGION_EXIT
();

342  
»t
;

344 
	}
}

346 
ušt32_t
 
	$Äf_©omic_u32_ãtch_sub_hs
(
Äf_©omic_u32_t
 * 
p_d©a
, 
ušt32_t
 
v®ue
)

348 #ià
NRF_ATOMIC_USE_BUILD_IN


349 
ušt32_t
 
ex³ùed
 = *
p_d©a
;

350 
ušt32_t
 
Ãw_v®
;

351 
boŞ
 
sucûss
;

355 ià(
ex³ùed
 >ğ
v®ue
)

357 
Ãw_v®
 = 
ex³ùed
 - 
v®ue
;

361 
Ãw_v®
 = 
ex³ùed
;

363 
sucûss
 = 
	`__©omic_com·»_exchªge
(
p_d©a
,

364 &
ex³ùed
,

365 &
Ãw_v®
,

367 
__ATOMIC_SEQ_CST
,

368 
__ATOMIC_SEQ_CST
);

369 } !
sucûss
);

370  
ex³ùed
;

371 #–ià
	`defšed
(
STREX_LDREX_PRESENT
)

372 
ušt32_t
 
Şd_v®
;

373 
ušt32_t
 
Ãw_v®
;

375 
	`NRF_ATOMIC_OP
(
sub_hs
, 
Şd_v®
, 
Ãw_v®
, 
p_d©a
, 
v®ue
);

376 
	`UNUSED_PARAMETER
(
Şd_v®
);

377 
	`UNUSED_PARAMETER
(
Ãw_v®
);

378  
Şd_v®
;

380 
	`CRITICAL_REGION_ENTER
();

381 
ušt32_t
 
Şd_v®
 = *
p_d©a
;

382 *
p_d©a
 -ğ
v®ue
;

383 
	`CRITICAL_REGION_EXIT
();

384  
Şd_v®
;

386 
	}
}

388 
ušt32_t
 
	$Äf_©omic_u32_sub_hs
(
Äf_©omic_u32_t
 * 
p_d©a
, 
ušt32_t
 
v®ue
)

390 #ià
NRF_ATOMIC_USE_BUILD_IN


391 
ušt32_t
 
ex³ùed
 = *
p_d©a
;

392 
ušt32_t
 
Ãw_v®
;

393 
boŞ
 
sucûss
;

397 ià(
ex³ùed
 >ğ
v®ue
)

399 
Ãw_v®
 = 
ex³ùed
 - 
v®ue
;

403 
Ãw_v®
 = 
ex³ùed
;

405 
sucûss
 = 
	`__©omic_com·»_exchªge
(
p_d©a
,

406 &
ex³ùed
,

407 &
Ãw_v®
,

409 
__ATOMIC_SEQ_CST
,

410 
__ATOMIC_SEQ_CST
);

411 } !
sucûss
);

412  
Ãw_v®
;

413 #–ià
	`defšed
(
STREX_LDREX_PRESENT
)

414 
ušt32_t
 
Şd_v®
;

415 
ušt32_t
 
Ãw_v®
;

417 
	`NRF_ATOMIC_OP
(
sub_hs
, 
Şd_v®
, 
Ãw_v®
, 
p_d©a
, 
v®ue
);

418 
	`UNUSED_PARAMETER
(
Şd_v®
);

419 
	`UNUSED_PARAMETER
(
Ãw_v®
);

420  
Ãw_v®
;

422 
	`CRITICAL_REGION_ENTER
();

423 *
p_d©a
 -ğ
v®ue
;

424 
ušt32_t
 
Ãw_v®ue
 = *
p_d©a
;

425 
	`CRITICAL_REGION_EXIT
();

426  
Ãw_v®ue
;

428 
	}
}

430 
ušt32_t
 
	$Äf_©omic_æag_£t_ãtch
(
Äf_©omic_æag_t
 * 
p_d©a
)

432  
	`Äf_©omic_u32_ãtch_Ü
(
p_d©a
, 1);

433 
	}
}

435 
ušt32_t
 
	$Äf_©omic_æag_£t
(
Äf_©omic_æag_t
 * 
p_d©a
)

437  
	`Äf_©omic_u32_Ü
(
p_d©a
, 1);

438 
	}
}

440 
ušt32_t
 
	$Äf_©omic_æag_ş—r_ãtch
(
Äf_©omic_æag_t
 * 
p_d©a
)

442  
	`Äf_©omic_u32_ãtch_ªd
(
p_d©a
, 0);

443 
	}
}

445 
ušt32_t
 
	$Äf_©omic_æag_ş—r
(
Äf_©omic_æag_t
 * 
p_d©a
)

447  
	`Äf_©omic_u32_ªd
(
p_d©a
, 0);

448 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\atomic_fifo\nrf_atfifo.c

41 
	~<¡ršg.h
>

42 
	~<¡dšt.h
>

43 
	~<¡dboŞ.h
>

44 
	~"­p_ut.h
"

45 
	~"Äf_©fifo.h
"

46 
	~"Äf_©fifo_š‹º®.h
"

48 #ià
NRF_ATFIFO_CONFIG_LOG_ENABLED


49 
	#NRF_LOG_LEVEL
 
NRF_ATFIFO_CONFIG_LOG_LEVEL


	)

50 
	#NRF_LOG_INIT_FILTER_LEVEL
 
NRF_ATFIFO_CONFIG_LOG_INIT_FILTER_LEVEL


	)

51 
	#NRF_LOG_INFO_COLOR
 
NRF_ATFIFO_CONFIG_INFO_COLOR


	)

52 
	#NRF_LOG_DEBUG_COLOR
 
NRF_ATFIFO_CONFIG_DEBUG_COLOR


	)

54 
	#NRF_LOG_LEVEL
 0

	)

56 
	~"Äf_log.h
"

59 
STATIC_ASSERT
((
Äf_©fifo_po¡ag_t
è=ğ(
ušt32_t
));

62 
»t_code_t
 
	$Äf_©fifo_š™
(
Äf_©fifo_t
 * cÚ¡ 
p_fifo
, * 
p_buf
, 
ušt16_t
 
buf_size
, ušt16_ˆ
™em_size
)

64 ià(
NULL
 =ğ
p_buf
)

66 
	`NRF_LOG_INST_ERROR
(
p_fifo
->
p_log
, "Initialization failed.…_buf == NULL");

67  
NRF_ERROR_NULL
;

69 ià(0 !ğ(
buf_size
 % 
™em_size
))

71 
	`NRF_LOG_INST_ERROR
(
p_fifo
->
p_log
, "Initialization failed. Buf_size‚ot multiple of item_size");

72  
NRF_ERROR_INVALID_LENGTH
;

75 
p_fifo
->
p_buf
 =…_buf;

76 
p_fifo
->

.
g
 = 0;

77 
p_fifo
->
h—d
.
g
 = 0;

78 
p_fifo
->
buf_size
 = buf_size;

79 
p_fifo
->
™em_size
 = item_size;

81 
	`NRF_LOG_INST_INFO
(
p_fifo
->
p_log
, "Initialized.");

82  
NRF_SUCCESS
;

83 
	}
}

86 
»t_code_t
 
	$Äf_©fifo_ş—r
(
Äf_©fifo_t
 * cÚ¡ 
p_fifo
)

88 
boŞ
 
»Ëa£d
 = 
	`Äf_©fifo_¥aû_ş—r
(
p_fifo
);

89 
	`NRF_LOG_INST_INFO
(
p_fifo
->
p_log
, "CË¬ed„esuÉ:%s", 
»Ëa£d
 ? "success" : "busy");

90  
»Ëa£d
 ? 
NRF_SUCCESS
 : 
NRF_ERROR_BUSY
;

91 
	}
}

94 
»t_code_t
 
	$Äf_©fifo_®loc_put
(
Äf_©fifo_t
 * cÚ¡ 
p_fifo
, cÚ¡ * 
p_v¬
, 
size_t
 
size
, 
boŞ
 * cÚ¡ 
p_visibË
)

96 
Äf_©fifo_™em_put_t
 
cÚ‹xt
;

97 
boŞ
 
visibË
;

98 * 
p_d©a
 = 
	`Äf_©fifo_™em_®loc
(
p_fifo
, &
cÚ‹xt
);

99 ià(
NULL
 =ğ
p_d©a
)

101 
	`NRF_LOG_INST_WARNING
(
p_fifo
->
p_log
, "Cİyšg iÀ–em’ˆ(0x%08Xèçed -‚Ø¥aû.", 
p_v¬
);

102  
NRF_ERROR_NO_MEM
;

105 
	`memıy
(
p_d©a
, 
p_v¬
, 
size
);

107 
visibË
 = 
	`Äf_©fifo_™em_put
(
p_fifo
, &
cÚ‹xt
);

108 ià(
NULL
 !ğ
p_visibË
)

110 *
p_visibË
 = 
visibË
;

112 
	`NRF_LOG_INST_DEBUG
(
p_fifo
->
p_log
, "EËm’ˆ(0x%08Xècİ›d in.", 
p_v¬
);

113  
NRF_SUCCESS
;

114 
	}
}

117 * 
	$Äf_©fifo_™em_®loc
(
Äf_©fifo_t
 * cÚ¡ 
p_fifo
, 
Äf_©fifo_™em_put_t
 * 
p_cÚ‹xt
)

119 ià(
	`Äf_©fifo_w¥aû_»q
(
p_fifo
, &(
p_cÚ‹xt
->
Ï¡_
)))

121 * 
p_™em
 = ((
ušt8_t
*)(
p_fifo
->
p_buf
)è+ 
p_cÚ‹xt
->
Ï¡_
.
pos
.
wr
;

122 
	`NRF_LOG_INST_DEBUG
(
p_fifo
->
p_log
, "AÎoÿ‹dƒËm’ˆ(0x%08X).", 
p_™em
);

123  
p_™em
;

125 
	`NRF_LOG_INST_WARNING
(
p_fifo
->
p_log
, "Allocation failed -‚o space.");

126  
NULL
;

127 
	}
}

130 
boŞ
 
	$Äf_©fifo_™em_put
(
Äf_©fifo_t
 * cÚ¡ 
p_fifo
, 
Äf_©fifo_™em_put_t
 * 
p_cÚ‹xt
)

132 ià((
p_cÚ‹xt
->
Ï¡_
.
pos
.
wr
è=ğÕ_cÚ‹xt->Ï¡_.pos.
rd
))

134 
	`NRF_LOG_INST_DEBUG
(
p_fifo
->
p_log
, "Put (uninterrupted)");

135 
	`Äf_©fifo_w¥aû_şo£
(
p_fifo
);

136  
Œue
;

138 
	`NRF_LOG_INST_DEBUG
(
p_fifo
->
p_log
, "Put (interrupted!)");

139  
çl£
;

140 
	}
}

143 
»t_code_t
 
	$Äf_©fifo_g‘_ä“
(
Äf_©fifo_t
 * cÚ¡ 
p_fifo
, * cÚ¡ 
p_v¬
, 
size_t
 
size
, 
boŞ
 * 
p_»Ëa£d
)

145 
Äf_©fifo_™em_g‘_t
 
cÚ‹xt
;

146 
boŞ
 
»Ëa£d
;

147 cÚ¡ * 
p_s
 = 
	`Äf_©fifo_™em_g‘
(
p_fifo
, &
cÚ‹xt
);

148 ià(
NULL
 =ğ
p_s
)

150 
	`NRF_LOG_INST_WARNING
(
p_fifo
->
p_log
, "Copying out failed -‚o item inhe FIFO.");

151  
NRF_ERROR_NOT_FOUND
;

154 
	`memıy
(
p_v¬
, 
p_s
, 
size
);

156 
»Ëa£d
 = 
	`Äf_©fifo_™em_ä“
(
p_fifo
, &
cÚ‹xt
);

157 ià(
NULL
 !ğ
p_»Ëa£d
)

159 *
p_»Ëa£d
 = 
»Ëa£d
;

161 
	`NRF_LOG_INST_DEBUG
(
p_fifo
->
p_log
, "EËm’ˆ(0x%08Xècİ›d out.", 
p_v¬
);

162  
NRF_SUCCESS
;

163 
	}
}

166 * 
	$Äf_©fifo_™em_g‘
(
Äf_©fifo_t
 * cÚ¡ 
p_fifo
, 
Äf_©fifo_™em_g‘_t
 * 
p_cÚ‹xt
)

168 ià(
	`Äf_©fifo_r¥aû_»q
(
p_fifo
, &(
p_cÚ‹xt
->
Ï¡_h—d
)))

170 * 
p_™em
 = ((
ušt8_t
*)(
p_fifo
->
p_buf
)è+ 
p_cÚ‹xt
->
Ï¡_h—d
.
pos
.
rd
;

171 
	`NRF_LOG_INST_DEBUG
(
p_fifo
->
p_log
, "G‘ƒËm’t: 0x%08X", 
p_™em
);

172  
p_™em
;

174 
	`NRF_LOG_INST_WARNING
(
p_fifo
->
p_log
, "Get failed -‚o item inhe FIFO.");

175  
NULL
;

176 
	}
}

179 
boŞ
 
	$Äf_©fifo_™em_ä“
(
Äf_©fifo_t
 * cÚ¡ 
p_fifo
, 
Äf_©fifo_™em_g‘_t
 * 
p_cÚ‹xt
)

181 ià((
p_cÚ‹xt
->
Ï¡_h—d
.
pos
.
wr
è=ğÕ_cÚ‹xt->Ï¡_h—d.pos.
rd
))

183 
	`NRF_LOG_INST_DEBUG
(
p_fifo
->
p_log
, "Free (uninterrupted)");

184 
	`Äf_©fifo_r¥aû_şo£
(
p_fifo
);

185  
Œue
;

187 
	`NRF_LOG_INST_DEBUG
(
p_fifo
->
p_log
, "Free (interrupted)");

188  
çl£
;

189 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\atomic_flags\nrf_atflags.c

41 
	~"Äf.h
"

42 
	~"Äf_©omic.h
"

43 
	~"Äf_©æags.h
"

44 
	~"sdk_commÚ.h
"

54 
	#FLAG_BASE
(
æag_šdex
è((æag_šdexè/ 
NRF_ATFLAGS_FLAGS_PER_ELEMENT
)

	)

62 
	#FLAG_MASK
(
æag_šdex
è(1UL << ((æag_šdexè% 
NRF_ATFLAGS_FLAGS_PER_ELEMENT
))

	)

65 
	$Äf_©æags_£t
(
Äf_©æags_t
 * 
p_æags
, 
ušt32_t
 
æag_šdex
)

67 
ušt32_t
 
Ãw_v®ue
 = 
	`Äf_©omic_u32_Ü
(&
p_æags
[
	`FLAG_BASE
(
æag_šdex
)], 
	`FLAG_MASK
(flag_index));

68 
	`UNUSED_RETURN_VALUE
(
Ãw_v®ue
);

69 
	}
}

72 
boŞ
 
	$Äf_©æags_ãtch_£t
(
Äf_©æags_t
 * 
p_æags
, 
ušt32_t
 
æag_šdex
)

74  (
	`Äf_©omic_u32_ãtch_Ü
(&
p_æags
[
	`FLAG_BASE
(
æag_šdex
)], 
	`FLAG_MASK
(flag_index))

75 & 
	`FLAG_MASK
(
æag_šdex
)) != 0;

76 
	}
}

79 
	$Äf_©æags_ş—r
(
Äf_©æags_t
 * 
p_æags
, 
ušt32_t
 
æag_šdex
)

81 
ušt32_t
 
Ãw_v®ue
 = 
	`Äf_©omic_u32_ªd
(&
p_æags
[
	`FLAG_BASE
(
æag_šdex
)], ~
	`FLAG_MASK
(flag_index));

82 
	`UNUSED_RETURN_VALUE
(
Ãw_v®ue
);

83 
	}
}

86 
boŞ
 
	$Äf_©æags_ãtch_ş—r
(
Äf_©æags_t
 * 
p_æags
, 
ušt32_t
 
æag_šdex
)

88  (
	`Äf_©omic_u32_ãtch_ªd
(&
p_æags
[
	`FLAG_BASE
(
æag_šdex
)], ~
	`FLAG_MASK
(flag_index))

89 & 
	`FLAG_MASK
(
æag_šdex
)) != 0;

90 
	}
}

93 
boŞ
 
	$Äf_©æags_g‘
(
Äf_©æags_t
 cÚ¡ * 
p_æags
, 
ušt32_t
 
æag_šdex
)

95  (
p_æags
[
	`FLAG_BASE
(
æag_šdex
)] & 
	`FLAG_MASK
(flag_index)) != 0;

96 
	}
}

99 
ušt32_t
 
	$Äf_©æags_š™
(
Äf_©æags_t
 * 
p_æags
, 
ušt32_t
 
æags_¬¿y_Ën
, ušt32_ˆ
æag_couÁ
)

101 
ušt32_t
 
»quœed_æags_¬¿y_Ën
 = 
	`NRF_ATFLAGS_ARRAY_LEN
(
æag_couÁ
);

103 ià(
»quœed_æags_¬¿y_Ën
 <ğ
æags_¬¿y_Ën
)

105 
ušt32_t
 
i
 = 0; i < 
»quœed_æags_¬¿y_Ën
; i++)

107 
p_æags
[
i
] = 0;

109  
»quœed_æags_¬¿y_Ën
;

112 
	}
}

114 
ušt32_t
 
	$Äf_©æags_fšd_ªd_£t_æag
(
Äf_©æags_t
 * 
p_æags
, 
ušt32_t
 
æag_couÁ
)

116 
ušt32_t
 
i
 = 0; i < 
	`NRF_ATFLAGS_ARRAY_LEN
(
æag_couÁ
); i++)

119 
ušt32_t
 
fœ¡_z”o
 = 
	`__CLZ
(
	`__RBIT
(~
p_æags
[
i
]));

120 
fœ¡_z”o
 < 32)

122 
ušt32_t
 
fœ¡_z”o_glob®
 = 
fœ¡_z”o
 + (
i
 * 32);

123 ià(
fœ¡_z”o_glob®
 >ğ
æag_couÁ
)

127 ià(!
	`Äf_©æags_ãtch_£t
(
p_æags
, 
fœ¡_z”o_glob®
))

129  
fœ¡_z”o_glob®
;

131 
fœ¡_z”o
 = 
	`__CLZ
(
	`__RBIT
(~
p_æags
[
i
]));

135  
æag_couÁ
;

136 
	}
}

138 
ušt32_t
 
	$Äf_©æags_fšd_ªd_ş—r_æag
(
Äf_©æags_t
 * 
p_æags
, 
ušt32_t
 
æag_couÁ
)

140 
ušt32_t
 
i
 = 0; i < 
	`NRF_ATFLAGS_ARRAY_LEN
(
æag_couÁ
); i++)

143 
ušt32_t
 
fœ¡_Úe
 = 
	`__CLZ
(
	`__RBIT
(
p_æags
[
i
]));

144 
fœ¡_Úe
 < 32)

146 
ušt32_t
 
fœ¡_Úe_glob®
 = 
fœ¡_Úe
 + (
i
 * 32);

147 ià(
fœ¡_Úe_glob®
 >ğ
æag_couÁ
)

151 ià(
	`Äf_©æags_ãtch_ş—r
(
p_æags
, 
fœ¡_Úe_glob®
))

153  
fœ¡_Úe_glob®
;

155 
fœ¡_Úe
 = 
	`__CLZ
(
	`__RBIT
(
p_æags
[
i
]));

159  
æag_couÁ
;

160 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\balloc\nrf_balloc.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
NRF_BALLOC
)

43 
	~"Äf_£ùiÚ.h
"

44 
	~"Äf_b®loc.h
"

45 
	~"­p_ut_¶©fÜm.h
"

48 #ià
NRF_BALLOC_CONFIG_LOG_ENABLED


49 
	#NRF_LOG_LEVEL
 
NRF_BALLOC_CONFIG_LOG_LEVEL


	)

50 
	#NRF_LOG_INITIAL_LEVEL
 
NRF_BALLOC_CONFIG_INITIAL_LOG_LEVEL


	)

51 
	#NRF_LOG_INFO_COLOR
 
NRF_BALLOC_CONFIG_INFO_COLOR


	)

52 
	#NRF_LOG_DEBUG_COLOR
 
NRF_BALLOC_CONFIG_DEBUG_COLOR


	)

54 
	#NRF_LOG_LEVEL
 0

	)

56 
	~"Äf_log.h
"

58 
	#HEAD_GUARD_FILL
 0xBAADF00D

	)

59 
	#TAIL_GUARD_FILL
 0xBAADCAFE

	)

60 
	#FREE_MEM_FILL
 0xBAADBAAD

	)

62 #ià
NRF_BALLOC_CONFIG_DEBUG_ENABLED


63 
	#POOL_ID
(
_p_poŞ
è_p_poŞ->
p_Çme


	)

64 
	#POOL_MARKER
 "%s"

	)

66 
	#POOL_ID
(
_p_poŞ
è
	)
_p_pool

67 
	#POOL_MARKER
 "0x%08X"

	)

70 
NRF_SECTION_DEF
(
Äf_b®loc
, 
Äf_b®loc_t
);

72 #ià
NRF_BALLOC_CLI_CMDS


73 
	~"Äf_şi.h
"

75 
	$Äf_b®loc_¡©us
(
Äf_şi_t
 cÚ¡ * 
p_şi
, 
size_t
 
¬gc
, **
¬gv
)

77 
	`UNUSED_PARAMETER
(
¬gv
);

79 ià(
	`Äf_şi_h–p_»que¡ed
(
p_şi
))

81 
	`Äf_şi_h–p_´št
(
p_şi
, 
NULL
, 0);

85 ià(
¬gc
 > 1)

87 
	`Äf_şi_årštf
(
p_şi
, 
NRF_CLI_ERROR
, "Bad‡rgument count");

91 
ušt32_t
 
num_of_š¡ªûs
 = 
	`NRF_SECTION_ITEM_COUNT
(
Äf_b®loc
, 
Äf_b®loc_t
);

92 
ušt32_t
 
i
;

94 
i
 = 0; i < 
num_of_š¡ªûs
; i++)

96 cÚ¡ 
Äf_b®loc_t
 * 
p_š¡ªû
 = 
	`NRF_SECTION_ITEM_GET
(
Äf_b®loc
,‚rf_b®loc_t, 
i
);

98 
ušt32_t
 
–em’t_size
 = 
	`NRF_BALLOC_ELEMENT_SIZE
(
p_š¡ªû
);

99 
ušt32_t
 
dbg_addÚ
 = 
p_š¡ªû
->
block_size
 - 
–em’t_size
;

100 
ušt32_t
 
poŞ_size
 = 
p_š¡ªû
->
p_¡ack_lim™
 -…_š¡ªû->
p_¡ack_ba£
;

101 
ušt32_t
 
max_ut
 = 
	`Äf_b®loc_max_utiz©iÚ_g‘
(
p_š¡ªû
);

102 
ušt32_t
 
ut
 = 
	`Äf_b®loc_utiz©iÚ_g‘
(
p_š¡ªû
);

103 cÚ¡ * 
p_Çme
 = 
p_š¡ªû
->p_name;

104 
	`Äf_şi_årštf
(
p_şi
, 
NRF_CLI_NORMAL
,

108 
p_Çme
, 
–em’t_size
, 
dbg_addÚ
,

109 100uÈ* 
ut
/
poŞ_size
, util,pool_size,

110 100uÈ* 
max_ut
/
poŞ_size
, max_util,pool_size);

113 
	}
}

115 
	$NRF_CLI_CREATE_STATIC_SUBCMD_SET
(
Äf_b®loc_commªds
)

117 
	`NRF_CLI_CMD
(
¡©us
, 
NULL
, "Pršˆ¡©u oàb®loøš¡ªûs.", 
Äf_b®loc_¡©us
),

118 
NRF_CLI_SUBCMD_SET_END


119 
	}
};

121 
NRF_CLI_CMD_REGISTER
(
b®loc
, &
Äf_b®loc_commªds
, "Commªd fÜ BALLOC mªagem’t", 
Äf_b®loc_¡©us
);

124 #ià
NRF_BALLOC_CONFIG_DEBUG_ENABLED


132 
__STATIC_INLINE
 * 
	$Äf_b®loc_block_unw¿p
(
Äf_b®loc_t
 cÚ¡ * 
p_poŞ
, * 
p_h—d
)

134 
	`ASSERT
((
p_poŞ
 !ğ
NULL
è&& (Õ_poŞ->
block_size
 % (
ušt32_t
)) == 0));

135 
	`ASSERT
((
p_h—d
 !ğ
NULL
è&& (((
ušt32_t
)(p_head) % (uint32_t)) == 0));

137 
ušt32_t
 
h—d_wÜds
 = 
	`NRF_BALLOC_DEBUG_HEAD_GUARD_WORDS_GET
(
p_poŞ
->
debug_æags
);

138 
ušt32_t
 
_wÜds
 = 
	`NRF_BALLOC_DEBUG_TAIL_GUARD_WORDS_GET
(
p_poŞ
->
debug_æags
);

140 
ušt32_t
 * 
p_
 = (ušt32_ˆ*)((
size_t
)(
p_h—d
è+ 
p_poŞ
->
block_size
);

141 
ušt32_t
 * 
p_–em’t
 = (ušt32_ˆ*)
p_h—d
 + 
h—d_wÜds
;

143 ià(
	`NRF_BALLOC_DEBUG_DATA_TRASHING_CHECK_GET
(
p_poŞ
->
debug_æags
))

145 
ušt32_t
 * 
±r
 = 
p_h—d
;…Œ < 
p_
;…tr++)

147 ià(*
±r
 !ğ
FREE_MEM_FILL
)

149 
	`NRF_LOG_INST_ERROR
(
p_poŞ
->
p_log
,

151 
±r
, *±r, 
FREE_MEM_FILL
);

152 
	`APP_ERROR_CHECK_BOOL
(
çl£
);

157 
ušt32_t
 * 
±r
 = 
p_h—d
;…Œ < 
p_–em’t
;…tr++)

159 *
±r
 = 
HEAD_GUARD_FILL
;

162 
ušt32_t
 * 
±r
 = ( 
p_
 - 
_wÜds
);…tr <…_tail;…tr++)

164 *
±r
 = 
TAIL_GUARD_FILL
;

167  
p_–em’t
;

168 
	}
}

177 
__STATIC_INLINE
 * 
	$Äf_b®loc_–em’t_w¿p
(
Äf_b®loc_t
 cÚ¡ * 
p_poŞ
, * 
p_–em’t
)

179 
	`ASSERT
((
p_poŞ
 !ğ
NULL
è&& (Õ_poŞ->
block_size
 % (
ušt32_t
)) == 0));

180 
	`ASSERT
((
p_–em’t
 !ğ
NULL
è&& (((
ušt32_t
)(p_element) % (uint32_t)) == 0));

182 
ušt32_t
 
h—d_wÜds
 = 
	`NRF_BALLOC_DEBUG_HEAD_GUARD_WORDS_GET
(
p_poŞ
->
debug_æags
);

183 
ušt32_t
 
_wÜds
 = 
	`NRF_BALLOC_DEBUG_TAIL_GUARD_WORDS_GET
(
p_poŞ
->
debug_æags
);

185 
ušt32_t
 * 
p_h—d
 = (ušt32_ˆ*)
p_–em’t
 - 
h—d_wÜds
;

186 
ušt32_t
 * 
p_
 = (ušt32_ˆ*)((
size_t
)(
p_h—d
è+ 
p_poŞ
->
block_size
);

188 
ušt32_t
 * 
±r
 = 
p_h—d
;…Œ < (ušt32_ˆ*)
p_–em’t
;…tr++)

190 ià(*
±r
 !ğ
HEAD_GUARD_FILL
)

192 
	`NRF_LOG_INST_ERROR
(
p_poŞ
->
p_log
,

194 
±r
, *±r, 
HEAD_GUARD_FILL
);

195 
	`APP_ERROR_CHECK_BOOL
(
çl£
);

199 
ušt32_t
 * 
±r
 = ( 
p_
 - 
_wÜds
);…tr <…_tail;…tr++)

201 ià(*
±r
 !ğ
TAIL_GUARD_FILL
)

203 
	`NRF_LOG_INST_ERROR
(
p_poŞ
->
p_log
,

205 
±r
, *±r, 
TAIL_GUARD_FILL
);

206 
	`APP_ERROR_CHECK_BOOL
(
çl£
);

210 ià(
	`NRF_BALLOC_DEBUG_DATA_TRASHING_CHECK_GET
(
p_poŞ
->
debug_æags
))

212 
ušt32_t
 * 
±r
 = 
p_h—d
;…Œ < 
p_
;…tr++)

214 *
±r
 = 
FREE_MEM_FILL
;

218  
p_h—d
;

219 
	}
}

230 * 
	$Äf_b®loc_idx2block
(
Äf_b®loc_t
 cÚ¡ * 
p_poŞ
, 
ušt8_t
 
idx
)

232 
	`ASSERT
(
p_poŞ
 !ğ
NULL
);

233  (
ušt8_t
 *)(
p_poŞ
->
p_memÜy_begš
è+ ((
size_t
)(
idx
è*…_poŞ->
block_size
);

234 
	}
}

243 
ušt8_t
 
	$Äf_b®loc_block2idx
(
Äf_b®loc_t
 cÚ¡ * 
p_poŞ
, cÚ¡ * 
p_block
)

245 
	`ASSERT
(
p_poŞ
 !ğ
NULL
);

246  ((
size_t
)(
p_block
è- (size_t)(
p_poŞ
->
p_memÜy_begš
)è/…_poŞ->
block_size
;

247 
	}
}

249 
»t_code_t
 
	$Äf_b®loc_š™
(
Äf_b®loc_t
 cÚ¡ * 
p_poŞ
)

251 
ušt8_t
 
poŞ_size
;

253 
	`VERIFY_PARAM_NOT_NULL
(
p_poŞ
);

255 
	`ASSERT
(
p_poŞ
->
p_cb
);

256 
	`ASSERT
(
p_poŞ
->
p_¡ack_ba£
);

257 
	`ASSERT
(
p_poŞ
->
p_¡ack_lim™
);

258 
	`ASSERT
(
p_poŞ
->
p_memÜy_begš
);

259 
	`ASSERT
(
p_poŞ
->
block_size
);

261 
poŞ_size
 = 
p_poŞ
->
p_¡ack_lim™
 -…_poŞ->
p_¡ack_ba£
;

263 #ià
NRF_BALLOC_CONFIG_DEBUG_ENABLED


264 *
p_memÜy_’d
 = (
ušt8_t
 *)(
p_poŞ
->
p_memÜy_begš
è+ (
poŞ_size
 *…_poŞ->
block_size
);

265 ià(
	`NRF_BALLOC_DEBUG_DATA_TRASHING_CHECK_GET
(
p_poŞ
->
debug_æags
))

267 
ušt32_t
 * 
±r
 = 
p_poŞ
->
p_memÜy_begš
;…Œ < (ušt32_ˆ*)(
p_memÜy_’d
);…tr++)

269 *
±r
 = 
FREE_MEM_FILL
;

274 
	`NRF_LOG_INST_INFO
(
p_poŞ
->
p_log
, "Initialized (size: %u x %u = %u bytes)",

275 
poŞ_size
,

276 
p_poŞ
->
block_size
,

277 
poŞ_size
 * 
p_poŞ
->
block_size
);

279 
p_poŞ
->
p_cb
->
p_¡ack_poš‹r
 =…_poŞ->
p_¡ack_ba£
;

280 
poŞ_size
--)

282 *(
p_poŞ
->
p_cb
->
p_¡ack_poš‹r
)++ = 
poŞ_size
;

285 
p_poŞ
->
p_cb
->
max_utiz©iÚ
 = 0;

287  
NRF_SUCCESS
;

288 
	}
}

290 * 
	$Äf_b®loc_®loc
(
Äf_b®loc_t
 cÚ¡ * 
p_poŞ
)

292 
	`ASSERT
(
p_poŞ
 !ğ
NULL
);

294 * 
p_block
 = 
NULL
;

296 
	`CRITICAL_REGION_ENTER
();

298 ià(
p_poŞ
->
p_cb
->
p_¡ack_poš‹r
 >…_poŞ->
p_¡ack_ba£
)

301 
p_block
 = 
	`Äf_b®loc_idx2block
(
p_poŞ
, *--Õ_poŞ->
p_cb
->
p_¡ack_poš‹r
));

304 
ušt8_t
 
utiz©iÚ
 = 
p_poŞ
->
p_¡ack_lim™
 -…_poŞ->
p_cb
->
p_¡ack_poš‹r
;

305 ià(
p_poŞ
->
p_cb
->
max_utiz©iÚ
 < 
utiz©iÚ
)

307 
p_poŞ
->
p_cb
->
max_utiz©iÚ
 = 
utiz©iÚ
;

311 
	`CRITICAL_REGION_EXIT
();

313 #ià
NRF_BALLOC_CONFIG_DEBUG_ENABLED


314 ià(
p_block
 !ğ
NULL
)

316 
p_block
 = 
	`Äf_b®loc_block_unw¿p
(
p_poŞ
,…_block);

320 
	`NRF_LOG_INST_DEBUG
(
p_poŞ
->
p_log
, "AÎoÿtšgƒËm’t: 0x%08X", 
p_block
);

322  
p_block
;

323 
	}
}

325 
	$Äf_b®loc_ä“
(
Äf_b®loc_t
 cÚ¡ * 
p_poŞ
, * 
p_–em’t
)

327 
	`ASSERT
(
p_poŞ
 !ğ
NULL
);

328 
	`ASSERT
(
p_–em’t
 !ğ
NULL
)

330 
	`NRF_LOG_INST_DEBUG
(
p_poŞ
->
p_log
, "F»ešgƒËm’t: 0x%08X", 
p_–em’t
);

332 #ià
NRF_BALLOC_CONFIG_DEBUG_ENABLED


333 * 
p_block
 = 
	`Äf_b®loc_–em’t_w¿p
(
p_poŞ
, 
p_–em’t
);

336 ià(
	`NRF_BALLOC_DEBUG_BASIC_CHECKS_GET
(
p_poŞ
->
debug_æags
))

338 
ušt8_t
 
poŞ_size
 = 
p_poŞ
->
p_¡ack_lim™
 -…_poŞ->
p_¡ack_ba£
;

339 *
p_memÜy_’d
 = (
ušt8_t
 *)(
p_poŞ
->
p_memÜy_begš
è+ (
poŞ_size
 *…_poŞ->
block_size
);

342 ià((
p_block
 < 
p_poŞ
->
p_memÜy_begš
è|| (p_block >ğ
p_memÜy_’d
))

344 
	`NRF_LOG_INST_ERROR
(
p_poŞ
->
p_log
,

346 
p_–em’t
);

347 
	`APP_ERROR_CHECK_BOOL
(
çl£
);

351 ià((((
size_t
)(
p_block
è- (size_t)(
p_poŞ
->
p_memÜy_begš
)è%…_poŞ->
block_size
) != 0)

353 
	`NRF_LOG_INST_ERROR
(
p_poŞ
->
p_log
,

354 "A‰em±edØä“ cÜru±edƒËm’ˆadd»s (0x%08X).", 
p_–em’t
);

355 
	`APP_ERROR_CHECK_BOOL
(
çl£
);

359 * 
p_block
 = 
p_–em’t
;

362 
	`CRITICAL_REGION_ENTER
();

364 #ià
NRF_BALLOC_CONFIG_DEBUG_ENABLED


366 ià(
	`NRF_BALLOC_DEBUG_BASIC_CHECKS_GET
(
p_poŞ
->
debug_æags
))

369 ià(
p_poŞ
->
p_cb
->
p_¡ack_poš‹r
 >ğp_poŞ->
p_¡ack_lim™
)

371 
	`NRF_LOG_INST_ERROR
(
p_poŞ
->
p_log
,

373 
p_–em’t
);

374 
	`APP_ERROR_CHECK_BOOL
(
çl£
);

378 ià(
	`NRF_BALLOC_DEBUG_DOUBLE_FREE_CHECK_GET
(
p_poŞ
->
debug_æags
))

381 
ušt8_t
 * 
p_idx
 = 
p_poŞ
->
p_¡ack_ba£
;…_idx <…_poŞ->
p_cb
->
p_¡ack_poš‹r
;…_idx++)

383 ià(
	`Äf_b®loc_idx2block
(
p_poŞ
, *
p_idx
è=ğ
p_block
)

385 
	`NRF_LOG_INST_ERROR
(
p_poŞ
->
p_log
, "Attemptedo double-free‡nƒlement (0x%08X).",

386 
p_–em’t
);

387 
	`APP_ERROR_CHECK_BOOL
(
çl£
);

394 *(
p_poŞ
->
p_cb
->
p_¡ack_poš‹r
)++ = 
	`Äf_b®loc_block2idx
Õ_poŞ, 
p_block
);

396 
	`CRITICAL_REGION_EXIT
();

397 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\bsp\bsp.c

40 
	~"b¥.h
"

41 
	~<¡ddef.h
>

42 
	~<¡dio.h
>

43 
	~"nÜdic_commÚ.h
"

44 
	~"Äf.h
"

45 
	~"Äf_gpio.h
"

46 
	~"Äf_”rÜ.h
"

47 
	~"b¥_cÚfig.h
"

48 
	~"bßrds.h
"

50 #iâdeà
BSP_SIMPLE


51 
	~"­p_tim”.h
"

52 
	~"­p_bu‰Ú.h
"

55 #ià
LEDS_NUMBER
 > 0 && !(
defšed
 
BSP_SIMPLE
)

56 
b¥_šdiÿtiÚ_t
 
	gm_¡abË_¡©e
 = 
BSP_INDICATE_IDLE
;

57 
boŞ
 
	gm_Ëds_ş—r
 = 
çl£
;

58 
ušt32_t
 
	gm_šdiÿtiÚ_ty³
 = 0;

59 
boŞ
 
	gm_®”t_Ú
 = 
çl£
;

60 
APP_TIMER_DEF
(
m_b¥_Ëds_tmr
);

61 
APP_TIMER_DEF
(
m_b¥_®”t_tmr
);

64 #ià
BUTTONS_NUMBER
 > 0

65 #iâdeà
BSP_SIMPLE


66 
b¥_ev’t_ÿÎback_t
 
	gm_»gi¡”ed_ÿÎback
 = 
NULL
;

67 
b¥_bu‰Ú_ev’t_cfg_t
 
	gm_ev’ts_li¡
[
BUTTONS_NUMBER
] = {{
BSP_EVENT_NOTHING
, BSP_EVENT_NOTHING}};

68 
APP_TIMER_DEF
(
m_b¥_bu‰Ú_tmr
);

69 
b¥_bu‰Ú_ev’t_hªdËr
(
ušt8_t
 
pš_no
, ušt8_ˆ
bu‰Ú_aùiÚ
);

72 #iâdeà
BSP_SIMPLE


73 cÚ¡ 
­p_bu‰Ú_cfg_t
 
	g­p_bu‰Ús
[
BUTTONS_NUMBER
] =

75 #ifdeà
BSP_BUTTON_0


76 {
BSP_BUTTON_0
, 
çl£
, 
BUTTON_PULL
, 
b¥_bu‰Ú_ev’t_hªdËr
},

79 #ifdeà
BSP_BUTTON_1


80 {
BSP_BUTTON_1
, 
çl£
, 
BUTTON_PULL
, 
b¥_bu‰Ú_ev’t_hªdËr
},

83 #ifdeà
BSP_BUTTON_2


84 {
BSP_BUTTON_2
, 
çl£
, 
BUTTON_PULL
, 
b¥_bu‰Ú_ev’t_hªdËr
},

87 #ifdeà
BSP_BUTTON_3


88 {
BSP_BUTTON_3
, 
çl£
, 
BUTTON_PULL
, 
b¥_bu‰Ú_ev’t_hªdËr
},

91 #ifdeà
BSP_BUTTON_4


92 {
BSP_BUTTON_4
, 
çl£
, 
BUTTON_PULL
, 
b¥_bu‰Ú_ev’t_hªdËr
},

95 #ifdeà
BSP_BUTTON_5


96 {
BSP_BUTTON_5
, 
çl£
, 
BUTTON_PULL
, 
b¥_bu‰Ú_ev’t_hªdËr
},

99 #ifdeà
BSP_BUTTON_6


100 {
BSP_BUTTON_6
, 
çl£
, 
BUTTON_PULL
, 
b¥_bu‰Ú_ev’t_hªdËr
},

103 #ifdeà
BSP_BUTTON_7


104 {
BSP_BUTTON_7
, 
çl£
, 
BUTTON_PULL
, 
b¥_bu‰Ú_ev’t_hªdËr
},

111 #ià(
BUTTONS_NUMBER
 > 0)

112 
boŞ
 
	$b¥_bu‰Ú_is_´es£d
(
ušt32_t
 
bu‰Ú
)

114 ià(
bu‰Ú
 < 
BUTTONS_NUMBER
)

116  
	`b¥_bßrd_bu‰Ú_¡©e_g‘
(
bu‰Ú
);

121  
çl£
;

123 
	}
}

126 #ià(
BUTTONS_NUMBER
 > 0è&& !(
defšed
 
BSP_SIMPLE
)

132 
	$b¥_bu‰Ú_ev’t_hªdËr
(
ušt8_t
 
pš_no
, ušt8_ˆ
bu‰Ú_aùiÚ
)

134 
b¥_ev’t_t
 
ev’t
 = 
BSP_EVENT_NOTHING
;

135 
ušt32_t
 
bu‰Ú
 = 0;

136 
ušt32_t
 
”r_code
;

137 
ušt8_t
 
cu¼’t_lÚg_push_pš_no
;

138 
b¥_ev’t_t
 
»Ëa£_ev’t_©_push
[
BUTTONS_NUMBER
];

140 
bu‰Ú
 = 
	`b¥_bßrd_pš_to_bu‰Ú_idx
(
pš_no
);

142 ià(
bu‰Ú
 < 
BUTTONS_NUMBER
)

144 
bu‰Ú_aùiÚ
)

146 
APP_BUTTON_PUSH
:

147 
ev’t
 = 
m_ev’ts_li¡
[
bu‰Ú
].
push_ev’t
;

148 ià(
m_ev’ts_li¡
[
bu‰Ú
].
lÚg_push_ev’t
 !ğ
BSP_EVENT_NOTHING
)

150 
”r_code
 = 
	`­p_tim”_¡¬t
(
m_b¥_bu‰Ú_tmr
, 
	`APP_TIMER_TICKS
(
BSP_LONG_PUSH_TIMEOUT_MS
), (*)&
cu¼’t_lÚg_push_pš_no
);

151 ià(
”r_code
 =ğ
NRF_SUCCESS
)

153 
cu¼’t_lÚg_push_pš_no
 = 
pš_no
;

156 
»Ëa£_ev’t_©_push
[
bu‰Ú
] = 
m_ev’ts_li¡
[bu‰Ú].
»Ëa£_ev’t
;

158 
APP_BUTTON_RELEASE
:

159 ()
	`­p_tim”_¡İ
(
m_b¥_bu‰Ú_tmr
);

160 ià(
»Ëa£_ev’t_©_push
[
bu‰Ú
] =ğ
m_ev’ts_li¡
[bu‰Ú].
»Ëa£_ev’t
)

162 
ev’t
 = 
m_ev’ts_li¡
[
bu‰Ú
].
»Ëa£_ev’t
;

165 
BSP_BUTTON_ACTION_LONG_PUSH
:

166 
ev’t
 = 
m_ev’ts_li¡
[
bu‰Ú
].
lÚg_push_ev’t
;

170 ià((
ev’t
 !ğ
BSP_EVENT_NOTHING
è&& (
m_»gi¡”ed_ÿÎback
 !ğ
NULL
))

172 
	`m_»gi¡”ed_ÿÎback
(
ev’t
);

174 
	}
}

180 
	$bu‰Ú_tim”_hªdËr
(* 
p_cÚ‹xt
)

182 
	`b¥_bu‰Ú_ev’t_hªdËr
(*(
ušt8_t
 *)
p_cÚ‹xt
, 
BSP_BUTTON_ACTION_LONG_PUSH
);

183 
	}
}

189 #ià
LEDS_NUMBER
 > 0 && !(
defšed
 
BSP_SIMPLE
)

190 
	$Ëds_off
()

192 ià(
m_®”t_Ú
)

194 
ušt32_t
 
i
;

195 
i
 = 0; i < 
LEDS_NUMBER
; i++)

197 ià(
i
 !ğ
BSP_LED_ALERT
)

199 
	`b¥_bßrd_Ëd_off
(
i
);

205 
	`b¥_bßrd_Ëds_off
();

207 
	}
}

213 
ušt32_t
 
	$b¥_Ëd_šdiÿtiÚ
(
b¥_šdiÿtiÚ_t
 
šdiÿ‹
)

215 
ušt32_t
 
”r_code
 = 
NRF_SUCCESS
;

216 
ušt32_t
 
Ãxt_d–ay
 = 0;

218 ià(
m_Ëds_ş—r
)

220 
m_Ëds_ş—r
 = 
çl£
;

221 
	`Ëds_off
();

224 
šdiÿ‹
)

226 
BSP_INDICATE_IDLE
:

227 
	`Ëds_off
();

228 
”r_code
 = 
	`­p_tim”_¡İ
(
m_b¥_Ëds_tmr
);

229 
m_¡abË_¡©e
 = 
šdiÿ‹
;

232 
BSP_INDICATE_SCANNING
:

233 
BSP_INDICATE_ADVERTISING
:

235 ià(
	`b¥_bßrd_Ëd_¡©e_g‘
(
BSP_LED_INDICATE_INDICATE_ADVERTISING
))

237 
	`b¥_bßrd_Ëd_off
(
BSP_LED_INDICATE_INDICATE_ADVERTISING
);

238 
Ãxt_d–ay
 = 
šdiÿ‹
 ==

239 
BSP_INDICATE_ADVERTISING
 ? 
ADVERTISING_LED_OFF_INTERVAL
 :

240 
ADVERTISING_SLOW_LED_OFF_INTERVAL
;

244 
	`b¥_bßrd_Ëd_Ú
(
BSP_LED_INDICATE_INDICATE_ADVERTISING
);

245 
Ãxt_d–ay
 = 
šdiÿ‹
 ==

246 
BSP_INDICATE_ADVERTISING
 ? 
ADVERTISING_LED_ON_INTERVAL
 :

247 
ADVERTISING_SLOW_LED_ON_INTERVAL
;

250 
m_¡abË_¡©e
 = 
šdiÿ‹
;

251 
”r_code
 = 
	`­p_tim”_¡¬t
(
m_b¥_Ëds_tmr
, 
	`APP_TIMER_TICKS
(
Ãxt_d–ay
), 
NULL
);

254 
BSP_INDICATE_ADVERTISING_WHITELIST
:

256 ià(
	`b¥_bßrd_Ëd_¡©e_g‘
(
BSP_LED_INDICATE_ADVERTISING_WHITELIST
))

258 
	`b¥_bßrd_Ëd_off
(
BSP_LED_INDICATE_ADVERTISING_WHITELIST
);

259 
Ãxt_d–ay
 = 
šdiÿ‹
 ==

260 
BSP_INDICATE_ADVERTISING_WHITELIST
 ?

261 
ADVERTISING_WHITELIST_LED_OFF_INTERVAL
 :

262 
ADVERTISING_SLOW_LED_OFF_INTERVAL
;

266 
	`b¥_bßrd_Ëd_Ú
(
BSP_LED_INDICATE_ADVERTISING_WHITELIST
);

267 
Ãxt_d–ay
 = 
šdiÿ‹
 ==

268 
BSP_INDICATE_ADVERTISING_WHITELIST
 ?

269 
ADVERTISING_WHITELIST_LED_ON_INTERVAL
 :

270 
ADVERTISING_SLOW_LED_ON_INTERVAL
;

272 
m_¡abË_¡©e
 = 
šdiÿ‹
;

273 
”r_code
 = 
	`­p_tim”_¡¬t
(
m_b¥_Ëds_tmr
, 
	`APP_TIMER_TICKS
(
Ãxt_d–ay
), 
NULL
);

276 
BSP_INDICATE_ADVERTISING_SLOW
:

278 ià(
	`b¥_bßrd_Ëd_¡©e_g‘
(
BSP_LED_INDICATE_ADVERTISING_SLOW
))

280 
	`b¥_bßrd_Ëd_off
(
BSP_LED_INDICATE_ADVERTISING_SLOW
);

281 
Ãxt_d–ay
 = 
šdiÿ‹
 ==

282 
BSP_INDICATE_ADVERTISING_SLOW
 ? 
ADVERTISING_SLOW_LED_OFF_INTERVAL
 :

283 
ADVERTISING_SLOW_LED_OFF_INTERVAL
;

287 
	`b¥_bßrd_Ëd_Ú
(
BSP_LED_INDICATE_ADVERTISING_SLOW
);

288 
Ãxt_d–ay
 = 
šdiÿ‹
 ==

289 
BSP_INDICATE_ADVERTISING_SLOW
 ? 
ADVERTISING_SLOW_LED_ON_INTERVAL
 :

290 
ADVERTISING_SLOW_LED_ON_INTERVAL
;

292 
m_¡abË_¡©e
 = 
šdiÿ‹
;

293 
”r_code
 = 
	`­p_tim”_¡¬t
(
m_b¥_Ëds_tmr
, 
	`APP_TIMER_TICKS
(
Ãxt_d–ay
), 
NULL
);

296 
BSP_INDICATE_ADVERTISING_DIRECTED
:

298 ià(
	`b¥_bßrd_Ëd_¡©e_g‘
(
BSP_LED_INDICATE_ADVERTISING_DIRECTED
))

300 
	`b¥_bßrd_Ëd_off
(
BSP_LED_INDICATE_ADVERTISING_DIRECTED
);

301 
Ãxt_d–ay
 = 
šdiÿ‹
 ==

302 
BSP_INDICATE_ADVERTISING_DIRECTED
 ?

303 
ADVERTISING_DIRECTED_LED_OFF_INTERVAL
 :

304 
ADVERTISING_SLOW_LED_OFF_INTERVAL
;

308 
	`b¥_bßrd_Ëd_Ú
(
BSP_LED_INDICATE_ADVERTISING_DIRECTED
);

309 
Ãxt_d–ay
 = 
šdiÿ‹
 ==

310 
BSP_INDICATE_ADVERTISING_DIRECTED
 ?

311 
ADVERTISING_DIRECTED_LED_ON_INTERVAL
 :

312 
ADVERTISING_SLOW_LED_ON_INTERVAL
;

314 
m_¡abË_¡©e
 = 
šdiÿ‹
;

315 
”r_code
 = 
	`­p_tim”_¡¬t
(
m_b¥_Ëds_tmr
, 
	`APP_TIMER_TICKS
(
Ãxt_d–ay
), 
NULL
);

318 
BSP_INDICATE_BONDING
:

320 
	`b¥_bßrd_Ëd_šv”t
(
BSP_LED_INDICATE_BONDING
);

322 
m_¡abË_¡©e
 = 
šdiÿ‹
;

323 
”r_code
 =

324 
	`­p_tim”_¡¬t
(
m_b¥_Ëds_tmr
, 
	`APP_TIMER_TICKS
(
BONDING_INTERVAL
), 
NULL
);

327 
BSP_INDICATE_CONNECTED
:

328 
	`b¥_bßrd_Ëd_Ú
(
BSP_LED_INDICATE_CONNECTED
);

329 
m_¡abË_¡©e
 = 
šdiÿ‹
;

332 
BSP_INDICATE_SENT_OK
:

334 
m_Ëds_ş—r
 = 
Œue
;

335 
	`b¥_bßrd_Ëd_šv”t
(
BSP_LED_INDICATE_SENT_OK
);

336 
”r_code
 = 
	`­p_tim”_¡¬t
(
m_b¥_Ëds_tmr
, 
	`APP_TIMER_TICKS
(
SENT_OK_INTERVAL
), 
NULL
);

339 
BSP_INDICATE_SEND_ERROR
:

341 
m_Ëds_ş—r
 = 
Œue
;

342 
	`b¥_bßrd_Ëd_šv”t
(
BSP_LED_INDICATE_SEND_ERROR
);

343 
”r_code
 = 
	`­p_tim”_¡¬t
(
m_b¥_Ëds_tmr
, 
	`APP_TIMER_TICKS
(
SEND_ERROR_INTERVAL
), 
NULL
);

346 
BSP_INDICATE_RCV_OK
:

348 
m_Ëds_ş—r
 = 
Œue
;

349 
	`b¥_bßrd_Ëd_šv”t
(
BSP_LED_INDICATE_RCV_OK
);

350 
”r_code
 = 
	`­p_tim”_¡¬t
(
m_b¥_Ëds_tmr
, 
	`APP_TIMER_TICKS
(
RCV_OK_INTERVAL
), 
NULL
);

353 
BSP_INDICATE_RCV_ERROR
:

355 
m_Ëds_ş—r
 = 
Œue
;

356 
	`b¥_bßrd_Ëd_šv”t
(
BSP_LED_INDICATE_RCV_ERROR
);

357 
”r_code
 = 
	`­p_tim”_¡¬t
(
m_b¥_Ëds_tmr
, 
	`APP_TIMER_TICKS
(
RCV_ERROR_INTERVAL
), 
NULL
);

360 
BSP_INDICATE_FATAL_ERROR
:

362 
	`b¥_bßrd_Ëds_Ú
();

363 
m_¡abË_¡©e
 = 
šdiÿ‹
;

366 
BSP_INDICATE_ALERT_0
:

367 
BSP_INDICATE_ALERT_1
:

368 
BSP_INDICATE_ALERT_2
:

369 
BSP_INDICATE_ALERT_3
:

370 
BSP_INDICATE_ALERT_OFF
:

371 
”r_code
 = 
	`­p_tim”_¡İ
(
m_b¥_®”t_tmr
);

372 
Ãxt_d–ay
 = (
ušt32_t
)
BSP_INDICATE_ALERT_OFF
 - (ušt32_t)
šdiÿ‹
;

375 ià(
Ãxt_d–ay
 && (
”r_code
 =ğ
NRF_SUCCESS
))

377 ià(
Ãxt_d–ay
 > 1)

379 
”r_code
 = 
	`­p_tim”_¡¬t
(
m_b¥_®”t_tmr
,

380 
	`APP_TIMER_TICKS
(((
ušt16_t
)
Ãxt_d–ay
 * 
ALERT_INTERVAL
)),

381 
NULL
);

383 
	`b¥_bßrd_Ëd_Ú
(
BSP_LED_ALERT
);

384 
m_®”t_Ú
 = 
Œue
;

388 
	`b¥_bßrd_Ëd_off
(
BSP_LED_ALERT
);

389 
m_®”t_Ú
 = 
çl£
;

394 
BSP_INDICATE_USER_STATE_OFF
:

395 
	`Ëds_off
();

396 
m_¡abË_¡©e
 = 
šdiÿ‹
;

399 
BSP_INDICATE_USER_STATE_0
:

400 
	`Ëds_off
();

401 
	`b¥_bßrd_Ëd_Ú
(
BSP_LED_INDICATE_USER_LED1
);

402 
m_¡abË_¡©e
 = 
šdiÿ‹
;

405 
BSP_INDICATE_USER_STATE_1
:

406 
	`Ëds_off
();

407 
	`b¥_bßrd_Ëd_Ú
(
BSP_LED_INDICATE_USER_LED2
);

408 
m_¡abË_¡©e
 = 
šdiÿ‹
;

411 
BSP_INDICATE_USER_STATE_2
:

412 
	`Ëds_off
();

413 
	`b¥_bßrd_Ëd_Ú
(
BSP_LED_INDICATE_USER_LED1
);

414 
	`b¥_bßrd_Ëd_Ú
(
BSP_LED_INDICATE_USER_LED2
);

415 
m_¡abË_¡©e
 = 
šdiÿ‹
;

418 
BSP_INDICATE_USER_STATE_3
:

420 
BSP_INDICATE_USER_STATE_ON
:

421 
	`b¥_bßrd_Ëds_Ú
();

422 
m_¡abË_¡©e
 = 
šdiÿ‹
;

429  
”r_code
;

430 
	}
}

440 
	$Ëds_tim”_hªdËr
(* 
p_cÚ‹xt
)

442 
	`UNUSED_PARAMETER
(
p_cÚ‹xt
);

444 ià(
m_šdiÿtiÚ_ty³
 & 
BSP_INIT_LEDS
)

446 
	`UNUSED_VARIABLE
(
	`b¥_Ëd_šdiÿtiÚ
(
m_¡abË_¡©e
));

448 
	}
}

455 
	$®”t_tim”_hªdËr
(* 
p_cÚ‹xt
)

457 
	`UNUSED_PARAMETER
(
p_cÚ‹xt
);

458 
	`b¥_bßrd_Ëd_šv”t
(
BSP_LED_ALERT
);

459 
	}
}

465 
ušt32_t
 
	$b¥_šdiÿtiÚ_£t
(
b¥_šdiÿtiÚ_t
 
šdiÿ‹
)

467 
ušt32_t
 
”r_code
 = 
NRF_SUCCESS
;

469 #ià
LEDS_NUMBER
 > 0 && !(
defšed
 
BSP_SIMPLE
)

471 ià(
m_šdiÿtiÚ_ty³
 & 
BSP_INIT_LEDS
)

473 
”r_code
 = 
	`b¥_Ëd_šdiÿtiÚ
(
šdiÿ‹
);

477  
”r_code
;

478 
	}
}

481 
ušt32_t
 
	$b¥_š™
(
ušt32_t
 
ty³
, 
b¥_ev’t_ÿÎback_t
 
ÿÎback
)

483 
ušt32_t
 
”r_code
 = 
NRF_SUCCESS
;

485 #ià
LEDS_NUMBER
 > 0 && !(
defšed
 
BSP_SIMPLE
)

486 
m_šdiÿtiÚ_ty³
 = 
ty³
;

489 #ià(
BUTTONS_NUMBER
 > 0è&& !(
defšed
 
BSP_SIMPLE
)

490 
m_»gi¡”ed_ÿÎback
 = 
ÿÎback
;

493 ià(
ty³
 & 
BSP_INIT_BUTTONS
)

495 
ušt32_t
 
num
;

497 
num
 = 0; (Òum < 
BUTTONS_NUMBER
è&& (
”r_code
 =ğ
NRF_SUCCESS
));‚um++)

499 
”r_code
 = 
	`b¥_ev’t_to_bu‰Ú_aùiÚ_assign
(
num
, 
BSP_BUTTON_ACTION_PUSH
, 
BSP_EVENT_DEFAULT
);

502 ià(
”r_code
 =ğ
NRF_SUCCESS
)

504 
”r_code
 = 
	`­p_bu‰Ú_š™
((
­p_bu‰Ú_cfg_t
 *)
­p_bu‰Ús
,

505 
BUTTONS_NUMBER
,

506 
	`APP_TIMER_TICKS
(50));

509 ià(
”r_code
 =ğ
NRF_SUCCESS
)

511 
”r_code
 = 
	`­p_bu‰Ú_’abË
();

514 ià(
”r_code
 =ğ
NRF_SUCCESS
)

516 
”r_code
 = 
	`­p_tim”_ü—‹
(&
m_b¥_bu‰Ú_tmr
,

517 
APP_TIMER_MODE_SINGLE_SHOT
,

518 
bu‰Ú_tim”_hªdËr
);

521 #–ià(
BUTTONS_NUMBER
 > 0è&& (
defšed
 
BSP_SIMPLE
)

522 
	`b¥_bßrd_š™
(
ty³
);

525 #ià
LEDS_NUMBER
 > 0 && !(
defšed
 
BSP_SIMPLE
)

526 ià(
ty³
 & 
BSP_INIT_LEDS
)

529 
	`b¥_bßrd_š™
(
BSP_INIT_LEDS
);

532 ià(
”r_code
 =ğ
NRF_SUCCESS
)

534 
”r_code
 =

535 
	`­p_tim”_ü—‹
(&
m_b¥_Ëds_tmr
, 
APP_TIMER_MODE_SINGLE_SHOT
, 
Ëds_tim”_hªdËr
);

538 ià(
”r_code
 =ğ
NRF_SUCCESS
)

540 
”r_code
 =

541 
	`­p_tim”_ü—‹
(&
m_b¥_®”t_tmr
, 
APP_TIMER_MODE_REPEATED
, 
®”t_tim”_hªdËr
);

546  
”r_code
;

547 
	}
}

550 #iâdeà
BSP_SIMPLE


553 
ušt32_t
 
	$b¥_ev’t_to_bu‰Ú_aùiÚ_assign
(
ušt32_t
 
bu‰Ú
, 
b¥_bu‰Ú_aùiÚ_t
 
aùiÚ
, 
b¥_ev’t_t
 
ev’t
)

555 
ušt32_t
 
”r_code
 = 
NRF_SUCCESS
;

557 #ià
BUTTONS_NUMBER
 > 0

558 ià(
bu‰Ú
 < 
BUTTONS_NUMBER
)

560 ià(
ev’t
 =ğ
BSP_EVENT_DEFAULT
)

563 
ev’t
 = (
aùiÚ
 =ğ
BSP_BUTTON_ACTION_PUSH
è? (
b¥_ev’t_t
)(
BSP_EVENT_KEY_0
 + 
bu‰Ú
è: 
BSP_EVENT_NOTHING
;

565 
aùiÚ
)

567 
BSP_BUTTON_ACTION_PUSH
:

568 
m_ev’ts_li¡
[
bu‰Ú
].
push_ev’t
 = 
ev’t
;

570 
BSP_BUTTON_ACTION_LONG_PUSH
:

571 
m_ev’ts_li¡
[
bu‰Ú
].
lÚg_push_ev’t
 = 
ev’t
;

573 
BSP_BUTTON_ACTION_RELEASE
:

574 
m_ev’ts_li¡
[
bu‰Ú
].
»Ëa£_ev’t
 = 
ev’t
;

577 
”r_code
 = 
NRF_ERROR_INVALID_PARAM
;

583 
”r_code
 = 
NRF_ERROR_INVALID_PARAM
;

586 
”r_code
 = 
NRF_ERROR_INVALID_PARAM
;

589  
”r_code
;

590 
	}
}

595 
ušt32_t
 
	$b¥_bu‰Ús_’abË
()

597 #ià(
BUTTONS_NUMBER
 > 0è&& !
	`defšed
(
BSP_SIMPLE
)

598  
	`­p_bu‰Ú_’abË
();

600  
NRF_ERROR_NOT_SUPPORTED
;

602 
	}
}

604 
ušt32_t
 
	$b¥_bu‰Ús_di§bË
()

606 #ià(
BUTTONS_NUMBER
 > 0è&& !
	`defšed
(
BSP_SIMPLE
)

607  
	`­p_bu‰Ú_di§bË
();

609  
NRF_ERROR_NOT_SUPPORTED
;

611 
	}
}

612 
ušt32_t
 
	$wakeup_bu‰Ú_cfg
(
ušt32_t
 
bu‰Ú_idx
, 
boŞ
 
’abË
)

614 #ià!
	`defšed
(
BSP_SIMPLE
)

615 ià(
bu‰Ú_idx
 < 
BUTTONS_NUMBER
)

617 
Äf_gpio_pš_£n£_t
 
£n£
 = 
’abË
 ?

618 (
BUTTONS_ACTIVE_STATE
 ? 
NRF_GPIO_PIN_SENSE_HIGH
 : 
NRF_GPIO_PIN_SENSE_LOW
) :

619 
NRF_GPIO_PIN_NOSENSE
;

620 
	`Äf_gpio_cfg_£n£_£t
(
	`b¥_bßrd_bu‰Ú_idx_to_pš
(
bu‰Ú_idx
), 
£n£
);

621  
NRF_SUCCESS
;

624 
	`UNUSED_PARAMETER
(
bu‰Ú_idx
);

625 
	`UNUSED_PARAMETER
(
’abË
);

627  
NRF_ERROR_NOT_SUPPORTED
;

629 
	}
}

630 
ušt32_t
 
	$b¥_wakeup_bu‰Ú_’abË
(
ušt32_t
 
bu‰Ú_idx
)

632  
	`wakeup_bu‰Ú_cfg
(
bu‰Ú_idx
, 
Œue
);

633 
	}
}

635 
ušt32_t
 
	$b¥_wakeup_bu‰Ú_di§bË
(
ušt32_t
 
bu‰Ú_idx
)

637  
	`wakeup_bu‰Ú_cfg
(
bu‰Ú_idx
, 
çl£
);

638 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\bsp\bsp_btn_ble.c

40 
	~"b¥_bŠ_bË.h
"

41 
	~"Äf_sdh_bË.h
"

42 
	~"b¥.h
"

44 
	#BTN_ID_WAKEUP
 0

	)

45 
	#BTN_ID_SLEEP
 0

	)

46 
	#BTN_ID_DISCONNECT
 0

	)

47 
	#BTN_ID_WAKEUP_BOND_DELETE
 1

	)

48 
	#BTN_ID_WHITELIST_OFF
 1

	)

50 
	#BTN_ACTION_SLEEP
 
BSP_BUTTON_ACTION_RELEASE


	)

51 
	#BTN_ACTION_DISCONNECT
 
BSP_BUTTON_ACTION_LONG_PUSH


	)

52 
	#BTN_ACTION_WHITELIST_OFF
 
BSP_BUTTON_ACTION_LONG_PUSH


	)

57 
	#RETURN_ON_ERROR_NOT_INVALID_PARAM
(
”r_code
) \

60 ià(((
”r_code
è!ğ
NRF_SUCCESS
è&& (Ó¼_codeè!ğ
NRF_ERROR_INVALID_PARAM
)) \

62  
”r_code
; \

65 0)

	)

71 
	#RETURN_ON_ERROR_NOT_NOT_SUPPORTED
(
”r_code
) \

74 ià(((
”r_code
è!ğ
NRF_SUCCESS
è&& (Ó¼_codeè!ğ
NRF_ERROR_NOT_SUPPORTED
)) \

76  
”r_code
; \

79 0)

	)

85 
	#CALL_HANDLER_ON_ERROR
(
”r_code
) \

88 ià(((
”r_code
è!ğ
NRF_SUCCESS
è&& (
m_”rÜ_hªdËr
 !ğ
NULL
)) \

90 
	`m_”rÜ_hªdËr
(
”r_code
); \

93 0)

	)

96 
b¥_bŠ_bË_”rÜ_hªdËr_t
 
	gm_”rÜ_hªdËr
 = 
NULL
;

97 
ušt32_t
 
	gm_num_cÚÃùiÚs
 = 0;

105 
ušt32_t
 
	$cÚÃùiÚ_bu‰Ús_cÚfigu»
()

107 
ušt32_t
 
”r_code
;

109 
”r_code
 = 
	`b¥_ev’t_to_bu‰Ú_aùiÚ_assign
(
BTN_ID_SLEEP
,

110 
BTN_ACTION_SLEEP
,

111 
BSP_EVENT_DEFAULT
);

112 
	`RETURN_ON_ERROR_NOT_INVALID_PARAM
(
”r_code
);

114 
”r_code
 = 
	`b¥_ev’t_to_bu‰Ú_aùiÚ_assign
(
BTN_ID_WHITELIST_OFF
,

115 
BTN_ACTION_WHITELIST_OFF
,

116 
BSP_EVENT_WHITELIST_OFF
);

117 
	`RETURN_ON_ERROR_NOT_INVALID_PARAM
(
”r_code
);

120 
”r_code
 = 
	`b¥_ev’t_to_bu‰Ú_aùiÚ_assign
(
BTN_ID_DISCONNECT
,

121 
BTN_ACTION_DISCONNECT
,

122 
BSP_EVENT_DISCONNECT
);

123 
	`RETURN_ON_ERROR_NOT_INVALID_PARAM
(
”r_code
);

125  
NRF_SUCCESS
;

126 
	}
}

134 
ušt32_t
 
	$adv”tisšg_bu‰Ús_cÚfigu»
()

136 
ušt32_t
 
”r_code
;

138 
”r_code
 = 
	`b¥_ev’t_to_bu‰Ú_aùiÚ_assign
(
BTN_ID_DISCONNECT
,

139 
BTN_ACTION_DISCONNECT
,

140 
BSP_EVENT_DEFAULT
);

141 
	`RETURN_ON_ERROR_NOT_INVALID_PARAM
(
”r_code
);

143 
”r_code
 = 
	`b¥_ev’t_to_bu‰Ú_aùiÚ_assign
(
BTN_ID_WHITELIST_OFF
,

144 
BTN_ACTION_WHITELIST_OFF
,

145 
BSP_EVENT_WHITELIST_OFF
);

146 
	`RETURN_ON_ERROR_NOT_INVALID_PARAM
(
”r_code
);

148 
”r_code
 = 
	`b¥_ev’t_to_bu‰Ú_aùiÚ_assign
(
BTN_ID_SLEEP
,

149 
BTN_ACTION_SLEEP
,

150 
BSP_EVENT_SLEEP
);

151 
	`RETURN_ON_ERROR_NOT_INVALID_PARAM
(
”r_code
);

153  
NRF_SUCCESS
;

154 
	}
}

165 
	$¡¬tup_ev’t_exŒaù
(
b¥_ev’t_t
 * 
p_¡¬tup_ev’t
)

168 ià(
	`b¥_bu‰Ú_is_´es£d
(
BTN_ID_WAKEUP_BOND_DELETE
))

170 *
p_¡¬tup_ev’t
 = 
BSP_EVENT_CLEAR_BONDING_DATA
;

172 ià(
	`b¥_bu‰Ú_is_´es£d
(
BTN_ID_WAKEUP
))

174 *
p_¡¬tup_ev’t
 = 
BSP_EVENT_WAKEUP
;

178 *
p_¡¬tup_ev’t
 = 
BSP_EVENT_NOTHING
;

180 
	}
}

183 
ušt32_t
 
	$b¥_bŠ_bË_¦“p_mode_´•¬e
()

185 
ušt32_t
 
”r_code
;

187 
”r_code
 = 
	`b¥_wakeup_bu‰Ú_’abË
(
BTN_ID_WAKEUP
);

188 
	`RETURN_ON_ERROR_NOT_NOT_SUPPORTED
(
”r_code
);

190 
”r_code
 = 
	`b¥_wakeup_bu‰Ú_’abË
(
BTN_ID_WAKEUP_BOND_DELETE
);

191 
	`RETURN_ON_ERROR_NOT_NOT_SUPPORTED
(
”r_code
);

193  
NRF_SUCCESS
;

194 
	}
}

203 
	$bË_evt_hªdËr
(
bË_evt_t
 cÚ¡ * 
p_bË_evt
, * 
p_cÚ‹xt
)

205 
ušt32_t
 
”r_code
;

207 
p_bË_evt
->
h—d”
.
evt_id
)

209 
BLE_GAP_EVT_CONNECTED
:

210 ià(
m_num_cÚÃùiÚs
 == 0)

212 
”r_code
 = 
	`cÚÃùiÚ_bu‰Ús_cÚfigu»
();

213 
	`CALL_HANDLER_ON_ERROR
(
”r_code
);

216 
m_num_cÚÃùiÚs
++;

219 
BLE_GAP_EVT_DISCONNECTED
:

220 
m_num_cÚÃùiÚs
--;

222 ià(
m_num_cÚÃùiÚs
 == 0)

224 
”r_code
 = 
	`adv”tisšg_bu‰Ús_cÚfigu»
();

225 
	`CALL_HANDLER_ON_ERROR
(
”r_code
);

232 
	}
}

234 
NRF_SDH_BLE_OBSERVER
(
m_bË_ob£rv”
, 
BSP_BTN_BLE_OBSERVER_PRIO
, 
bË_evt_hªdËr
, 
NULL
);

237 
ušt32_t
 
	$b¥_bŠ_bË_š™
(
b¥_bŠ_bË_”rÜ_hªdËr_t
 
”rÜ_hªdËr
, 
b¥_ev’t_t
 * 
p_¡¬tup_b¥_evt
)

239 
ušt32_t
 
”r_code
 = 
NRF_SUCCESS
;

241 
m_”rÜ_hªdËr
 = 
”rÜ_hªdËr
;

243 ià(
p_¡¬tup_b¥_evt
 !ğ
NULL
)

245 
	`¡¬tup_ev’t_exŒaù
(
p_¡¬tup_b¥_evt
);

248 ià(
m_num_cÚÃùiÚs
 == 0)

250 
”r_code
 = 
	`adv”tisšg_bu‰Ús_cÚfigu»
();

253  
”r_code
;

254 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\button\app_button.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
BUTTON
)

42 
	~"­p_bu‰Ú.h
"

43 
	~"­p_tim”.h
"

44 
	~"­p_”rÜ.h
"

45 
	~"Äf_drv_gpiÙe.h
"

46 
	~"Äf_as£¹.h
"

49 
­p_bu‰Ú_cfg_t
 cÚ¡ * 
	gmp_bu‰Ús
 = 
NULL
;

50 
ušt8_t
 
	gm_bu‰Ú_couÁ
;

51 
ušt32_t
 
	gm_d‘eùiÚ_d–ay
;

52 
APP_TIMER_DEF
(
m_d‘eùiÚ_d–ay_tim”_id
);

55 
ušt64_t
 
	gm_pš_¡©e
;

56 
ušt64_t
 
	gm_pš_Œªs™iÚ
;

70 
	$d‘eùiÚ_d–ay_timeout_hªdËr
(* 
p_cÚ‹xt
)

72 
ušt8_t
 
i
;

75 
i
 = 0; i < 
m_bu‰Ú_couÁ
; i++)

77 
­p_bu‰Ú_cfg_t
 cÚ¡ * 
p_bŠ
 = &
mp_bu‰Ús
[
i
];

78 
ušt64_t
 
bŠ_mask
 = 1ULL << 
p_bŠ
->
pš_no
;

79 ià(
bŠ_mask
 & 
m_pš_Œªs™iÚ
)

81 
m_pš_Œªs™iÚ
 &ğ~
bŠ_mask
;

82 
boŞ
 
pš_is_£t
 = 
	`Äf_drv_gpiÙe_š_is_£t
(
p_bŠ
->
pš_no
);

83 ià((
m_pš_¡©e
 & (1ULL << 
p_bŠ
->
pš_no
)è=ğ(((
ušt64_t
)
pš_is_£t
) <<…_btn->pin_no))

85 
ušt32_t
 
Œªs™iÚ
 = !(
pš_is_£t
 ^ (
p_bŠ
->
aùive_¡©e
 =ğ
APP_BUTTON_ACTIVE_HIGH
));

87 ià(
p_bŠ
->
bu‰Ú_hªdËr
)

89 
p_bŠ
->
	`bu‰Ú_hªdËr
Õ_bŠ->
pš_no
, 
Œªs™iÚ
);

94 
	}
}

96 
	$gpiÙe_ev’t_hªdËr
(
Äf_drv_gpiÙe_pš_t
 
pš
, 
Äf_gpiÙe_pŞ¬™y_t
 
aùiÚ
)

98 
ušt32_t
 
”r_code
;

99 
ušt64_t
 
pš_mask
 = 1ULL << 
pš
;

105 
”r_code
 = 
	`­p_tim”_¡İ
(
m_d‘eùiÚ_d–ay_tim”_id
);

106 ià(
”r_code
 !ğ
NRF_SUCCESS
)

113 ià(!(
m_pš_Œªs™iÚ
 & 
pš_mask
))

115 ià(
	`Äf_drv_gpiÙe_š_is_£t
(
pš
))

117 
m_pš_¡©e
 |ğ
pš_mask
;

121 
m_pš_¡©e
 &ğ~(
pš_mask
);

123 
m_pš_Œªs™iÚ
 |ğ(
pš_mask
);

125 
”r_code
 = 
	`­p_tim”_¡¬t
(
m_d‘eùiÚ_d–ay_tim”_id
, 
m_d‘eùiÚ_d–ay
, 
NULL
);

126 ià(
”r_code
 !ğ
NRF_SUCCESS
)

134 
m_pš_Œªs™iÚ
 &ğ~
pš_mask
;

136 
	}
}

138 
ušt32_t
 
	$­p_bu‰Ú_š™
(
­p_bu‰Ú_cfg_t
 cÚ¡ * 
p_bu‰Ús
,

139 
ušt8_t
 
bu‰Ú_couÁ
,

140 
ušt32_t
 
d‘eùiÚ_d–ay
)

142 
ušt32_t
 
”r_code
;

144 ià(
d‘eùiÚ_d–ay
 < 
APP_TIMER_MIN_TIMEOUT_TICKS
)

146  
NRF_ERROR_INVALID_PARAM
;

149 ià(!
	`Äf_drv_gpiÙe_is_š™
())

151 
”r_code
 = 
	`Äf_drv_gpiÙe_š™
();

152 
	`VERIFY_SUCCESS
(
”r_code
);

156 
mp_bu‰Ús
 = 
p_bu‰Ús
;

157 
m_bu‰Ú_couÁ
 = 
bu‰Ú_couÁ
;

158 
m_d‘eùiÚ_d–ay
 = 
d‘eùiÚ_d–ay
;

160 
m_pš_¡©e
 = 0;

161 
m_pš_Œªs™iÚ
 = 0;

163 
bu‰Ú_couÁ
--)

165 
­p_bu‰Ú_cfg_t
 cÚ¡ * 
p_bŠ
 = &
p_bu‰Ús
[
bu‰Ú_couÁ
];

167 #ià
	`defšed
(
BUTTON_HIGH_ACCURACY_ENABLED
) && (BUTTON_HIGH_ACCURACY_ENABLED == 1)

168 
Äf_drv_gpiÙe_š_cÚfig_t
 
cÚfig
 = 
	`GPIOTE_CONFIG_IN_SENSE_TOGGLE
(
p_bŠ
->
hi_accu¿cy
);

170 
Äf_drv_gpiÙe_š_cÚfig_t
 
cÚfig
 = 
	`GPIOTE_CONFIG_IN_SENSE_TOGGLE
(
çl£
);

172 
cÚfig
.
puÎ
 = 
p_bŠ
->
puÎ_cfg
;

174 
”r_code
 = 
	`Äf_drv_gpiÙe_š_š™
(
p_bŠ
->
pš_no
, &
cÚfig
, 
gpiÙe_ev’t_hªdËr
);

175 
	`VERIFY_SUCCESS
(
”r_code
);

179  
	`­p_tim”_ü—‹
(&
m_d‘eùiÚ_d–ay_tim”_id
,

180 
APP_TIMER_MODE_SINGLE_SHOT
,

181 
d‘eùiÚ_d–ay_timeout_hªdËr
);

182 
	}
}

184 
ušt32_t
 
	$­p_bu‰Ú_’abË
()

186 
	`ASSERT
(
mp_bu‰Ús
);

188 
ušt32_t
 
i
;

189 
i
 = 0; i < 
m_bu‰Ú_couÁ
; i++)

191 
	`Äf_drv_gpiÙe_š_ev’t_’abË
(
mp_bu‰Ús
[
i
].
pš_no
, 
Œue
);

194  
NRF_SUCCESS
;

195 
	}
}

198 
ušt32_t
 
	$­p_bu‰Ú_di§bË
()

200 
	`ASSERT
(
mp_bu‰Ús
);

202 
ušt32_t
 
i
;

203 
i
 = 0; i < 
m_bu‰Ú_couÁ
; i++)

205 
	`Äf_drv_gpiÙe_š_ev’t_di§bË
(
mp_bu‰Ús
[
i
].
pš_no
);

209  
	`­p_tim”_¡İ
(
m_d‘eùiÚ_d–ay_tim”_id
);

210 
	}
}

213 
boŞ
 
	$­p_bu‰Ú_is_pushed
(
ušt8_t
 
bu‰Ú_id
)

215 
	`ASSERT
(
bu‰Ú_id
 <ğ
m_bu‰Ú_couÁ
);

216 
	`ASSERT
(
mp_bu‰Ús
 !ğ
NULL
);

218 
­p_bu‰Ú_cfg_t
 cÚ¡ * 
p_bŠ
 = &
mp_bu‰Ús
[
bu‰Ú_id
];

219 
boŞ
 
is_£t
 = 
	`Äf_drv_gpiÙe_š_is_£t
(
p_bŠ
->
pš_no
);

221  !(
is_£t
 ^ (
p_bŠ
->
aùive_¡©e
 =ğ
APP_BUTTON_ACTIVE_HIGH
));

222 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\crc16\crc16.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
CRC16
)

42 
	~"üc16.h
"

44 
	~<¡dlib.h
>

46 
ušt16_t
 
	$üc16_compu‹
(
ušt8_t
 cÚ¡ * 
p_d©a
, 
ušt32_t
 
size
, 
ušt16_t
 cÚ¡ * 
p_üc
)

48 
ušt16_t
 
üc
 = (
p_üc
 =ğ
NULL
) ? 0xFFFF : *p_crc;

50 
ušt32_t
 
i
 = 0; i < 
size
; i++)

52 
üc
 = (
ušt8_t
)(crc >> 8) | (crc << 8);

53 
üc
 ^ğ
p_d©a
[
i
];

54 
üc
 ^ğ(
ušt8_t
)(crc & 0xFF) >> 4;

55 
üc
 ^= (crc << 8) << 4;

56 
üc
 ^= ((crc & 0xFF) << 4) << 1;

59  
üc
;

60 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\experimental_section_vars\nrf_section_iter.c

41 
	~"sdk_commÚ.h
"

43 #ià
NRF_MODULE_ENABLED
(
NRF_SECTION_ITER
)

45 
	~"Äf_£ùiÚ_™”.h
"

48 #ià!
defšed
(
__GNUC__
)

49 
	$Äf_£ùiÚ_™”_™em_£t
(
Äf_£ùiÚ_™”_t
 * 
p_™”
)

51 
	`ASSERT
(
p_™”
 !ğ
NULL
);

52 
	`ASSERT
(
p_™”
->
p_£t
 !ğ
NULL
);

53 
	`ASSERT
(
p_™”
->
p_£ùiÚ
 !ğ
NULL
);

55 
Œue
)

57 ià(
p_™”
->
p_£ùiÚ
 =ğp_™”->
p_£t
->
p_Ï¡
)

60 
p_™”
->
p_™em
 = 
NULL
;

64 ià(
p_™”
->
p_£ùiÚ
->
p_¡¬t
 !ğp_™”->p_£ùiÚ->
p_’d
)

67 
p_™”
->
p_™em
 =…_™”->
p_£ùiÚ
->
p_¡¬t
;

72 
p_™”
->
p_£ùiÚ
++;

74 
	}
}

78 
	$Äf_£ùiÚ_™”_š™
(
Äf_£ùiÚ_™”_t
 * 
p_™”
, 
Äf_£ùiÚ_£t_t
 cÚ¡ * 
p_£t
)

80 
	`ASSERT
(
p_™”
 !ğ
NULL
);

81 
	`ASSERT
(
p_£t
 !ğ
NULL
);

83 
p_™”
->
p_£t
 =…_set;

85 #ià
	`defšed
(
__GNUC__
)

86 
p_™”
->
p_™em
 =…_™”->
p_£t
->
£ùiÚ
.
p_¡¬t
;

87 ià(
p_™”
->
p_™em
 =ğp_™”->
p_£t
->
£ùiÚ
.
p_’d
)

89 
p_™”
->
p_™em
 = 
NULL
;

92 
p_™”
->
p_£ùiÚ
 = 
p_£t
->
p_fœ¡
;

93 
	`Äf_£ùiÚ_™”_™em_£t
(
p_™”
);

95 
	}
}

97 
	$Äf_£ùiÚ_™”_Ãxt
(
Äf_£ùiÚ_™”_t
 * 
p_™”
)

99 
	`ASSERT
(
p_™”
 !ğ
NULL
);

100 
	`ASSERT
(
p_™”
->
p_£t
 !ğ
NULL
);

102 ià(
p_™”
->
p_™em
 =ğ
NULL
)

107 
p_™”
->
p_™em
 = (*)((
size_t
)Õ_™”->p_™emè+…_™”->
p_£t
->
™em_size
);

109 #ià
	`defšed
(
__GNUC__
)

110 ià(
p_™”
->
p_™em
 =ğp_™”->
p_£t
->
£ùiÚ
.
p_’d
)

112 
p_™”
->
p_™em
 = 
NULL
;

115 
	`ASSERT
(
p_™”
->
p_£ùiÚ
 !ğ
NULL
);

117 ià(
p_™”
->
p_™em
 =ğp_™”->
p_£ùiÚ
->
p_’d
)

119 
p_™”
->
p_£ùiÚ
++;

120 
	`Äf_£ùiÚ_™”_™em_£t
(
p_™”
);

123 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\fds\fds.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
FDS
)

42 
	~"fds.h
"

43 
	~"fds_š‹º®_defs.h
"

45 
	~<¡dšt.h
>

46 
	~<¡ršg.h
>

47 
	~<¡dboŞ.h
>

48 
	~"Äf_”rÜ.h
"

49 
	~"Äf_©omic.h
"

50 
	~"Äf_©fifo.h
"

52 
	~"Äf_f¡Üage.h
"

53 #ià(
FDS_BACKEND
 =ğ
NRF_FSTORAGE_SD
)

54 
	~"Äf_f¡Üage_sd.h
"

55 #–ià(
FDS_BACKEND
 =ğ
NRF_FSTORAGE_NVMC
)

56 
	~"Äf_f¡Üage_nvmc.h
"

58 #”rÜ 
Inv®id
 
FDS
 
back’d
.

61 #ià(
FDS_CRC_CHECK_ON_READ
)

62 
	~"üc16.h
"

66 
fs_ev’t_hªdËr
(
Äf_f¡Üage_evt_t
 * 
evt
);

68 
NRF_FSTORAGE_DEF
(
Äf_f¡Üage_t
 
m_fs
) =

71 .
evt_hªdËr
 = 
fs_ev’t_hªdËr
,

77 
boŞ
 vŞ©
	mš™Ÿlized
;

78 
Äf_©omic_æag_t
 
	mš™Ÿlizšg
;

79 } 
	gm_æags
;

83 
Äf_©omic_u32_t
 
	gm_queued_İ_út
;

86 
Äf_©omic_u32_t
 
	gm_u£rs
;

87 
fds_cb_t
 
	gm_cb_bË
[
FDS_MAX_USERS
];

90 
Äf_©omic_u32_t
 
	gm_Ï‹¡_»c_id
;

93 
NRF_ATFIFO_DEF
(
m_queue
, 
fds_İ_t
, 
FDS_OP_QUEUE_SIZE
);

96 
fds_·ge_t
 
	gm_·ges
[
FDS_DATA_PAGES
];

97 
fds_sw­_·ge_t
 
	gm_sw­_·ge
;

100 
fds_gc_d©a_t
 
	gm_gc
;

103 
	$ev’t_£nd
(
fds_evt_t
 cÚ¡ * cÚ¡ 
p_evt
)

105 
ušt32_t
 
u£r
 = 0; u£¸< 
FDS_MAX_USERS
; user++)

107 ià(
m_cb_bË
[
u£r
] !ğ
NULL
)

109 
m_cb_bË
[
u£r
](
p_evt
);

112 
	}
}

115 
	$ev’t_´•¬e
(
fds_İ_t
 cÚ¡ * cÚ¡ 
p_İ
, 
fds_evt_t
 * cÚ¡ 
p_evt
)

117 
p_İ
->
İ_code
)

119 
FDS_OP_INIT
:

120 
p_evt
->
id
 = 
FDS_EVT_INIT
;

123 
FDS_OP_WRITE
:

124 
p_evt
->
id
 = 
FDS_EVT_WRITE
;

125 
p_evt
->
wr™e
.
fe_id
 = 
p_İ
->wr™e.
h—d”
.file_id;

126 
p_evt
->
wr™e
.
»cÜd_key
 = 
p_İ
->wr™e.
h—d”
.record_key;

127 
p_evt
->
wr™e
.
»cÜd_id
 = 
p_İ
->wr™e.
h—d”
.record_id;

128 
p_evt
->
wr™e
.
is_»cÜd_upd©ed
 = 0;

131 
FDS_OP_UPDATE
:

132 
p_evt
->
id
 = 
FDS_EVT_UPDATE
;

133 
p_evt
->
wr™e
.
fe_id
 = 
p_İ
->wr™e.
h—d”
.file_id;

134 
p_evt
->
wr™e
.
»cÜd_key
 = 
p_İ
->wr™e.
h—d”
.record_key;

135 
p_evt
->
wr™e
.
»cÜd_id
 = 
p_İ
->wr™e.
h—d”
.record_id;

136 
p_evt
->
wr™e
.
is_»cÜd_upd©ed
 = (
p_İ
->wr™e.
¡•
 =ğ
FDS_OP_WRITE_DONE
);

139 
FDS_OP_DEL_RECORD
:

140 
p_evt
->
id
 = 
FDS_EVT_DEL_RECORD
;

141 
p_evt
->
d–
.
fe_id
 = 
p_İ
->del.file_id;

142 
p_evt
->
d–
.
»cÜd_key
 = 
p_İ
->del.record_key;

143 
p_evt
->
d–
.
»cÜd_id
 = 
p_İ
->d–.
»cÜd_to_d–‘e
;

146 
FDS_OP_DEL_FILE
:

147 
p_evt
->
id
 = 
FDS_EVT_DEL_FILE
;

148 
p_evt
->
d–
.
fe_id
 = 
p_İ
->del.file_id;

149 
p_evt
->
d–
.
»cÜd_key
 = 
FDS_RECORD_KEY_DIRTY
;

150 
p_evt
->
d–
.
»cÜd_id
 = 0;

153 
FDS_OP_GC
:

154 
p_evt
->
id
 = 
FDS_EVT_GC
;

161 
	}
}

164 
boŞ
 
	$h—d”_has_Ãxt
(
fds_h—d”_t
 cÚ¡ * 
p_hdr
, 
ušt32_t
 cÚ¡ * 
p_·ge_’d
)

166 
ušt32_t
 cÚ¡ * cÚ¡ 
p_hdr32
 = (ušt32_t*)
p_hdr
;

167  ( ( 
p_hdr32
 < 
p_·ge_’d
)

168 && (*
p_hdr32
 !ğ
FDS_ERASED_WORD
));

169 
	}
}

173 
fds_h—d”_t
 cÚ¡ * 
	$h—d”_jump
(
fds_h—d”_t
 cÚ¡ * cÚ¡ 
p_hdr
)

175  (
fds_h—d”_t
*)((
ušt32_t
*)
p_hdr
 + 
FDS_HEADER_SIZE
 +…_hdr->
Ëngth_wÜds
);

176 
	}
}

179 
fds_h—d”_¡©us_t
 
	$h—d”_check
(
fds_h—d”_t
 cÚ¡ * 
p_hdr
, 
ušt32_t
 cÚ¡ * 
p_·ge_’d
)

181 ià(((
ušt32_t
*)
	`h—d”_jump
(
p_hdr
è> 
p_·ge_’d
))

185  
FDS_HEADER_CORRUPT
;

188 iàĞ(
p_hdr
->
fe_id
 =ğ
FDS_FILE_ID_INVALID
)

189 || (
p_hdr
->
»cÜd_key
 =ğ
FDS_RECORD_KEY_DIRTY
))

191  
FDS_HEADER_DIRTY
;

194  
FDS_HEADER_VALID
;

195 
	}
}

198 
boŞ
 
	$add»ss_is_v®id
(
ušt32_t
 cÚ¡ * cÚ¡ 
p_addr
)

200  ((
p_addr
 !ğ
NULL
) &&

201 (
p_addr
 >ğ(
ušt32_t
*)
m_fs
.
¡¬t_addr
) &&

202 (
p_addr
 <ğ(
ušt32_t
*)
m_fs
.
’d_addr
) &&

203 (
	`is_wÜd_®igÃd
(
p_addr
)));

204 
	}
}

208 
fds_·ge_ty³_t
 
	$·ge_id’tify
(
ušt32_t
 cÚ¡ * cÚ¡ 
p_·ge_addr
)

210 iàĞ(
p_·ge_addr
 =ğ
NULL
)

211 || (
p_·ge_addr
[
FDS_PAGE_TAG_WORD_0
] !ğ
FDS_PAGE_TAG_MAGIC
))

213  
FDS_PAGE_UNDEFINED
;

216 
p_·ge_addr
[
FDS_PAGE_TAG_WORD_1
])

218 
FDS_PAGE_TAG_SWAP
:

219  
FDS_PAGE_SWAP
;

221 
FDS_PAGE_TAG_DATA
:

222  
FDS_PAGE_DATA
;

225  
FDS_PAGE_UNDEFINED
;

227 
	}
}

230 
boŞ
 
	$·ge_is_”a£d
(
ušt32_t
 cÚ¡ * cÚ¡ 
p_·ge_addr
)

232 
ušt32_t
 
i
 = 0; i < 
FDS_PAGE_SIZE
; i++)

234 ià(*(
p_·ge_addr
 + 
i
è!ğ
FDS_ERASED_WORD
)

236  
çl£
;

240  
Œue
;

241 
	}
}

245 
boŞ
 
	$·ge_has_¥aû
(
ušt16_t
 
·ge
, ušt16_ˆ
Ëngth_wÜds
)

247 
Ëngth_wÜds
 +ğ
m_·ges
[
·ge
].
wr™e_off£t
;

248 
Ëngth_wÜds
 +ğ
m_·ges
[
·ge
].
wÜds_»£rved
;

249  (
Ëngth_wÜds
 < 
FDS_PAGE_SIZE
);

250 
	}
}

255 
»t_code_t
 
	$·ge_äom_»cÜd
(
ušt16_t
 * cÚ¡ 
p_·ge
, 
ušt32_t
 cÚ¡ * cÚ¡ 
p_»c
)

257 
»t_code_t
 
»t
 = 
FDS_ERR_NOT_FOUND
;

259 
	`CRITICAL_SECTION_ENTER
();

260 
ušt16_t
 
i
 = 0; i < 
FDS_DATA_PAGES
; i++)

262 ià((
p_»c
 > 
m_·ges
[
i
].
p_addr
) &&

263 (
p_»c
 < 
m_·ges
[
i
].
p_addr
 + 
FDS_PAGE_SIZE
))

265 
»t
 = 
FDS_SUCCESS
;

266 *
p_·ge
 = 
i
;

270 
	`CRITICAL_SECTION_EXIT
();

272  
»t
;

273 
	}
}

280 
	$·ge_sÿn
(
ušt32_t
 cÚ¡ * 
p_addr
,

281 
ušt16_t
 * cÚ¡ 
wÜds_wr™‹n
,

282 
boŞ
 * cÚ¡ 
ÿn_gc
)

284 
ušt32_t
 cÚ¡ * cÚ¡ 
p_·ge_’d
 = 
p_addr
 + 
FDS_PAGE_SIZE
;

286 
p_addr
 +ğ
FDS_PAGE_TAG_SIZE
;

287 *
wÜds_wr™‹n
 = 
FDS_PAGE_TAG_SIZE
;

289 
fds_h—d”_t
 cÚ¡ * 
p_h—d”
 = (fds_h—d”_t*)
p_addr
;

291 
	`h—d”_has_Ãxt
(
p_h—d”
, 
p_·ge_’d
))

293 
fds_h—d”_¡©us_t
 
hdr
 = 
	`h—d”_check
(
p_h—d”
, 
p_·ge_’d
);

295 ià(
hdr
 =ğ
FDS_HEADER_VALID
)

298 ià(
p_h—d”
->
»cÜd_id
 > 
m_Ï‹¡_»c_id
)

300 
m_Ï‹¡_»c_id
 = 
p_h—d”
->
»cÜd_id
;

305 ià(
ÿn_gc
 !ğ
NULL
)

307 *
ÿn_gc
 = 
Œue
;

310 ià(
hdr
 =ğ
FDS_HEADER_CORRUPT
)

316 *
wÜds_wr™‹n
 = 
FDS_PAGE_SIZE
;

323 *
wÜds_wr™‹n
 +ğ(
FDS_HEADER_SIZE
 + 
p_h—d”
->
Ëngth_wÜds
);

324 
p_h—d”
 = 
	`h—d”_jump
(p_header);

326 
	}
}

329 
	$·ge_off£ts_upd©e
(
fds_·ge_t
 * cÚ¡ 
p_·ge
, 
fds_İ_t
 cÚ¡ * 
p_İ
)

336 ià(
p_İ
->
wr™e
.
¡•
 > 
FDS_OP_WRITE_RECORD_ID
)

338 
p_·ge
->
wr™e_off£t
 +ğ(
FDS_HEADER_SIZE
 + 
p_İ
->
wr™e
.
h—d”
.
Ëngth_wÜds
);

341 
p_·ge
->
wÜds_»£rved
 -ğ(
FDS_HEADER_SIZE
 + 
p_İ
->
wr™e
.
h—d”
.
Ëngth_wÜds
);

342 
	}
}

346 
»t_code_t
 
	$·ge_g_wr™e_sw­
()

349 
ušt32_t
 cÚ¡ 
·ge_g_sw­
[] = {
FDS_PAGE_TAG_MAGIC
, 
FDS_PAGE_TAG_SWAP
};

350  
	`Äf_f¡Üage_wr™e
(&
m_fs
, (
ušt32_t
)
m_sw­_·ge
.
p_addr
, 
·ge_g_sw­
, 
FDS_PAGE_TAG_SIZE
 * (ušt32_t), 
NULL
);

351 
	}
}

355 
»t_code_t
 
	$·ge_g_wr™e_d©a
(
ušt32_t
 cÚ¡ * cÚ¡ 
p_·ge_addr
)

358 
ušt32_t
 cÚ¡ 
·ge_g_d©a
[] = {
FDS_PAGE_TAG_MAGIC
, 
FDS_PAGE_TAG_DATA
};

359  
	`Äf_f¡Üage_wr™e
(&
m_fs
, (
ušt32_t
)
p_·ge_addr
, 
·ge_g_d©a
, 
FDS_PAGE_TAG_SIZE
 * (ušt32_t), 
NULL
);

360 
	}
}

365 
»t_code_t
 
	$wr™e_¥aû_»£rve
(
ušt16_t
 
Ëngth_wÜds
, ušt16_ˆ* 
p_·ge
)

367 
boŞ
 
¥aû_»£rved
 = 
çl£
;

368 
ušt16_t
 cÚ¡ 
tÙ®_Ën_wÜds
 = 
Ëngth_wÜds
 + 
FDS_HEADER_SIZE
;

370 ià(
tÙ®_Ën_wÜds
 >ğ
FDS_PAGE_SIZE
 - 
FDS_PAGE_TAG_SIZE
)

372  
FDS_ERR_RECORD_TOO_LARGE
;

375 
	`CRITICAL_SECTION_ENTER
();

376 
ušt16_t
 
·ge
 = 0;…ag< 
FDS_DATA_PAGES
;…age++)

378 ià((
m_·ges
[
·ge
].
·ge_ty³
 =ğ
FDS_PAGE_DATA
) &&

379 (
	`·ge_has_¥aû
(
·ge
, 
tÙ®_Ën_wÜds
)))

381 
¥aû_»£rved
 = 
Œue
;

382 *
p_·ge
 = 
·ge
;

384 
m_·ges
[
·ge
].
wÜds_»£rved
 +ğ
tÙ®_Ën_wÜds
;

388 
	`CRITICAL_SECTION_EXIT
();

390  (
¥aû_»£rved
è? 
FDS_SUCCESS
 : 
FDS_ERR_NO_SPACE_IN_FLASH
;

391 
	}
}

396 
	$wr™e_¥aû_ä“
(
ušt16_t
 
Ëngth_wÜds
, ušt16_ˆ
·ge
)

398 
m_·ges
[
·ge
].
wÜds_»£rved
 -ğ(
Ëngth_wÜds
 + 
FDS_HEADER_SIZE
);

399 
	}
}

402 
ušt32_t
 
	$»cÜd_id_Ãw
()

404  
	`Äf_©omic_u32_add
(&
m_Ï‹¡_»c_id
, 1);

405 
	}
}

413 
boŞ
 
	$»cÜd_fšd_Ãxt
(
ušt16_t
 
·ge
, 
ušt32_t
 cÚ¡ ** 
p_»cÜd
)

415 
ušt32_t
 cÚ¡ * 
p_·ge_’d
 = (
m_·ges
[
·ge
].
p_addr
 + 
FDS_PAGE_SIZE
);

419 
fds_h—d”_t
 cÚ¡ * 
p_h—d”
 = (fds_h—d”_t*)(*
p_»cÜd
);

421 ià(
p_h—d”
 !ğ
NULL
)

423 
p_h—d”
 = 
	`h—d”_jump
(p_header);

427 
p_h—d”
 = (
fds_h—d”_t
*)(
m_·ges
[
·ge
].
p_addr
 + 
FDS_PAGE_TAG_SIZE
);

434 
	`h—d”_has_Ãxt
(
p_h—d”
, 
p_·ge_’d
))

436 
	`h—d”_check
(
p_h—d”
, 
p_·ge_’d
))

438 
FDS_HEADER_VALID
:

439 *
p_»cÜd
 = (
ušt32_t
*)
p_h—d”
;

440  
Œue
;

442 
FDS_HEADER_DIRTY
:

443 
p_h—d”
 = 
	`h—d”_jump
(p_header);

446 
FDS_HEADER_CORRUPT
:

449  
çl£
;

454  
çl£
;

455 
	}
}

460 
boŞ
 
	$»cÜd_fšd_by_desc
(
fds_»cÜd_desc_t
 * cÚ¡ 
p_desc
, 
ušt16_t
 * cÚ¡ 
p_·ge
)

466 ià((
	`add»ss_is_v®id
(
p_desc
->
p_»cÜd
)) &&

467 (
p_desc
->
gc_run_couÁ
 =ğ
m_gc
.
run_couÁ
) &&

468 (
p_desc
->
»cÜd_id
 =ğ((
fds_h—d”_t
*í_desc->
p_»cÜd
)->record_id))

470  (
	`·ge_äom_»cÜd
(
p_·ge
, 
p_desc
->
p_»cÜd
è=ğ
FDS_SUCCESS
);

474 *
p_·ge
 = 0; *p_·g< 
FDS_DATA_PAGES
; (*p_page)++)

477 
ušt32_t
 cÚ¡ * 
p_»cÜd
 = 
NULL
;

479 
	`»cÜd_fšd_Ãxt
(*
p_·ge
, &
p_»cÜd
))

481 
fds_h—d”_t
 cÚ¡ * cÚ¡ 
p_h—d”
 = (fds_h—d”_t*)
p_»cÜd
;

482 ià(
p_h—d”
->
»cÜd_id
 =ğ
p_desc
->record_id)

484 
p_desc
->
p_»cÜd
 =…_record;

485 
p_desc
->
gc_run_couÁ
 = 
m_gc
.
run_couÁ
;

486  
Œue
;

491  
çl£
;

492 
	}
}

499 
»t_code_t
 
	$»cÜd_fšd
(
ušt16_t
 cÚ¡ * 
p_fe_id
,

500 
ušt16_t
 cÚ¡ * 
p_»cÜd_key
,

501 
fds_»cÜd_desc_t
 * 
p_desc
,

502 
fds_fšd_tok’_t
 * 
p_tok’
)

504 ià(!
m_æags
.
š™Ÿlized
)

506  
FDS_ERR_NOT_INITIALIZED
;

509 ià(
p_desc
 =ğ
NULL
 || 
p_tok’
 == NULL)

511  
FDS_ERR_NULL_ARG
;

515 ; 
p_tok’
->
·ge
 < 
FDS_DATA_PAGES
;…_token->page++)

517 ià(
m_·ges
[
p_tok’
->
·ge
].
·ge_ty³
 !ğ
FDS_PAGE_DATA
)

524 
	`»cÜd_fšd_Ãxt
(
p_tok’
->
·ge
, &p_tok’->
p_addr
))

526 
fds_h—d”_t
 cÚ¡ * 
p_h—d”
 = (fds_h—d”_t*)
p_tok’
->
p_addr
;

529 ià((
p_fe_id
 !ğ
NULL
) &&

530 (
p_h—d”
->
fe_id
 !ğ*
p_fe_id
))

535 ià((
p_»cÜd_key
 !ğ
NULL
) &&

536 (
p_h—d”
->
»cÜd_key
 !ğ*
p_»cÜd_key
))

542 
p_desc
->
»cÜd_id
 = 
p_h—d”
->record_id;

543 
p_desc
->
p_»cÜd
 = 
p_tok’
->
p_addr
;

544 
p_desc
->
gc_run_couÁ
 = 
m_gc
.
run_couÁ
;

546  
FDS_SUCCESS
;

551 
p_tok’
->
p_addr
 = 
NULL
;

554  
FDS_ERR_NOT_FOUND
;

555 
	}
}

559 
	$»cÜds_¡©
(
ušt16_t
 
·ge
,

560 
ušt16_t
 * 
p_v®id_»cÜds
,

561 
ušt16_t
 * 
p_dœty_»cÜds
,

562 
ušt16_t
 * 
p_ä“abË_wÜds
,

563 
boŞ
 * 
p_cÜru±iÚ
)

565 
fds_h—d”_t
 cÚ¡ * 
p_h—d”
 = (fds_h—d”_t*)(
m_·ges
[
·ge
].
p_addr
 + 
FDS_PAGE_TAG_SIZE
);

566 
ušt32_t
 cÚ¡ * cÚ¡ 
p_·ge_’d
 = (
m_·ges
[
·ge
].
p_addr
 + 
FDS_PAGE_SIZE
);

568 
	`h—d”_has_Ãxt
(
p_h—d”
, 
p_·ge_’d
))

570 
	`h—d”_check
(
p_h—d”
, 
p_·ge_’d
))

572 
FDS_HEADER_DIRTY
:

573 *
p_dœty_»cÜds
 += 1;

574 *
p_ä“abË_wÜds
 +ğ
FDS_HEADER_SIZE
 + 
p_h—d”
->
Ëngth_wÜds
;

575 
p_h—d”
 = 
	`h—d”_jump
(p_header);

578 
FDS_HEADER_VALID
:

579 *
p_v®id_»cÜds
 += 1;

580 
p_h—d”
 = 
	`h—d”_jump
(p_header);

583 
FDS_HEADER_CORRUPT
:

585 *
p_dœty_»cÜds
 += 1;

586 *
p_ä“abË_wÜds
 +ğ(
p_·ge_’d
 - (
ušt32_t
*)
p_h—d”
);

587 *
p_cÜru±iÚ
 = 
Œue
;

596 
	}
}

600 
fds_İ_t
 * 
	$queue_buf_g‘
(
Äf_©fifo_™em_put_t
 * 
p_ut_ùx
)

602 
fds_İ_t
 * cÚ¡ 
p_İ
 = (fds_İ_t*è
	`Äf_©fifo_™em_®loc
(
m_queue
, 
p_ut_ùx
);

604 
	`mem£t
(
p_İ
, 0x00, (
fds_İ_t
));

605  
p_İ
;

606 
	}
}

610 
	$queue_buf_¡Üe
(
Äf_©fifo_™em_put_t
 * 
p_ut_ùx
)

612 (è
	`Äf_©fifo_™em_put
(
m_queue
, 
p_ut_ùx
);

613 
	}
}

617 
fds_İ_t
 * 
	$queue_lßd
(
Äf_©fifo_™em_g‘_t
 * 
p_ig‘_ùx
)

619  (
fds_İ_t
*è
	`Äf_©fifo_™em_g‘
(
m_queue
, 
p_ig‘_ùx
);

620 
	}
}

624 
	$queue_ä“
(
Äf_©fifo_™em_g‘_t
 * 
p_ig‘_ùx
)

627 (è
	`Äf_©fifo_™em_ä“
(
m_queue
, 
p_ig‘_ùx
);

628 
	}
}

631 
boŞ
 
	$queue_has_Ãxt
()

634 
	`ASSERT
(
m_queued_İ_út
 != 0);

635  
	`Äf_©omic_u32_sub
(&
m_queued_İ_út
, 1);

636 
	}
}

641 
fds_š™_İts_t
 
	$·ges_š™
()

643 
ušt32_t
 
»t
 = 
NO_PAGES
;

644 
ušt16_t
 
·ge
 = 0;

645 
ušt16_t
 
tÙ®_·ges_avaabË
 = 
FDS_VIRTUAL_PAGES
;

646 
boŞ
 
sw­_£t_but_nÙ_found
 = 
çl£
;

648 
ušt16_t
 
i
 = 0; i < 
FDS_VIRTUAL_PAGES
; i++)

650 
ušt32_t
 cÚ¡ * cÚ¡ 
p_·ge_addr
 = (ušt32_t*)
m_fs
.
¡¬t_addr
 + (
i
 * 
FDS_PAGE_SIZE
);

651 
fds_·ge_ty³_t
 cÚ¡ 
·ge_ty³
 = 
	`·ge_id’tify
(
p_·ge_addr
);

653 
·ge_ty³
)

655 
FDS_PAGE_UNDEFINED
:

657 ià(
	`·ge_is_”a£d
(
p_·ge_addr
))

659 ià(
m_sw­_·ge
.
p_addr
 !ğ
NULL
)

663 
m_·ges
[
·ge
].
·ge_ty³
 = 
FDS_PAGE_ERASED
;

664 
m_·ges
[
·ge
].
p_addr
 = 
p_·ge_addr
;

665 
m_·ges
[
·ge
].
wr™e_off£t
 = 
FDS_PAGE_TAG_SIZE
;

669 
m_gc
.
cur_·ge
 = 
·ge
;

670 
·ge
++;

675 
m_sw­_·ge
.
p_addr
 = 
p_·ge_addr
;

676 
m_sw­_·ge
.
wr™e_off£t
 = 
FDS_PAGE_TAG_SIZE
;

677 
sw­_£t_but_nÙ_found
 = 
Œue
;

680 
»t
 |ğ
PAGE_ERASED
;

686 
tÙ®_·ges_avaabË
--;

687 
m_·ges
[
·ge
].
p_addr
 = 
p_·ge_addr
;

688 
m_·ges
[
·ge
].
·ge_ty³
 = 
FDS_PAGE_UNDEFINED
;

689 
·ge
++;

693 
FDS_PAGE_DATA
:

695 
m_·ges
[
·ge
].
·ge_ty³
 = 
FDS_PAGE_DATA
;

696 
m_·ges
[
·ge
].
p_addr
 = 
p_·ge_addr
;

700 
	`·ge_sÿn
(
p_·ge_addr
, &
m_·ges
[
·ge
].
wr™e_off£t
, &m_·ges[·ge].
ÿn_gc
);

702 
»t
 |ğ
PAGE_DATA
;

703 
·ge
++;

706 
FDS_PAGE_SWAP
:

708 ià(
sw­_£t_but_nÙ_found
)

710 
m_·ges
[
·ge
].
·ge_ty³
 = 
FDS_PAGE_ERASED
;

711 
m_·ges
[
·ge
].
p_addr
 = 
m_sw­_·ge
.p_addr;

712 
m_·ges
[
·ge
].
wr™e_off£t
 = 
FDS_PAGE_TAG_SIZE
;

714 
·ge
++;

717 
m_sw­_·ge
.
p_addr
 = 
p_·ge_addr
;

720 
	`·ge_sÿn
(
p_·ge_addr
, &
m_sw­_·ge
.
wr™e_off£t
, 
NULL
);

722 
»t
 |ğ(
m_sw­_·ge
.
wr™e_off£t
 =ğ
FDS_PAGE_TAG_SIZE
) ?

723 
PAGE_SWAP_CLEAN
 : 
PAGE_SWAP_DIRTY
;

732 ià(
tÙ®_·ges_avaabË
 < 2)

734 
»t
 &ğ
NO_PAGES
;

737  (
fds_š™_İts_t
)
»t
;

738 
	}
}

742 
»t_code_t
 
	$»cÜd_h—d”_wr™e_begš
(
fds_İ_t
 * cÚ¡ 
p_İ
, 
ušt32_t
 * cÚ¡ 
p_addr
)

744 
»t_code_t
 
»t
;

747 
p_İ
->
wr™e
.
¡•
 = 
FDS_OP_WRITE_RECORD_ID
;

749 
»t
 = 
	`Äf_f¡Üage_wr™e
(&
m_fs
, (
ušt32_t
)(
p_addr
 + 
FDS_OFFSET_TL
),

750 &
p_İ
->
wr™e
.
h—d”
.
»cÜd_key
, 
FDS_HEADER_SIZE_TL
 * (
ušt32_t
), 
NULL
);

752  (
»t
 =ğ
NRF_SUCCESS
è? 
FDS_SUCCESS
 : 
FDS_ERR_BUSY
;

753 
	}
}

756 
»t_code_t
 
	$»cÜd_h—d”_wr™e_id
(
fds_İ_t
 * cÚ¡ 
p_İ
, 
ušt32_t
 * cÚ¡ 
p_addr
)

758 
»t_code_t
 
»t
;

762 
p_İ
->
wr™e
.
¡•
 = (p_İ->wr™e.
p_d©a
 !ğ
NULL
) ?

763 
FDS_OP_WRITE_DATA
 : 
FDS_OP_WRITE_HEADER_FINALIZE
;

765 
»t
 = 
	`Äf_f¡Üage_wr™e
(&
m_fs
, (
ušt32_t
)(
p_addr
 + 
FDS_OFFSET_ID
),

766 &
p_İ
->
wr™e
.
h—d”
.
»cÜd_id
, 
FDS_HEADER_SIZE_ID
 * (
ušt32_t
), 
NULL
);

768  (
»t
 =ğ
NRF_SUCCESS
è? 
FDS_SUCCESS
 : 
FDS_ERR_BUSY
;

769 
	}
}

772 
»t_code_t
 
	$»cÜd_h—d”_wr™e_fš®ize
(
fds_İ_t
 * cÚ¡ 
p_İ
, 
ušt32_t
 * cÚ¡ 
p_addr
)

774 
»t_code_t
 
»t
;

778 
p_İ
->
wr™e
.
¡•
 = (p_İ->
İ_code
 =ğ
FDS_OP_UPDATE
) ?

779 
FDS_OP_WRITE_FLAG_DIRTY
 : 
FDS_OP_WRITE_DONE
;

781 
»t
 = 
	`Äf_f¡Üage_wr™e
(&
m_fs
, (
ušt32_t
)(
p_addr
 + 
FDS_OFFSET_IC
),

782 &
p_İ
->
wr™e
.
h—d”
.
fe_id
, 
FDS_HEADER_SIZE_IC
 * (
ušt32_t
), 
NULL
);

784  (
»t
 =ğ
NRF_SUCCESS
è? 
FDS_SUCCESS
 : 
FDS_ERR_BUSY
;

785 
	}
}

788 
»t_code_t
 
	$»cÜd_h—d”_æag_dœty
(
ušt32_t
 * cÚ¡ 
p_»cÜd
, 
ušt16_t
 
·ge_to_gc
)

792 
	`__ALIGN
(4è
ušt32_t
 cÚ¡ 
dœty_h—d”
 = {0xFFFF0000};

795 
»t_code_t
 
»t
;

797 
»t
 = 
	`Äf_f¡Üage_wr™e
(&
m_fs
, (
ušt32_t
)
p_»cÜd
,

798 &
dœty_h—d”
, 
FDS_HEADER_SIZE_TL
 * (
ušt32_t
), 
NULL
);

800 ià(
»t
 !ğ
NRF_SUCCESS
)

802  
FDS_ERR_BUSY
;

805 
m_·ges
[
·ge_to_gc
].
ÿn_gc
 = 
Œue
;

807  
FDS_SUCCESS
;

808 
	}
}

811 
»t_code_t
 
	$»cÜd_fšd_ªd_d–‘e
(
fds_İ_t
 * cÚ¡ 
p_İ
)

813 
»t_code_t
 
»t
;

814 
ušt16_t
 
·ge
;

815 
fds_»cÜd_desc_t
 
desc
 = {0};

817 
desc
.
»cÜd_id
 = 
p_İ
->
d–
.
»cÜd_to_d–‘e
;

819 ià(
	`»cÜd_fšd_by_desc
(&
desc
, &
·ge
))

821 
fds_h—d”_t
 cÚ¡ * cÚ¡ 
p_h—d”
 = (fds_h—d”_ˆcÚ¡ *)
desc
.
p_»cÜd
;

828 
p_İ
->
d–
.
fe_id
 = 
p_h—d”
->file_id;

829 
p_İ
->
d–
.
»cÜd_key
 = 
p_h—d”
->record_key;

832 
»t
 = 
	`»cÜd_h—d”_æag_dœty
((
ušt32_t
*)
desc
.
p_»cÜd
, 
·ge
);

837 
»t
 = 
FDS_ERR_NOT_FOUND
;

840  
»t
;

841 
	}
}

845 
»t_code_t
 
	$fe_fšd_ªd_d–‘e
(
fds_İ_t
 * cÚ¡ 
p_İ
)

847 
»t_code_t
 
»t
;

848 
fds_»cÜd_desc_t
 
desc
;

851 
fds_fšd_tok’_t
 
tok
 = {0};

854 
»t
 = 
	`»cÜd_fšd
(&
p_İ
->
d–
.
fe_id
, 
NULL
, &
desc
, &
tok
);

856 ià(
»t
 =ğ
FDS_SUCCESS
)

859 
»t
 = 
	`»cÜd_h—d”_æag_dœty
((
ušt32_t
*)
desc
.
p_»cÜd
, 
tok
.
·ge
);

864 
	`mem£t
(&
tok
, 0x00, (
fds_fšd_tok’_t
));

867  
»t
;

868 
	}
}

872 
»t_code_t
 
	$»cÜd_wr™e_d©a
(
fds_İ_t
 * cÚ¡ 
p_İ
, 
ušt32_t
 * cÚ¡ 
p_addr
)

874 
»t_code_t
 
»t
;

876 
p_İ
->
wr™e
.
¡•
 = 
FDS_OP_WRITE_HEADER_FINALIZE
;

878 
»t
 = 
	`Äf_f¡Üage_wr™e
(&
m_fs
, (
ušt32_t
)(
p_addr
 + 
FDS_OFFSET_DATA
),

879 
p_İ
->
wr™e
.
p_d©a
,…_İ->wr™e.
h—d”
.
Ëngth_wÜds
 * (
ušt32_t
), 
NULL
);

881  (
»t
 =ğ
NRF_SUCCESS
è? 
FDS_SUCCESS
 : 
FDS_ERR_BUSY
;

882 
	}
}

885 #ià(
FDS_CRC_CHECK_ON_READ
)

886 
boŞ
 
	$üc_v”ify_sucûss
(
ušt16_t
 
üc
, ušt16_ˆ
Ën_wÜds
, 
ušt32_t
 cÚ¡ * cÚ¡ 
p_d©a
)

888 
ušt16_t
 
compu‹d_üc
;

894 
compu‹d_üc
 = 
	`üc16_compu‹
((
ušt8_t
 cÚ¡ *)
p_d©a
, 6, 
NULL
);

895 
compu‹d_üc
 = 
	`üc16_compu‹
((
ušt8_t
 cÚ¡ *)
p_d©a
 + 8,

896 (
FDS_HEADER_SIZE_ID
 + 
Ën_wÜds
è* (
ušt32_t
),

897 &
compu‹d_üc
);

899  (
compu‹d_üc
 =ğ
üc
);

900 
	}
}

904 
	$gc_š™
()

906 
m_gc
.
run_couÁ
++;

907 
m_gc
.
cur_·ge
 = 0;

908 
m_gc
.
»sume
 = 
çl£
;

912 
ušt16_t
 
i
 = 0; i < 
FDS_DATA_PAGES
; i++)

914 
m_gc
.
do_gc_·ge
[
i
] = (
m_·ges
[i].
·ge_ty³
 =ğ
FDS_PAGE_DATA
);

916 
	}
}

921 
boŞ
 
	$gc_·ge_Ãxt
(
ušt16_t
 * cÚ¡ 
p_Ãxt_·ge
)

923 
boŞ
 
»t
 = 
çl£
;

925 
ušt16_t
 
i
 = 0; i < 
FDS_DATA_PAGES
; i++)

927 ià(
m_gc
.
do_gc_·ge
[
i
])

930 
m_gc
.
do_gc_·ge
[
i
] = 
çl£
;

933 ià((
m_·ges
[
i
].
»cÜds_İ’
 =ğ0è&& (m_·ges[i].
ÿn_gc
 =ğ
Œue
))

935 *
p_Ãxt_·ge
 = 
i
;

936 
»t
 = 
Œue
;

942  
»t
;

943 
	}
}

946 
»t_code_t
 
	$gc_sw­_”a£
()

948 
m_gc
.
¡©e
 = 
GC_DISCARD_SWAP
;

949 
m_sw­_·ge
.
wr™e_off£t
 = 
FDS_PAGE_TAG_SIZE
;

951  
	`Äf_f¡Üage_”a£
(&
m_fs
, (
ušt32_t
)
m_sw­_·ge
.
p_addr
, 
FDS_PHY_PAGES_IN_VPAGE
, 
NULL
);

952 
	}
}

957 
»t_code_t
 
	$gc_·ge_”a£
()

959 
ušt32_t
 
»t
;

960 
ušt16_t
 cÚ¡ 
gc
 = 
m_gc
.
cur_·ge
;

962 ià(
m_·ges
[
gc
].
»cÜds_İ’
 == 0)

964 
m_gc
.
¡©e
 = 
GC_ERASE_PAGE
;

966 
»t
 = 
	`Äf_f¡Üage_”a£
(&
m_fs
, (
ušt32_t
)
m_·ges
[
gc
].
p_addr
, 
FDS_PHY_PAGES_IN_VPAGE
, 
NULL
);

972 
»t
 = 
	`gc_sw­_”a£
();

975  
»t
;

976 
	}
}

980 
»t_code_t
 
	$gc_»cÜd_cİy
()

982 
fds_h—d”_t
 cÚ¡ * cÚ¡ 
p_h—d”
 = (fds_h—d”_t*)
m_gc
.
p_»cÜd_¤c
;

983 
ušt32_t
 cÚ¡ * cÚ¡ 
p_de¡
 = 
m_sw­_·ge
.
p_addr
 + m_sw­_·ge.
wr™e_off£t
;

984 
ušt16_t
 cÚ¡ 
»cÜd_Ën
 = 
FDS_HEADER_SIZE
 + 
p_h—d”
->
Ëngth_wÜds
;

986 
m_gc
.
¡©e
 = 
GC_COPY_RECORD
;

990  
	`Äf_f¡Üage_wr™e
(&
m_fs
, (
ušt32_t
)
p_de¡
, 
m_gc
.
p_»cÜd_¤c
,

991 
»cÜd_Ën
 * (
ušt32_t
),

992 
NULL
);

993 
	}
}

996 
»t_code_t
 
	$gc_»cÜd_fšd_Ãxt
()

998 
»t_code_t
 
»t
;

1001 ià(
	`»cÜd_fšd_Ãxt
(
m_gc
.
cur_·ge
, &m_gc.
p_»cÜd_¤c
))

1003 
»t
 = 
	`gc_»cÜd_cİy
();

1008 
»t
 = 
	`gc_·ge_”a£
();

1011  
»t
;

1012 
	}
}

1016 
»t_code_t
 
	$gc_sw­_´omÙe
()

1018 
m_gc
.
¡©e
 = 
GC_PROMOTE_SWAP
;

1019  
	`·ge_g_wr™e_d©a
(
m_·ges
[
m_gc
.
cur_·ge
].
p_addr
);

1020 
	}
}

1024 
»t_code_t
 
	$gc_g_Ãw_sw­
()

1026 
m_gc
.
¡©e
 = 
GC_TAG_NEW_SWAP
;

1027 
m_gc
.
p_»cÜd_¤c
 = 
NULL
;

1028  
	`·ge_g_wr™e_sw­
();

1029 
	}
}

1032 
»t_code_t
 
	$gc_Ãxt_·ge
()

1034 ià(!
	`gc_·ge_Ãxt
(&
m_gc
.
cur_·ge
))

1037 
m_gc
.
¡©e
 = 
GC_BEGIN
;

1038 
m_gc
.
cur_·ge
 = 0;

1039 
m_gc
.
p_»cÜd_¤c
 = 
NULL
;

1041  
FDS_OP_COMPLETED
;

1044  
	`gc_»cÜd_fšd_Ãxt
();

1045 
	}
}

1049 
	$gc_upd©e_sw­_off£t
()

1051 
fds_h—d”_t
 cÚ¡ * cÚ¡ 
p_h—d”
 = (fds_h—d”_t*)
m_gc
.
p_»cÜd_¤c
;

1052 
ušt16_t
 cÚ¡ 
»cÜd_Ën
 = 
FDS_HEADER_SIZE
 + 
p_h—d”
->
Ëngth_wÜds
;

1054 
m_sw­_·ge
.
wr™e_off£t
 +ğ
»cÜd_Ën
;

1055 
	}
}

1058 
	$gc_sw­_·ges
()

1062 
ušt32_t
 cÚ¡ * cÚ¡ 
p_addr
 = 
m_sw­_·ge
.p_addr;

1064 
m_sw­_·ge
.
p_addr
 = 
m_·ges
[
m_gc
.
cur_·ge
].p_addr;

1065 
m_·ges
[
m_gc
.
cur_·ge
].
p_addr
 =…_addr;

1068 
m_·ges
[
m_gc
.
cur_·ge
].
wr™e_off£t
 = 
m_sw­_·ge
.write_offset;

1069 
m_sw­_·ge
.
wr™e_off£t
 = 
FDS_PAGE_TAG_SIZE
;

1070 
	}
}

1073 
	$gc_¡©e_advªû
()

1075 
m_gc
.
¡©e
)

1077 
GC_BEGIN
:

1078 
	`gc_š™
();

1079 
m_gc
.
¡©e
 = 
GC_NEXT_PAGE
;

1083 
GC_COPY_RECORD
:

1084 
	`gc_upd©e_sw­_off£t
();

1085 
m_gc
.
¡©e
 = 
GC_FIND_NEXT_RECORD
;

1089 
GC_ERASE_PAGE
:

1090 
	`gc_sw­_·ges
();

1091 
m_gc
.
¡©e
 = 
GC_PROMOTE_SWAP
;

1095 
GC_DISCARD_SWAP
:

1097 
GC_PROMOTE_SWAP
:

1099 
m_gc
.
¡©e
 = 
GC_TAG_NEW_SWAP
;

1102 
GC_TAG_NEW_SWAP
:

1103 
m_gc
.
¡©e
 = 
GC_NEXT_PAGE
;

1110 
	}
}

1114 
»t_code_t
 
	$š™_execu‹
(
ušt32_t
 
´ev_»t
, 
fds_İ_t
 * cÚ¡ 
p_İ
)

1116 
»t_code_t
 
»t
 = 
FDS_ERR_INTERNAL
;

1118 ià(
´ev_»t
 !ğ
NRF_SUCCESS
)

1121 
m_æags
.
š™Ÿlizšg
 = 
çl£
;

1122  
FDS_ERR_OPERATION_TIMEOUT
;

1125 
p_İ
->
š™
.
¡•
)

1127 
FDS_OP_INIT_TAG_SWAP
:

1130 
p_İ
->
š™
.
¡•
 = 
FDS_OP_INIT_TAG_DATA
;

1131 
»t
 = 
	`·ge_g_wr™e_sw­
();

1134 
FDS_OP_INIT_TAG_DATA
:

1137 
boŞ
 
wr™e_»qd
 = 
çl£
;

1138 
ušt16_t
 
i
 = 0; i < 
FDS_DATA_PAGES
; i++)

1140 ià(
m_·ges
[
i
].
·ge_ty³
 =ğ
FDS_PAGE_ERASED
)

1142 
m_·ges
[
i
].
·ge_ty³
 = 
FDS_PAGE_DATA
;

1143 
wr™e_»qd
 = 
Œue
;

1144 
»t
 = 
	`·ge_g_wr™e_d©a
(
m_·ges
[
i
].
p_addr
);

1148 ià(!
wr™e_»qd
)

1150 
m_æags
.
š™Ÿlized
 = 
Œue
;

1151 
m_æags
.
š™Ÿlizšg
 = 
çl£
;

1152  
FDS_OP_COMPLETED
;

1156 
FDS_OP_INIT_ERASE_SWAP
:

1159 
p_İ
->
š™
.
¡•
 = 
FDS_OP_INIT_TAG_SWAP
;

1160 
m_sw­_·ge
.
wr™e_off£t
 = 
FDS_PAGE_TAG_SIZE
;

1162 
»t
 = 
	`Äf_f¡Üage_”a£
(&
m_fs
, (
ušt32_t
)
m_sw­_·ge
.
p_addr
, 
FDS_PHY_PAGES_IN_VPAGE
, 
NULL
);

1165 
FDS_OP_INIT_PROMOTE_SWAP
:

1167 
p_İ
->
š™
.
¡•
 = 
FDS_OP_INIT_TAG_SWAP
;

1170 
»t
 = 
	`·ge_g_wr™e_d©a
(
m_sw­_·ge
.
p_addr
);

1172 
ušt16_t
 cÚ¡ 
gc
 = 
m_gc
.
cur_·ge
;

1173 
ušt32_t
 cÚ¡ * cÚ¡ 
p_Şd_sw­
 = 
m_sw­_·ge
.
p_addr
;

1176 
m_sw­_·ge
.
p_addr
 = 
m_·ges
[
gc
].p_addr;

1177 
m_·ges
[
gc
].
p_addr
 = 
p_Şd_sw­
;

1180 
m_·ges
[
gc
].
wr™e_off£t
 = 
m_sw­_·ge
.write_offset;

1181 
m_sw­_·ge
.
wr™e_off£t
 = 
FDS_PAGE_TAG_SIZE
;

1183 
m_·ges
[
gc
].
·ge_ty³
 = 
FDS_PAGE_DATA
;

1191 ià(
»t
 !ğ
FDS_SUCCESS
)

1194 
m_æags
.
š™Ÿlizšg
 = 
çl£
;

1195  
FDS_ERR_BUSY
;

1198  
FDS_OP_EXECUTING
;

1199 
	}
}

1203 
»t_code_t
 
	$wr™e_execu‹
(
ušt32_t
 
´ev_»t
, 
fds_İ_t
 * cÚ¡ 
p_İ
)

1205 
»t_code_t
 
»t
;

1206 
ušt32_t
 * 
p_wr™e_addr
;

1207 
fds_·ge_t
 * cÚ¡ 
p_·ge
 = &
m_·ges
[
p_İ
->
wr™e
.
·ge
];

1210 
fds_»cÜd_desc_t
 
desc
 = {0};

1214 
ušt16_t
 
·ge
;

1216 ià(
´ev_»t
 !ğ
NRF_SUCCESS
)

1219 
	`·ge_off£ts_upd©e
(
p_·ge
, 
p_İ
);

1220  
FDS_ERR_OPERATION_TIMEOUT
;

1224 
p_wr™e_addr
 = (
ušt32_t
*)(
p_·ge
->
p_addr
 +…_·ge->
wr™e_off£t
);

1227 
p_İ
->
wr™e
.
¡•
)

1229 
FDS_OP_WRITE_FIND_RECORD
:

1234 
desc
.
p_»cÜd
 = 
NULL
;

1235 
desc
.
»cÜd_id
 = 
p_İ
->
wr™e
.
»cÜd_to_d–‘e
;

1237 ià(!
	`»cÜd_fšd_by_desc
(&
desc
, &
·ge
))

1239  
FDS_ERR_NOT_FOUND
;

1245 
FDS_OP_WRITE_HEADER_BEGIN
:

1246 
»t
 = 
	`»cÜd_h—d”_wr™e_begš
(
p_İ
, 
p_wr™e_addr
);

1249 
FDS_OP_WRITE_RECORD_ID
:

1250 
»t
 = 
	`»cÜd_h—d”_wr™e_id
(
p_İ
, 
p_wr™e_addr
);

1253 
FDS_OP_WRITE_DATA
:

1254 
»t
 = 
	`»cÜd_wr™e_d©a
(
p_İ
, 
p_wr™e_addr
);

1257 
FDS_OP_WRITE_HEADER_FINALIZE
:

1258 
»t
 = 
	`»cÜd_h—d”_wr™e_fš®ize
(
p_İ
, 
p_wr™e_addr
);

1261 
FDS_OP_WRITE_FLAG_DIRTY
:

1262 
p_İ
->
wr™e
.
¡•
 = 
FDS_OP_WRITE_DONE
;

1263 
»t
 = 
	`»cÜd_h—d”_æag_dœty
((
ušt32_t
*)
desc
.
p_»cÜd
, 
·ge
);

1266 
FDS_OP_WRITE_DONE
:

1267 
»t
 = 
FDS_OP_COMPLETED
;

1269 #ià(
FDS_CRC_CHECK_ON_WRITE
)

1270 ià(!
	`üc_v”ify_sucûss
(
p_İ
->
wr™e
.
h—d”
.
üc16
,

1271 
p_İ
->
wr™e
.
h—d”
.
Ëngth_wÜds
,

1272 
p_wr™e_addr
))

1274 
»t
 = 
FDS_ERR_CRC_CHECK_FAILED
;

1280 
»t
 = 
FDS_ERR_INTERNAL
;

1286 ià(
»t
 !ğ
FDS_OP_EXECUTING
)

1289 
	`·ge_off£ts_upd©e
(
p_·ge
, 
p_İ
);

1292  
»t
;

1293 
	}
}

1296 
»t_code_t
 
	$d–‘e_execu‹
(
ušt32_t
 
´ev_»t
, 
fds_İ_t
 * cÚ¡ 
p_İ
)

1298 
»t_code_t
 
»t
;

1300 ià(
´ev_»t
 !ğ
NRF_SUCCESS
)

1302  
FDS_ERR_OPERATION_TIMEOUT
;

1305 
p_İ
->
d–
.
¡•
)

1307 
FDS_OP_DEL_RECORD_FLAG_DIRTY
:

1308 
p_İ
->
d–
.
¡•
 = 
FDS_OP_DEL_DONE
;

1309 
»t
 = 
	`»cÜd_fšd_ªd_d–‘e
(
p_İ
);

1312 
FDS_OP_DEL_FILE_FLAG_DIRTY
:

1313 
»t
 = 
	`fe_fšd_ªd_d–‘e
(
p_İ
);

1314 ià(
»t
 =ğ
FDS_ERR_NOT_FOUND
)

1318 
»t
 = 
FDS_OP_COMPLETED
;

1322 
FDS_OP_DEL_DONE
:

1323 
»t
 = 
FDS_OP_COMPLETED
;

1327 
»t
 = 
FDS_ERR_INTERNAL
;

1331  
»t
;

1332 
	}
}

1335 
»t_code_t
 
	$gc_execu‹
(
ušt32_t
 
´ev_»t
)

1337 
»t_code_t
 
»t
;

1339 ià(
´ev_»t
 !ğ
NRF_SUCCESS
)

1341  
FDS_ERR_OPERATION_TIMEOUT
;

1344 ià(
m_gc
.
»sume
)

1346 
m_gc
.
»sume
 = 
çl£
;

1350 
	`gc_¡©e_advªû
();

1353 
m_gc
.
¡©e
)

1355 
GC_NEXT_PAGE
:

1356 
»t
 = 
	`gc_Ãxt_·ge
();

1359 
GC_FIND_NEXT_RECORD
:

1360 
»t
 = 
	`gc_»cÜd_fšd_Ãxt
();

1363 
GC_COPY_RECORD
:

1364 
»t
 = 
	`gc_»cÜd_cİy
();

1367 
GC_ERASE_PAGE
:

1368 
»t
 = 
	`gc_·ge_”a£
();

1371 
GC_PROMOTE_SWAP
:

1372 
»t
 = 
	`gc_sw­_´omÙe
();

1375 
GC_TAG_NEW_SWAP
:

1376 
»t
 = 
	`gc_g_Ãw_sw­
();

1381 
»t
 = 
FDS_ERR_INTERNAL
;

1386  
»t
;

1387 
	}
}

1390 
	$queue_´oûss
(
»t_code_t
 
»suÉ
)

1392 
fds_İ_t
 * 
m_p_cur_İ
;

1393 
Äf_©fifo_™em_g‘_t
 
m_ig‘_ùx
;

1395 
Œue
)

1397 ià(
m_p_cur_İ
 =ğ
NULL
)

1400 
m_p_cur_İ
 = 
	`queue_lßd
(&
m_ig‘_ùx
);

1410 
	`ASSERT
(
m_p_cur_İ
 !ğ
NULL
);

1412 
m_p_cur_İ
->
İ_code
)

1414 
FDS_OP_INIT
:

1415 
»suÉ
 = 
	`š™_execu‹
ÔesuÉ, 
m_p_cur_İ
);

1418 
FDS_OP_WRITE
:

1419 
FDS_OP_UPDATE
:

1420 
»suÉ
 = 
	`wr™e_execu‹
ÔesuÉ, 
m_p_cur_İ
);

1423 
FDS_OP_DEL_RECORD
:

1424 
FDS_OP_DEL_FILE
:

1425 
»suÉ
 = 
	`d–‘e_execu‹
ÔesuÉ, 
m_p_cur_İ
);

1428 
FDS_OP_GC
:

1429 
»suÉ
 = 
	`gc_execu‹
(result);

1433 
»suÉ
 = 
FDS_ERR_INTERNAL
;

1437 ià(
»suÉ
 =ğ
FDS_OP_EXECUTING
)

1448 
fds_evt_t
 
evt
 =

1455 .
»suÉ
 = (»suÉ =ğ
FDS_OP_COMPLETED
è? 
FDS_SUCCESS
 :„esult,

1458 
	`ev’t_´•¬e
(
m_p_cur_İ
, &
evt
);

1459 
	`ev’t_£nd
(&
evt
);

1463 
m_p_cur_İ
 = 
NULL
;

1467 
»suÉ
 = 
NRF_SUCCESS
;

1470 
	`queue_ä“
(&
m_ig‘_ùx
);

1472 ià(!
	`queue_has_Ãxt
())

1478 
	}
}

1481 
	$queue_¡¬t
()

1483 ià(!
	`Äf_©omic_u32_ãtch_add
(&
m_queued_İ_út
, 1))

1485 
	`queue_´oûss
(
NRF_SUCCESS
);

1487 
	}
}

1490 
	$fs_ev’t_hªdËr
(
Äf_f¡Üage_evt_t
 * 
p_evt
)

1492 
	`queue_´oûss
(
p_evt
->
»suÉ
);

1493 
	}
}

1497 
»t_code_t
 
	$wr™e_’queue
(
fds_»cÜd_desc_t
 * cÚ¡ 
p_desc
,

1498 
fds_»cÜd_t
 cÚ¡ * cÚ¡ 
p_»cÜd
,

1499 
fds_»£rve_tok’_t
 cÚ¡ * cÚ¡ 
p_tok
,

1500 
fds_İ_code_t
 
İ_code
)

1502 
»t_code_t
 
»t
;

1503 
ušt16_t
 
·ge
;

1504 
ušt16_t
 
üc
 = 0;

1505 
ušt16_t
 
Ëngth_wÜds
 = 0;

1506 
fds_İ_t
 * 
p_İ
;

1507 
Äf_©fifo_™em_put_t
 
ut_ùx
;

1509 ià(!
m_æags
.
š™Ÿlized
)

1511  
FDS_ERR_NOT_INITIALIZED
;

1514 ià(
p_»cÜd
 =ğ
NULL
)

1516  
FDS_ERR_NULL_ARG
;

1519 ià((
p_»cÜd
->
fe_id
 =ğ
FDS_FILE_ID_INVALID
) ||

1520 (
p_»cÜd
->
key
 =ğ
FDS_RECORD_KEY_DIRTY
))

1522  
FDS_ERR_INVALID_ARG
;

1525 ià(!
	`is_wÜd_®igÃd
(
p_»cÜd
->
d©a
.
p_d©a
))

1527  
FDS_ERR_UNALIGNED_ADDR
;

1531 ià(
p_tok
 =ğ
NULL
)

1534 
Ëngth_wÜds
 = 
p_»cÜd
->
d©a
.length_words;

1535 
»t
 = 
	`wr™e_¥aû_»£rve
(
Ëngth_wÜds
, &
·ge
);

1537 ià(
»t
 !ğ
FDS_SUCCESS
)

1541  
»t
;

1546 
·ge
 = 
p_tok
->page;

1547 
Ëngth_wÜds
 = 
p_tok
->length_words;

1551 
p_İ
 = 
	`queue_buf_g‘
(&
ut_ùx
);

1552 ià(
p_İ
 =ğ
NULL
)

1554 
	`CRITICAL_SECTION_ENTER
();

1555 
	`wr™e_¥aû_ä“
(
Ëngth_wÜds
, 
·ge
);

1556 
	`CRITICAL_SECTION_EXIT
();

1557  
FDS_ERR_NO_SPACE_IN_QUEUES
;

1561 
p_İ
->
İ_code
 = op_code;

1562 
p_İ
->
wr™e
.
¡•
 = 
FDS_OP_WRITE_HEADER_BEGIN
;

1563 
p_İ
->
wr™e
.
·ge
 =…age;

1564 
p_İ
->
wr™e
.
p_d©a
 = 
p_»cÜd
->
d©a
.p_data;

1565 
p_İ
->
wr™e
.
h—d”
.
»cÜd_id
 = 
	`»cÜd_id_Ãw
();

1566 
p_İ
->
wr™e
.
h—d”
.
fe_id
 = 
p_»cÜd
->file_id;

1567 
p_İ
->
wr™e
.
h—d”
.
»cÜd_key
 = 
p_»cÜd
->
key
;

1568 
p_İ
->
wr™e
.
h—d”
.
Ëngth_wÜds
 =†ength_words;

1570 ià(
İ_code
 =ğ
FDS_OP_UPDATE
)

1572 
p_İ
->
wr™e
.
¡•
 = 
FDS_OP_WRITE_FIND_RECORD
;

1574 
p_İ
->
wr™e
.
»cÜd_to_d–‘e
 = 
p_desc
->
»cÜd_id
;

1577 #ià(
FDS_CRC_CHECK_ON_READ
)

1580 
üc
 = 
	`üc16_compu‹
((
ušt8_t
*)&
p_İ
->
wr™e
.
h—d”
, 6, 
NULL
);

1581 
üc
 = 
	`üc16_compu‹
((
ušt8_t
*)&
p_İ
->
wr™e
.
h—d”
.
»cÜd_id
, 4, &crc);

1584 
üc
 = 
	`üc16_compu‹
((
ušt8_t
*)
p_»cÜd
->
d©a
.
p_d©a
,

1585 
p_»cÜd
->
d©a
.
Ëngth_wÜds
 * (
ušt32_t
), &
üc
);

1588 
p_İ
->
wr™e
.
h—d”
.
üc16
 = 
üc
;

1590 
	`queue_buf_¡Üe
(&
ut_ùx
);

1593 ià(
p_desc
 !ğ
NULL
)

1595 
p_desc
->
p_»cÜd
 = 
NULL
;

1597 
p_desc
->
»cÜd_id
 = 
p_İ
->
wr™e
.
h—d”
.record_id;

1598 
p_desc
->
»cÜd_is_İ’
 = 
çl£
;

1599 
p_desc
->
gc_run_couÁ
 = 
m_gc
.
run_couÁ
;

1603 
	`queue_¡¬t
();

1605  
FDS_SUCCESS
;

1606 
	}
}

1609 
»t_code_t
 
	$fds_»gi¡”
(
fds_cb_t
 
cb
)

1611 
»t_code_t
 
»t
;

1613 ià(
m_u£rs
 =ğ
FDS_MAX_USERS
)

1615 
»t
 = 
FDS_ERR_USER_LIMIT_REACHED
;

1619 
m_cb_bË
[
m_u£rs
] = 
cb
;

1620 (è
	`Äf_©omic_u32_add
(&
m_u£rs
, 1);

1622 
»t
 = 
FDS_SUCCESS
;

1625  
»t
;

1626 
	}
}

1629 
ušt32_t
 
	$æash_’d_addr
()

1631 
ušt32_t
 cÚ¡ 
boÙlßd”_addr
 = 
NRF_UICR
->
NRFFW
[0];

1632 
ušt32_t
 cÚ¡ 
·ge_sz
 = 
NRF_FICR
->
CODEPAGESIZE
;

1633 #iâdeà
NRF52810_XXAA


1634 
ušt32_t
 cÚ¡ 
code_sz
 = 
NRF_FICR
->
CODESIZE
;

1637 
ušt32_t
 cÚ¡ 
code_sz
 = 48;

1640  (
boÙlßd”_addr
 !ğ0xFFFFFFFFè? boÙlßd”_add¸: (
code_sz
 * 
·ge_sz
);

1641 
	}
}

1644 
	$æash_bounds_£t
()

1646 
ušt32_t
 
æash_size
 = (
FDS_PHY_PAGES
 * 
FDS_PHY_PAGE_SIZE
 * (uint32_t));

1647 
m_fs
.
’d_addr
 = 
	`æash_’d_addr
();

1648 
m_fs
.
¡¬t_addr
 = m_fs.
’d_addr
 - 
æash_size
;

1649 
	}
}

1652 
»t_code_t
 
	$æash_subsy¡em_š™
()

1654 
	`æash_bounds_£t
();

1656 #ià (
FDS_BACKEND
 =ğ
NRF_FSTORAGE_SD
)

1657  
	`Äf_f¡Üage_š™
(&
m_fs
, &
Äf_f¡Üage_sd
, 
NULL
);

1658 #–ià(
FDS_BACKEND
 =ğ
NRF_FSTORAGE_NVMC
)

1659  
	`Äf_f¡Üage_š™
(&
m_fs
, &
Äf_f¡Üage_nvmc
, 
NULL
);

1661 #”rÜ 
Inv®id
 
FDS_BACKEND
.

1663 
	}
}

1666 
	$queue_š™
()

1668 (è
	`NRF_ATFIFO_INIT
(
m_queue
);

1669 
	}
}

1672 
»t_code_t
 
	$fds_š™
()

1674 
»t_code_t
 
»t
;

1675 
fds_evt_t
 cÚ¡ 
evt_sucûss
 =

1677 .
id
 = 
FDS_EVT_INIT
,

1678 .
»suÉ
 = 
FDS_SUCCESS
,

1681 ià(
m_æags
.
š™Ÿlized
)

1684 
	`ev’t_£nd
(&
evt_sucûss
);

1685  
FDS_SUCCESS
;

1688 ià(
	`Äf_©omic_æag_£t_ãtch
(&
m_æags
.
š™Ÿlizšg
))

1691  
FDS_SUCCESS
;

1696 
»t
 = 
	`æash_subsy¡em_š™
();

1697 ià(
»t
 !ğ
NRF_SUCCESS
)

1699  
»t
;

1702 
	`queue_š™
();

1707 
fds_š™_İts_t
 
š™_İts
 = 
	`·ges_š™
();

1709 
š™_İts
)

1711 
NO_PAGES
:

1712 
NO_SWAP
:

1713  
FDS_ERR_NO_PAGES
;

1715 
ALREADY_INSTALLED
:

1718 
m_æags
.
š™Ÿlized
 = 
Œue
;

1719 
m_æags
.
š™Ÿlizšg
 = 
çl£
;

1720 
	`ev’t_£nd
(&
evt_sucûss
);

1721  
FDS_SUCCESS
;

1730 
Äf_©fifo_™em_put_t
 
ut_ùx
;

1732 
fds_İ_t
 * 
p_İ
 = 
	`queue_buf_g‘
(&
ut_ùx
);

1733 ià(
p_İ
 =ğ
NULL
)

1735  
FDS_ERR_NO_SPACE_IN_QUEUES
;

1738 
p_İ
->
İ_code
 = 
FDS_OP_INIT
;

1740 
š™_İts
)

1742 
FRESH_INSTALL
:

1743 
TAG_SWAP
:

1744 
p_İ
->
š™
.
¡•
 = 
FDS_OP_INIT_TAG_SWAP
;

1747 
PROMOTE_SWAP
:

1748 
PROMOTE_SWAP_INST
:

1749 
p_İ
->
š™
.
¡•
 = 
FDS_OP_INIT_PROMOTE_SWAP
;

1752 
DISCARD_SWAP
:

1753 
p_İ
->
š™
.
¡•
 = 
FDS_OP_INIT_ERASE_SWAP
;

1756 
TAG_DATA
:

1757 
TAG_DATA_INST
:

1758 
p_İ
->
š™
.
¡•
 = 
FDS_OP_INIT_TAG_DATA
;

1766 
	`queue_buf_¡Üe
(&
ut_ùx
);

1767 
	`queue_¡¬t
();

1769  
FDS_SUCCESS
;

1770 
	}
}

1773 
»t_code_t
 
	$fds_»cÜd_İ’
(
fds_»cÜd_desc_t
 * cÚ¡ 
p_desc
,

1774 
fds_æash_»cÜd_t
 * cÚ¡ 
p_æash_»c
)

1776 
ušt16_t
 
·ge
;

1778 ià((
p_desc
 =ğ
NULL
è|| (
p_æash_»c
 == NULL))

1780  
FDS_ERR_NULL_ARG
;

1784 ià(
	`»cÜd_fšd_by_desc
(
p_desc
, &
·ge
))

1786 
fds_h—d”_t
 cÚ¡ * cÚ¡ 
p_h—d”
 = (fds_h—d”_t*)
p_desc
->
p_»cÜd
;

1788 #ià(
FDS_CRC_CHECK_ON_READ
)

1789 ià(!
	`üc_v”ify_sucûss
(
p_h—d”
->
üc16
,

1790 
p_h—d”
->
Ëngth_wÜds
,

1791 
p_desc
->
p_»cÜd
))

1793  
FDS_ERR_CRC_CHECK_FAILED
;

1797 (è
	`Äf_©omic_u32_add
(&
m_·ges
[
·ge
].
»cÜds_İ’
, 1);

1800 
p_æash_»c
->
p_h—d”
 =…_header;

1801 
p_æash_»c
->
p_d©a
 = (
p_desc
->
p_»cÜd
 + 
FDS_HEADER_SIZE
);

1804 
p_desc
->
»cÜd_is_İ’
 = 
Œue
;

1806  
FDS_SUCCESS
;

1811  
FDS_ERR_NOT_FOUND
;

1812 
	}
}

1815 
»t_code_t
 
	$fds_»cÜd_şo£
(
fds_»cÜd_desc_t
 * cÚ¡ 
p_desc
)

1817 
»t_code_t
 
»t
;

1818 
ušt16_t
 
·ge
;

1820 ià(
p_desc
 =ğ
NULL
)

1822  
FDS_ERR_NULL_ARG
;

1825 ià(
	`»cÜd_fšd_by_desc
((
fds_»cÜd_desc_t
*)
p_desc
, &
·ge
))

1827 
	`CRITICAL_SECTION_ENTER
();

1828 ià((
m_·ges
[
·ge
].
»cÜds_İ’
 > 0è&& (
p_desc
->
»cÜd_is_İ’
))

1831 
m_·ges
[
·ge
].
»cÜds_İ’
--;

1832 
p_desc
->
»cÜd_is_İ’
 = 
çl£
;

1834 
»t
 = 
FDS_SUCCESS
;

1838 
»t
 = 
FDS_ERR_NO_OPEN_RECORDS
;

1840 
	`CRITICAL_SECTION_EXIT
();

1844 
»t
 = 
FDS_ERR_NOT_FOUND
;

1847  
»t
;

1848 
	}
}

1851 
»t_code_t
 
	$fds_»£rve
(
fds_»£rve_tok’_t
 * cÚ¡ 
p_tok
, 
ušt16_t
 
Ëngth_wÜds
)

1853 
»t_code_t
 
»t
;

1854 
ušt16_t
 
·ge
;

1856 ià(!
m_æags
.
š™Ÿlized
)

1858  
FDS_ERR_NOT_INITIALIZED
;

1861 ià(
p_tok
 =ğ
NULL
)

1863  
FDS_ERR_NULL_ARG
;

1866 
»t
 = 
	`wr™e_¥aû_»£rve
(
Ëngth_wÜds
, &
·ge
);

1868 ià(
»t
 =ğ
FDS_SUCCESS
)

1870 
p_tok
->
·ge
 =…age;

1871 
p_tok
->
Ëngth_wÜds
 =†ength_words;

1874  
»t
;

1875 
	}
}

1878 
»t_code_t
 
	$fds_»£rve_ÿnûl
(
fds_»£rve_tok’_t
 * cÚ¡ 
p_tok
)

1880 
»t_code_t
 
»t
;

1882 ià(!
m_æags
.
š™Ÿlized
)

1884  
FDS_ERR_NOT_INITIALIZED
;

1887 ià(
p_tok
 =ğ
NULL
)

1889  
FDS_ERR_NULL_ARG
;

1892 ià(
p_tok
->
·ge
 > 
FDS_DATA_PAGES
)

1895  
FDS_ERR_INVALID_ARG
;

1898 
fds_·ge_t
 cÚ¡ * cÚ¡ 
p_·ge
 = &
m_·ges
[
p_tok
->
·ge
];

1900 
	`CRITICAL_SECTION_ENTER
();

1901 ià((
FDS_HEADER_SIZE
 + 
p_tok
->
Ëngth_wÜds
è<ğ
p_·ge
->
wÜds_»£rved
)

1904 
	`wr™e_¥aû_ä“
(
p_tok
->
Ëngth_wÜds
,…_tok->
·ge
);

1907 
p_tok
->
·ge
 = 0;

1908 
p_tok
->
Ëngth_wÜds
 = 0;

1909 
»t
 = 
FDS_SUCCESS
;

1915 
»t
 = 
FDS_ERR_INVALID_ARG
;

1917 
	`CRITICAL_SECTION_EXIT
();

1919  
»t
;

1920 
	}
}

1923 
»t_code_t
 
	$fds_»cÜd_wr™e
(
fds_»cÜd_desc_t
 * cÚ¡ 
p_desc
,

1924 
fds_»cÜd_t
 cÚ¡ * cÚ¡ 
p_»cÜd
)

1926  
	`wr™e_’queue
(
p_desc
, 
p_»cÜd
, 
NULL
, 
FDS_OP_WRITE
);

1927 
	}
}

1930 
»t_code_t
 
	$fds_»cÜd_wr™e_»£rved
(
fds_»cÜd_desc_t
 * cÚ¡ 
p_desc
,

1931 
fds_»cÜd_t
 cÚ¡ * cÚ¡ 
p_»cÜd
,

1932 
fds_»£rve_tok’_t
 cÚ¡ * cÚ¡ 
p_tok
)

1935 ià(
p_tok
 =ğ
NULL
)

1937  
FDS_ERR_NULL_ARG
;

1940  
	`wr™e_’queue
(
p_desc
, 
p_»cÜd
, 
p_tok
, 
FDS_OP_WRITE
);

1941 
	}
}

1944 
»t_code_t
 
	$fds_»cÜd_upd©e
(
fds_»cÜd_desc_t
 * cÚ¡ 
p_desc
,

1945 
fds_»cÜd_t
 cÚ¡ * cÚ¡ 
p_»cÜd
)

1948 ià(
p_desc
 =ğ
NULL
)

1950  
FDS_ERR_NULL_ARG
;

1953  
	`wr™e_’queue
(
p_desc
, 
p_»cÜd
, 
NULL
, 
FDS_OP_UPDATE
);

1954 
	}
}

1957 
»t_code_t
 
	$fds_»cÜd_d–‘e
(
fds_»cÜd_desc_t
 * cÚ¡ 
p_desc
)

1959 
fds_İ_t
 * 
p_İ
;

1960 
Äf_©fifo_™em_put_t
 
ut_ùx
;

1962 ià(!
m_æags
.
š™Ÿlized
)

1964  
FDS_ERR_NOT_INITIALIZED
;

1967 ià(
p_desc
 =ğ
NULL
)

1969  
FDS_ERR_NULL_ARG
;

1972 
p_İ
 = 
	`queue_buf_g‘
(&
ut_ùx
);

1973 ià(
p_İ
 =ğ
NULL
)

1975  
FDS_ERR_NO_SPACE_IN_QUEUES
;

1978 
p_İ
->
İ_code
 = 
FDS_OP_DEL_RECORD
;

1979 
p_İ
->
d–
.
¡•
 = 
FDS_OP_DEL_RECORD_FLAG_DIRTY
;

1980 
p_İ
->
d–
.
»cÜd_to_d–‘e
 = 
p_desc
->
»cÜd_id
;

1982 
	`queue_buf_¡Üe
(&
ut_ùx
);

1983 
	`queue_¡¬t
();

1985  
FDS_SUCCESS
;

1986 
	}
}

1989 
»t_code_t
 
	$fds_fe_d–‘e
(
ušt16_t
 
fe_id
)

1991 
fds_İ_t
 * 
p_İ
;

1992 
Äf_©fifo_™em_put_t
 
ut_ùx
;

1994 ià(!
m_æags
.
š™Ÿlized
)

1996  
FDS_ERR_NOT_INITIALIZED
;

1999 ià(
fe_id
 =ğ
FDS_FILE_ID_INVALID
)

2001  
FDS_ERR_INVALID_ARG
;

2004 
p_İ
 = 
	`queue_buf_g‘
(&
ut_ùx
);

2005 ià(
p_İ
 =ğ
NULL
)

2007  
FDS_ERR_NO_SPACE_IN_QUEUES
;

2010 
p_İ
->
İ_code
 = 
FDS_OP_DEL_FILE
;

2011 
p_İ
->
d–
.
¡•
 = 
FDS_OP_DEL_FILE_FLAG_DIRTY
;

2012 
p_İ
->
d–
.
fe_id
 = file_id;

2014 
	`queue_buf_¡Üe
(&
ut_ùx
);

2015 
	`queue_¡¬t
();

2017  
FDS_SUCCESS
;

2018 
	}
}

2021 
»t_code_t
 
	$fds_gc
()

2023 
fds_İ_t
 * 
p_İ
;

2024 
Äf_©fifo_™em_put_t
 
ut_ùx
;

2026 ià(!
m_æags
.
š™Ÿlized
)

2028  
FDS_ERR_NOT_INITIALIZED
;

2031 
p_İ
 = 
	`queue_buf_g‘
(&
ut_ùx
);

2032 ià(
p_İ
 =ğ
NULL
)

2034  
FDS_ERR_NO_SPACE_IN_QUEUES
;

2037 
p_İ
->
İ_code
 = 
FDS_OP_GC
;

2039 
	`queue_buf_¡Üe
(&
ut_ùx
);

2041 ià(
m_gc
.
¡©e
 !ğ
GC_BEGIN
)

2044 
m_gc
.
»sume
 = 
Œue
;

2047 
	`queue_¡¬t
();

2049  
FDS_SUCCESS
;

2050 
	}
}

2053 
»t_code_t
 
	$fds_»cÜd_™”©e
(
fds_»cÜd_desc_t
 * cÚ¡ 
p_desc
,

2054 
fds_fšd_tok’_t
 * cÚ¡ 
p_tok’
)

2056  
	`»cÜd_fšd
(
NULL
, NULL, 
p_desc
, 
p_tok’
);

2057 
	}
}

2060 
»t_code_t
 
	$fds_»cÜd_fšd
(
ušt16_t
 
fe_id
,

2061 
ušt16_t
 
»cÜd_key
,

2062 
fds_»cÜd_desc_t
 * cÚ¡ 
p_desc
,

2063 
fds_fšd_tok’_t
 * cÚ¡ 
p_tok’
)

2065  
	`»cÜd_fšd
(&
fe_id
, &
»cÜd_key
, 
p_desc
, 
p_tok’
);

2066 
	}
}

2069 
»t_code_t
 
	$fds_»cÜd_fšd_by_key
(
ušt16_t
 
»cÜd_key
,

2070 
fds_»cÜd_desc_t
 * cÚ¡ 
p_desc
,

2071 
fds_fšd_tok’_t
 * cÚ¡ 
p_tok’
)

2073  
	`»cÜd_fšd
(
NULL
, &
»cÜd_key
, 
p_desc
, 
p_tok’
);

2074 
	}
}

2077 
»t_code_t
 
	$fds_»cÜd_fšd_š_fe
(
ušt16_t
 
fe_id
,

2078 
fds_»cÜd_desc_t
 * cÚ¡ 
p_desc
,

2079 
fds_fšd_tok’_t
 * cÚ¡ 
p_tok’
)

2081  
	`»cÜd_fšd
(&
fe_id
, 
NULL
, 
p_desc
, 
p_tok’
);

2082 
	}
}

2085 
»t_code_t
 
	$fds_desütÜ_äom_»c_id
(
fds_»cÜd_desc_t
 * cÚ¡ 
p_desc
,

2086 
ušt32_t
 
»cÜd_id
)

2088 ià(
p_desc
 =ğ
NULL
)

2090  
FDS_ERR_NULL_ARG
;

2094 
	`mem£t
(
p_desc
, 0x00, (
fds_»cÜd_desc_t
));

2095 
p_desc
->
»cÜd_id
 =„ecord_id;

2097  
FDS_SUCCESS
;

2098 
	}
}

2101 
»t_code_t
 
	$fds_»cÜd_id_äom_desc
(
fds_»cÜd_desc_t
 cÚ¡ * cÚ¡ 
p_desc
,

2102 
ušt32_t
 * cÚ¡ 
p_»cÜd_id
)

2104 ià((
p_desc
 =ğ
NULL
è|| (
p_»cÜd_id
 == NULL))

2106  
FDS_ERR_NULL_ARG
;

2109 *
p_»cÜd_id
 = 
p_desc
->
»cÜd_id
;

2111  
FDS_SUCCESS
;

2112 
	}
}

2115 
»t_code_t
 
	$fds_¡©
(
fds_¡©_t
 * cÚ¡ 
p_¡©
)

2117 
ušt16_t
 cÚ¡ 
wÜds_š_·ge
 = 
FDS_PAGE_SIZE
;

2119 
ušt16_t
 
cÚtig_wÜds
 = 0;

2121 ià(!
m_æags
.
š™Ÿlized
)

2123  
FDS_ERR_NOT_INITIALIZED
;

2126 ià(
p_¡©
 =ğ
NULL
)

2128  
FDS_ERR_NULL_ARG
;

2131 
	`mem£t
(
p_¡©
, 0x00, (
fds_¡©_t
));

2133 
p_¡©
->
·ges_avaabË
 = 
FDS_VIRTUAL_PAGES
;

2135 
ušt16_t
 
·ge
 = 0;…ag< 
FDS_DATA_PAGES
;…age++)

2137 
ušt16_t
 cÚ¡ 
wÜds_u£d
 = 
m_·ges
[
·ge
].
wr™e_off£t
 + m_·ges[·ge].
wÜds_»£rved
;

2139 ià(
	`·ge_id’tify
(
m_·ges
[
·ge
].
p_addr
è=ğ
FDS_PAGE_UNDEFINED
)

2141 
p_¡©
->
·ges_avaabË
--;

2144 
p_¡©
->
İ’_»cÜds
 +ğ
m_·ges
[
·ge
].
»cÜds_İ’
;

2145 
p_¡©
->
wÜds_»£rved
 +ğ
m_·ges
[
·ge
].words_reserved;

2146 
p_¡©
->
wÜds_u£d
 += words_used;

2148 
cÚtig_wÜds
 = (
wÜds_š_·ge
 - 
wÜds_u£d
);

2149 ià(
cÚtig_wÜds
 > 
p_¡©
->
Ïrge¡_cÚtig
)

2151 
p_¡©
->
Ïrge¡_cÚtig
 = 
cÚtig_wÜds
;

2154 
	`»cÜds_¡©
(
·ge
,

2155 &
p_¡©
->
v®id_»cÜds
,

2156 &
p_¡©
->
dœty_»cÜds
,

2157 &
p_¡©
->
ä“abË_wÜds
,

2158 &
p_¡©
->
cÜru±iÚ
);

2161  
FDS_SUCCESS
;

2162 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\fstorage\nrf_fstorage.c

40 
	~"sdk_cÚfig.h
"

42 #ià
NRF_FSTORAGE_ENABLED


44 
	~"Äf_f¡Üage.h
"

45 
	~<¡ddef.h
>

46 
	~<¡dšt.h
>

47 
	~"sdk_”rÜs.h
"

48 
	~"sdk_maüos.h
"

49 
	~"Äf_£ùiÚ.h
"

51 
	#NRF_LOG_MODULE_NAME
 
Äf_f¡Üage


	)

52 
	~"Äf_log.h
"

53 
NRF_LOG_MODULE_REGISTER
();

57 
NRF_SECTION_DEF
(
fs_d©a
, 
Äf_f¡Üage_t
);

72 
	#NRF_FSTORAGE_PARAM_CHECK
(
_cÚd
, 
_”r
) \

73 
	`NRF_PARAM_CHECK
(
NRF_FSTORAGE
, 
_cÚd
, 
_”r
, 
NRF_LOG_ERROR
)

	)

76 
boŞ
 
addr_is_®igÃd32
(
ušt32_t
 
addr
);

77 
boŞ
 
addr_is_·ge_®igÃd
(
Äf_f¡Üage_t
 cÚ¡ * 
p_fs
, 
ušt32_t
 
addr
);

78 
boŞ
 
addr_is_w™hš_bounds
(
Äf_f¡Üage_t
 cÚ¡ * 
p_fs
, 
ušt32_t
 
addr
, ušt32_ˆ
Ën
);

81 
»t_code_t
 
	$Äf_f¡Üage_š™
(
Äf_f¡Üage_t
 * 
p_fs
,

82 
Äf_f¡Üage_­i_t
 * 
p_­i
,

83 * 
p_·¿m
)

85 
	`NRF_FSTORAGE_PARAM_CHECK
(
p_fs
, 
NRF_ERROR_NULL
);

86 
	`NRF_FSTORAGE_PARAM_CHECK
(
p_­i
, 
NRF_ERROR_NULL
);

88 
p_fs
->
p_­i
 =…_api;

90  (
p_fs
->
p_­i
)->
	`š™
Õ_fs, 
p_·¿m
);

91 
	}
}

94 
»t_code_t
 
	$Äf_f¡Üage_unš™
(
Äf_f¡Üage_t
 * 
p_fs
,

95 * 
p_·¿m
)

97 
»t_code_t
 
rc
;

99 
	`NRF_FSTORAGE_PARAM_CHECK
(
p_fs
, 
NRF_ERROR_NULL
);

100 
	`NRF_FSTORAGE_PARAM_CHECK
(
p_fs
->
p_­i
, 
NRF_ERROR_INVALID_STATE
);

102 
rc
 = (
p_fs
->
p_­i
)->
	`unš™
Õ_fs, 
p_·¿m
);

105 
p_fs
->
p_­i
 = 
NULL
;

106 
p_fs
->
p_æash_šfo
 = 
NULL
;

108  
rc
;

109 
	}
}

112 
»t_code_t
 
	$Äf_f¡Üage_»ad
(
Äf_f¡Üage_t
 cÚ¡ * 
p_fs
,

113 
ušt32_t
 
¤c
,

114 * 
p_de¡
,

115 
ušt32_t
 
Ën
)

117 
	`NRF_FSTORAGE_PARAM_CHECK
(
p_fs
, 
NRF_ERROR_NULL
);

118 
	`NRF_FSTORAGE_PARAM_CHECK
(
p_de¡
, 
NRF_ERROR_NULL
);

119 
	`NRF_FSTORAGE_PARAM_CHECK
(
p_fs
->
p_­i
, 
NRF_ERROR_INVALID_STATE
);

120 
	`NRF_FSTORAGE_PARAM_CHECK
(
Ën
, 
NRF_ERROR_INVALID_LENGTH
);

123 
	`NRF_FSTORAGE_PARAM_CHECK
(
	`addr_is_®igÃd32
(
¤c
), 
NRF_ERROR_INVALID_ADDR
);

124 
	`NRF_FSTORAGE_PARAM_CHECK
(
	`addr_is_w™hš_bounds
(
p_fs
, 
¤c
, 
Ën
), 
NRF_ERROR_INVALID_ADDR
);

126  (
p_fs
->
p_­i
)->
	`»ad
Õ_fs, 
¤c
, 
p_de¡
, 
Ën
);

127 
	}
}

130 
»t_code_t
 
	$Äf_f¡Üage_wr™e
(
Äf_f¡Üage_t
 cÚ¡ * 
p_fs
,

131 
ušt32_t
 
de¡
,

132 cÚ¡ * 
p_¤c
,

133 
ušt32_t
 
Ën
,

134 * 
p_cÚ‹xt
)

136 
	`NRF_FSTORAGE_PARAM_CHECK
(
p_fs
, 
NRF_ERROR_NULL
);

137 
	`NRF_FSTORAGE_PARAM_CHECK
(
p_¤c
, 
NRF_ERROR_NULL
);

138 
	`NRF_FSTORAGE_PARAM_CHECK
(
p_fs
->
p_­i
, 
NRF_ERROR_INVALID_STATE
);

139 
	`NRF_FSTORAGE_PARAM_CHECK
(
Ën
, 
NRF_ERROR_INVALID_LENGTH
);

142 
	`NRF_FSTORAGE_PARAM_CHECK
(!(
Ën
 % 
p_fs
->
p_æash_šfo
->
´og¿m_un™
), 
NRF_ERROR_INVALID_LENGTH
);

145 
	`NRF_FSTORAGE_PARAM_CHECK
(
	`addr_is_®igÃd32
(
de¡
), 
NRF_ERROR_INVALID_ADDR
);

146 
	`NRF_FSTORAGE_PARAM_CHECK
(
	`addr_is_®igÃd32
((
ušt32_t
)
p_¤c
), 
NRF_ERROR_INVALID_ADDR
);

147 
	`NRF_FSTORAGE_PARAM_CHECK
(
	`addr_is_w™hš_bounds
(
p_fs
, 
de¡
, 
Ën
), 
NRF_ERROR_INVALID_ADDR
);

149  (
p_fs
->
p_­i
)->
	`wr™e
Õ_fs, 
de¡
, 
p_¤c
, 
Ën
, 
p_cÚ‹xt
);

150 
	}
}

153 
»t_code_t
 
	$Äf_f¡Üage_”a£
(
Äf_f¡Üage_t
 cÚ¡ * 
p_fs
,

154 
ušt32_t
 
·ge_addr
,

155 
ušt32_t
 
Ën
,

156 * 
p_cÚ‹xt
)

158 
	`NRF_FSTORAGE_PARAM_CHECK
(
p_fs
, 
NRF_ERROR_NULL
);

159 
	`NRF_FSTORAGE_PARAM_CHECK
(
p_fs
->
p_­i
, 
NRF_ERROR_INVALID_STATE
);

160 
	`NRF_FSTORAGE_PARAM_CHECK
(
Ën
, 
NRF_ERROR_INVALID_LENGTH
);

163 
	`NRF_FSTORAGE_PARAM_CHECK
(
	`addr_is_·ge_®igÃd
(
p_fs
, 
·ge_addr
), 
NRF_ERROR_INVALID_ADDR
);

165 
	`NRF_FSTORAGE_PARAM_CHECK
(

166 
	`addr_is_w™hš_bounds
(
p_fs
, 
·ge_addr
, (
Ën
 *…_fs->
p_æash_šfo
->
”a£_un™
)),

167 
NRF_ERROR_INVALID_ADDR


170  (
p_fs
->
p_­i
)->
	`”a£
Õ_fs, 
·ge_addr
, 
Ën
, 
p_cÚ‹xt
);

171 
	}
}

174 
ušt8_t
 cÚ¡ * 
	$Äf_f¡Üage_rm­
(
Äf_f¡Üage_t
 cÚ¡ * 
p_fs
, 
ušt32_t
 
addr
)

176 ià((
p_fs
 =ğ
NULL
è|| (p_fs->
p_­i
 == NULL))

178  
NULL
;

181  (
p_fs
->
p_­i
)->
	`rm­
Õ_fs, 
addr
);

182 
	}
}

185 
ušt8_t
 * 
	$Äf_f¡Üage_wm­
(
Äf_f¡Üage_t
 cÚ¡ * 
p_fs
, 
ušt32_t
 
addr
)

187 ià((
p_fs
 =ğ
NULL
è|| (p_fs->
p_­i
 == NULL))

189  
NULL
;

192  (
p_fs
->
p_­i
)->
	`wm­
Õ_fs, 
addr
);

193 
	}
}

196 
boŞ
 
	$Äf_f¡Üage_is_busy
(
Äf_f¡Üage_t
 cÚ¡ * 
p_fs
)

200 ià((
p_fs
 =ğ
NULL
è|| (p_fs->
p_­i
 == NULL))

202 
ušt32_t
 
i
 = 0; i < 
NRF_FSTORAGE_INSTANCE_CNT
; i++)

204 
p_fs
 = 
	`NRF_FSTORAGE_INSTANCE_GET
(
i
);

205 ià(
p_fs
->
p_­i
 !ğ
NULL
)

208 ià(
p_fs
->
p_­i
->
	`is_busy
(p_fs))

210  
Œue
;

215  
çl£
;

218  
p_fs
->
p_­i
->
	`is_busy
(p_fs);

219 
	}
}

222 
boŞ
 
	$addr_is_w™hš_bounds
(
Äf_f¡Üage_t
 cÚ¡ * 
p_fs
,

223 
ušt32_t
 
addr
,

224 
ušt32_t
 
Ën
)

226  ( (
addr
 >ğ
p_fs
->
¡¬t_addr
)

227 && (
addr
 + 
Ën
 - 1 <ğ
p_fs
->
’d_addr
));

228 
	}
}

231 
boŞ
 
	$addr_is_®igÃd32
(
ušt32_t
 
addr
)

233  !(
addr
 & 0x03);

234 
	}
}

237 
boŞ
 
	$addr_is_·ge_®igÃd
(
Äf_f¡Üage_t
 cÚ¡ * 
p_fs
,

238 
ušt32_t
 
addr
)

240  (
addr
 & (
p_fs
->
p_æash_šfo
->
”a£_un™
 - 1)) == 0;

241 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\fstorage\nrf_fstorage_sd.c

41 
	~"sdk_commÚ.h
"

43 #ià
NRF_MODULE_ENABLED
(
NRF_FSTORAGE
)

45 
	~"Äf_f¡Üage_sd.h
"

46 
	~<¡dšt.h
>

47 
	~<¡ršg.h
>

48 
	~<¡dboŞ.h
>

49 
	~"nÜdic_commÚ.h
"

50 
	~"Äf_soc.h
"

51 
	~"Äf_sdh.h
"

52 
	~"Äf_sdh_soc.h
"

53 
	~"Äf_©omic.h
"

54 
	~"Äf_©fifo.h
"

55 
	~"­p_ut_¶©fÜm.h
"

58 #ià(
NRF_FSTORAGE_SD_MAX_WRITE_SIZE
 % 4)

59 #”rÜ 
NRF_FSTORAGE_SD_MAX_WRITE_SIZE
 
mu¡
 
be
 
a
 
muÉË
 
of
 
the
 
wÜd
 
size
.

66 
	mNRF_FSTORAGE_OP_WRITE
,

67 
	mNRF_FSTORAGE_OP_ERASE


68 } 
	tÄf_f¡Üage_sd_İcode_t
;

70 
	gANON_UNIONS_ENABLE
;

74 
Äf_f¡Üage_t
 cÚ¡ * 
	mp_fs
;

75 
Äf_f¡Üage_sd_İcode_t
 
	mİ_code
;

76 * 
	mp_·¿m
;

81 cÚ¡ * 
	mp_¤c
;

82 
ušt32_t
 
	mde¡
;

83 
ušt32_t
 
	mËn
;

84 
ušt32_t
 
	moff£t
;

85 } 
	mwr™e
;

88 
ušt32_t
 
	m·ge
;

89 
ušt32_t
 
	m´og»ss
;

90 
ušt32_t
 
	m·ges_to_”a£
;

91 } 
	m”a£
;

93 } 
	tÄf_f¡Üage_sd_İ_t
;

94 
	gANON_UNIONS_DISABLE
;

98 
	mNRF_FSTORAGE_STATE_IDLE
,

99 
	mNRF_FSTORAGE_STATE_OP_PENDING
,

100 
	mNRF_FSTORAGE_STATE_OP_EXECUTING
,

101 } 
	tÄf_f¡Üage_sd_¡©e_t
;

106 
Äf_©omic_æag_t
 
	mš™Ÿlized
;

107 
Äf_©omic_æag_t
 
	mqueue_ruÂšg
;

109 
Äf_f¡Üage_sd_¡©e_t
 
	m¡©e
;

110 
ušt32_t
 
	m»Œ›s
;

111 
boŞ
 
	msd_’abËd
;

112 
boŞ
 
	m·u£d
;

114 } 
	tÄf_f¡Üage_sd_wÜk_t
;

117 
Äf_f¡Üage_sys_evt_hªdËr
(
ušt32_t
, *);

118 
boŞ
 
Äf_f¡Üage_sdh_»q_hªdËr
(
Äf_sdh_»q_evt_t
, *);

119 
Äf_f¡Üage_sdh_¡©e_hªdËr
(
Äf_sdh_¡©e_evt_t
, *);

123 
Äf_f¡Üage_šfo_t
 
	gm_æash_šfo
 =

125 #ià 
defšed
(
NRF51
)

126 .
”a£_un™
 = 1024,

127 #–ià
defšed
(
NRF52_SERIES
)

128 .
	g”a£_un™
 = 4096,

130 .
	g´og¿m_un™
 = 4,

131 .
	grm­
 = 
Œue
,

132 .
	gwm­
 = 
çl£
,

136 
NRF_ATFIFO_DEF
(
m_fifo
, 
Äf_f¡Üage_sd_İ_t
, 
NRF_FSTORAGE_SD_QUEUE_SIZE
);

139 
NRF_SDH_SOC_OBSERVER
(
m_sys_obs
, 0, 
Äf_f¡Üage_sys_evt_hªdËr
, 
NULL
);

142 
NRF_SDH_REQUEST_OBSERVER
(
m_»q_obs
, 0) =

144 .
hªdËr
 = 
Äf_f¡Üage_sdh_»q_hªdËr
,

148 
NRF_SDH_STATE_OBSERVER
(
m_¡©e_obs
, 0) =

150 .
hªdËr
 = 
Äf_f¡Üage_sdh_¡©e_hªdËr
,

153 
Äf_f¡Üage_sd_wÜk_t
 
	gm_æags
;

154 
Äf_f¡Üage_sd_İ_t
 * 
	gm_p_cur_İ
;

155 
Äf_©fifo_™em_g‘_t
 
	gm_ig‘_ùx
;

159 
	$ev’t_£nd
(
Äf_f¡Üage_sd_İ_t
 cÚ¡ * 
p_İ
, 
»t_code_t
 
»suÉ
)

161 ià(
p_İ
->
p_fs
->
evt_hªdËr
 =ğ
NULL
)

167 
Äf_f¡Üage_evt_t
 
evt
 =

169 .
»suÉ
 =„esult,

170 .
p_·¿m
 = 
p_İ
->p_param,

173 
p_İ
->
İ_code
)

175 
NRF_FSTORAGE_OP_WRITE
:

176 
evt
.
id
 = 
NRF_FSTORAGE_EVT_WRITE_RESULT
;

177 
evt
.
addr
 = 
p_İ
->
wr™e
.
de¡
;

178 
evt
.
p_¤c
 = 
p_İ
->
wr™e
.p_src;

179 
evt
.
Ën
 = 
p_İ
->
wr™e
.len;

182 
NRF_FSTORAGE_OP_ERASE
:

183 
evt
.
id
 = 
NRF_FSTORAGE_EVT_ERASE_RESULT
;

184 
evt
.
addr
 = (
p_İ
->
”a£
.
·ge
 * 
m_æash_šfo
.
”a£_un™
);

185 
evt
.
Ën
 = 
p_İ
->
”a£
.
·ges_to_”a£
;

193 
p_İ
->
p_fs
->
	`evt_hªdËr
(&
evt
);

194 
	}
}

198 
ušt32_t
 
	$wr™e_execu‹
(
Äf_f¡Üage_sd_İ_t
 cÚ¡ * 
p_İ
)

200 
ušt32_t
 
chunk_Ën
;

202 
chunk_Ën
 = 
	`MIN
(
p_İ
->
wr™e
.
Ën
 -…_İ->wr™e.
off£t
, 
NRF_FSTORAGE_SD_MAX_WRITE_SIZE
);

203 
chunk_Ën
 = 
	`MAX
(1, chunk_ËÀ/ 
m_æash_šfo
.
´og¿m_un™
);

206 
ušt32_t
 * 
p_de¡
 = (ušt32_t*)(
p_İ
->
wr™e
.
de¡
 +…_İ->wr™e.
off£t
);

207 
ušt32_t
 cÚ¡ * 
p_¤c
 = (ušt32_t*)((ušt32_t)
p_İ
->
wr™e
.p_¤ø+…_İ->wr™e.
off£t
);

209  
	`sd_æash_wr™e
(
p_de¡
, 
p_¤c
, 
chunk_Ën
);

210 
	}
}

214 
ušt32_t
 
	$”a£_execu‹
(
Äf_f¡Üage_sd_İ_t
 cÚ¡ * 
p_İ
)

216  
	`sd_æash_·ge_”a£
(
p_İ
->
”a£
.
·ge
 +…_İ->”a£.
´og»ss
);

217 
	}
}

221 
	$queue_ä“
()

223 (è
	`Äf_©fifo_™em_ä“
(
m_fifo
, &
m_ig‘_ùx
);

224 
	}
}

228 
boŞ
 
	$queue_lßd_Ãxt
()

230 
m_p_cur_İ
 = 
	`Äf_©fifo_™em_g‘
(
m_fifo
, &
m_ig‘_ùx
);

232  (
m_p_cur_İ
 !ğ
NULL
);

233 
	}
}

237 
	$queue_´oûss
()

239 
ušt32_t
 
rc
;

241 ià(
m_æags
.
¡©e
 =ğ
NRF_FSTORAGE_STATE_IDLE
)

243 ià(!
	`queue_lßd_Ãxt
())

246 
m_æags
.
queue_ruÂšg
 = 
çl£
;

251 
m_æags
.
¡©e
 = 
NRF_FSTORAGE_STATE_OP_EXECUTING
;

253 
m_p_cur_İ
->
İ_code
)

255 
NRF_FSTORAGE_OP_WRITE
:

256 
rc
 = 
	`wr™e_execu‹
(
m_p_cur_İ
);

259 
NRF_FSTORAGE_OP_ERASE
:

260 
rc
 = 
	`”a£_execu‹
(
m_p_cur_İ
);

264 
rc
 = 
NRF_ERROR_INTERNAL
;

268 
rc
)

270 
NRF_SUCCESS
:

275 ià(!
m_æags
.
sd_’abËd
)

277 
	`Äf_f¡Üage_sys_evt_hªdËr
(
NRF_EVT_FLASH_OPERATION_SUCCESS
, 
NULL
);

281 
NRF_ERROR_BUSY
:

285 
m_æags
.
¡©e
 = 
NRF_FSTORAGE_STATE_OP_PENDING
;

291 
	`ev’t_£nd
(
m_p_cur_İ
, 
NRF_ERROR_INTERNAL
);

293 
m_æags
.
¡©e
 = 
NRF_FSTORAGE_STATE_IDLE
;

294 
m_æags
.
queue_ruÂšg
 = 
çl£
;

296 
	`queue_ä“
();

299 
	}
}

303 
	$queue_¡¬t
()

305 iàĞ(!
	`Äf_©omic_æag_£t_ãtch
(&
m_æags
.
queue_ruÂšg
))

306 && (!
m_æags
.
·u£d
))

308 
	`queue_´oûss
();

310 
	}
}

314 
boŞ
 
	$Ú_İ”©iÚ_sucûss
(
Äf_f¡Üage_sd_İ_t
 * cÚ¡ 
p_İ
)

317 
m_æags
.
»Œ›s
 = 0;

319 
p_İ
->
İ_code
)

321 
NRF_FSTORAGE_OP_WRITE
:

325 
ušt32_t
 cÚ¡ 
chunk_Ën
 = 
	`MIN
(
p_İ
->
wr™e
.
Ën
 -…_İ->wr™e.
off£t
,

326 
NRF_FSTORAGE_SD_MAX_WRITE_SIZE
);

328 
p_İ
->
wr™e
.
off£t
 +ğ
chunk_Ën
;

330 ià(
p_İ
->
wr™e
.
off£t
 =ğp_İ->wr™e.
Ën
)

332  
Œue
;

336 
NRF_FSTORAGE_OP_ERASE
:

338 
p_İ
->
”a£
.
´og»ss
++;

340 ià(
p_İ
->
”a£
.
´og»ss
 =ğp_İ->”a£.
·ges_to_”a£
)

342  
Œue
;

351  
çl£
;

352 
	}
}

356 
boŞ
 
	$Ú_İ”©iÚ_çu»
(
Äf_f¡Üage_sd_İ_t
 cÚ¡ * 
p_İ
)

358 
	`UNUSED_PARAMETER
(
p_İ
);

360 
m_æags
.
»Œ›s
++;

362 ià(
m_æags
.
»Œ›s
 > 
NRF_FSTORAGE_SD_MAX_RETRIES
)

365 
m_æags
.
»Œ›s
 = 0;

366  
Œue
;

369  
çl£
;

370 
	}
}

373 
»t_code_t
 
	$š™
(
Äf_f¡Üage_t
 * 
p_fs
, * 
p_·¿m
)

375 
	`UNUSED_PARAMETER
(
p_·¿m
);

377 
p_fs
->
p_æash_šfo
 = &
m_æash_šfo
;

379 ià(!
	`Äf_©omic_æag_£t_ãtch
(&
m_æags
.
š™Ÿlized
))

381 #ià
NRF_SDH_ENABLED


382 
m_æags
.
sd_’abËd
 = 
	`Äf_sdh_is_’abËd
();

384 (è
	`NRF_ATFIFO_INIT
(
m_fifo
);

387  
NRF_SUCCESS
;

388 
	}
}

391 
»t_code_t
 
	$unš™
(
Äf_f¡Üage_t
 * 
p_fs
, * 
p_·¿m
)

393 
	`UNUSED_PARAMETER
(
p_fs
);

394 
	`UNUSED_PARAMETER
(
p_·¿m
);

399 
	`mem£t
(&
m_æags
, 0x00, (m_flags));

401 (è
	`Äf_©fifo_ş—r
(
m_fifo
);

403  
NRF_SUCCESS
;

404 
	}
}

407 
»t_code_t
 
	$wr™e
(
Äf_f¡Üage_t
 cÚ¡ * 
p_fs
,

408 
ušt32_t
 
de¡
,

409 cÚ¡ * 
p_¤c
,

410 
ušt32_t
 
Ën
,

411 * 
p_·¿m
)

413 
Äf_f¡Üage_sd_İ_t
 * 
p_İ
;

414 
Äf_©fifo_™em_put_t
 
ut_ùx
;

417 
p_İ
 = 
	`Äf_©fifo_™em_®loc
(
m_fifo
, &
ut_ùx
);

419 ià(
p_İ
 =ğ
NULL
)

421  
NRF_ERROR_NO_MEM
;

425 
	`mem£t
(
p_İ
, 0x00, (
Äf_f¡Üage_sd_İ_t
));

427 
p_İ
->
İ_code
 = 
NRF_FSTORAGE_OP_WRITE
;

428 
p_İ
->
p_fs
 =…_fs;

429 
p_İ
->
p_·¿m
 =…_param;

430 
p_İ
->
wr™e
.
de¡
 = dest;

431 
p_İ
->
wr™e
.
p_¤c
 =…_src;

432 
p_İ
->
wr™e
.
Ën
 =†en;

435 (è
	`Äf_©fifo_™em_put
(
m_fifo
, &
ut_ùx
);

437 
	`queue_¡¬t
();

439  
NRF_SUCCESS
;

440 
	}
}

443 
»t_code_t
 
	$»ad
(
Äf_f¡Üage_t
 cÚ¡ * 
p_fs
, 
ušt32_t
 
¤c
, * 
p_de¡
, ušt32_ˆ
Ën
)

445 
	`memıy
(
p_de¡
, (
ušt32_t
*)
¤c
, 
Ën
);

447  
NRF_SUCCESS
;

448 
	}
}

451 
»t_code_t
 
	$”a£
(
Äf_f¡Üage_t
 cÚ¡ * 
p_fs
,

452 
ušt32_t
 
·ge_addr
,

453 
ušt32_t
 
Ën
,

454 * 
p_·¿m
)

456 
Äf_f¡Üage_sd_İ_t
 * 
p_İ
;

457 
Äf_©fifo_™em_put_t
 
ut_ùx
;

460 
p_İ
 = 
	`Äf_©fifo_™em_®loc
(
m_fifo
, &
ut_ùx
);

462 ià(
p_İ
 =ğ
NULL
)

464  
NRF_ERROR_NO_MEM
;

468 
	`mem£t
(
p_İ
, 0x00, (
Äf_f¡Üage_sd_İ_t
));

470 
p_İ
->
İ_code
 = 
NRF_FSTORAGE_OP_ERASE
;

471 
p_İ
->
p_fs
 =…_fs;

472 
p_İ
->
p_·¿m
 =…_param;

473 
p_İ
->
”a£
.
·ge
 = (
·ge_addr
 / 
m_æash_šfo
.
”a£_un™
);

474 
p_İ
->
”a£
.
·ges_to_”a£
 = 
Ën
;

477 (è
	`Äf_©fifo_™em_put
(
m_fifo
, &
ut_ùx
);

479 
	`queue_¡¬t
();

481  
NRF_SUCCESS
;

482 
	}
}

485 
ušt8_t
 cÚ¡ * 
	$rm­
(
Äf_f¡Üage_t
 cÚ¡ * 
p_fs
, 
ušt32_t
 
addr
)

487 
	`UNUSED_PARAMETER
(
p_fs
);

489  (
ušt8_t
*)
addr
;

490 
	}
}

493 
ušt8_t
 * 
	$wm­
(
Äf_f¡Üage_t
 cÚ¡ * 
p_fs
, 
ušt32_t
 
addr
)

495 
	`UNUSED_PARAMETER
(
p_fs
);

496 
	`UNUSED_PARAMETER
(
addr
);

499  
NULL
;

500 
	}
}

503 
boŞ
 
	$is_busy
(
Äf_f¡Üage_t
 cÚ¡ * 
p_fs
)

505 
	`UNUSED_PARAMETER
(
p_fs
);

507  (
m_æags
.
¡©e
 !ğ
NRF_FSTORAGE_STATE_IDLE
);

508 
	}
}

511 
	$Äf_f¡Üage_sys_evt_hªdËr
(
ušt32_t
 
sys_evt
, * 
p_cÚ‹xt
)

513 
	`UNUSED_PARAMETER
(
p_cÚ‹xt
);

515 iàĞ(
sys_evt
 !ğ
NRF_EVT_FLASH_OPERATION_SUCCESS
)

516 && (
sys_evt
 !ğ
NRF_EVT_FLASH_OPERATION_ERROR
))

522 
m_æags
.
¡©e
)

524 
NRF_FSTORAGE_STATE_IDLE
:

528 
NRF_FSTORAGE_STATE_OP_PENDING
:

534 
NRF_FSTORAGE_STATE_OP_EXECUTING
:

537 
boŞ
 
İ”©iÚ_fšished
 = 
çl£
;

539 
sys_evt
)

541 
NRF_EVT_FLASH_OPERATION_SUCCESS
:

542 
İ”©iÚ_fšished
 = 
	`Ú_İ”©iÚ_sucûss
(
m_p_cur_İ
);

545 
NRF_EVT_FLASH_OPERATION_ERROR
:

546 
İ”©iÚ_fšished
 = 
	`Ú_İ”©iÚ_çu»
(
m_p_cur_İ
);

553 ià(
İ”©iÚ_fšished
)

557 
m_æags
.
¡©e
 = 
NRF_FSTORAGE_STATE_IDLE
;

559 
	`ev’t_£nd
(
m_p_cur_İ
, (
sys_evt
 =ğ
NRF_EVT_FLASH_OPERATION_SUCCESS
) ?

560 
NRF_SUCCESS
 : 
NRF_ERROR_TIMEOUT
);

565 
	`queue_ä“
();

570 ià(!
m_æags
.
·u£d
)

572 
	`queue_´oûss
();

577 (è
	`Äf_sdh_»que¡_cÚtšue
();

579 
	}
}

582 
boŞ
 
	$Äf_f¡Üage_sdh_»q_hªdËr
(
Äf_sdh_»q_evt_t
 
»q
, * 
p_cÚ‹xt
)

584 
	`UNUSED_PARAMETER
(
»q
);

585 
	`UNUSED_PARAMETER
(
p_cÚ‹xt
);

587 
m_æags
.
·u£d
 = 
Œue
;

590  (
m_æags
.
¡©e
 =ğ
NRF_FSTORAGE_STATE_IDLE
);

591 
	}
}

594 
	$Äf_f¡Üage_sdh_¡©e_hªdËr
(
Äf_sdh_¡©e_evt_t
 
¡©e
, * 
p_cÚ‹xt
)

596 
	`UNUSED_PARAMETER
(
p_cÚ‹xt
);

598 iàĞ(
¡©e
 =ğ
NRF_SDH_EVT_STATE_ENABLED
)

599 || (
¡©e
 =ğ
NRF_SDH_EVT_STATE_DISABLED
))

601 
m_æags
.
·u£d
 = 
çl£
;

602 
m_æags
.
sd_’abËd
 = (
¡©e
 =ğ
NRF_SDH_EVT_STATE_ENABLED
);

605 
	`queue_´oûss
();

607 
	}
}

611 
Äf_f¡Üage_­i_t
 
	gÄf_f¡Üage_sd
 =

613 .
š™
 = init,

614 .
	gunš™
 = 
unš™
,

615 .
	g»ad
 = 
»ad
,

616 .
	gwr™e
 = 
wr™e
,

617 .
	g”a£
 = 
”a£
,

618 .
	grm­
 = 
rm­
,

619 .
	gwm­
 = 
wm­
,

620 .
	gis_busy
 = 
is_busy


	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\hardfault\hardfault_implementation.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
HARDFAULT_HANDLER
)

42 
	~"h¬dçuÉ.h
"

43 
	~"Äf.h
"

44 
	~"comp”_ab¡¿ùiÚ.h
"

45 
	~"­p_ut_¶©fÜm.h
"

46 #ifdeà
SOFTDEVICE_PRESENT


47 
	~"Äf_soc.h
"

49 
	#NRF_LOG_MODULE_NAME
 
h¬dçuÉ


	)

50 
	~"Äf_log.h
"

51 
	~"Äf_log_ù¾.h
"

52 
NRF_LOG_MODULE_REGISTER
();

56 
__WEAK
 
	$H¬dFauÉ_´oûss
(
H¬dFauÉ_¡ack_t
 * 
p_¡ack
)

59 
	`NVIC_Sy¡emRe£t
();

60 
	}
}

63 
	$H¬dFauÉ_c_hªdËr
(
ušt32_t
 * 
p_¡ack_add»ss
)

65 
	`NRF_LOG_FINAL_FLUSH
();

67 #ià(
__CORTEX_M
 == 0x04)

69 #iâdeà
CFSR_MMARVALID


70 
	#CFSR_MMARVALID
 (1 << (0 + 7))

	)

73 #iâdeà
CFSR_BFARVALID


74 
	#CFSR_BFARVALID
 (1 << (8 + 7))

	)

77 
H¬dFauÉ_¡ack_t
 * 
p_¡ack
 = (H¬dFauÉ_¡ack_ˆ*)
p_¡ack_add»ss
;

78 cÚ¡ *
cf¤_msgs
[] = {

81 [2] = 
NULL
,

85 [6] = 
NULL
,

86 [7] = 
NULL
,

93 [14] = 
NULL
,

94 [15] = 
NULL
,

99 [20] = 
NULL
,

100 [21] = 
NULL
,

101 [22] = 
NULL
,

102 [23] = 
NULL
,

107 
ušt32_t
 
cf¤
 = 
SCB
->
CFSR
;

109 ià(
p_¡ack
 !ğ
NULL
)

112 
	`NRF_LOG_ERROR
("HARD FAULT‡ˆ0x%08X", 
p_¡ack
->
pc
);

113 
	`NRF_LOG_ERROR
(" R0: 0x%08X R1: 0x%08X R2: 0x%08X R3: 0x%08X",

114 
p_¡ack
->
r0
,…_¡ack->
r1
,…_¡ack->
r2
,…_¡ack->
r3
);

115 
	`NRF_LOG_ERROR
(" R12: 0x%08X LR: 0x%08X PSR: 0x%08X",

116 
p_¡ack
->
r12
,…_¡ack->
Ì
,…_¡ack->
p¤
);

120 
	`NRF_LOG_ERROR
("Stack violation: stack…ointer outside stack‡rea.");

123 ià(
SCB
->
HFSR
 & 
SCB_HFSR_VECTTBL_Msk
)

125 
	`NRF_LOG_ERROR
("Cause: BusFault on‡ vectorable„ead duringƒxception…rocessing.");

128 
ušt32_t
 
i
 = 0; i < (
cf¤_msgs
) / (cfsr_msgs[0]); i++)

130 ià(((
cf¤
 & (1 << 
i
)è!ğ0è&& (
cf¤_msgs
[i] !ğ
NULL
))

132 
	`NRF_LOG_ERROR
("Cau£: %s.", (
ušt32_t
)
cf¤_msgs
[
i
]);

136 ià(
cf¤
 & 
CFSR_MMARVALID
)

138 
	`NRF_LOG_ERROR
("MemMªagFauÉ Add»ss: 0x%08X", 
SCB
->
MMFAR
);

141 ià(
cf¤
 & 
CFSR_BFARVALID
)

143 
	`NRF_LOG_ERROR
("Bu FauÉ Add»ss: 0x%08X", 
SCB
->
BFAR
);

146 #ià
	`defšed
(
DEBUG
)

148 
NRF_BREAKPOINT_COND
;

154 
	`H¬dFauÉ_´oûss
((
H¬dFauÉ_¡ack_t
 *)
p_¡ack_add»ss
);

155 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\log\src\nrf_log_backend_rtt.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
NRF_LOG
è&& NRF_MODULE_ENABLED(
NRF_LOG_BACKEND_RTT
)

42 
	~"Äf_log_back’d_¹t.h
"

43 
	~"Äf_log_back’d_£rŸl.h
"

44 
	~"Äf_log_¡r_fÜm©‹r.h
"

45 
	~"Äf_log_š‹º®.h
"

46 
	~"Äf_d–ay.h
"

47 
	~<SEGGER_RTT_CÚf.h
>

48 
	~<SEGGER_RTT.h
>

50 
boŞ
 
	gm_ho¡_´e£Á
;

52 
ušt8_t
 
	gm_¡ršg_buff
[
NRF_LOG_BACKEND_RTT_TEMP_BUFFER_SIZE
];

54 
	$Äf_log_back’d_¹t_š™
()

56 
	`SEGGER_RTT_In™
();

57 
	}
}

59 
	$£rŸl_tx
(cÚ¡ * 
p_cÚ‹xt
, cÚ¡ * 
bufãr
, 
size_t
 
Ën
)

61 ià(
Ën
)

63 
ušt32_t
 
idx
 = 0;

64 
ušt32_t
 
´oûs£d
;

65 
ušt32_t
 
w©chdog_couÁ”
 = 
NRF_LOG_BACKEND_RTT_TX_RETRY_CNT
;

68 
´oûs£d
 = 
	`SEGGER_RTT_Wr™eNoLock
(0, &
bufãr
[
idx
], 
Ën
);

69 
idx
 +ğ
´oûs£d
;

70 
Ën
 -ğ
´oûs£d
;

71 ià(
´oûs£d
 == 0)

83 ià(!
m_ho¡_´e£Á
)

89 
	`Äf_d–ay_ms
(
NRF_LOG_BACKEND_RTT_TX_RETRY_DELAY_MS
);

90 
w©chdog_couÁ”
--;

91 ià(
w©chdog_couÁ”
 == 0)

93 
m_ho¡_´e£Á
 = 
çl£
;

98 
m_ho¡_´e£Á
 = 
Œue
;

99 } 
Ën
);

101 
	}
}

102 
	$Äf_log_back’d_¹t_put
(
Äf_log_back’d_t
 cÚ¡ * 
p_back’d
,

103 
Äf_log_’Œy_t
 * 
p_msg
)

105 
	`Äf_log_back’d_£rŸl_put
(
p_back’d
, 
p_msg
, 
m_¡ršg_buff
, 
NRF_LOG_BACKEND_RTT_TEMP_BUFFER_SIZE
, 
£rŸl_tx
);

106 
	}
}

108 
	$Äf_log_back’d_¹t_æush
(
Äf_log_back’d_t
 cÚ¡ * 
p_back’d
)

111 
	}
}

113 
	$Äf_log_back’d_¹t_·nic_£t
(
Äf_log_back’d_t
 cÚ¡ * 
p_back’d
)

116 
	}
}

118 cÚ¡ 
Äf_log_back’d_­i_t
 
	gÄf_log_back’d_¹t_­i
 = {

119 .
put
 = 
Äf_log_back’d_¹t_put
,

120 .
	gæush
 = 
Äf_log_back’d_¹t_æush
,

121 .
	g·nic_£t
 = 
Äf_log_back’d_¹t_·nic_£t
,

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\log\src\nrf_log_backend_serial.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
NRF_LOG
)

42 
	~"Äf_log_back’d_£rŸl.h
"

43 
	~"Äf_log_¡r_fÜm©‹r.h
"

44 
	~"Äf_log_š‹º®.h
"

46 
	$Äf_log_back’d_£rŸl_put
(
Äf_log_back’d_t
 cÚ¡ * 
p_back’d
,

47 
Äf_log_’Œy_t
 * 
p_msg
,

48 
ušt8_t
 * 
p_bufãr
,

49 
ušt32_t
 
Ëngth
,

50 
Äf_årštf_fwr™e
 
tx_func
)

52 
	`Äf_memobj_g‘
(
p_msg
);

54 
Äf_årštf_ùx_t
 
årštf_ùx
 = {

55 .
p_io_bufãr
 = (*)
p_bufãr
,

56 .
io_bufãr_size
 = 
Ëngth
,

57 .
io_bufãr_út
 = 0,

58 .
auto_æush
 = 
çl£
,

59 .
p_u£r_ùx
 = 
NULL
,

60 .
fwr™e
 = 
tx_func


63 
Äf_log_¡r_fÜm©‹r_’Œy_·¿ms_t
 
·¿ms
;

65 
Äf_log_h—d”_t
 
h—d”
;

66 
size_t
 
memobj_off£t
 = 0;

68 
	`Äf_memobj_»ad
(
p_msg
, &
h—d”
, 
HEADER_SIZE
*(
ušt32_t
), 
memobj_off£t
);

69 
memobj_off£t
 = 
HEADER_SIZE
*(
ušt32_t
);

71 
·¿ms
.
time¡amp
 = 
h—d”
.timestamp;

72 
·¿ms
.
moduË_id
 = 
h—d”
.module_id;

73 
·¿ms
.
drİ³d
 = 
h—d”
.dropped;

74 
·¿ms
.
u£_cŞÜs
 = 
NRF_LOG_USES_COLORS
;

77 ià(
h—d”
.
ba£
.
g’”ic
.
ty³
 =ğ
HEADER_TYPE_STD
)

79 cÚ¡ * 
p_log_¡r
 = (cÚ¡ *)((
ušt32_t
)
h—d”
.
ba£
.
¡d
.
addr
);

80 
·¿ms
.
£v”™y
 = (
Äf_log_£v”™y_t
)
h—d”
.
ba£
.
¡d
.severity;

81 
ušt32_t
 
Çrgs
 = 
h—d”
.
ba£
.
¡d
.nargs;

82 
ušt32_t
 
¬gs
[
NRF_LOG_MAX_NUM_OF_ARGS
];

84 
	`Äf_memobj_»ad
(
p_msg
, 
¬gs
, 
Çrgs
*(
ušt32_t
), 
memobj_off£t
);

85 
memobj_off£t
 +ğ(
Çrgs
*(
ušt32_t
));

87 
	`Äf_log_¡d_’Œy_´oûss
(
p_log_¡r
,

88 
¬gs
,

89 
Çrgs
,

90 &
·¿ms
,

91 &
årštf_ùx
);

94 ià(
h—d”
.
ba£
.
g’”ic
.
ty³
 =ğ
HEADER_TYPE_HEXDUMP
)

96 
ušt32_t
 
d©a_Ën
 = 
h—d”
.
ba£
.
hexdump
.
Ën
;

97 
·¿ms
.
£v”™y
 = (
Äf_log_£v”™y_t
)
h—d”
.
ba£
.
hexdump
.severity;

98 
ušt8_t
 
d©a_buf
[8];

99 
ušt32_t
 
chunk_Ën
;

102 
chunk_Ën
 = (
d©a_buf
è> 
d©a_Ën
 ? data_len : (data_buf);

103 
	`Äf_memobj_»ad
(
p_msg
, 
d©a_buf
, 
chunk_Ën
, 
memobj_off£t
);

104 
memobj_off£t
 +ğ
chunk_Ën
;

105 
d©a_Ën
 -ğ
chunk_Ën
;

107 
	`Äf_log_hexdump_’Œy_´oûss
(
d©a_buf
,

108 
chunk_Ën
,

109 &
·¿ms
,

110 &
årštf_ùx
);

111 } 
d©a_Ën
 > 0);

113 
	`Äf_memobj_put
(
p_msg
);

115 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\log\src\nrf_log_backend_uart.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
NRF_LOG
è&& NRF_MODULE_ENABLED(
NRF_LOG_BACKEND_UART
)

42 
	~"Äf_log_back’d_u¬t.h
"

43 
	~"Äf_log_back’d_£rŸl.h
"

44 
	~"Äf_log_š‹º®.h
"

45 
	~"Äf_drv_u¬t.h
"

46 
	~"­p_”rÜ.h
"

48 
Äf_drv_u¬t_t
 
	gm_u¬t
 = 
NRF_DRV_UART_INSTANCE
(0);

50 
ušt8_t
 
	gm_¡ršg_buff
[
NRF_LOG_BACKEND_UART_TEMP_BUFFER_SIZE
];

51 vŞ©
boŞ
 
	gm_xãr_dÚe
;

52 
boŞ
 
	gm_async_mode
;

53 
	$u¬t_evt_hªdËr
(
Äf_drv_u¬t_ev’t_t
 * 
p_ev’t
, * 
p_cÚ‹xt
)

55 
m_xãr_dÚe
 = 
Œue
;

56 
	}
}

58 
	$u¬t_š™
(
boŞ
 
async_mode
)

60 
Äf_drv_u¬t_cÚfig_t
 
cÚfig
 = 
NRF_DRV_UART_DEFAULT_CONFIG
;

61 
cÚfig
.
p£Éxd
 = 
NRF_LOG_BACKEND_UART_TX_PIN
;

62 
cÚfig
.
p£Ìxd
 = 
NRF_UART_PSEL_DISCONNECTED
;

63 
cÚfig
.
p£lùs
 = 
NRF_UART_PSEL_DISCONNECTED
;

64 
cÚfig
.
p£Ìts
 = 
NRF_UART_PSEL_DISCONNECTED
;

65 
cÚfig
.
baud¿‹
 = (
Äf_u¬t_baud¿‹_t
)
NRF_LOG_BACKEND_UART_BAUDRATE
;

66 
»t_code_t
 
”r_code
 = 
	`Äf_drv_u¬t_š™
(&
m_u¬t
, &
cÚfig
, 
async_mode
 ? 
u¬t_evt_hªdËr
 : 
NULL
);

67 
	`APP_ERROR_CHECK
(
”r_code
);

69 
m_async_mode
 = 
async_mode
;

70 
	}
}

72 
	$Äf_log_back’d_u¬t_š™
()

74 
boŞ
 
async_mode
 = 
NRF_LOG_DEFERRED
 ? 
Œue
 : 
çl£
;

75 
	`u¬t_š™
(
async_mode
);

76 
	}
}

78 
	$£rŸl_tx
(cÚ¡ * 
p_cÚ‹xt
, cÚ¡ * 
p_bufãr
, 
size_t
 
Ën
)

80 
ušt8_t
 
Ën8
 = (ušt8_t)(
Ën
 & 0x000000FF);

81 
m_xãr_dÚe
 = 
çl£
;

82 
»t_code_t
 
”r_code
 = 
	`Äf_drv_u¬t_tx
(&
m_u¬t
, (
ušt8_t
 *)
p_bufãr
, 
Ën8
);

83 
	`APP_ERROR_CHECK
(
”r_code
);

85 
m_async_mode
 && (
m_xãr_dÚe
 =ğ
çl£
))

90 
	}
}

92 
	$Äf_log_back’d_u¬t_put
(
Äf_log_back’d_t
 cÚ¡ * 
p_back’d
,

93 
Äf_log_’Œy_t
 * 
p_msg
)

95 
	`Äf_log_back’d_£rŸl_put
(
p_back’d
, 
p_msg
, 
m_¡ršg_buff
,

96 
NRF_LOG_BACKEND_UART_TEMP_BUFFER_SIZE
, 
£rŸl_tx
);

97 
	}
}

99 
	$Äf_log_back’d_u¬t_æush
(
Äf_log_back’d_t
 cÚ¡ * 
p_back’d
)

102 
	}
}

104 
	$Äf_log_back’d_u¬t_·nic_£t
(
Äf_log_back’d_t
 cÚ¡ * 
p_back’d
)

106 
	`Äf_drv_u¬t_unš™
(&
m_u¬t
);

108 
	`u¬t_š™
(
çl£
);

109 
	}
}

111 cÚ¡ 
Äf_log_back’d_­i_t
 
	gÄf_log_back’d_u¬t_­i
 = {

112 .
put
 = 
Äf_log_back’d_u¬t_put
,

113 .
	gæush
 = 
Äf_log_back’d_u¬t_æush
,

114 .
	g·nic_£t
 = 
Äf_log_back’d_u¬t_·nic_£t
,

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\log\src\nrf_log_default_backends.c

41 
	~"sdk_commÚ.h
"

42 #ià
NRF_MODULE_ENABLED
(
NRF_LOG
)

43 
	~"Äf_log_deçuÉ_back’ds.h
"

44 
	~"Äf_log_ù¾.h
"

45 
	~"Äf_log_š‹º®.h
"

46 
	~"Äf_as£¹.h
"

48 #ià
defšed
(
NRF_LOG_BACKEND_RTT_ENABLED
) && NRF_LOG_BACKEND_RTT_ENABLED

49 
	~"Äf_log_back’d_¹t.h
"

50 
NRF_LOG_BACKEND_RTT_DEF
(
¹t_log_back’d
);

53 #ià
defšed
(
NRF_LOG_BACKEND_UART_ENABLED
) && NRF_LOG_BACKEND_UART_ENABLED

54 
	~"Äf_log_back’d_u¬t.h
"

55 
NRF_LOG_BACKEND_UART_DEF
(
u¬t_log_back’d
);

58 
	$Äf_log_deçuÉ_back’ds_š™
()

60 
št32_t
 
back’d_id
 = -1;

61 ()
back’d_id
;

62 #ià
	`defšed
(
NRF_LOG_BACKEND_RTT_ENABLED
) && NRF_LOG_BACKEND_RTT_ENABLED

63 
	`Äf_log_back’d_¹t_š™
();

64 
back’d_id
 = 
	`Äf_log_back’d_add
(&
¹t_log_back’d
, 
NRF_LOG_SEVERITY_DEBUG
);

65 
	`ASSERT
(
back’d_id
 >= 0);

66 
	`Äf_log_back’d_’abË
(&
¹t_log_back’d
);

69 #ià
	`defšed
(
NRF_LOG_BACKEND_UART_ENABLED
) && NRF_LOG_BACKEND_UART_ENABLED

70 
	`Äf_log_back’d_u¬t_š™
();

71 
back’d_id
 = 
	`Äf_log_back’d_add
(&
u¬t_log_back’d
, 
NRF_LOG_SEVERITY_DEBUG
);

72 
	`ASSERT
(
back’d_id
 >= 0);

73 
	`Äf_log_back’d_’abË
(&
u¬t_log_back’d
);

75 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\log\src\nrf_log_frontend.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
NRF_LOG
)

42 
	~"­p_ut.h
"

43 
	~"­p_ut_¶©fÜm.h
"

44 
	~"Äf_log.h
"

45 
	~"Äf_log_š‹º®.h
"

46 
	~"Äf_log_ù¾.h
"

47 
	~"Äf_log_back’d_š‹rçû.h
"

48 
	~"Äf_log_¡r_fÜm©‹r.h
"

49 
	~"Äf_£ùiÚ.h
"

50 
	~"Äf_ršgbuf.h
"

51 
	~"Äf_memobj.h
"

52 
	~"Äf_©omic.h
"

53 
	~<¡ršg.h
>

55 
STATIC_ASSERT
((
NRF_LOG_BUFSIZE
 % 4) == 0);

56 
STATIC_ASSERT
(
IS_POWER_OF_TWO
(
NRF_LOG_BUFSIZE
));

58 
	#NRF_LOG_BUF_WORDS
 (
NRF_LOG_BUFSIZE
/4)

	)

60 #ià
NRF_MODULE_ENABLED
(
FDS
è&& 
NRF_LOG_FILTERS_ENABLED


61 
	#LOG_CONFIG_LOAD_STORE_ENABLED
 1

	)

63 
	#LOG_CONFIG_LOAD_STORE_ENABLED
 0

	)

66 #ià
NRF_LOG_BUF_WORDS
 < 32

70 
NRF_MEMOBJ_POOL_DEF
(
log_mempoŞ
, 
NRF_LOG_MSGPOOL_ELEMENT_SIZE
, 
NRF_LOG_MSGPOOL_ELEMENT_COUNT
);

71 
NRF_RINGBUF_DEF
(
m_log_push_ršgbuf
, 
NRF_LOG_STR_PUSH_BUFFER_SIZE
);

73 
	#NRF_LOG_BACKENDS_FULL
 0xFF

	)

74 
	#NRF_LOG_FILTER_BITS_PER_BACKEND
 3

	)

75 
	#NRF_LOG_MAX_BACKENDS
 (32/
NRF_LOG_FILTER_BITS_PER_BACKEND
)

	)

76 
	#NRF_LOG_MAX_HEXDUMP
 (
NRF_LOG_MSGPOOL_ELEMENT_SIZE
*
NRF_LOG_MSGPOOL_ELEMENT_COUNT
/2)

	)

77 
	#NRF_LOG_INVALID_BACKEND_U32
 0xFFFFFFFF

	)

88 
ušt32_t
 
	mwr_idx
;

89 
ušt32_t
 
	mrd_idx
;

90 
ušt32_t
 
	mmask
;

91 
ušt32_t
 
	mbufãr
[
NRF_LOG_BUF_WORDS
];

92 
Äf_log_time¡amp_func_t
 
	mtime¡amp_func
;

93 
Äf_log_back’d_t
 cÚ¡ * 
	mp_back’d_h—d
;

94 
Äf_©omic_æag_t
 
	mlog_skpšg
;

95 
Äf_©omic_æag_t
 
	mlog_sk³d
;

96 
Äf_©omic_u32_t
 
	mlog_drİ³d_út
;

97 
boŞ
 
	mautoæush
;

98 } 
	tlog_d©a_t
;

100 
log_d©a_t
 
	gm_log_d©a
;

103 
NRF_LOG_MODULE_REGISTER
();

106 
	#NRF_LOG_DYNAMIC_SECTION_VARS_GET
(
i
è
	`NRF_SECTION_ITEM_GET
(
log_dyÇmic_d©a
, 
Äf_log_moduË_dyÇmic_d©a_t
, (i))

	)

107 
	#NRF_LOG_FILTER_SECTION_VARS_GET
(
i
è
	`NRF_SECTION_ITEM_GET
(
log_f‹r_d©a
, 
Äf_log_moduË_f‹r_d©a_t
, (i))

	)

109 
	#NRF_LOG_CONST_SECTION_VARS_GET
(
i
è
	`NRF_SECTION_ITEM_GET
(
log_cÚ¡_d©a
, 
Äf_log_moduË_cÚ¡_d©a_t
, (i))

	)

110 
	#NRF_LOG_CONST_SECTION_VARS_COUNT
 
	`NRF_SECTION_ITEM_COUNT
(
log_cÚ¡_d©a
, 
Äf_log_moduË_cÚ¡_d©a_t
)

	)

112 
»t_code_t
 
	$Äf_log_š™
(
Äf_log_time¡amp_func_t
 
time¡amp_func
, 
ušt32_t
 
time¡amp_äeq
)

114 ()
	`NRF_LOG_ITEM_DATA_CONST
(
­p
);

116 ià(
NRF_LOG_USES_TIMESTAMP
 && (
time¡amp_func
 =ğ
NULL
))

118  
NRF_ERROR_INVALID_PARAM
;

121 
m_log_d©a
.
mask
 = 
NRF_LOG_BUF_WORDS
 - 1;

122 
m_log_d©a
.
wr_idx
 = 0;

123 
m_log_d©a
.
rd_idx
 = 0;

124 
m_log_d©a
.
log_sk³d
 = 0;

125 
m_log_d©a
.
log_skpšg
 = 0;

126 
m_log_d©a
.
autoæush
 = 
NRF_LOG_DEFERRED
 ? 
çl£
 : 
Œue
;

127 ià(
NRF_LOG_USES_TIMESTAMP
)

129 
	`Äf_log_¡r_fÜm©‹r_time¡amp_äeq_£t
(
time¡amp_äeq
);

130 
m_log_d©a
.
time¡amp_func
 =imestamp_func;

133 
»t_code_t
 
”r_code
 = 
	`Äf_memobj_poŞ_š™
(&
log_mempoŞ
);

134 ià(
”r_code
 !ğ
NRF_SUCCESS
)

136  
”r_code
;

139 
	`Äf_ršgbuf_š™
(&
m_log_push_ršgbuf
);

141 
ušt32_t
 
moduËs_út
 = 
NRF_LOG_CONST_SECTION_VARS_COUNT
;

142 
ušt32_t
 
i
;

143 ià(
NRF_LOG_FILTERS_ENABLED
)

145 
ušt32_t
 
j
;

147 
i
 = 0; i < 
moduËs_út
; i++)

149 
ušt32_t
 
idx
 = 0;

151 
j
 = 0; j < 
moduËs_út
; j++)

153 ià(
i
 !ğ
j
)

155 cÚ¡ * 
p_Çme0
 = 
	`NRF_LOG_CONST_SECTION_VARS_GET
(
i
)->
p_moduË_Çme
;

156 cÚ¡ * 
p_Çme1
 = 
	`NRF_LOG_CONST_SECTION_VARS_GET
(
j
)->
p_moduË_Çme
;

157 ià(
	`¡ºcmp
(
p_Çme0
, 
p_Çme1
, 20) > 0)

159 
idx
++;

164 
Äf_log_moduË_dyÇmic_d©a_t
 * 
p_moduË_dd©a
 = 
	`NRF_LOG_DYNAMIC_SECTION_VARS_GET
(
i
);

165 
p_moduË_dd©a
->
Üd”_idx
 = 
idx
;

169 
i
 = 0; i < 
moduËs_út
; i++)

171 
Äf_log_moduË_dyÇmic_d©a_t
 * 
p_moduË_dd©a
 = 
	`NRF_LOG_DYNAMIC_SECTION_VARS_GET
(
i
);

172 
Äf_log_moduË_f‹r_d©a_t
 * 
p_moduË_f‹r
 = 
	`NRF_LOG_FILTER_SECTION_VARS_GET
(
i
);

173 
p_moduË_dd©a
->
f‹r
 = 0;

174 
p_moduË_f‹r
->
f‹r_lvls
 = 0;

178  
NRF_SUCCESS
;

179 
	}
}

181 
ušt32_t
 
	$Äf_log_moduË_út_g‘
()

183  
NRF_LOG_CONST_SECTION_VARS_COUNT
;

184 
	}
}

186 
»t_code_t
 
	$moduË_idx_g‘
(
ušt32_t
 * 
p_idx
, 
boŞ
 
Üd”ed_idx
)

188 ià(
Üd”ed_idx
)

190 
ušt32_t
 
moduË_út
 = 
	`Äf_log_moduË_út_g‘
();

191 
ušt32_t
 
i
;

192 
i
 = 0; i < 
moduË_út
; i++)

194 
Äf_log_moduË_dyÇmic_d©a_t
 * 
p_moduË_d©a
 = 
	`NRF_LOG_DYNAMIC_SECTION_VARS_GET
(
i
);

195 ià(
p_moduË_d©a
->
Üd”_idx
 =ğ*
p_idx
)

197 *
p_idx
 = 
i
;

198  
NRF_SUCCESS
;

201  
NRF_ERROR_NOT_FOUND
;

205  
NRF_SUCCESS
;

207 
	}
}

208 cÚ¡ * 
	$Äf_log_moduË_Çme_g‘
(
ušt32_t
 
moduË_id
, 
boŞ
 
Üd”ed_idx
)

210 ià(
	`moduË_idx_g‘
(&
moduË_id
, 
Üd”ed_idx
è=ğ
NRF_SUCCESS
)

212 
Äf_log_moduË_cÚ¡_d©a_t
 * 
p_moduË_d©a
 = 
	`NRF_LOG_CONST_SECTION_VARS_GET
(
moduË_id
);

213  
p_moduË_d©a
->
p_moduË_Çme
;

217  
NULL
;

219 
	}
}

221 
ušt8_t
 
	$Äf_log_cŞÜ_id_g‘
(
ušt32_t
 
moduË_id
, 
Äf_log_£v”™y_t
 
£v”™y
)

223 
Äf_log_moduË_cÚ¡_d©a_t
 * 
p_moduË_d©a
 = 
	`NRF_LOG_CONST_SECTION_VARS_GET
(
moduË_id
);

224 
ušt8_t
 
cŞÜ_id
;

225 
£v”™y
)

227 
NRF_LOG_SEVERITY_ERROR
:

228 
cŞÜ_id
 = 
NRF_LOG_ERROR_COLOR
;

230 
NRF_LOG_SEVERITY_WARNING
:

231 
cŞÜ_id
 = 
NRF_LOG_WARNING_COLOR
;

233 
NRF_LOG_SEVERITY_INFO
:

234 
cŞÜ_id
 = 
p_moduË_d©a
->
šfo_cŞÜ_id
;

236 
NRF_LOG_SEVERITY_DEBUG
:

237 
cŞÜ_id
 = 
p_moduË_d©a
->
debug_cŞÜ_id
;

240 
cŞÜ_id
 = 0;

243  
cŞÜ_id
;

244 
	}
}

246 
ušt16_t
 
	$high”_lvl_g‘
(
ušt32_t
 
lvls
)

248 
ušt16_t
 
tİ_lvl
 = 0;

249 
ušt16_t
 
tmp_lvl
;

250 
ušt32_t
 
i
;

253 
i
 = 0; i < (32/
NRF_LOG_LEVEL_BITS
); i+=NRF_LOG_LEVEL_BITS)

255 
tmp_lvl
 = (
ušt16_t
)
	`BF_GET
(
lvls
,
NRF_LOG_LEVEL_BITS
, 
i
);

256 ià(
tmp_lvl
 > 
tİ_lvl
)

258 
tİ_lvl
 = 
tmp_lvl
;

261  
tİ_lvl
;

262 
	}
}

264 
	$Äf_log_moduË_f‹r_£t
(
ušt32_t
 
back’d_id
, ušt32_ˆ
moduË_id
, 
Äf_log_£v”™y_t
 
£v”™y
)

266 ià(
NRF_LOG_FILTERS_ENABLED
)

268 
Äf_log_moduË_dyÇmic_d©a_t
 * 
p_moduË_d©a
 = 
	`NRF_LOG_DYNAMIC_SECTION_VARS_GET
(
moduË_id
);

269 
Äf_log_moduË_f‹r_d©a_t
 * 
p_f‹r
 = 
	`NRF_LOG_FILTER_SECTION_VARS_GET
(
moduË_id
);

271 
p_f‹r
->
f‹r_lvls
 &ğ~
	`BF_MASK
(
NRF_LOG_LEVEL_BITS
, (NRF_LOG_LEVEL_BITS * 
back’d_id
));

272 
p_f‹r
->
f‹r_lvls
 |ğ
	`BF_VAL
(
£v”™y
, 
NRF_LOG_LEVEL_BITS
, (NRF_LOG_LEVEL_BITS * 
back’d_id
));

274 
p_moduË_d©a
->
f‹r
 = 
	`high”_lvl_g‘
(
p_f‹r
->
f‹r_lvls
);

276 
	}
}

278 
Äf_log_£v”™y_t
 
	$Äf_log_moduË_š™_f‹r_g‘
(
ušt32_t
 
moduË_id
)

280 
Äf_log_moduË_cÚ¡_d©a_t
 * 
p_moduË_d©a
 =

281 
	`NRF_LOG_CONST_SECTION_VARS_GET
(
moduË_id
);

282  
NRF_LOG_FILTERS_ENABLED
 ? 
p_moduË_d©a
->
š™Ÿl_lvl
 :…_moduË_d©a->
comped_lvl
;

283 
	}
}

285 
Äf_log_£v”™y_t
 
	$Äf_log_moduË_f‹r_g‘
(
ušt32_t
 
back’d_id
,

286 
ušt32_t
 
moduË_id
,

287 
boŞ
 
Üd”ed_idx
,

288 
boŞ
 
dyÇmic
)

290 
Äf_log_£v”™y_t
 
£v”™y
 = 
NRF_LOG_SEVERITY_NONE
;

291 ià(
NRF_LOG_FILTERS_ENABLED
 && 
dyÇmic
)

293 ià(
	`moduË_idx_g‘
(&
moduË_id
, 
Üd”ed_idx
è=ğ
NRF_SUCCESS
)

295 
Äf_log_moduË_f‹r_d©a_t
 * 
p_f‹r
 = 
	`NRF_LOG_FILTER_SECTION_VARS_GET
(
moduË_id
);

296 
£v”™y
 = (
Äf_log_£v”™y_t
)
	`BF_GET
(
p_f‹r
->
f‹r_lvls
,

297 
NRF_LOG_LEVEL_BITS
,

298 (
back’d_id
*
NRF_LOG_LEVEL_BITS
));

301 ià(!
dyÇmic
)

303 ià(
	`moduË_idx_g‘
(&
moduË_id
, 
Üd”ed_idx
è=ğ
NRF_SUCCESS
)

305 
Äf_log_moduË_cÚ¡_d©a_t
 * 
p_moduË_d©a
 =

306 
	`NRF_LOG_CONST_SECTION_VARS_GET
(
moduË_id
);

307 
£v”™y
 = (
Äf_log_£v”™y_t
)
p_moduË_d©a
->
comped_lvl
;

310  
£v”™y
;

311 
	}
}

315 
boŞ
 
	$šv®id_·ck‘s_om™
(
Äf_log_h—d”_t
 cÚ¡ * 
p_h—d”
, 
ušt32_t
 * 
p_rd_idx
)

317 
boŞ
 
»t
 = 
çl£
;

318 ià(
p_h—d”
->
ba£
.
g’”ic
.
š_´og»ss
 == 1)

320 
p_h—d”
->
ba£
.
g’”ic
.
ty³
)

322 
HEADER_TYPE_STD
:

323 *
p_rd_idx
 +ğ(
HEADER_SIZE
 + 
p_h—d”
->
ba£
.
¡d
.
Çrgs
);

325 
HEADER_TYPE_HEXDUMP
:

326 *
p_rd_idx
 +ğ(
HEADER_SIZE
 + 
p_h—d”
->
ba£
.
hexdump
.
Ën
);

331 
»t
 = 
Œue
;

333  
»t
;

334 
	}
}

340 
ušt32_t
 
	$log_sk
()

342 
ušt16_t
 
drİ³d
 = 0;

344 ()
	`Äf_©omic_æag_£t
(&
m_log_d©a
.
log_sk³d
);

345 ()
	`Äf_©omic_æag_£t
(&
m_log_d©a
.
log_skpšg
);

347 
ušt32_t
 
rd_idx
 = 
m_log_d©a
.rd_idx;

348 
ušt32_t
 
mask
 = 
m_log_d©a
.mask;

349 
Äf_log_h—d”_t
 * 
p_h—d”
 = (Äf_log_h—d”_ˆ*)&
m_log_d©a
.
bufãr
[
rd_idx
 & 
mask
];

350 
Äf_log_h—d”_t
 
h—d”
;

354 ià(
	`šv®id_·ck‘s_om™
(
p_h—d”
, &
rd_idx
))

357 
p_h—d”
 = (
Äf_log_h—d”_t
 *)&
m_log_d©a
.
bufãr
[
rd_idx
 & 
mask
];

363 } 
Œue
);

365 
ušt32_t
 
i
;

366 
i
 = 0; i < 
HEADER_SIZE
; i++)

368 ((
ušt32_t
*)&
h—d”
)[
i
] = 
m_log_d©a
.
bufãr
[
rd_idx
++ & 
mask
];

371 
h—d”
.
ba£
.
g’”ic
.
ty³
)

373 
HEADER_TYPE_HEXDUMP
:

374 
drİ³d
 = 
h—d”
.dropped;

375 
rd_idx
 +ğ
	`CEIL_DIV
(
h—d”
.
ba£
.
hexdump
.
Ën
, (
ušt32_t
));

377 
HEADER_TYPE_STD
:

378 
drİ³d
 = 
h—d”
.dropped;

379 
rd_idx
 +ğ
h—d”
.
ba£
.
¡d
.
Çrgs
;

382 
	`ASSERT
(
çl£
);

386 
ušt32_t
 
log_skpšg_tmp
 = 
	`Äf_©omic_æag_ş—r_ãtch
(&
m_log_d©a
.
log_skpšg
);

388 ià(
log_skpšg_tmp
)

390 
m_log_d©a
.
rd_idx
 =„d_idx;

393  (
ušt32_t
)
drİ³d
;

394 
	}
}

401 
šlše
 
ušt32_t
 
	$drİ³d_§t16_g‘
()

403 
ušt32_t
 
drİ³d
 = 
	`Äf_©omic_u32_ãtch_¡Üe
(&
m_log_d©a
.
log_drİ³d_út
, 0);

404  
	`__USAT
(
drİ³d
, 16);

405 
	}
}

408 
šlše
 
	$¡d_h—d”_£t
(
ušt32_t
 
£v”™y_mid
,

409 cÚ¡ * cÚ¡ 
p_¡r
,

410 
ušt32_t
 
Çrgs
,

411 
ušt32_t
 
wr_idx
,

412 
ušt32_t
 
mask
)

417 
ušt32_t
 
moduË_id
 = 
£v”™y_mid
 >> 
NRF_LOG_MODULE_ID_POS
;

418 
ušt32_t
 
drİ³d
 = 
	`drİ³d_§t16_g‘
();

419 
	`ASSERT
(
moduË_id
 < 
	`Äf_log_moduË_út_g‘
());

420 
m_log_d©a
.
bufãr
[(
wr_idx
 + 1è& 
mask
] = 
moduË_id
 | (
drİ³d
 << 16);

422 ià(
NRF_LOG_USES_TIMESTAMP
)

424 
m_log_d©a
.
bufãr
[(
wr_idx
 + 2è& 
mask
] = m_log_d©a.
	`time¡amp_func
();

427 
Äf_log_h—d”_t
 * 
p_h—d”
 = (Äf_log_h—d”_ˆ*)&
m_log_d©a
.
bufãr
[
wr_idx
 & 
mask
];

428 
p_h—d”
->
ba£
.
¡d
.
£v”™y
 = 
£v”™y_mid
 & 
NRF_LOG_LEVEL_MASK
;

429 
p_h—d”
->
ba£
.
¡d
.
Çrgs
 =‚args;

430 
p_h—d”
->
ba£
.
¡d
.
addr
 = ((
ušt32_t
)(
p_¡r
è& 
STD_ADDR_MASK
);

431 
p_h—d”
->
ba£
.
¡d
.
ty³
 = 
HEADER_TYPE_STD
;

432 
p_h—d”
->
ba£
.
¡d
.
š_´og»ss
 = 0;

433 
	}
}

446 
šlše
 
boŞ
 
	$buf_´—Îoc
(
ušt32_t
 
cÚ‹Á_Ën
, ušt32_ˆ* 
p_wr_idx
, 
boŞ
 
¡d
)

448 
ušt32_t
 
»q_Ën
 = 
cÚ‹Á_Ën
 + 
HEADER_SIZE
;

449 
boŞ
 
»t
 = 
Œue
;

450 
	`CRITICAL_REGION_ENTER
();

451 *
p_wr_idx
 = 
m_log_d©a
.
wr_idx
;

452 
ušt32_t
 
avaabË_wÜds
 = (
m_log_d©a
.
mask
 + 1è- (m_log_d©a.
wr_idx
 - m_log_d©a.
rd_idx
);

453 
»q_Ën
 > 
avaabË_wÜds
)

455 
	`UNUSED_RETURN_VALUE
(
	`Äf_©omic_u32_add
(&
m_log_d©a
.
log_drİ³d_út
, 1));

456 ià(
NRF_LOG_ALLOW_OVERFLOW
)

458 
ušt32_t
 
drİ³d_š_sk
 = 
	`log_sk
();

459 
	`UNUSED_RETURN_VALUE
(
	`Äf_©omic_u32_add
(&
m_log_d©a
.
log_drİ³d_út
, 
drİ³d_š_sk
));

460 
avaabË_wÜds
 = (
m_log_d©a
.
mask
 + 1è- (m_log_d©a.
wr_idx
 - m_log_d©a.
rd_idx
);

464 
»t
 = 
çl£
;

469 ià(
»t
)

471 
Äf_log_maš_h—d”_t
 
šv®id_h—d”
;

472 
šv®id_h—d”
.
¿w
 = 0;

474 ià(
¡d
)

476 
šv®id_h—d”
.
¡d
.
ty³
 = 
HEADER_TYPE_STD
;

477 
šv®id_h—d”
.
¡d
.
š_´og»ss
 = 1;

478 
šv®id_h—d”
.
¡d
.
Çrgs
 = 
cÚ‹Á_Ën
;

482 
šv®id_h—d”
.
hexdump
.
ty³
 = 
HEADER_TYPE_HEXDUMP
;

483 
šv®id_h—d”
.
hexdump
.
š_´og»ss
 = 1;

484 
šv®id_h—d”
.
hexdump
.
Ën
 = 
cÚ‹Á_Ën
;

487 
Äf_log_maš_h—d”_t
 * 
p_h—d”
 =

488 (
Äf_log_maš_h—d”_t
 *)&
m_log_d©a
.
bufãr
[m_log_d©a.
wr_idx
 & m_log_d©a.
mask
];

490 
p_h—d”
->
¿w
 = 
šv®id_h—d”
.raw;

492 
m_log_d©a
.
wr_idx
 +ğ
»q_Ën
;

495 
	`CRITICAL_REGION_EXIT
();

496  
»t
;

497 
	}
}

499 cÚ¡ * 
	$Äf_log_push
(* cÚ¡ 
p_¡r
)

501 ià((
m_log_d©a
.
autoæush
è|| (
p_¡r
 =ğ
NULL
))

503  
p_¡r
;

506 
size_t
 
ssize
 = 
	`¡¾’
(
p_¡r
) + 1;

507 
ušt8_t
 * 
p_d¡
;

512 ià(
	`Äf_ršgbuf_®loc
(&
m_log_push_ršgbuf
, &
p_d¡
, &
ssize
, 
Œue
è=ğ
NRF_SUCCESS
)

514 
»t_code_t
 
”r
;

516 
	`memıy
(
p_d¡
, 
p_¡r
, 
ssize
);

519 
p_d¡
[
ssize
 - 1] = '\0';

521 
”r
 = 
	`Äf_ršgbuf_put
(&
m_log_push_ršgbuf
, 
ssize
);

522 
	`ASSERT
(
”r
 =ğ
NRF_SUCCESS
);

525 
”r
 = 
	`Äf_ršgbuf_ä“
(&
m_log_push_ršgbuf
, 
ssize
);

526 
	`ASSERT
(
”r
 =ğ
NRF_SUCCESS
);

528  (cÚ¡ *)
p_d¡
;

532  
NULL
;

534 
	}
}

536 
šlše
 
	$¡d_n
(
ušt32_t
 
£v”™y_mid
,

537 cÚ¡ * cÚ¡ 
p_¡r
,

538 
ušt32_t
 cÚ¡ * 
¬gs
,

539 
ušt32_t
 
Çrgs
)

541 
ušt32_t
 
mask
 = 
m_log_d©a
.mask;

542 
ušt32_t
 
wr_idx
;

544 ià(
	`buf_´—Îoc
(
Çrgs
, &
wr_idx
, 
Œue
))

548 
ušt32_t
 
d©a_idx
 = 
wr_idx
 + 
HEADER_SIZE
;

549 
ušt32_t
 
i
;

550 
i
 = 0; i < 
Çrgs
; i++)

552 
m_log_d©a
.
bufãr
[
d©a_idx
++ & 
mask
] =
¬gs
[
i
];

554 
	`¡d_h—d”_£t
(
£v”™y_mid
, 
p_¡r
, 
Çrgs
, 
wr_idx
, 
mask
);

556 ià(
m_log_d©a
.
autoæush
)

558 
	`NRF_LOG_FLUSH
();

561 
	}
}

563 
	$Äf_log_äÚ‹nd_¡d_0
(
ušt32_t
 
£v”™y_mid
, cÚ¡ * cÚ¡ 
p_¡r
)

565 
	`¡d_n
(
£v”™y_mid
, 
p_¡r
, 
NULL
, 0);

566 
	}
}

569 
	$Äf_log_äÚ‹nd_¡d_1
(
ušt32_t
 
£v”™y_mid
,

570 cÚ¡ * cÚ¡ 
p_¡r
,

571 
ušt32_t
 
v®0
)

573 
ušt32_t
 
¬gs
[] = {
v®0
};

574 
	`¡d_n
(
£v”™y_mid
, 
p_¡r
, 
¬gs
, 
	`ARRAY_SIZE
(args));

575 
	}
}

578 
	$Äf_log_äÚ‹nd_¡d_2
(
ušt32_t
 
£v”™y_mid
,

579 cÚ¡ * cÚ¡ 
p_¡r
,

580 
ušt32_t
 
v®0
,

581 
ušt32_t
 
v®1
)

583 
ušt32_t
 
¬gs
[] = {
v®0
, 
v®1
};

584 
	`¡d_n
(
£v”™y_mid
, 
p_¡r
, 
¬gs
, 
	`ARRAY_SIZE
(args));

585 
	}
}

588 
	$Äf_log_äÚ‹nd_¡d_3
(
ušt32_t
 
£v”™y_mid
,

589 cÚ¡ * cÚ¡ 
p_¡r
,

590 
ušt32_t
 
v®0
,

591 
ušt32_t
 
v®1
,

592 
ušt32_t
 
v®2
)

594 
ušt32_t
 
¬gs
[] = {
v®0
, 
v®1
, 
v®2
};

595 
	`¡d_n
(
£v”™y_mid
, 
p_¡r
, 
¬gs
, 
	`ARRAY_SIZE
(args));

596 
	}
}

599 
	$Äf_log_äÚ‹nd_¡d_4
(
ušt32_t
 
£v”™y_mid
,

600 cÚ¡ * cÚ¡ 
p_¡r
,

601 
ušt32_t
 
v®0
,

602 
ušt32_t
 
v®1
,

603 
ušt32_t
 
v®2
,

604 
ušt32_t
 
v®3
)

606 
ušt32_t
 
¬gs
[] = {
v®0
, 
v®1
, 
v®2
, 
v®3
};

607 
	`¡d_n
(
£v”™y_mid
, 
p_¡r
, 
¬gs
, 
	`ARRAY_SIZE
(args));

608 
	}
}

611 
	$Äf_log_äÚ‹nd_¡d_5
(
ušt32_t
 
£v”™y_mid
,

612 cÚ¡ * cÚ¡ 
p_¡r
,

613 
ušt32_t
 
v®0
,

614 
ušt32_t
 
v®1
,

615 
ušt32_t
 
v®2
,

616 
ušt32_t
 
v®3
,

617 
ušt32_t
 
v®4
)

619 
ušt32_t
 
¬gs
[] = {
v®0
, 
v®1
, 
v®2
, 
v®3
, 
v®4
};

620 
	`¡d_n
(
£v”™y_mid
, 
p_¡r
, 
¬gs
, 
	`ARRAY_SIZE
(args));

621 
	}
}

624 
	$Äf_log_äÚ‹nd_¡d_6
(
ušt32_t
 
£v”™y_mid
,

625 cÚ¡ * cÚ¡ 
p_¡r
,

626 
ušt32_t
 
v®0
,

627 
ušt32_t
 
v®1
,

628 
ušt32_t
 
v®2
,

629 
ušt32_t
 
v®3
,

630 
ušt32_t
 
v®4
,

631 
ušt32_t
 
v®5
)

633 
ušt32_t
 
¬gs
[] = {
v®0
, 
v®1
, 
v®2
, 
v®3
, 
v®4
, 
v®5
};

634 
	`¡d_n
(
£v”™y_mid
, 
p_¡r
, 
¬gs
, 
	`ARRAY_SIZE
(args));

635 
	}
}

638 
	$Äf_log_äÚ‹nd_hexdump
(
ušt32_t
 
£v”™y_mid
,

639 cÚ¡ * cÚ¡ 
p_d©a
,

640 
ušt16_t
 
Ëngth
)

642 
ušt32_t
 
mask
 = 
m_log_d©a
.mask;

644 
ušt32_t
 
wr_idx
;

645 ià(
	`buf_´—Îoc
(
	`CEIL_DIV
(
Ëngth
, (
ušt32_t
)), &
wr_idx
, 
çl£
))

647 
ušt32_t
 
h—d”_wr_idx
 = 
wr_idx
;

648 
wr_idx
 +ğ
HEADER_SIZE
;

650 
ušt32_t
 
¥aû0
 = (ušt32_tè* (
m_log_d©a
.
mask
 + 1 - (
wr_idx
 & mask));

651 ià(
Ëngth
 <ğ
¥aû0
)

653 
	`memıy
(&
m_log_d©a
.
bufãr
[
wr_idx
 & 
mask
], 
p_d©a
, 
Ëngth
);

657 
	`memıy
(&
m_log_d©a
.
bufãr
[
wr_idx
 & 
mask
], 
p_d©a
, 
¥aû0
);

658 
	`memıy
(&
m_log_d©a
.
bufãr
[0], &((
ušt8_t
 *)
p_d©a
)[
¥aû0
], 
Ëngth
 - space0);

662 ià(
NRF_LOG_USES_TIMESTAMP
)

664 
m_log_d©a
.
bufãr
[(
h—d”_wr_idx
 + 2è& 
mask
] = m_log_d©a.
	`time¡amp_func
();

667 
ušt32_t
 
moduË_id
 = 
£v”™y_mid
 >> 
NRF_LOG_MODULE_ID_POS
;

668 
ušt32_t
 
drİ³d
 = 
	`drİ³d_§t16_g‘
();

669 
m_log_d©a
.
bufãr
[(
h—d”_wr_idx
 + 1è& 
mask
] = 
moduË_id
 | (
drİ³d
 << 16);

671 
Äf_log_h—d”_t
 * 
p_h—d”
 = (Äf_log_h—d”_ˆ*)&
m_log_d©a
.
bufãr
[
h—d”_wr_idx
 & 
mask
];

672 
p_h—d”
->
ba£
.
hexdump
.
£v”™y
 = 
£v”™y_mid
 & 
NRF_LOG_LEVEL_MASK
;

673 
p_h—d”
->
ba£
.
hexdump
.
off£t
 = 0;

674 
p_h—d”
->
ba£
.
hexdump
.
Ën
 = 
Ëngth
;

675 
p_h—d”
->
ba£
.
hexdump
.
ty³
 = 
HEADER_TYPE_HEXDUMP
;

676 
p_h—d”
->
ba£
.
hexdump
.
š_´og»ss
 = 0;

682 ià(
m_log_d©a
.
autoæush
)

684 
	`NRF_LOG_FLUSH
();

686 
	}
}

689 
boŞ
 
	$bufãr_is_em±y
()

691  (
m_log_d©a
.
rd_idx
 =ğm_log_d©a.
wr_idx
);

692 
	}
}

694 
boŞ
 
	$Äf_log_äÚ‹nd_dequeue
()

697 ià(
	`bufãr_is_em±y
())

699  
çl£
;

701 
m_log_d©a
.
log_sk³d
 = 0;

703 
	`__DSB
();

704 
ušt32_t
 
rd_idx
 = 
m_log_d©a
.rd_idx;

705 
ušt32_t
 
mask
 = 
m_log_d©a
.mask;

706 
Äf_log_h—d”_t
 * 
p_h—d”
 = (Äf_log_h—d”_ˆ*)&
m_log_d©a
.
bufãr
[
rd_idx
 & 
mask
];

707 
Äf_log_h—d”_t
 
h—d”
;

708 
Äf_memobj_t
 * 
p_msg_buf
 = 
NULL
;

709 
size_t
 
memobj_off£t
 = 0;

710 
ušt32_t
 
£v”™y
 = 0;

714 ià(
	`šv®id_·ck‘s_om™
(
p_h—d”
, &
rd_idx
è&& (
m_log_d©a
.
log_sk³d
 == 0))

717 ià(
rd_idx
 >ğ
m_log_d©a
.
wr_idx
)

719 
m_log_d©a
.
rd_idx
 = m_log_d©a.
wr_idx
;

720  
çl£
;

723 
p_h—d”
 = (
Äf_log_h—d”_t
 *)&
m_log_d©a
.
bufãr
[
rd_idx
 & 
mask
];

729 } 
Œue
);

731 
ušt32_t
 
i
;

732 
i
 = 0; i < 
HEADER_SIZE
; i++)

734 ((
ušt32_t
*)&
h—d”
)[
i
] = 
m_log_d©a
.
bufãr
[
rd_idx
++ & 
mask
];

737 ià(
h—d”
.
ba£
.
g’”ic
.
ty³
 =ğ
HEADER_TYPE_HEXDUMP
)

739 
ušt32_t
 
Üig_d©a_Ën
 = 
h—d”
.
ba£
.
hexdump
.
Ën
;

740 
ušt32_t
 
d©a_Ën
 = 
	`MIN
(
h—d”
.
ba£
.
hexdump
.
Ën
, 
NRF_LOG_MAX_HEXDUMP
);

741 
h—d”
.
ba£
.
hexdump
.
Ën
 = 
d©a_Ën
;

742 
ušt32_t
 
msg_buf_size8
 = (ušt32_t)*
HEADER_SIZE
 + 
d©a_Ën
;

743 
£v”™y
 = 
h—d”
.
ba£
.
hexdump
.severity;

744 
p_msg_buf
 = 
	`Äf_memobj_®loc
(&
log_mempoŞ
, 
msg_buf_size8
);

746 ià(
p_msg_buf
)

748 
	`Äf_memobj_g‘
(
p_msg_buf
);

749 
	`Äf_memobj_wr™e
(
p_msg_buf
, &
h—d”
, 
HEADER_SIZE
*(
ušt32_t
), 
memobj_off£t
);

750 
memobj_off£t
 +ğ
HEADER_SIZE
*(
ušt32_t
);

752 
ušt32_t
 
¥aû0
 = (ušt32_tè* (
mask
 + 1 - (
rd_idx
 & mask));

753 ià(
d©a_Ën
 > 
¥aû0
)

755 
ušt8_t
 * 
±r0
 = 
¥aû0
 ?

756 (
ušt8_t
 *)&
m_log_d©a
.
bufãr
[
rd_idx
 & 
mask
] :

757 (
ušt8_t
 *)&
m_log_d©a
.
bufãr
[0];

758 
ušt8_t
 
Ën0
 = 
¥aû0
 ? s·û0 : 
d©a_Ën
;

759 
ušt8_t
 * 
±r1
 = 
¥aû0
 ?

760 (
ušt8_t
 *)&
m_log_d©a
.
bufãr
[0] : 
NULL
;

761 
ušt8_t
 
Ën1
 = 
¥aû0
 ? 
d©a_Ën
 - space0 : 0;

763 
	`Äf_memobj_wr™e
(
p_msg_buf
, 
±r0
, 
Ën0
, 
memobj_off£t
);

764 
memobj_off£t
 +ğ
Ën0
;

765 ià(
±r1
)

767 
	`Äf_memobj_wr™e
(
p_msg_buf
, 
±r1
, 
Ën1
, 
memobj_off£t
);

772 
ušt8_t
 * 
p_d©a
 = (ušt8_ˆ*)&
m_log_d©a
.
bufãr
[
rd_idx
 & 
mask
];

773 
	`Äf_memobj_wr™e
(
p_msg_buf
, 
p_d©a
, 
d©a_Ën
, 
memobj_off£t
);

775 
rd_idx
 +ğ
	`CEIL_DIV
(
Üig_d©a_Ën
, 4);

778 ià(
h—d”
.
ba£
.
g’”ic
.
ty³
 =ğ
HEADER_TYPE_STD
)

780 
h—d”
.
ba£
.
¡d
.
Çrgs
 = 
	`MIN
(h—d”.ba£.¡d.Çrgs, 
NRF_LOG_MAX_NUM_OF_ARGS
);

781 
ušt32_t
 
msg_buf_size32
 = 
HEADER_SIZE
 + 
h—d”
.
ba£
.
¡d
.
Çrgs
;

782 
£v”™y
 = 
h—d”
.
ba£
.
¡d
.severity;

784 
p_msg_buf
 = 
	`Äf_memobj_®loc
(&
log_mempoŞ
, 
msg_buf_size32
*(
ušt32_t
));

786 ià(
p_msg_buf
)

788 
	`Äf_memobj_g‘
(
p_msg_buf
);

789 
	`Äf_memobj_wr™e
(
p_msg_buf
, &
h—d”
, 
HEADER_SIZE
*(
ušt32_t
), 
memobj_off£t
);

790 
memobj_off£t
 +ğ
HEADER_SIZE
*(
ušt32_t
);

792 
i
 = 0; i < 
h—d”
.
ba£
.
¡d
.
Çrgs
; i++)

794 
	`Äf_memobj_wr™e
(
p_msg_buf
, &
m_log_d©a
.
bufãr
[
rd_idx
++ & 
mask
],

795 (
ušt32_t
), 
memobj_off£t
);

796 
memobj_off£t
 +ğ(
ušt32_t
);

805 ià(
p_msg_buf
)

807 
Äf_log_back’d_t
 cÚ¡ * 
p_back’d
 = 
m_log_d©a
.
p_back’d_h—d
;

808 ià(
NRF_LOG_ALLOW_OVERFLOW
 && 
m_log_d©a
.
log_sk³d
)

812 
	`Äf_memobj_put
(
p_msg_buf
);

816 
p_back’d
)

818 
boŞ
 
’Œy_acû±ed
 = 
çl£
;

819 ià(
	`Äf_log_back’d_is_’abËd
(
p_back’d
è=ğ
Œue
)

821 ià(
NRF_LOG_FILTERS_ENABLED
)

823 
ušt8_t
 
back’d_id
 = 
	`Äf_log_back’d_id_g‘
(
p_back’d
);

824 
Äf_log_moduË_f‹r_d©a_t
 * 
p_moduË_f‹r
 =

825 
	`NRF_LOG_FILTER_SECTION_VARS_GET
(
h—d”
.
moduË_id
);

826 
ušt32_t
 
back’d_lvl
 = 
	`BF_GET
(
p_moduË_f‹r
->
f‹r_lvls
,

827 
NRF_LOG_LEVEL_BITS
,

828 (
back’d_id
*
NRF_LOG_LEVEL_BITS
));

831 
£v”™y
 = (£v”™y =ğ
NRF_LOG_SEVERITY_INFO_RAW
) ?

832 
NRF_LOG_SEVERITY_INFO
 : 
£v”™y
;

833 ià(
back’d_lvl
 >ğ
£v”™y
)

835 
’Œy_acû±ed
 = 
Œue
;

840 ()
£v”™y
;

841 
’Œy_acû±ed
 = 
Œue
;

844 ià(
’Œy_acû±ed
)

846 
	`Äf_log_back’d_put
(
p_back’d
, 
p_msg_buf
);

848 
p_back’d
 =…_back’d->
p_cb
->
p_Ãxt
;

851 
	`Äf_memobj_put
(
p_msg_buf
);

853 ià(
NRF_LOG_ALLOW_OVERFLOW
)

859 
	`CRITICAL_REGION_ENTER
();

860 ià(
m_log_d©a
.
log_sk³d
 == 0)

862 
m_log_d©a
.
rd_idx
 =„d_idx;

864 
	`CRITICAL_REGION_EXIT
();

868 
m_log_d©a
.
rd_idx
 =„d_idx;

875 
Äf_log_back’d_t
 cÚ¡ * 
p_back’d
 = 
m_log_d©a
.
p_back’d_h—d
;

877 
p_back’d
)

879 
	`Äf_log_back’d_æush
(
p_back’d
);

880 
p_back’d
 =…_back’d->
p_cb
->
p_Ãxt
;

882 
	`NRF_LOG_WARNING
("Backends flushed");

885  
	`bufãr_is_em±y
(è? 
çl£
 : 
Œue
;

886 
	}
}

888 
št32_t
 
	$back’d_id_assign
()

890 
št32_t
 
ÿndid©e_id
;

891 
Äf_log_back’d_t
 cÚ¡ * 
p_back’d
;

892 
boŞ
 
id_avaabË
;

893 
ÿndid©e_id
 = 0; cªdid©e_id < 
NRF_LOG_MAX_BACKENDS
; candidate_id++)

895 
p_back’d
 = 
m_log_d©a
.
p_back’d_h—d
;

896 
id_avaabË
 = 
Œue
;

897 
p_back’d
)

899 ià(
	`Äf_log_back’d_id_g‘
(
p_back’d
è=ğ
ÿndid©e_id
)

901 
id_avaabË
 = 
çl£
;

904 
p_back’d
 =…_back’d->
p_cb
->
p_Ãxt
;

906 ià(
id_avaabË
)

908  
ÿndid©e_id
;

912 
	}
}

914 
št32_t
 
	$Äf_log_back’d_add
(
Äf_log_back’d_t
 cÚ¡ * 
p_back’d
, 
Äf_log_£v”™y_t
 
£v”™y
)

916 
št32_t
 
id
 = 
	`back’d_id_assign
();

917 ià(
id
 == -1)

919  
id
;

922 
	`Äf_log_back’d_id_£t
(
p_back’d
, 
id
);

924 ià(
m_log_d©a
.
p_back’d_h—d
 =ğ
NULL
)

926 
m_log_d©a
.
p_back’d_h—d
 = 
p_back’d
;

927 
p_back’d
->
p_cb
->
p_Ãxt
 = 
NULL
;

931 
p_back’d
->
p_cb
->
p_Ãxt
 = 
m_log_d©a
.
p_back’d_h—d
->p_cb->p_next;

932 
m_log_d©a
.
p_back’d_h—d
->
p_cb
->
p_Ãxt
 = 
p_back’d
;

935 ià(
NRF_LOG_FILTERS_ENABLED
)

937 
ušt32_t
 
i
;

938 
i
 = 0; i < 
	`Äf_log_moduË_út_g‘
(); i++)

940 
Äf_log_£v”™y_t
 
budš_lvl
 = 
	`Äf_log_moduË_š™_f‹r_g‘
(
i
);

941 
Äf_log_£v”™y_t
 
aùu®_£v”™y
 = 
	`MIN
(
budš_lvl
, 
£v”™y
);

942 
	`Äf_log_moduË_f‹r_£t
(
	`Äf_log_back’d_id_g‘
(
p_back’d
), 
i
, 
aùu®_£v”™y
);

946  
id
;

947 
	}
}

949 
	$Äf_log_back’d_»move
(
Äf_log_back’d_t
 cÚ¡ * 
p_back’d
)

951 
Äf_log_back’d_t
 cÚ¡ * 
p_cu¼
 = 
m_log_d©a
.
p_back’d_h—d
;

952 
Äf_log_back’d_t
 cÚ¡ * 
p_´ev
 = 
NULL
;

953 
p_cu¼
 !ğ
p_back’d
)

955 
p_´ev
 = 
p_cu¼
;

956 
p_cu¼
 =…_cu¼->
p_cb
->
p_Ãxt
;

959 ià(
p_´ev
)

961 
p_´ev
->
p_cb
->
p_Ãxt
 = 
p_back’d
->p_cb->p_next;

965 
m_log_d©a
.
p_back’d_h—d
 = 
NULL
;

968 
p_back’d
->
p_cb
->
id
 = 
NRF_LOG_BACKEND_INVALID_ID
;

969 
	}
}

971 
	$Äf_log_·nic
()

973 
Äf_log_back’d_t
 cÚ¡ * 
p_back’d
 = 
m_log_d©a
.
p_back’d_h—d
;

974 
m_log_d©a
.
autoæush
 = 
Œue
;

975 
p_back’d
)

977 
	`Äf_log_back’d_’abË
(
p_back’d
);

978 
	`Äf_log_back’d_·nic_£t
(
p_back’d
);

979 
p_back’d
 =…_back’d->
p_cb
->
p_Ãxt
;

981 
	}
}

983 #ià
NRF_MODULE_ENABLED
(
LOG_CONFIG_LOAD_STORE
)

984 
	~"fds.h
"

985 
	#LOG_CONFIG_FILE_ID
 0x106E

	)

986 
	#LOG_CONFIG_RECORD_ID
 0x3427

	)

988 
»t_code_t
 
	$Äf_log_cÚfig_¡Üe
()

990 
fds_»cÜd_desc_t
 
desc
 = {0};

991 
fds_fšd_tok’_t
 
tok’
 = {0};

992 
fds_»cÜd_t
 
»cÜd
 = {

993 .
fe_id
 = 
LOG_CONFIG_FILE_ID
,

994 .
key
 = 
LOG_CONFIG_RECORD_ID
,

995 .
d©a
 = {

996 .
p_d©a
 = 
	`NRF_LOG_FILTER_SECTION_VARS_GET
(0),

997 .
Ëngth_wÜds
 = 
	`NRF_SECTION_LENGTH
(
log_f‹r_d©a
)/(
ušt32_t
)

1000 
»t_code_t
 
»t
 = 
	`fds_»cÜd_fšd
(
LOG_CONFIG_FILE_ID
, 
LOG_CONFIG_RECORD_ID
, &
desc
, &
tok’
);

1001 ià(
»t
 =ğ
FDS_SUCCESS
)

1003 
»t
 = 
	`fds_»cÜd_upd©e
(&
desc
, &
»cÜd
);

1004 
	`NRF_LOG_INFO
("Logg” cÚfigu¿tiÚ fupd©ed w™h„esuÉ:%d", 
»t
);

1006 ià(
»t
 =ğ
FDS_ERR_NOT_FOUND
)

1008 
»t
 = 
	`fds_»cÜd_wr™e
(&
desc
, &
»cÜd
);

1009 
	`NRF_LOG_INFO
("Logg” cÚfigu¿tiÚ fwr™‹Àw™h„esuÉ:%d", 
»t
);

1013 
»t
 = 
NRF_ERROR_INTERNAL
;

1015  
»t
;

1016 
	}
}

1018 
»t_code_t
 
	$Äf_log_cÚfig_lßd
()

1020 
fds_»cÜd_desc_t
 
desc
 = {0};

1021 
fds_fšd_tok’_t
 
tok’
 = {0};

1023 
»t_code_t
 
»t
 = 
	`fds_»cÜd_fšd
(
LOG_CONFIG_FILE_ID
, 
LOG_CONFIG_RECORD_ID
, &
desc
, &
tok’
);

1024 ià(
»t
 =ğ
FDS_SUCCESS
)

1026 
fds_æash_»cÜd_t
 
»cÜd
 = {0};

1027 
»t
 = 
	`fds_»cÜd_İ’
(&
desc
, &
»cÜd
);

1028 ià(
»t
 =ğ
NRF_SUCCESS
)

1030 * 
p_de¡
 = (*)
	`NRF_LOG_FILTER_SECTION_VARS_GET
(0);

1031 
ušt32_t
 
Ëngth
 = 
	`NRF_SECTION_LENGTH
(
log_f‹r_d©a
);

1032 
	`memıy
(
p_de¡
, 
»cÜd
.
p_d©a
, 
Ëngth
);

1033 
»t
 = 
	`fds_»cÜd_şo£
(&
desc
);

1036 ià(
»t
 =ğ
FDS_ERR_NOT_FOUND
)

1038 
	`NRF_LOG_WARNING
("Logger configuration file‚ot found.");

1039 
»t
 = 
NRF_ERROR_NOT_FOUND
;

1043 
»t
 = 
NRF_ERROR_INTERNAL
;

1046  
»t
;

1047 
	}
}

1050 #ià
NRF_LOG_CLI_CMDS


1051 
	~"Äf_şi.h
"

1053 (*
	tÄf_log_şi_back’d_cmd_t
)(
	tÄf_şi_t
 cÚ¡ * 
	tp_şi
,

1054 
	tÄf_log_back’d_t
 cÚ¡ * 
	tp_back’d
,

1055 
	tsize_t
 
	t¬gc
,

1056 * * 
	t¬gv
);

1058 cÚ¡ * 
m_£v”™y_lvls
[] = {

1064 
	}
};

1066 cÚ¡ * 
	gm_£v”™y_lvls_sÜ‹d
[] = {

1082 
Äf_log_back’d_t
 cÚ¡ * 
	$back’d_fšd
(cÚ¡ * 
p_Çme
)

1084 
size_t
 
num_of_back’ds
;

1085 
Äf_log_back’d_t
 cÚ¡ * 
p_back’d
;

1087 
num_of_back’ds
 = 
	`NRF_SECTION_ITEM_COUNT
(
NRF_LOG_BACKEND_SECTION_NAME
, 
Äf_log_back’d_t
);

1088 
size_t
 
i
 = 0; i < 
num_of_back’ds
; i++)

1090 
p_back’d
 = 
	`NRF_SECTION_ITEM_GET
(
NRF_LOG_BACKEND_SECTION_NAME
, 
Äf_log_back’d_t
, 
i
);

1091 ià(
	`¡rcmp
(
p_Çme
, 
p_back’d
->p_name) == 0)

1093  
p_back’d
;

1096  
NULL
;

1097 
	}
}

1102 
	$Äf_şi_back’d_cmd_execu‹
(
Äf_şi_t
 cÚ¡ * 
p_şi
,

1103 
size_t
 
¬gc
,

1104 * * 
¬gv
,

1105 
Äf_log_şi_back’d_cmd_t
 
func
)

1108 cÚ¡ * 
p_back’d_Çme
 = 
¬gv
[-1];

1110 
Äf_log_back’d_t
 cÚ¡ * 
p_back’d
 = 
	`back’d_fšd
(
p_back’d_Çme
);

1112 ià(
p_back’d
)

1114 
	`func
(
p_şi
, 
p_back’d
, 
¬gc
, 
¬gv
);

1118 
	`Äf_şi_årštf
(
p_şi
, 
NRF_CLI_ERROR
, "Inv®id back’d: %s\r\n", 
p_back’d_Çme
);

1120 
	}
}

1123 
	$log_¡©us
(
Äf_şi_t
 cÚ¡ * 
p_şi
,

1124 
Äf_log_back’d_t
 cÚ¡ * 
p_back’d
,

1125 
size_t
 
¬gc
,

1126 * * 
¬gv
)

1128 
	`UNUSED_PARAMETER
(
¬gc
);

1129 
	`UNUSED_PARAMETER
(
¬gv
);

1131 
ušt32_t
 
moduËs_út
 = 
	`Äf_log_moduË_út_g‘
();

1132 
ušt32_t
 
i
;

1135 ià(!
	`Äf_log_back’d_is_’abËd
(
p_back’d
))

1137 
	`Äf_şi_årštf
(
p_şi
, 
NRF_CLI_ERROR
, "Logs‡re halted!\r\n");

1139 
	`Äf_şi_årštf
(
p_şi
, 
NRF_CLI_NORMAL
, "%-40s | current | built-in \r\n", "module_name");

1140 
	`Äf_şi_årštf
(
p_şi
, 
NRF_CLI_NORMAL
, "----------------------------------------------------------\r\n");

1141 
i
 = 0; i < 
moduËs_út
; i++)

1143 
ušt32_t
 
back’d_id
 = 
p_back’d
->
p_cb
->
id
;

1144 
Äf_log_£v”™y_t
 
moduË_dyÇmic_lvl
 =

1145 
	`Äf_log_moduË_f‹r_g‘
(
back’d_id
, 
i
, 
Œue
,rue);

1146 
Äf_log_£v”™y_t
 
moduË_comped_lvl
 =

1147 
	`Äf_log_moduË_f‹r_g‘
(
back’d_id
, 
i
, 
Œue
, 
çl£
);

1148 
Äf_log_£v”™y_t
 
aùu®_comped_lvl
 =

1149 
	`MIN
(
moduË_comped_lvl
, (
Äf_log_£v”™y_t
)
NRF_LOG_DEFAULT_LEVEL
);

1151 
	`Äf_şi_årštf
(
p_şi
, 
NRF_CLI_NORMAL
, "%-40s | %-7s | %s%s\r\n",

1152 
	`Äf_log_moduË_Çme_g‘
(
i
, 
Œue
),

1153 
m_£v”™y_lvls
[
moduË_dyÇmic_lvl
],

1154 
m_£v”™y_lvls
[
aùu®_comped_lvl
],

1155 
aùu®_comped_lvl
 < 
moduË_comped_lvl
 ? "*" : "");

1157 
	}
}

1160 
	$log_£lf_¡©us
(
Äf_şi_t
 cÚ¡ * 
p_şi
, 
size_t
 
¬gc
, **
¬gv
)

1162 
	`log_¡©us
(
p_şi
,…_şi->
p_log_back’d
, 
¬gc
, 
¬gv
);

1163 
	}
}

1166 
	$log_back’d_¡©us
(
Äf_şi_t
 cÚ¡ * 
p_şi
, 
size_t
 
¬gc
, **
¬gv
)

1168 
	`Äf_şi_back’d_cmd_execu‹
(
p_şi
, 
¬gc
, 
¬gv
, 
log_¡©us
);

1169 
	}
}

1172 
boŞ
 
	$moduË_id_g‘
(cÚ¡ * 
p_Çme
, 
ušt32_t
 * 
p_id
)

1174 
ušt32_t
 
moduËs_út
 = 
	`Äf_log_moduË_út_g‘
();

1175 cÚ¡ * 
p_tmp_Çme
;

1176 
ušt32_t
 
j
;

1177 
j
 = 0; j < 
moduËs_út
; j++)

1179 
p_tmp_Çme
 = 
	`Äf_log_moduË_Çme_g‘
(
j
, 
çl£
);

1180 ià(
	`¡ºcmp
(
p_tmp_Çme
, 
p_Çme
, 32) == 0)

1182 *
p_id
 = 
j
;

1186  (
j
 !ğ
moduËs_út
);

1187 
	}
}

1190 
boŞ
 
	$moduË_id_f‹r_£t
(
ušt32_t
 
back’d_id
,

1191 
ušt32_t
 
moduË_id
,

1192 
Äf_log_£v”™y_t
 
lvl
)

1194 
Äf_log_£v”™y_t
 
budš_lvl
 = 
	`Äf_log_moduË_f‹r_g‘
(
back’d_id
, 
moduË_id
, 
çl£
, false);

1195 ià(
lvl
 > 
budš_lvl
)

1197  
çl£
;

1201 
	`Äf_log_moduË_f‹r_£t
(
back’d_id
, 
moduË_id
, 
lvl
);

1202  
Œue
;

1204 
	}
}

1207 
	$log_ù¾
(
Äf_şi_t
 cÚ¡ * 
p_şi
,

1208 
Äf_log_back’d_t
 cÚ¡ * 
p_back’d
,

1209 
size_t
 
¬gc
,

1210 * * 
¬gv
)

1212 
Äf_log_£v”™y_t
 
lvl
;

1213 
ušt32_t
 
fœ¡_m_Çme_idx
;

1214 
ušt32_t
 
i
;

1215 
boŞ
 
®l_moduËs
 = 
çl£
;

1216 
ušt32_t
 
back’d_id
 = 
p_back’d
->
p_cb
->
id
;

1218 ià(
¬gc
 > 0)

1220 ià(
	`¡ºcmp
(
¬gv
[0], "enable", 7) == 0)

1222 ià(
¬gc
 == 1)

1224 
	`Äf_şi_årštf
(
p_şi
, 
NRF_CLI_ERROR
, "Bad…arameter count.\r\n");

1228 ià(
¬gc
 == 2)

1230 
®l_moduËs
 = 
Œue
;

1233 
i
 = 0; i < 
	`ARRAY_SIZE
(
m_£v”™y_lvls
); i++)

1235 ià(
	`¡ºcmp
(
¬gv
[1], 
m_£v”™y_lvls
[
i
], 10) == 0)

1241 ià(
i
 =ğ
	`ARRAY_SIZE
(
m_£v”™y_lvls
))

1243 
	`Äf_şi_årštf
(
p_şi
, 
NRF_CLI_ERROR
, "UnknowÀ£v”™y†ev–: %s\r\n", 
¬gv
[1]);

1247 
lvl
 = (
Äf_log_£v”™y_t
)
i
;

1248 
fœ¡_m_Çme_idx
 = 2;

1251 ià(
	`¡ºcmp
(
¬gv
[0], "disable", 8) == 0)

1253 ià(
¬gc
 == 1)

1255 
®l_moduËs
 = 
Œue
;

1257 
lvl
 = 
NRF_LOG_SEVERITY_NONE
;

1258 
fœ¡_m_Çme_idx
 = 1;

1262 
	`Äf_şi_årštf
(
p_şi
, 
NRF_CLI_ERROR
, "UnknowÀİtiÚ: %s\r\n", 
¬gv
[0]);

1266 ià(
®l_moduËs
)

1268 
i
 = 0; i < 
	`Äf_log_moduË_út_g‘
(); i++)

1270 ià(
	`moduË_id_f‹r_£t
(
back’d_id
, 
i
, 
lvl
è=ğ
çl£
)

1272 
	`Äf_şi_årštf
(
p_şi
, 
NRF_CLI_ERROR
,

1274 
	`Äf_log_moduË_Çme_g‘
(
i
, 
çl£
));

1280 
i
 = 
fœ¡_m_Çme_idx
; i < 
¬gc
; i++)

1282 
ušt32_t
 
moduË_id
 = 0;

1283 ià(
	`moduË_id_g‘
(
¬gv
[
i
], &
moduË_id
è=ğ
çl£
)

1285 
	`Äf_şi_årštf
(
p_şi
, 
NRF_CLI_ERROR
, "UnknowÀmoduË:%s\r\n", 
¬gv
[
i
]);

1287 ià(
	`moduË_id_f‹r_£t
(
back’d_id
, 
moduË_id
, 
lvl
è=ğ
çl£
)

1289 
	`Äf_şi_årštf
(
p_şi
, 
NRF_CLI_ERROR
,

1291 
	`Äf_log_moduË_Çme_g‘
(
moduË_id
, 
çl£
));

1300 
	}
}

1303 
	$log_£lf_ù¾
(
Äf_şi_t
 cÚ¡ * 
p_şi
, 
size_t
 
¬gc
, **
¬gv
)

1305 
	`log_ù¾
(
p_şi
,…_şi->
p_log_back’d
, 
¬gc
, 
¬gv
);

1306 
	}
}

1309 
	$log_back’d_ù¾
(
Äf_şi_t
 cÚ¡ * 
p_şi
, 
size_t
 
¬gc
, **
¬gv
)

1311 
	`Äf_şi_back’d_cmd_execu‹
(
p_şi
, 
¬gc
, 
¬gv
, 
log_ù¾
);

1312 
	}
}

1314 
moduË_Çme_g‘
(
size_t
 
idx
, 
Äf_şi_¡©ic_’Œy_t
 * 
p_¡©ic
);

1316 
NRF_CLI_CREATE_DYNAMIC_CMD
(
m_moduË_Çme
, 
moduË_Çme_g‘
);

1318 
	$moduË_Çme_g‘
(
size_t
 
idx
, 
Äf_şi_¡©ic_’Œy_t
 * 
p_¡©ic
)

1320 
p_¡©ic
->
hªdËr
 = 
NULL
;

1321 
p_¡©ic
->
p_h–p
 = 
NULL
;

1322 
p_¡©ic
->
p_subcmd
 = &
m_moduË_Çme
;

1323 
p_¡©ic
->
p_syÁax
 = 
	`Äf_log_moduË_Çme_g‘
(
idx
, 
Œue
);

1324 
	}
}

1327 
	$£v”™y_lvl_g‘
(
size_t
 
idx
, 
Äf_şi_¡©ic_’Œy_t
 * 
p_¡©ic
)

1329 
p_¡©ic
->
hªdËr
 = 
NULL
;

1330 
p_¡©ic
->
p_h–p
 = 
NULL
;

1331 
p_¡©ic
->
p_subcmd
 = &
m_moduË_Çme
;

1332 
p_¡©ic
->
p_syÁax
 = (
idx
 < 
	`ARRAY_SIZE
(
m_£v”™y_lvls_sÜ‹d
)) ?

1333 
m_£v”™y_lvls_sÜ‹d
[
idx
] : 
NULL
;

1334 
	}
}

1336 
NRF_CLI_CREATE_DYNAMIC_CMD
(
m_£v”™y_lvl
, 
£v”™y_lvl_g‘
);

1339 
	$log_h®t
(
Äf_şi_t
 cÚ¡ * 
p_şi
,

1340 
Äf_log_back’d_t
 cÚ¡ * 
p_back’d
,

1341 
size_t
 
¬gc
,

1342 * * 
¬gv
)

1344 
	`UNUSED_PARAMETER
(
¬gc
);

1345 
	`UNUSED_PARAMETER
(
¬gv
);

1347 
	`Äf_log_back’d_di§bË
(
p_back’d
);

1348 
	}
}

1351 
	$log_back’d_h®t
(
Äf_şi_t
 cÚ¡ * 
p_şi
, 
size_t
 
¬gc
, **
¬gv
)

1353 
	`Äf_şi_back’d_cmd_execu‹
(
p_şi
, 
¬gc
, 
¬gv
, 
log_h®t
);

1354 
	}
}

1357 
	$log_£lf_h®t
(
Äf_şi_t
 cÚ¡ * 
p_şi
, 
size_t
 
¬gc
, **
¬gv
)

1359 
	`log_h®t
(
p_şi
,…_şi->
p_log_back’d
, 
¬gc
, 
¬gv
);

1360 
	}
}

1363 
	$log_go
(
Äf_şi_t
 cÚ¡ * 
p_şi
,

1364 
Äf_log_back’d_t
 cÚ¡ * 
p_back’d
,

1365 
size_t
 
¬gc
,

1366 * * 
¬gv
)

1368 
	`UNUSED_PARAMETER
(
¬gc
);

1369 
	`UNUSED_PARAMETER
(
¬gv
);

1371 
	`Äf_log_back’d_’abË
(
p_back’d
);

1372 
	}
}

1375 
	$log_back’d_go
(
Äf_şi_t
 cÚ¡ * 
p_şi
, 
size_t
 
¬gc
, **
¬gv
)

1377 
	`Äf_şi_back’d_cmd_execu‹
(
p_şi
, 
¬gc
, 
¬gv
, 
log_go
);

1378 
	}
}

1381 
	$log_£lf_go
(
Äf_şi_t
 cÚ¡ * 
p_şi
, 
size_t
 
¬gc
, **
¬gv
)

1383 
	`log_go
(
p_şi
,…_şi->
p_log_back’d
, 
¬gc
, 
¬gv
);

1384 
	}
}

1387 
	$log_cmd_back’ds_li¡
(
Äf_şi_t
 cÚ¡ * 
p_şi
, 
size_t
 
¬gc
, **
¬gv
)

1389 ià(
	`Äf_şi_h–p_»que¡ed
(
p_şi
))

1391 
	`Äf_şi_h–p_´št
(
p_şi
, 
NULL
, 0);

1394 
size_t
 
num_of_back’ds
;

1396 
num_of_back’ds
 = 
	`NRF_SECTION_ITEM_COUNT
(
NRF_LOG_BACKEND_SECTION_NAME
, 
Äf_log_back’d_t
);

1397 
size_t
 
i
 = 0; i < 
num_of_back’ds
; i++)

1399 
Äf_log_back’d_t
 cÚ¡ * 
p_back’d
 =

1400 
	`NRF_SECTION_ITEM_GET
(
NRF_LOG_BACKEND_SECTION_NAME
, 
Äf_log_back’d_t
, 
i
);

1402 ià(
p_back’d
->
p_cb
->
id
 =ğ
NRF_LOG_BACKEND_INVALID_ID
)

1404 
	`Äf_şi_årštf
(
p_şi
, 
NRF_CLI_NORMAL
,

1407 
p_back’d
->
p_Çme
);

1411 
	`Äf_şi_årštf
(
p_şi
, 
NRF_CLI_NORMAL
,

1415 
p_back’d
->
p_Çme
,

1416 
p_back’d
->
p_cb
->
’abËd
 ? "enabled" : "disabled",

1417 
p_back’d
->
p_cb
->
id
);

1420 
	}
}

1423 
	$NRF_CLI_CREATE_STATIC_SUBCMD_SET
(
m_sub_log_back’d
)

1425 
	`NRF_CLI_CMD
(
di§bË
, &
m_moduË_Çme
,

1428 
log_back’d_ù¾
),

1429 
	`NRF_CLI_CMD
(
’abË
, &
m_£v”™y_lvl
,

1432 
log_back’d_ù¾
),

1433 
	`NRF_CLI_CMD
(
go
, 
NULL
, "Resumloggšg", 
log_back’d_go
),

1434 
	`NRF_CLI_CMD
(
h®t
, 
NULL
, "H®ˆloggšg", 
log_back’d_h®t
),

1435 
	`NRF_CLI_CMD
(
¡©us
, 
NULL
, "Logg” stus", 
log_back’d_¡©us
),

1436 
NRF_CLI_SUBCMD_SET_END


1437 
	}
};

1439 
	$back’d_Çme_g‘
(
size_t
 
idx
, 
Äf_şi_¡©ic_’Œy_t
 * 
p_¡©ic
)

1441 
p_¡©ic
->
hªdËr
 = 
NULL
;

1442 
p_¡©ic
->
p_h–p
 = 
NULL
;

1443 
p_¡©ic
->
p_subcmd
 = &
m_sub_log_back’d
;

1444 
p_¡©ic
->
p_syÁax
 = 
NULL
;

1446 
Äf_log_back’d_t
 cÚ¡ * 
p_back’d
;

1447 
size_t
 
aùive_idx
 = 0;

1448 
ušt32_t
 
i
;

1450 
i
 = 0; i < 
	`NRF_SECTION_ITEM_COUNT
(
NRF_LOG_BACKEND_SECTION_NAME
, 
Äf_log_back’d_t
); i++)

1452 
p_back’d
 = 
	`NRF_SECTION_ITEM_GET
(
NRF_LOG_BACKEND_SECTION_NAME
, 
Äf_log_back’d_t
, 
i
);

1453 ià(
p_back’d
->
p_cb
->
id
 !ğ
NRF_LOG_BACKEND_INVALID_ID
)

1455 ià(
idx
 =ğ
aùive_idx
)

1457 
p_¡©ic
->
p_syÁax
 = 
p_back’d
->
p_Çme
;

1462 
aùive_idx
++;

1466 
	}
}

1468 
NRF_CLI_CREATE_DYNAMIC_CMD
(
m_back’d_Çme_dyÇmic
, 
back’d_Çme_g‘
);

1470 
	$log_cÚfig_lßd_cmd
(
Äf_şi_t
 cÚ¡ * 
p_şi
, 
size_t
 
¬gc
, **
¬gv
)

1472 
	`UNUSED_PARAMETER
(
¬gc
);

1473 
	`UNUSED_PARAMETER
(
¬gv
);

1475 ià(
	`Äf_şi_h–p_»que¡ed
(
p_şi
))

1477 
	`Äf_şi_h–p_´št
(
p_şi
, 
NULL
, 0);

1481 #ià
LOG_CONFIG_LOAD_STORE_ENABLED


1482 ià(
	`Äf_log_cÚfig_lßd
(è=ğ
NRF_SUCCESS
)

1484 
	`Äf_şi_årštf
(
p_şi
, 
NRF_CLI_NORMAL
, "Configuration†oaded.\r\n");

1488 
	`Äf_şi_årštf
(
p_şi
, 
NRF_CLI_ERROR
, "Failedo†oadhe configuration.\r\n");

1491 
	`Äf_şi_årštf
(
p_şi
, 
NRF_CLI_ERROR
, "Not supported.\r\n");

1493 
	}
}

1495 
	$log_cÚfig_¡Üe_cmd
(
Äf_şi_t
 cÚ¡ * 
p_şi
, 
size_t
 
¬gc
, **
¬gv
)

1497 
	`UNUSED_PARAMETER
(
¬gc
);

1498 
	`UNUSED_PARAMETER
(
¬gv
);

1500 ià(
	`Äf_şi_h–p_»que¡ed
(
p_şi
))

1502 
	`Äf_şi_h–p_´št
(
p_şi
, 
NULL
, 0);

1506 #ià
LOG_CONFIG_LOAD_STORE_ENABLED


1507 ià(
	`Äf_log_cÚfig_¡Üe
(è=ğ
NRF_SUCCESS
)

1509 
	`Äf_şi_årštf
(
p_şi
, 
NRF_CLI_NORMAL
, "Configuration stored.\r\n");

1513 
	`Äf_şi_årštf
(
p_şi
, 
NRF_CLI_ERROR
, "Failedo storehe configuration.\r\n");

1516 
	`Äf_şi_årštf
(
p_şi
, 
NRF_CLI_ERROR
, "Not supported.\r\n");

1518 
	}
}

1520 
	$NRF_CLI_CREATE_STATIC_SUBCMD_SET
(
m_sub_log_cÚfig
)

1522 
	`NRF_CLI_CMD
(
lßd
, 
NULL
, "Lßd cÚfigu¿tiÚ stÜed iÀnÚ-vŞ©memÜy.", 
log_cÚfig_lßd_cmd
),

1523 
	`NRF_CLI_CMD
(
¡Üe
, 
NULL
, "StÜcu¼’ˆcÚfigu¿tiÚ iÀnÚ-vŞ©memÜy.", 
log_cÚfig_¡Üe_cmd
),

1524 
NRF_CLI_SUBCMD_SET_END


1525 
	}
};

1527 
	$NRF_CLI_CREATE_STATIC_SUBCMD_SET
(
m_sub_log_¡©
)

1529 
	`NRF_CLI_CMD
(
back’d
, &
m_back’d_Çme_dyÇmic
, "Logg” back’d commªds.", 
NULL
),

1530 
	`NRF_CLI_CMD
(
cÚfig
, &
m_sub_log_cÚfig
, "Mªaglogg” cÚfigu¿tiÚ", 
NULL
),

1531 
	`NRF_CLI_CMD
(
di§bË
, &
m_moduË_Çme
,

1534 
log_£lf_ù¾
),

1535 
	`NRF_CLI_CMD
(
’abË
, &
m_£v”™y_lvl
,

1538 
log_£lf_ù¾
),

1539 
	`NRF_CLI_CMD
(
go
, 
NULL
, "Resumloggšg", 
log_£lf_go
),

1540 
	`NRF_CLI_CMD
(
h®t
, 
NULL
, "H®ˆloggšg", 
log_£lf_h®t
),

1541 
	`NRF_CLI_CMD
(
li¡_back’ds
, 
NULL
, "Li¡ logg” back’ds.", 
log_cmd_back’ds_li¡
),

1542 
	`NRF_CLI_CMD
(
¡©us
, 
NULL
, "Logg” stus", 
log_£lf_¡©us
),

1543 
NRF_CLI_SUBCMD_SET_END


1544 
	}
};

1546 
	$log_cmd
(
Äf_şi_t
 cÚ¡ * 
p_şi
, 
size_t
 
¬gc
, **
¬gv
)

1548 ià((
¬gc
 =ğ1è|| 
	`Äf_şi_h–p_»que¡ed
(
p_şi
))

1550 
	`Äf_şi_h–p_´št
(
p_şi
, 
NULL
, 0);

1554 
	`Äf_şi_årštf
(
p_şi
, 
NRF_CLI_ERROR
, "%s:%s%s\r\n", 
¬gv
[0], " unknown…arameter: ",‡rgv[1]);

1555 
	}
}

1557 
NRF_CLI_CMD_REGISTER
(
log
, &
m_sub_log_¡©
, "Commªd fÜ cÚŒŞlšg†ogg”", 
log_cmd
);

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\log\src\nrf_log_str_formatter.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
NRF_LOG
)

42 
	~"Äf_log_¡r_fÜm©‹r.h
"

43 
	~"Äf_log_š‹º®.h
"

44 
	~"Äf_log_ù¾.h
"

45 
	~"Äf_årštf.h
"

46 
	~<ùy³.h
>

48 
	#NRF_LOG_COLOR_CODE_DEFAULT
 "\x1B[0m"

	)

49 
	#NRF_LOG_COLOR_CODE_BLACK
 "\x1B[1;30m"

	)

50 
	#NRF_LOG_COLOR_CODE_RED
 "\x1B[1;31m"

	)

51 
	#NRF_LOG_COLOR_CODE_GREEN
 "\x1B[1;32m"

	)

52 
	#NRF_LOG_COLOR_CODE_YELLOW
 "\x1B[1;33m"

	)

53 
	#NRF_LOG_COLOR_CODE_BLUE
 "\x1B[1;34m"

	)

54 
	#NRF_LOG_COLOR_CODE_MAGENTA
 "\x1B[1;35m"

	)

55 
	#NRF_LOG_COLOR_CODE_CYAN
 "\x1B[1;36m"

	)

56 
	#NRF_LOG_COLOR_CODE_WHITE
 "\x1B[1;37m"

	)

58 cÚ¡ * 
	g£v”™y_Çmes
[] = {

59 
NULL
,

66 cÚ¡ * 
	gm_cŞÜs
[] = {

67 
NRF_LOG_COLOR_CODE_DEFAULT
,

68 
NRF_LOG_COLOR_CODE_BLACK
,

69 
NRF_LOG_COLOR_CODE_RED
,

70 
NRF_LOG_COLOR_CODE_GREEN
,

71 
NRF_LOG_COLOR_CODE_YELLOW
,

72 
NRF_LOG_COLOR_CODE_BLUE
,

73 
NRF_LOG_COLOR_CODE_MAGENTA
,

74 
NRF_LOG_COLOR_CODE_CYAN
,

75 
NRF_LOG_COLOR_CODE_WHITE
,

78 
ušt32_t
 
	gm_äeq
;

79 
ušt32_t
 
	gm_time¡amp_div
;

81 
	$time¡amp_´št
(
Äf_årštf_ùx_t
 * 
p_ùx
, 
ušt32_t
 
time¡amp
)

83 ià(
NRF_LOG_USES_TIMESTAMP
)

85 ià(
NRF_LOG_STR_FORMATTER_TIMESTAMP_FORMAT_ENABLED
)

87 
time¡amp
 /ğ
m_time¡amp_div
;

88 
ušt32_t
 
£cÚds
 = 
time¡amp
/
m_äeq
;

89 
ušt32_t
 
hours
 = 
£cÚds
/3600;

90 
£cÚds
 -ğ
hours
 * 3600;

91 
ušt32_t
 
mšs
 = 
£cÚds
/60;

92 
£cÚds
 -ğ
mšs
 * 60;

94 
ušt32_t
 
»mšd”
 = 
time¡amp
 % 
m_äeq
;

95 
ušt32_t
 
ms
 = (
»mšd”
 * 1000)/
m_äeq
;

96 
ušt32_t
 
us
 = (1000*(1000*
»mšd”
 - (
ms
 * 
m_äeq
)))/m_freq;

98 
	`Äf_årštf
(
p_ùx
, "[%02d:%02d:%02d.%03d,%03d] ", 
hours
, 
mšs
, 
£cÚds
, 
ms
, 
us
);

102 
	`Äf_årštf
(
p_ùx
, "[%08lu] ", 
time¡amp
);

105 
	}
}

106 
	$´efix_´oûss
(
Äf_log_¡r_fÜm©‹r_’Œy_·¿ms_t
 * 
p_·¿ms
,

107 
Äf_årštf_ùx_t
 * 
p_ùx
)

109 ià(
p_·¿ms
->
drİ³d
)

111 
	`Äf_årštf
(
p_ùx
,

113 
NRF_LOG_COLOR_CODE_RED
,

114 
p_·¿ms
->
drİ³d
,

115 
NRF_LOG_COLOR_CODE_DEFAULT
);

118 ià(!(
p_·¿ms
->
£v”™y
 =ğ
NRF_LOG_SEVERITY_INFO_RAW
))

120 ià(
p_·¿ms
->
u£_cŞÜs
)

122 
	`Äf_årštf
(
p_ùx
, "%s",

123 
m_cŞÜs
[
	`Äf_log_cŞÜ_id_g‘
Ğ
p_·¿ms
->
moduË_id
,…_·¿ms->
£v”™y
)]);

125 
	`time¡amp_´št
(
p_ùx
, 
p_·¿ms
->
time¡amp
);

127 
	`Äf_årštf
(
p_ùx
, "<%s> %s: ",

128 
£v”™y_Çmes
[
p_·¿ms
->
£v”™y
], 
	`Äf_log_moduË_Çme_g‘
Õ_·¿ms->
moduË_id
, 
çl£
));

130 
	}
}

132 
	$po¡fix_´oûss
(
Äf_log_¡r_fÜm©‹r_’Œy_·¿ms_t
 * 
p_·¿ms
,

133 
Äf_årštf_ùx_t
 * 
p_ùx
,

134 
boŞ
 
Ãwlše
)

136 ià(!(
p_·¿ms
->
£v”™y
 =ğ
NRF_LOG_SEVERITY_INFO_RAW
))

138 ià(
p_·¿ms
->
u£_cŞÜs
)

140 
	`Äf_årštf
(
p_ùx
, "%s", 
m_cŞÜs
[0]);

142 
	`Äf_årštf
(
p_ùx
, "\r\n");

144 ià(
Ãwlše
)

146 
	`Äf_årštf
(
p_ùx
, "\r\n");

148 
	`Äf_årštf_bufãr_æush
(
p_ùx
);

149 
	}
}

151 
	$Äf_log_¡d_’Œy_´oûss
(cÚ¡ * 
p_¡r
,

152 
ušt32_t
 cÚ¡ * 
p_¬gs
,

153 
ušt32_t
 
Çrgs
,

154 
Äf_log_¡r_fÜm©‹r_’Œy_·¿ms_t
 * 
p_·¿ms
,

155 
Äf_årštf_ùx_t
 * 
p_ùx
)

157 
boŞ
 
auto_æush
 = 
p_ùx
->auto_flush;

158 
p_ùx
->
auto_æush
 = 
çl£
;

160 
	`´efix_´oûss
(
p_·¿ms
, 
p_ùx
);

162 
Çrgs
)

165 
	`Äf_årštf
(
p_ùx
, 
p_¡r
);

168 
	`Äf_årštf
(
p_ùx
, 
p_¡r
, 
p_¬gs
[0]);

171 
	`Äf_årštf
(
p_ùx
, 
p_¡r
, 
p_¬gs
[0],…_args[1]);

174 
	`Äf_årštf
(
p_ùx
, 
p_¡r
, 
p_¬gs
[0],…_args[1],…_args[2]);

177 
	`Äf_årštf
(
p_ùx
, 
p_¡r
, 
p_¬gs
[0],…_args[1],…_args[2],…_args[3]);

180 
	`Äf_årštf
(
p_ùx
, 
p_¡r
, 
p_¬gs
[0],…_args[1],…_args[2],…_args[3],…_args[4]);

183 
	`Äf_årštf
(
p_ùx
, 
p_¡r
, 
p_¬gs
[0],…_args[1],…_args[2],…_args[3],…_args[4],…_args[5]);

190 
	`po¡fix_´oûss
(
p_·¿ms
, 
p_ùx
, 
çl£
);

191 
p_ùx
->
auto_æush
 =‡uto_flush;

192 
	}
}

194 
	#HEXDUMP_BYTES_IN_LINE
 8

	)

196 
	$Äf_log_hexdump_’Œy_´oûss
(
ušt8_t
 * 
p_d©a
,

197 
ušt32_t
 
d©a_Ën
,

198 
Äf_log_¡r_fÜm©‹r_’Œy_·¿ms_t
 * 
p_·¿ms
,

199 
Äf_årštf_ùx_t
 * 
p_ùx
)

201 ià(
d©a_Ën
 > 
HEXDUMP_BYTES_IN_LINE
)

205 
boŞ
 
auto_æush
 = 
p_ùx
->auto_flush;

206 
p_ùx
->
auto_æush
 = 
çl£
;

208 
	`´efix_´oûss
(
p_·¿ms
, 
p_ùx
);

210 
ušt32_t
 
i
;

212 
i
 = 0; i < 
HEXDUMP_BYTES_IN_LINE
; i++)

214 ià(
i
 < 
d©a_Ën
)

216 
	`Äf_årštf
(
p_ùx
, " %02x", 
p_d©a
[
i
]);

220 
	`Äf_årštf
(
p_ùx
, " ");

223 
	`Äf_årštf
(
p_ùx
, "|");

225 
i
 = 0; i < 
HEXDUMP_BYTES_IN_LINE
; i++)

227 ià(
i
 < 
d©a_Ën
)

229 
c
 = ()
p_d©a
[
i
];

230 
	`Äf_årštf
(
p_ùx
, "%c", 
	`i¥ršt
(()
c
) ? c :'.');

234 
	`Äf_årštf
(
p_ùx
, " ");

238 
	`po¡fix_´oûss
(
p_·¿ms
, 
p_ùx
, 
Œue
);

240 
p_ùx
->
auto_æush
 =‡uto_flush;

241 
	}
}

243 
	$Äf_log_¡r_fÜm©‹r_time¡amp_äeq_£t
(
ušt32_t
 
äeq
)

245 
m_time¡amp_div
 = 1;

249 
äeq
 > 1000000)

251 
äeq
 /= 2;

252 
m_time¡amp_div
 *= 2;

254 
m_äeq
 = 
äeq
;

255 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\memobj\nrf_memobj.c

41 
	~"Äf_memobj.h
"

42 
	~"Äf_©omic.h
"

43 
	~"Äf_as£¹.h
"

45 
memobj_–em_s
 
	tmemobj_–em_t
;

50 
memobj_–em_t
 * 
	mp_Ãxt
;

51 } 
	tmemobj_h—d”_t
;

56 
ušt8_t
 
	mu£r_út
;

57 
ušt8_t
 
	mchunk_út
;

58 
ušt16_t
 
	mchunk_size
;

59 } 
	tmemobj_h—d_h—d”_f›lds_t
;

66 
Äf_©omic_u32_t
 
	m©omic_u£r_út
;

67 
memobj_h—d_h—d”_f›lds_t
 
	mf›lds
;

68 } 
	md©a
;

69 } 
	tmemobj_h—d_h—d”_t
;

74 
memobj_h—d”_t
 
	mh—d”
;

75 
memobj_h—d_h—d”_t
 
	mh—d_h—d”
;

76 
ušt8_t
 
	md©a
[1];

77 } 
	tmemobj_h—d_t
;

79 
STATIC_ASSERT
((
memobj_h—d”_t
è=ğ
NRF_MEMOBJ_STD_HEADER_SIZE
);

82 
	smemobj_–em_s


84 
memobj_h—d”_t
 
	mh—d”
;

85 
ušt8_t
 
	md©a
[1];

88 
»t_code_t
 
	$Äf_memobj_poŞ_š™
(
Äf_memobj_poŞ_t
 cÚ¡ * 
p_poŞ
)

90  
	`Äf_b®loc_š™
((
Äf_b®loc_t
 cÚ¡ *)
p_poŞ
);

91 
	}
}

93 
Äf_memobj_t
 * 
	$Äf_memobj_®loc
(
Äf_memobj_poŞ_t
 cÚ¡ * 
p_poŞ
,

94 
size_t
 
size
)

96 
ušt32_t
 
bsize
 = (ušt32_t)
	`NRF_BALLOC_ELEMENT_SIZE
((
Äf_b®loc_t
 cÚ¡ *)
p_poŞ
è- (
memobj_h—d”_t
);

97 
ušt8_t
 
num_of_chunks
 = (ušt8_t)
	`CEIL_DIV
(
size
 + (
memobj_h—d_h—d”_t
), 
bsize
);

99 
memobj_h—d_t
 * 
p_h—d
 = 
	`Äf_b®loc_®loc
((
Äf_b®loc_t
 cÚ¡ *)
p_poŞ
);

100 ià(
p_h—d
 =ğ
NULL
)

102  
NULL
;

104 
p_h—d
->
h—d_h—d”
.
d©a
.
f›lds
.
u£r_út
 = 0;

105 
p_h—d
->
h—d_h—d”
.
d©a
.
f›lds
.
chunk_út
 = 1;

106 
p_h—d
->
h—d_h—d”
.
d©a
.
f›lds
.
chunk_size
 = 
bsize
;

108 
memobj_h—d”_t
 * 
p_´ev
 = (memobj_h—d”_ˆ*)
p_h—d
;

109 
memobj_h—d”_t
 * 
p_cu¼
;

110 
ušt32_t
 
i
;

111 
ušt32_t
 
chunk_Ëss1
 = (ušt32_t)
num_of_chunks
 - 1;

113 
p_´ev
->
p_Ãxt
 = (
memobj_–em_t
 *)
p_poŞ
;

114 
i
 = 0; i < 
chunk_Ëss1
; i++)

116 
p_cu¼
 = (
memobj_h—d”_t
 *)
	`Äf_b®loc_®loc
((
Äf_b®loc_t
 cÚ¡ *)
p_poŞ
);

117 ià(
p_cu¼
)

119 (
p_h—d
->
h—d_h—d”
.
d©a
.
f›lds
.
chunk_út
)++;

120 
p_´ev
->
p_Ãxt
 = (
memobj_–em_t
 *)
p_cu¼
;

121 
p_cu¼
->
p_Ãxt
 = (
memobj_–em_t
 *)
p_poŞ
;

122 
p_´ev
 = 
p_cu¼
;

127 
	`Äf_memobj_ä“
((
Äf_memobj_t
 *)
p_h—d
);

128  
NULL
;

131  (
Äf_memobj_t
 *)
p_h—d
;

132 
	}
}

134 
	$Äf_memobj_ä“
(
Äf_memobj_t
 * 
p_obj
)

136 
memobj_h—d_t
 * 
p_h—d
 = (memobj_h—d_ˆ*)
p_obj
;

137 
ušt8_t
 
chunk_út
 = 
p_h—d
->
h—d_h—d”
.
d©a
.
f›lds
.chunk_cnt;

138 
ušt32_t
 
i
;

139 
memobj_h—d”_t
 * 
p_cu¼
 = (memobj_h—d”_ˆ*)
p_obj
;

140 
memobj_h—d”_t
 * 
p_Ãxt
;

141 
ušt32_t
 
chunk_Ëss1
 = (ušt32_t)
chunk_út
 - 1;

143 
i
 = 0; i < 
chunk_Ëss1
; i++)

145 
p_cu¼
 = (
memobj_h—d”_t
 *í_cu¼->
p_Ãxt
;

147 
Äf_b®loc_t
 cÚ¡ * 
p_poŞ2
 = (Äf_b®loc_ˆcÚ¡ *)
p_cu¼
->
p_Ãxt
;

149 
p_cu¼
 = (
memobj_h—d”_t
 *)
p_obj
;

150 
i
 = 0; i < 
chunk_út
; i++)

152 
p_Ãxt
 = (
memobj_h—d”_t
 *)
p_cu¼
->p_next;

153 
	`Äf_b®loc_ä“
(
p_poŞ2
, 
p_cu¼
);

154 
p_cu¼
 = 
p_Ãxt
;

156 
	}
}

158 
	$Äf_memobj_g‘
(
Äf_memobj_t
 cÚ¡ * 
p_obj
)

160 
memobj_h—d_t
 * 
p_h—d
 = (memobj_h—d_ˆ*)
p_obj
;

161 ()
	`Äf_©omic_u32_add
(&
p_h—d
->
h—d_h—d”
.
d©a
.
©omic_u£r_út
, 1);

162 
	}
}

164 
	$Äf_memobj_put
(
Äf_memobj_t
 * 
p_obj
)

166 
memobj_h—d_t
 * 
p_h—d
 = (memobj_h—d_ˆ*)
p_obj
;

167 
ušt32_t
 
u£r_út
 = 
	`Äf_©omic_u32_sub
(&
p_h—d
->
h—d_h—d”
.
d©a
.
©omic_u£r_út
, 1);

168 
memobj_h—d_h—d”_f›lds_t
 * 
p_f›lds
 = (memobj_h—d_h—d”_f›lds_ˆ*)&
u£r_út
;

169 ià(
p_f›lds
->
u£r_út
 == 0)

171 
	`Äf_memobj_ä“
(
p_obj
);

173 
	}
}

175 
	$memobj_İ
(
Äf_memobj_t
 * 
p_obj
,

176 * 
p_d©a
,

177 
size_t
 * 
p_Ën
,

178 
size_t
 
off£t
,

179 
boŞ
 
»ad
)

182 
	`ASSERT
(
p_obj
);

184 
memobj_h—d_t
 * 
p_h—d
 = (memobj_h—d_ˆ*)
p_obj
;

185 
memobj_–em_t
 * 
p_cu¼_chunk
 = (memobj_–em_ˆ*)
p_obj
;

186 
size_t
 
obj_ÿ·c™y
;

187 
size_t
 
chunk_size
;

188 
size_t
 
chunk_idx
;

189 
size_t
 
chunk_off£t
;

190 
size_t
 
Ën
;

192 
obj_ÿ·c™y
 = (
p_h—d
->
h—d_h—d”
.
d©a
.
f›lds
.
chunk_size
 *

193 
p_h—d
->
h—d_h—d”
.
d©a
.
f›lds
.
chunk_út
) -

194 (
memobj_h—d_h—d”_f›lds_t
);

196 
	`ASSERT
(
off£t
 < 
obj_ÿ·c™y
);

198 
chunk_size
 = 
p_h—d
->
h—d_h—d”
.
d©a
.
f›lds
.chunk_size;

199 
chunk_idx
 = (
off£t
 + (
memobj_h—d_h—d”_f›lds_t
)è/ 
chunk_size
;

200 
chunk_off£t
 = (
off£t
 + (
memobj_h—d_h—d”_f›lds_t
)è% 
chunk_size
;

201 
Ën
 = ((*
p_Ën
 + 
off£t
è> 
obj_ÿ·c™y
) ? obj_capacity - offset : *p_len;

204 *
p_Ën
 = 
Ën
;

207 
chunk_idx
 > 0)

209 
p_cu¼_chunk
 =…_cu¼_chunk->
h—d”
.
p_Ãxt
;

210 
chunk_idx
--;

213 
size_t
 
u£r_mem_off£t
 = 0;

214 
size_t
 
cu¼_ıy_size
 = 
chunk_size
 - 
chunk_off£t
;

215 
cu¼_ıy_size
 = cu¼_ıy_siz> 
Ën
 ?†en : curr_cpy_size;

217 
Ën
)

219 * 
p_u£r_mem
 = &((
ušt8_t
 *)
p_d©a
)[
u£r_mem_off£t
];

220 * 
p_obj_mem
 = &
p_cu¼_chunk
->
d©a
[
chunk_off£t
];

221 ià(
»ad
)

223 
	`memıy
(
p_u£r_mem
, 
p_obj_mem
, 
cu¼_ıy_size
);

227 
	`memıy
(
p_obj_mem
, 
p_u£r_mem
, 
cu¼_ıy_size
);

230 
chunk_off£t
 = 0;

231 
p_cu¼_chunk
 =…_cu¼_chunk->
h—d”
.
p_Ãxt
;

232 
Ën
 -ğ
cu¼_ıy_size
;

233 
u£r_mem_off£t
 +ğ
cu¼_ıy_size
;

234 
cu¼_ıy_size
 = (
chunk_size
 > 
Ën
) ?†en : chunk_size;

236 
	}
}

238 
	$Äf_memobj_wr™e
(
Äf_memobj_t
 * 
p_obj
,

239 * 
p_d©a
,

240 
size_t
 
Ën
,

241 
size_t
 
off£t
)

244 
size_t
 
İ_Ën
 = 
Ën
;

245 
	`memobj_İ
(
p_obj
, 
p_d©a
, &
İ_Ën
, 
off£t
, 
çl£
);

246 
	`ASSERT
(
İ_Ën
 =ğ
Ën
);

247 
	}
}

249 
	$Äf_memobj_»ad
(
Äf_memobj_t
 * 
p_obj
,

250 * 
p_d©a
,

251 
size_t
 
Ën
,

252 
size_t
 
off£t
)

254 
size_t
 
İ_Ën
 = 
Ën
;

255 
	`memobj_İ
(
p_obj
, 
p_d©a
, &
İ_Ën
, 
off£t
, 
Œue
);

256 
	`ASSERT
(
İ_Ën
 =ğ
Ën
);

258 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\pwr_mgmt\nrf_pwr_mgmt.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
NRF_PWR_MGMT
)

43 
	~"Äf_pwr_mgmt.h
"

44 
	~"Äf.h
"

45 
	~"Äf_mtx.h
"

46 
	~"Äf_pow”.h
"

47 
	~"­p_”rÜ.h
"

48 
	~"Äf_as£¹.h
"

49 
	~"Äf_log_ù¾.h
"

50 
	~"­p_ut_¶©fÜm.h
"

52 
	#NRF_LOG_MODULE_NAME
 
pwr_mgmt


	)

53 #ià
NRF_PWR_MGMT_CONFIG_LOG_ENABLED


54 
	#NRF_LOG_LEVEL
 
NRF_PWR_MGMT_CONFIG_LOG_LEVEL


	)

55 
	#NRF_LOG_INFO_COLOR
 
NRF_PWR_MGMT_CONFIG_INFO_COLOR


	)

56 
	#NRF_LOG_DEBUG_COLOR
 
NRF_PWR_MGMT_CONFIG_DEBUG_COLOR


	)

58 
	#NRF_LOG_LEVEL
 0

	)

60 
	~"Äf_log.h
"

61 
NRF_LOG_MODULE_REGISTER
();

63 #ifdeà
SOFTDEVICE_PRESENT


64 
	~"Äf_soc.h
"

65 
	~"Äf_sdh.h
"

69 #ià
NRF_PWR_MGMT_CONFIG_USE_SCHEDULER


70 #ià(
APP_SCHEDULER_ENABLED
 != 1)

73 
	~"­p_scheduËr.h
"

78 
NRF_SECTION_SET_DEF
(
pwr_mgmt_d©a
,

79 
Äf_pwr_mgmt_shutdown_hªdËr_t
,

80 
NRF_PWR_MGMT_CONFIG_HANDLER_PRIORITY_COUNT
);

82 
Äf_pwr_mgmt_evt_t
 
	gm_pwr_mgmt_evt
;

84 
Äf_mtx_t
 
	gm_sysoff_mtx
;

85 
boŞ
 
	gm_shutdown_¡¬‹d
;

86 
Äf_£ùiÚ_™”_t
 
	gm_hªdËrs_™”
;

88 #ià(
NRF_PWR_MGMT_CONFIG_FPU_SUPPORT_ENABLED
 && 
__FPU_PRESENT
)

89 
	#PWR_MGMT_FPU_SLEEP_PREPARE
(è
	`pwr_mgmt_åu_¦“p_´•¬e
()

	)

91 
__STATIC_INLINE
 
	$pwr_mgmt_åu_¦“p_´•¬e
()

93 
ušt32_t
 
Üigš®_åsü
;

95 
	`CRITICAL_REGION_ENTER
();

96 
Üigš®_åsü
 = 
	`__g‘_FPSCR
();

108 
	`__£t_FPSCR
(
Üigš®_åsü
 & ~0x9Fu);

109 
	`__DMB
();

110 
	`NVIC_CË¬P’dšgIRQ
(
FPU_IRQn
);

111 
	`CRITICAL_REGION_EXIT
();

125 
	`ASSERT
((
Üigš®_åsü
 & 0x7) == 0);

126 
	}
}

128 
	#PWR_MGMT_FPU_SLEEP_PREPARE
()

	)

132 #ià
NRF_PWR_MGMT_CONFIG_DEBUG_PIN_ENABLED


133 #undeà
PWR_MGMT_SLEEP_IN_CRITICAL_SECTION_REQUIRED


134 
	#PWR_MGMT_SLEEP_IN_CRITICAL_SECTION_REQUIRED


	)

136 
	~"Äf_gpio.h
"

137 
	#PWR_MGMT_DEBUG_PINS_INIT
(è
	`pwr_mgmt_debug_pšs_š™
()

	)

138 
	#PWR_MGMT_DEBUG_PIN_CLEAR
(è
	`Äf_gpio_pš_ş—r
(
NRF_PWR_MGMT_SLEEP_DEBUG_PIN
)

	)

139 
	#PWR_MGMT_DEBUG_PIN_SET
(è
	`Äf_gpio_pš_£t
(
NRF_PWR_MGMT_SLEEP_DEBUG_PIN
)

	)

141 
__STATIC_INLINE
 
	$pwr_mgmt_debug_pšs_š™
()

143 
	`Äf_gpio_pš_ş—r
(
NRF_PWR_MGMT_SLEEP_DEBUG_PIN
);

144 
	`Äf_gpio_cfg_ouut
(
NRF_PWR_MGMT_SLEEP_DEBUG_PIN
);

145 
	}
}

148 
	#PWR_MGMT_DEBUG_PIN_CLEAR
()

	)

149 
	#PWR_MGMT_DEBUG_PIN_SET
()

	)

150 
	#PWR_MGMT_DEBUG_PINS_INIT
()

	)

154 #ià
NRF_PWR_MGMT_CONFIG_CPU_USAGE_MONITOR_ENABLED


155 #undeà
PWR_MGMT_SLEEP_IN_CRITICAL_SECTION_REQUIRED


156 
	#PWR_MGMT_SLEEP_IN_CRITICAL_SECTION_REQUIRED


	)

158 #undeà
PWR_MGMT_TIMER_REQUIRED


159 
	#PWR_MGMT_TIMER_REQUIRED


	)

160 
	~"­p_tim”.h
"

162 
	#PWR_MGMT_CPU_USAGE_MONITOR_INIT
(è
	`pwr_mgmt_ıu_u§ge_mÚ™Ü_š™
()

	)

163 
	#PWR_MGMT_CPU_USAGE_MONITOR_UPDATE
(è
	`pwr_mgmt_ıu_u§ge_mÚ™Ü_upd©e
()

	)

164 
	#PWR_MGMT_CPU_USAGE_MONITOR_SUMMARY
(è
	`NRF_LOG_INFO
("Maximum CPU usage: %u%%", \

165 
m_max_ıu_u§ge
)

	)

166 
	#PWR_MGMT_CPU_USAGE_MONITOR_SECTION_ENTER
() \

168 
ušt32_t
 
¦“p_¡¬t
 = 
	`­p_tim”_út_g‘
()

	)

170 
	#PWR_MGMT_CPU_USAGE_MONITOR_SECTION_EXIT
() \

171 
ušt32_t
 
¦“p_’d
 = 
	`­p_tim”_út_g‘
(); \

172 
ušt32_t
 
¦“p_du¿tiÚ
; \

173 
¦“p_du¿tiÚ
 = 
	`­p_tim”_út_diff_compu‹
(
¦“p_’d
, \

174 
¦“p_¡¬t
); \

175 
m_ticks_¦“pšg
 +ğ
¦“p_du¿tiÚ
; \

176 }

	)

178 
ušt32_t
 
	gm_ticks_¦“pšg
;

179 
ušt32_t
 
	gm_ticks_Ï¡
;

180 
ušt8_t
 
	gm_max_ıu_u§ge
;

182 
__STATIC_INLINE
 
	$pwr_mgmt_ıu_u§ge_mÚ™Ü_š™
()

184 
m_ticks_¦“pšg
 = 0;

185 
m_ticks_Ï¡
 = 0;

186 
m_max_ıu_u§ge
 = 0;

187 
	}
}

189 
__STATIC_INLINE
 
	$pwr_mgmt_ıu_u§ge_mÚ™Ü_upd©e
()

191 
ušt32_t
 
d–
;

192 
ušt32_t
 
ticks
;

193 
ušt8_t
 
ıu_u§ge
;

195 
ticks
 = 
	`­p_tim”_út_g‘
();

196 
d–
 = 
	`­p_tim”_út_diff_compu‹
(
ticks
, 
m_ticks_Ï¡
);

197 
ıu_u§ge
 = 100 * (
d–
 - 
m_ticks_¦“pšg
) / delta;

199 
	`NRF_LOG_INFO
("CPU U§ge: %u%%", 
ıu_u§ge
);

200 ià(
m_max_ıu_u§ge
 < 
ıu_u§ge
)

202 
m_max_ıu_u§ge
 = 
ıu_u§ge
;

205 
m_ticks_Ï¡
 = 
ticks
;

206 
m_ticks_¦“pšg
 = 0;

207 
	}
}

210 
	#PWR_MGMT_CPU_USAGE_MONITOR_INIT
()

	)

211 
	#PWR_MGMT_CPU_USAGE_MONITOR_UPDATE
()

	)

212 
	#PWR_MGMT_CPU_USAGE_MONITOR_SUMMARY
()

	)

213 
	#PWR_MGMT_CPU_USAGE_MONITOR_SECTION_ENTER
()

	)

214 
	#PWR_MGMT_CPU_USAGE_MONITOR_SECTION_EXIT
()

	)

218 #ià
NRF_PWR_MGMT_CONFIG_STANDBY_TIMEOUT_ENABLED


219 #undeà
PWR_MGMT_TIMER_REQUIRED


220 
	#PWR_MGMT_TIMER_REQUIRED


	)

222 
	#PWR_MGMT_STANDBY_TIMEOUT_INIT
(è
	`pwr_mgmt_¡ªdby_timeout_ş—r
()

	)

223 
	#PWR_MGMT_STANDBY_TIMEOUT_CLEAR
(è
	`pwr_mgmt_¡ªdby_timeout_ş—r
()

	)

224 
	#PWR_MGMT_STANDBY_TIMEOUT_CHECK
(è
	`pwr_mgmt_¡ªdby_timeout_check
()

	)

226 
ušt16_t
 
	gm_¡ªdby_couÁ”
;

229 
__STATIC_INLINE
 
	$pwr_mgmt_¡ªdby_timeout_ş—r
()

231 
m_¡ªdby_couÁ”
 = 0;

232 
	}
}

234 
__STATIC_INLINE
 
	$pwr_mgmt_¡ªdby_timeout_check
()

236 ià(
m_¡ªdby_couÁ”
 < 
NRF_PWR_MGMT_CONFIG_STANDBY_TIMEOUT_S
)

238 
m_¡ªdby_couÁ”
++;

240 ià(
m_shutdown_¡¬‹d
 =ğ
çl£
)

242 
	`Äf_pwr_mgmt_shutdown
(
NRF_PWR_MGMT_SHUTDOWN_GOTO_SYSOFF
);

244 
	}
}

247 
	#PWR_MGMT_STANDBY_TIMEOUT_INIT
()

	)

248 
	#PWR_MGMT_STANDBY_TIMEOUT_CLEAR
()

	)

249 
	#PWR_MGMT_STANDBY_TIMEOUT_CHECK
()

	)

253 #ià
NRF_PWR_MGMT_CONFIG_AUTO_SHUTDOWN_RETRY


254 #undeà
PWR_MGMT_TIMER_REQUIRED


255 
	#PWR_MGMT_TIMER_REQUIRED


	)

257 
	#PWR_MGMT_AUTO_SHUTDOWN_RETRY
(è
	`pwr_mgmt_auto_shutdown_»Œy
()

	)

259 
__STATIC_INLINE
 
	$pwr_mgmt_auto_shutdown_»Œy
()

261 ià(
m_shutdown_¡¬‹d
)

264 
	`Äf_pwr_mgmt_shutdown
(
NRF_PWR_MGMT_SHUTDOWN_CONTINUE
);

266 
	}
}

269 
	#PWR_MGMT_AUTO_SHUTDOWN_RETRY
()

	)

273 #ifdeà
PWR_MGMT_SLEEP_IN_CRITICAL_SECTION_REQUIRED


274 
	#PWR_MGMT_SLEEP_INIT
(è
	`pwr_mgmt_¦“p_š™
()

	)

275 
	#PWR_MGMT_SLEEP_LOCK_ACQUIRE
(è
	`CRITICAL_REGION_ENTER
()

	)

276 
	#PWR_MGMT_SLEEP_LOCK_RELEASE
(è
	`CRITICAL_REGION_EXIT
()

	)

278 
__STATIC_INLINE
 
	$pwr_mgmt_¦“p_š™
()

280 #ifdeà
SOFTDEVICE_PRESENT


281 
	`ASSERT
(
	`cu¼’t_št_´iÜ™y_g‘
(è>ğ
APP_IRQ_PRIORITY_LOW
);

283 
SCB
->
SCR
 |ğ
SCB_SCR_SEVONPEND_Msk
;

284 
	}
}

287 
	#PWR_MGMT_SLEEP_INIT
()

	)

288 
	#PWR_MGMT_SLEEP_LOCK_ACQUIRE
()

	)

289 
	#PWR_MGMT_SLEEP_LOCK_RELEASE
()

	)

293 #ifdeà
PWR_MGMT_TIMER_REQUIRED


294 
	~"­p_tim”.h
"

295 
	#PWR_MGMT_TIMER_CREATE
(è
	`pwr_mgmt_tim”_ü—‹
()

	)

297 
APP_TIMER_DEF
(
m_pwr_mgmt_tim”
);

301 
	$Äf_pwr_mgmt_timeout_hªdËr
(* 
p_cÚ‹xt
)

303 
	`PWR_MGMT_CPU_USAGE_MONITOR_UPDATE
();

304 
	`PWR_MGMT_AUTO_SHUTDOWN_RETRY
();

305 
	`PWR_MGMT_STANDBY_TIMEOUT_CHECK
();

306 
	}
}

308 
__STATIC_INLINE
 
»t_code_t
 
	$pwr_mgmt_tim”_ü—‹
()

310 
»t_code_t
 
»t_code
 = 
	`­p_tim”_ü—‹
(&
m_pwr_mgmt_tim”
,

311 
APP_TIMER_MODE_REPEATED
,

312 
Äf_pwr_mgmt_timeout_hªdËr
);

313 ià(
»t_code
 !ğ
NRF_SUCCESS
)

315  
»t_code
;

318  
	`­p_tim”_¡¬t
(
m_pwr_mgmt_tim”
, 
	`APP_TIMER_TICKS
(1000), 
NULL
);

319 
	}
}

321 
	#PWR_MGMT_TIMER_CREATE
(è
NRF_SUCCESS


	)

324 
»t_code_t
 
	$Äf_pwr_mgmt_š™
()

326 
	`NRF_LOG_INFO
("Init");

328 
m_shutdown_¡¬‹d
 = 
çl£
;

329 
	`Äf_mtx_š™
(&
m_sysoff_mtx
);

330 
	`Äf_£ùiÚ_™”_š™
(&
m_hªdËrs_™”
, &
pwr_mgmt_d©a
);

332 
	`PWR_MGMT_SLEEP_INIT
();

333 
	`PWR_MGMT_DEBUG_PINS_INIT
();

334 
	`PWR_MGMT_STANDBY_TIMEOUT_INIT
();

335 
	`PWR_MGMT_CPU_USAGE_MONITOR_INIT
();

337  
	`PWR_MGMT_TIMER_CREATE
();

338 
	}
}

340 
	$Äf_pwr_mgmt_run
()

342 
	`PWR_MGMT_FPU_SLEEP_PREPARE
();

343 
	`PWR_MGMT_SLEEP_LOCK_ACQUIRE
();

344 
	`PWR_MGMT_CPU_USAGE_MONITOR_SECTION_ENTER
();

345 
	`PWR_MGMT_DEBUG_PIN_SET
();

348 #ifdeà
SOFTDEVICE_PRESENT


349 ià(
	`Äf_sdh_is_’abËd
())

351 
»t_code_t
 
»t_code
 = 
	`sd_­p_evt_wa™
();

352 
	`ASSERT
((
»t_code
 =ğ
NRF_SUCCESS
è|| (»t_cod=ğ
NRF_ERROR_SOFTDEVICE_NOT_ENABLED
));

353 
	`UNUSED_VARIABLE
(
»t_code
);

359 
	`__WFE
();

361 
	`__SEV
();

362 
	`__WFE
();

365 
	`PWR_MGMT_DEBUG_PIN_CLEAR
();

366 
	`PWR_MGMT_CPU_USAGE_MONITOR_SECTION_EXIT
();

367 
	`PWR_MGMT_SLEEP_LOCK_RELEASE
();

368 
	}
}

370 
	$Äf_pwr_mgmt_ãed
()

372 
	`NRF_LOG_DEBUG
("Feed");

374 
	`PWR_MGMT_STANDBY_TIMEOUT_CLEAR
();

375 
	}
}

379 
	$shutdown_´oûss
()

381 
	`NRF_LOG_INFO
("ShutdowÀ¡¬‹d. Ty³ %d", 
m_pwr_mgmt_evt
);

385 
	`Äf_£ùiÚ_™”_g‘
(&
m_hªdËrs_™”
è!ğ
NULL
;

386 
	`Äf_£ùiÚ_™”_Ãxt
(&
m_hªdËrs_™”
))

388 
Äf_pwr_mgmt_shutdown_hªdËr_t
 * 
p_hªdËr
 =

389 (
Äf_pwr_mgmt_shutdown_hªdËr_t
 *è
	`Äf_£ùiÚ_™”_g‘
(&
m_hªdËrs_™”
);

390 ià((*
p_hªdËr
)(
m_pwr_mgmt_evt
))

392 
	`NRF_LOG_INFO
("SysOfàhªdË¸0x%08X =>„—dy", ()*
p_hªdËr
);

397 
	`NRF_LOG_INFO
("SysOfàhªdË¸0x%08X => blockšg", ()*
p_hªdËr
);

402 
	`PWR_MGMT_CPU_USAGE_MONITOR_SUMMARY
();

403 
	`NRF_LOG_INFO
("Shutdown complete.");

404 
	`NRF_LOG_FINAL_FLUSH
();

406 ià((
m_pwr_mgmt_evt
 =ğ
NRF_PWR_MGMT_EVT_PREPARE_RESET
)

407 || (
m_pwr_mgmt_evt
 =ğ
NRF_PWR_MGMT_EVT_PREPARE_DFU
))

409 
	`NVIC_Sy¡emRe£t
();

414 #ifdeà
SOFTDEVICE_PRESENT


415 ià(
	`Äf_sdh_is_’abËd
())

417 
»t_code_t
 
»t_code
 = 
	`sd_pow”_sy¡em_off
();

418 
	`ASSERT
((
»t_code
 =ğ
NRF_SUCCESS
è|| (»t_cod=ğ
NRF_ERROR_SOFTDEVICE_NOT_ENABLED
));

419 
	`UNUSED_VARIABLE
(
»t_code
);

422 
	`Äf_pow”_sy¡em_off
();

424 
	}
}

426 #ià
NRF_PWR_MGMT_CONFIG_USE_SCHEDULER


429 
	$scheduËr_shutdown_hªdËr
(* 
p_ev’t_d©a
, 
ušt16_t
 
ev’t_size
)

431 
	`UNUSED_PARAMETER
(
p_ev’t_d©a
);

432 
	`UNUSED_PARAMETER
(
ev’t_size
);

433 
	`shutdown_´oûss
();

434 
	}
}

437 
	$Äf_pwr_mgmt_shutdown
(
Äf_pwr_mgmt_shutdown_t
 
shutdown_ty³
)

440 ià(!
	`Äf_mtx_Œylock
(&
m_sysoff_mtx
))

445 ià(
shutdown_ty³
 !ğ
NRF_PWR_MGMT_SHUTDOWN_CONTINUE
)

447 ià(
m_shutdown_¡¬‹d
)

449 
	`Äf_mtx_uÆock
(&
m_sysoff_mtx
);

454 
m_pwr_mgmt_evt
 = (
Äf_pwr_mgmt_evt_t
)
shutdown_ty³
;

455 
m_shutdown_¡¬‹d
 = 
Œue
;

459 
	`ASSERT
(
m_shutdown_¡¬‹d
);

460 
	`NRF_LOG_INFO
("ShutdowÀ»que¡ %d", 
shutdown_ty³
);

462 #ià
NRF_PWR_MGMT_CONFIG_USE_SCHEDULER


463 
»t_code_t
 
»t_code
 = 
	`­p_sched_ev’t_put
(
NULL
, 0, 
scheduËr_shutdown_hªdËr
);

464 
	`APP_ERROR_CHECK
(
»t_code
);

466 
	`shutdown_´oûss
();

469 
	`Äf_mtx_uÆock
(&
m_sysoff_mtx
);

470 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\ringbuf\nrf_ringbuf.c

40 
	~"Äf_ršgbuf.h
"

41 
	~"­p_ut_¶©fÜm.h
"

42 
	~"Äf_as£¹.h
"

44 
	#WR_OFFSET
 0

	)

45 
	#RD_OFFSET
 1

	)

47 
	$Äf_ršgbuf_š™
(
Äf_ršgbuf_t
 cÚ¡ * 
p_ršgbuf
)

49 
p_ršgbuf
->
p_cb
->
wr_idx
 = 0;

50 
p_ršgbuf
->
p_cb
->
rd_idx
 = 0;

51 
p_ršgbuf
->
p_cb
->
tmp_rd_idx
 = 0;

52 
p_ršgbuf
->
p_cb
->
tmp_wr_idx
 = 0;

53 
p_ršgbuf
->
p_cb
->
rd_æag
 = 0;

54 
p_ršgbuf
->
p_cb
->
wr_æag
 = 0;

55 
	}
}

57 
»t_code_t
 
	$Äf_ršgbuf_®loc
(
Äf_ršgbuf_t
 cÚ¡ * 
p_ršgbuf
, 
ušt8_t
 * * 
µ_d©a
, 
size_t
 * 
p_Ëngth
, 
boŞ
 
¡¬t
)

59 
	`ASSERT
(
µ_d©a
);

60 
	`ASSERT
(
p_Ëngth
);

62 ià(
¡¬t
)

64 ià(
	`Äf_©omic_æag_£t_ãtch
(&
p_ršgbuf
->
p_cb
->
wr_æag
))

66  
NRF_ERROR_BUSY
;

70 ià(
p_ršgbuf
->
p_cb
->
tmp_wr_idx
 -…_ršgbuf->p_cb->
rd_idx
 =ğp_ršgbuf->
bufsize_mask
 + 1)

72 *
p_Ëngth
 = 0;

73 ià(
¡¬t
)

75 
	`UNUSED_RETURN_VALUE
(
	`Äf_©omic_æag_ş—r
(&
p_ršgbuf
->
p_cb
->
wr_æag
));

77  
NRF_SUCCESS
;

80 
ušt32_t
 
wr_idx
 = 
p_ršgbuf
->
p_cb
->
tmp_wr_idx
 &…_ršgbuf->
bufsize_mask
;

81 
ušt32_t
 
rd_idx
 = 
p_ršgbuf
->
p_cb
->rd_idx &…_ršgbuf->
bufsize_mask
;

82 
ušt32_t
 
avaabË
 = (
wr_idx
 >ğ
rd_idx
è? 
p_ršgbuf
->
bufsize_mask
 + 1 - wr_idx :

83 
p_ršgbuf
->
p_cb
->
rd_idx
 - (p_ršgbuf->p_cb->
tmp_wr_idx
 - (p_ršgbuf->
bufsize_mask
 + 1));

84 *
p_Ëngth
 = *p_Ëngth < 
avaabË
 ? *p_length :‡vailable;

85 *
µ_d©a
 = &
p_ršgbuf
->
p_bufãr
[
wr_idx
];

86 
p_ršgbuf
->
p_cb
->
tmp_wr_idx
 +ğ*
p_Ëngth
;

88  
NRF_SUCCESS
;

89 
	}
}

91 
»t_code_t
 
	$Äf_ršgbuf_put
(
Äf_ršgbuf_t
 cÚ¡ * 
p_ršgbuf
, 
size_t
 
Ëngth
)

93 
ušt32_t
 
avaabË
 = 
p_ršgbuf
->
bufsize_mask
 + 1 -

94 (
p_ršgbuf
->
p_cb
->
wr_idx
 -…_ršgbuf->p_cb->
rd_idx
);

95 ià(
Ëngth
 > 
avaabË
)

97  
NRF_ERROR_NO_MEM
;

100 
p_ršgbuf
->
p_cb
->
wr_idx
 +ğ
Ëngth
;

101 
p_ršgbuf
->
p_cb
->
tmp_wr_idx
 =…_ršgbuf->p_cb->
wr_idx
;

102 ià(
	`Äf_©omic_æag_ş—r_ãtch
(&
p_ršgbuf
->
p_cb
->
wr_æag
) == 0)

105  
NRF_ERROR_INVALID_STATE
;

107  
NRF_SUCCESS
;

108 
	}
}

110 
»t_code_t
 
	$Äf_ršgbuf_ıy_put
(
Äf_ršgbuf_t
 cÚ¡ * 
p_ršgbuf
,

111 
ušt8_t
 cÚ¡ * 
p_d©a
,

112 
size_t
 * 
p_Ëngth
)

114 
	`ASSERT
(
p_d©a
);

115 
	`ASSERT
(
p_Ëngth
);

117 ià(
	`Äf_©omic_æag_£t_ãtch
(&
p_ršgbuf
->
p_cb
->
wr_æag
))

119  
NRF_ERROR_BUSY
;

122 
ušt32_t
 
avaabË
 = 
p_ršgbuf
->
bufsize_mask
 + 1 -

123 (
p_ršgbuf
->
p_cb
->
wr_idx
 -…_ršgbuf->p_cb->
rd_idx
);

124 *
p_Ëngth
 = 
avaabË
 > *p_length ? *p_length :‡vailable;

125 
size_t
 
Ëngth
 = *
p_Ëngth
;

126 
ušt32_t
 
masked_wr_idx
 = (
p_ršgbuf
->
p_cb
->
wr_idx
 &…_ršgbuf->
bufsize_mask
);

127 
ušt32_t
 
Œa
 = 
p_ršgbuf
->
bufsize_mask
 + 1 - 
masked_wr_idx
;

129 ià(
Ëngth
 > 
Œa
)

131 
	`memıy
(&
p_ršgbuf
->
p_bufãr
[
masked_wr_idx
], 
p_d©a
, 
Œa
);

132 
Ëngth
 -ğ
Œa
;

133 
masked_wr_idx
 = 0;

134 
p_d©a
 +ğ
Œa
;

136 
	`memıy
(&
p_ršgbuf
->
p_bufãr
[
masked_wr_idx
], 
p_d©a
, 
Ëngth
);

137 
p_ršgbuf
->
p_cb
->
wr_idx
 +ğ*
p_Ëngth
;

139 
	`UNUSED_RETURN_VALUE
(
	`Äf_©omic_æag_ş—r
(&
p_ršgbuf
->
p_cb
->
wr_æag
));

141  
NRF_SUCCESS
;

142 
	}
}

144 
»t_code_t
 
	$Äf_ršgbuf_g‘
(
Äf_ršgbuf_t
 cÚ¡ * 
p_ršgbuf
, 
ušt8_t
 * * 
µ_d©a
, 
size_t
 * 
p_Ëngth
, 
boŞ
 
¡¬t
)

146 
	`ASSERT
(
µ_d©a
);

147 
	`ASSERT
(
p_Ëngth
);

149 ià(
¡¬t
)

151 ià(
	`Äf_©omic_æag_£t_ãtch
(&
p_ršgbuf
->
p_cb
->
rd_æag
))

153  
NRF_ERROR_BUSY
;

157 
ušt32_t
 
avaabË
 = 
p_ršgbuf
->
p_cb
->
wr_idx
 -…_ršgbuf->p_cb->
tmp_rd_idx
;

158 ià(
avaabË
 == 0)

160 *
p_Ëngth
 = 0;

161 ià(
¡¬t
)

163 
	`UNUSED_RETURN_VALUE
(
	`Äf_©omic_æag_ş—r
(&
p_ršgbuf
->
p_cb
->
rd_æag
));

165  
NRF_SUCCESS
;

168 
ušt32_t
 
masked_tmp_rd_idx
 = 
p_ršgbuf
->
p_cb
->
tmp_rd_idx
 &…_ršgbuf->
bufsize_mask
;

169 
ušt32_t
 
masked_wr_idx
 = 
p_ršgbuf
->
p_cb
->
wr_idx
 &…_ršgbuf->
bufsize_mask
;

171 ià((
masked_wr_idx
 > 
masked_tmp_rd_idx
è&& (
avaabË
 < *
p_Ëngth
))

173 *
p_Ëngth
 = 
avaabË
;

175 ià(
masked_wr_idx
 <ğ
masked_tmp_rd_idx
)

177 
ušt32_t
 
Œa
 = 
p_ršgbuf
->
bufsize_mask
 + 1 - 
masked_tmp_rd_idx
;

178 ià(*
p_Ëngth
 > 
Œa
)

180 *
p_Ëngth
 = 
Œa
;

183 *
µ_d©a
 = &
p_ršgbuf
->
p_bufãr
[
masked_tmp_rd_idx
];

184 
p_ršgbuf
->
p_cb
->
tmp_rd_idx
 +ğ*
p_Ëngth
;

186  
NRF_SUCCESS
;

187 
	}
}

189 
»t_code_t
 
	$Äf_ršgbuf_ıy_g‘
(
Äf_ršgbuf_t
 cÚ¡ * 
p_ršgbuf
,

190 
ušt8_t
 * 
p_d©a
,

191 
size_t
 * 
p_Ëngth
)

193 
	`ASSERT
(
p_d©a
);

194 
	`ASSERT
(
p_Ëngth
);

196 ià(
	`Äf_©omic_æag_£t_ãtch
(&
p_ršgbuf
->
p_cb
->
rd_æag
))

198  
NRF_ERROR_BUSY
;

201 
ušt32_t
 
avaabË
 = 
p_ršgbuf
->
p_cb
->
wr_idx
 -…_ršgbuf->p_cb->
rd_idx
;

202 *
p_Ëngth
 = 
avaabË
 > *p_length ? *p_length :‡vailable;

203 
size_t
 
Ëngth
 = *
p_Ëngth
;

204 
ušt32_t
 
masked_rd_idx
 = (
p_ršgbuf
->
p_cb
->
rd_idx
 &…_ršgbuf->
bufsize_mask
);

205 
ušt32_t
 
masked_wr_idx
 = (
p_ršgbuf
->
p_cb
->
wr_idx
 &…_ršgbuf->
bufsize_mask
);

206 
ušt32_t
 
Œa
 = (
masked_wr_idx
 > 
masked_rd_idx
) ? masked_wr_idx - masked_rd_idx :

207 
p_ršgbuf
->
bufsize_mask
 + 1 - 
masked_rd_idx
;

209 ià(
Ëngth
 > 
Œa
)

211 
	`memıy
(
p_d©a
, &
p_ršgbuf
->
p_bufãr
[
masked_rd_idx
], 
Œa
);

212 
Ëngth
 -ğ
Œa
;

213 
masked_rd_idx
 = 0;

214 
p_d©a
 +ğ
Œa
;

216 
	`memıy
(
p_d©a
, &
p_ršgbuf
->
p_bufãr
[
masked_rd_idx
], 
Ëngth
);

217 
p_ršgbuf
->
p_cb
->
rd_idx
 +ğ*
p_Ëngth
;

219 
	`UNUSED_RETURN_VALUE
(
	`Äf_©omic_æag_ş—r
(&
p_ršgbuf
->
p_cb
->
rd_æag
));

221  
NRF_SUCCESS
;

222 
	}
}

224 
»t_code_t
 
	$Äf_ršgbuf_ä“
(
Äf_ršgbuf_t
 cÚ¡ * 
p_ršgbuf
, 
size_t
 
Ëngth
)

226 
ušt32_t
 
avaabË
 = (
p_ršgbuf
->
p_cb
->
wr_idx
 -…_ršgbuf->p_cb->
rd_idx
);

227 ià(
Ëngth
 > 
avaabË
)

229  
NRF_ERROR_NO_MEM
;

232 
p_ršgbuf
->
p_cb
->
rd_idx
 +ğ
Ëngth
;

233 
p_ršgbuf
->
p_cb
->
tmp_rd_idx
 =…_ršgbuf->p_cb->
rd_idx
;

234 
	`UNUSED_RETURN_VALUE
(
	`Äf_©omic_æag_ş—r
(&
p_ršgbuf
->
p_cb
->
rd_æag
));

236  
NRF_SUCCESS
;

237 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\scheduler\app_scheduler.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
APP_SCHEDULER
)

42 
	~"­p_scheduËr.h
"

43 
	~<¡dlib.h
>

44 
	~<¡dšt.h
>

45 
	~<¡ršg.h
>

46 
	~"Äf_soc.h
"

47 
	~"Äf_as£¹.h
"

48 
	~"­p_ut_¶©fÜm.h
"

53 
­p_sched_ev’t_hªdËr_t
 
	mhªdËr
;

54 
ušt16_t
 
	mev’t_d©a_size
;

55 } 
	tev’t_h—d”_t
;

57 
STATIC_ASSERT
((
ev’t_h—d”_t
è<ğ
APP_SCHED_EVENT_HEADER_SIZE
);

59 
ev’t_h—d”_t
 * 
	gm_queue_ev’t_h—d”s
;

60 
ušt8_t
 * 
	gm_queue_ev’t_d©a
;

61 vŞ©
ušt8_t
 
	gm_queue_¡¬t_šdex
;

62 vŞ©
ušt8_t
 
	gm_queue_’d_šdex
;

63 
ušt16_t
 
	gm_queue_ev’t_size
;

64 
ušt16_t
 
	gm_queue_size
;

66 #ià
APP_SCHEDULER_WITH_PROFILER


67 
ušt16_t
 
	gm_max_queue_utiz©iÚ
;

70 #ià
APP_SCHEDULER_WITH_PAUSE


71 
ušt32_t
 
	gm_scheduËr_·u£d_couÁ”
 = 0;

81 
__INLINE
 
ušt8_t
 
	$Ãxt_šdex
(
ušt8_t
 
šdex
)

83  (
šdex
 < 
m_queue_size
) ? (index + 1) : 0;

84 
	}
}

87 
__INLINE
 
ušt8_t
 
	$­p_sched_queue_fuÎ
()

89 
ušt8_t
 
tmp
 = 
m_queue_¡¬t_šdex
;

90  
	`Ãxt_šdex
(
m_queue_’d_šdex
è=ğ
tmp
;

91 
	}
}

94 
	#APP_SCHED_QUEUE_FULL
(è
	`­p_sched_queue_fuÎ
()

	)

97 
__INLINE
 
ušt8_t
 
	$­p_sched_queue_em±y
()

99 
ušt8_t
 
tmp
 = 
m_queue_¡¬t_šdex
;

100  
m_queue_’d_šdex
 =ğ
tmp
;

101 
	}
}

104 
	#APP_SCHED_QUEUE_EMPTY
(è
	`­p_sched_queue_em±y
()

	)

107 
ušt32_t
 
	$­p_sched_š™
(
ušt16_t
 
ev’t_size
, ušt16_ˆ
queue_size
, * 
p_ev’t_bufãr
)

109 
ušt16_t
 
d©a_¡¬t_šdex
 = (
queue_size
 + 1è* (
ev’t_h—d”_t
);

112 ià(!
	`is_wÜd_®igÃd
(
p_ev’t_bufãr
))

114  
NRF_ERROR_INVALID_PARAM
;

118 
m_queue_ev’t_h—d”s
 = 
p_ev’t_bufãr
;

119 
m_queue_ev’t_d©a
 = &((
ušt8_t
 *)
p_ev’t_bufãr
)[
d©a_¡¬t_šdex
];

120 
m_queue_’d_šdex
 = 0;

121 
m_queue_¡¬t_šdex
 = 0;

122 
m_queue_ev’t_size
 = 
ev’t_size
;

123 
m_queue_size
 = 
queue_size
;

125 #ià
APP_SCHEDULER_WITH_PROFILER


126 
m_max_queue_utiz©iÚ
 = 0;

129  
NRF_SUCCESS
;

130 
	}
}

133 
ušt16_t
 
	$­p_sched_queue_¥aû_g‘
()

135 
ušt16_t
 
¡¬t
 = 
m_queue_¡¬t_šdex
;

136 
ušt16_t
 
’d
 = 
m_queue_’d_šdex
;

137 
ušt16_t
 
ä“_¥aû
 = 
m_queue_size
 - ((
’d
 >ğ
¡¬t
) ?

138 (
’d
 - 
¡¬t
è: (
m_queue_size
 + 1 - start +ƒnd));

139  
ä“_¥aû
;

140 
	}
}

143 #ià
APP_SCHEDULER_WITH_PROFILER


144 
	$queue_utiz©iÚ_check
()

146 
ušt16_t
 
¡¬t
 = 
m_queue_¡¬t_šdex
;

147 
ušt16_t
 
’d
 = 
m_queue_’d_šdex
;

148 
ušt16_t
 
queue_utiz©iÚ
 = (
’d
 >ğ
¡¬t
) ? (end - start) :

149 (
m_queue_size
 + 1 - 
¡¬t
 + 
’d
);

151 ià(
queue_utiz©iÚ
 > 
m_max_queue_utiz©iÚ
)

153 
m_max_queue_utiz©iÚ
 = 
queue_utiz©iÚ
;

155 
	}
}

157 
ušt16_t
 
	$­p_sched_queue_utiz©iÚ_g‘
()

159  
m_max_queue_utiz©iÚ
;

160 
	}
}

164 
ušt32_t
 
	$­p_sched_ev’t_put
(cÚ¡ * 
p_ev’t_d©a
,

165 
ušt16_t
 
ev’t_d©a_size
,

166 
­p_sched_ev’t_hªdËr_t
 
hªdËr
)

168 
ušt32_t
 
”r_code
;

170 ià(
ev’t_d©a_size
 <ğ
m_queue_ev’t_size
)

172 
ušt16_t
 
ev’t_šdex
 = 0xFFFF;

174 
	`CRITICAL_REGION_ENTER
();

176 ià(!
	`APP_SCHED_QUEUE_FULL
())

178 
ev’t_šdex
 = 
m_queue_’d_šdex
;

179 
m_queue_’d_šdex
 = 
	`Ãxt_šdex
(m_queue_end_index);

181 #ià
APP_SCHEDULER_WITH_PROFILER


184 
	`queue_utiz©iÚ_check
();

188 
	`CRITICAL_REGION_EXIT
();

190 ià(
ev’t_šdex
 != 0xFFFF)

194 
m_queue_ev’t_h—d”s
[
ev’t_šdex
].
hªdËr
 = handler;

195 ià((
p_ev’t_d©a
 !ğ
NULL
è&& (
ev’t_d©a_size
 > 0))

197 
	`memıy
(&
m_queue_ev’t_d©a
[
ev’t_šdex
 * 
m_queue_ev’t_size
],

198 
p_ev’t_d©a
,

199 
ev’t_d©a_size
);

200 
m_queue_ev’t_h—d”s
[
ev’t_šdex
].
ev’t_d©a_size
 =ƒvent_data_size;

204 
m_queue_ev’t_h—d”s
[
ev’t_šdex
].
ev’t_d©a_size
 = 0;

207 
”r_code
 = 
NRF_SUCCESS
;

211 
”r_code
 = 
NRF_ERROR_NO_MEM
;

216 
”r_code
 = 
NRF_ERROR_INVALID_LENGTH
;

219  
”r_code
;

220 
	}
}

223 #ià
APP_SCHEDULER_WITH_PAUSE


224 
	$­p_sched_·u£
()

226 
	`CRITICAL_REGION_ENTER
();

228 ià(
m_scheduËr_·u£d_couÁ”
 < 
UINT32_MAX
)

230 
m_scheduËr_·u£d_couÁ”
++;

232 
	`CRITICAL_REGION_EXIT
();

233 
	}
}

235 
	$­p_sched_»sume
()

237 
	`CRITICAL_REGION_ENTER
();

239 ià(
m_scheduËr_·u£d_couÁ”
 > 0)

241 
m_scheduËr_·u£d_couÁ”
--;

243 
	`CRITICAL_REGION_EXIT
();

244 
	}
}

253 
__INLINE
 
boŞ
 
	$is_­p_sched_·u£d
()

255 #ià
APP_SCHEDULER_WITH_PAUSE


256  (
m_scheduËr_·u£d_couÁ”
 > 0);

258  
çl£
;

260 
	}
}

263 
	$­p_sched_execu‹
()

265 !
	`is_­p_sched_·u£d
(è&& !
	`APP_SCHED_QUEUE_EMPTY
())

270 
ušt16_t
 
ev’t_šdex
 = 
m_queue_¡¬t_šdex
;

272 * 
p_ev’t_d©a
;

273 
ušt16_t
 
ev’t_d©a_size
;

274 
­p_sched_ev’t_hªdËr_t
 
ev’t_hªdËr
;

276 
p_ev’t_d©a
 = &
m_queue_ev’t_d©a
[
ev’t_šdex
 * 
m_queue_ev’t_size
];

277 
ev’t_d©a_size
 = 
m_queue_ev’t_h—d”s
[
ev’t_šdex
].event_data_size;

278 
ev’t_hªdËr
 = 
m_queue_ev’t_h—d”s
[
ev’t_šdex
].
hªdËr
;

280 
	`ev’t_hªdËr
(
p_ev’t_d©a
, 
ev’t_d©a_size
);

285 
m_queue_¡¬t_šdex
 = 
	`Ãxt_šdex
(m_queue_start_index);

287 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\sensorsim\sensorsim.c

40 
	~"£nsÜsim.h
"

43 
	$£nsÜsim_š™
(
£nsÜsim_¡©e_t
 * 
p_¡©e
,

44 cÚ¡ 
£nsÜsim_cfg_t
 * 
p_cfg
)

46 ià(
p_cfg
->
¡¬t_©_max
)

48 
p_¡©e
->
cu¼’t_v®
 = 
p_cfg
->
max
;

49 
p_¡©e
->
is_šü—sšg
 = 
çl£
;

53 
p_¡©e
->
cu¼’t_v®
 = 
p_cfg
->
mš
;

54 
p_¡©e
->
is_šü—sšg
 = 
Œue
;

56 
	}
}

59 
ušt32_t
 
	$£nsÜsim_m—su»
(
£nsÜsim_¡©e_t
 * 
p_¡©e
,

60 cÚ¡ 
£nsÜsim_cfg_t
 * 
p_cfg
)

62 ià(
p_¡©e
->
is_šü—sšg
)

64 
	`£nsÜsim_šüem’t
(
p_¡©e
, 
p_cfg
);

68 
	`£nsÜsim_deüem’t
(
p_¡©e
, 
p_cfg
);

70  
p_¡©e
->
cu¼’t_v®
;

71 
	}
}

73 
	$£nsÜsim_šüem’t
(
£nsÜsim_¡©e_t
 * 
p_¡©e
,

74 cÚ¡ 
£nsÜsim_cfg_t
 * 
p_cfg
)

76 ià(
p_cfg
->
max
 - 
p_¡©e
->
cu¼’t_v®
 >…_cfg->
šü
)

78 
p_¡©e
->
cu¼’t_v®
 +ğ
p_cfg
->
šü
;

82 
p_¡©e
->
cu¼’t_v®
 = 
p_cfg
->
max
;

83 
p_¡©e
->
is_šü—sšg
 = 
çl£
;

85 
	}
}

88 
	$£nsÜsim_deüem’t
(
£nsÜsim_¡©e_t
 * 
p_¡©e
,

89 cÚ¡ 
£nsÜsim_cfg_t
 * 
p_cfg
)

91 ià(
p_¡©e
->
cu¼’t_v®
 - 
p_cfg
->
mš
 >…_cfg->
šü
)

93 
p_¡©e
->
cu¼’t_v®
 -ğ
p_cfg
->
šü
;

97 
p_¡©e
->
cu¼’t_v®
 = 
p_cfg
->
mš
;

98 
p_¡©e
->
is_šü—sšg
 = 
Œue
;

100 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\strerror\nrf_strerror.c

41 
	~"sdk_commÚ.h
"

42 #ià
NRF_MODULE_ENABLED
(
NRF_STRERROR
)

43 
	~"Äf_¡»¼Ü.h
"

50 
	#NRF_STRERROR_ENTITY
(
mÃmÚic
è{.
code
 = mÃmÚic, .
Çme
 = #mÃmÚic}

	)

57 
»t_code_t
 
	mcode
;

58 cÚ¡ * 
	mÇme
;

59 }
	tÄf_¡»¼Ü_desc_t
;

66 cÚ¡ 
	gm_unknown_¡r
[] = "Unknownƒrror code";

76 
Äf_¡»¼Ü_desc_t
 cÚ¡ 
	gÄf_¡»¼Ü_¬¿y
[] =

78 
NRF_STRERROR_ENTITY
(
NRF_SUCCESS
),

79 
NRF_STRERROR_ENTITY
(
NRF_ERROR_SVC_HANDLER_MISSING
),

80 
NRF_STRERROR_ENTITY
(
NRF_ERROR_SOFTDEVICE_NOT_ENABLED
),

81 
NRF_STRERROR_ENTITY
(
NRF_ERROR_INTERNAL
),

82 
NRF_STRERROR_ENTITY
(
NRF_ERROR_NO_MEM
),

83 
NRF_STRERROR_ENTITY
(
NRF_ERROR_NOT_FOUND
),

84 
NRF_STRERROR_ENTITY
(
NRF_ERROR_NOT_SUPPORTED
),

85 
NRF_STRERROR_ENTITY
(
NRF_ERROR_INVALID_PARAM
),

86 
NRF_STRERROR_ENTITY
(
NRF_ERROR_INVALID_STATE
),

87 
NRF_STRERROR_ENTITY
(
NRF_ERROR_INVALID_LENGTH
),

88 
NRF_STRERROR_ENTITY
(
NRF_ERROR_INVALID_FLAGS
),

89 
NRF_STRERROR_ENTITY
(
NRF_ERROR_INVALID_DATA
),

90 
NRF_STRERROR_ENTITY
(
NRF_ERROR_DATA_SIZE
),

91 
NRF_STRERROR_ENTITY
(
NRF_ERROR_TIMEOUT
),

92 
NRF_STRERROR_ENTITY
(
NRF_ERROR_NULL
),

93 
NRF_STRERROR_ENTITY
(
NRF_ERROR_FORBIDDEN
),

94 
NRF_STRERROR_ENTITY
(
NRF_ERROR_INVALID_ADDR
),

95 
NRF_STRERROR_ENTITY
(
NRF_ERROR_BUSY
),

96 #ifdeà
NRF_ERROR_CONN_COUNT


97 
NRF_STRERROR_ENTITY
(
NRF_ERROR_CONN_COUNT
),

99 #ifdeà
NRF_ERROR_RESOURCES


100 
NRF_STRERROR_ENTITY
(
NRF_ERROR_RESOURCES
),

104 
NRF_STRERROR_ENTITY
(
NRF_ERROR_MODULE_NOT_INITIALIZED
),

105 
NRF_STRERROR_ENTITY
(
NRF_ERROR_MUTEX_INIT_FAILED
),

106 
NRF_STRERROR_ENTITY
(
NRF_ERROR_MUTEX_LOCK_FAILED
),

107 
NRF_STRERROR_ENTITY
(
NRF_ERROR_MUTEX_UNLOCK_FAILED
),

108 
NRF_STRERROR_ENTITY
(
NRF_ERROR_MUTEX_COND_INIT_FAILED
),

109 
NRF_STRERROR_ENTITY
(
NRF_ERROR_MODULE_ALREADY_INITIALIZED
),

110 
NRF_STRERROR_ENTITY
(
NRF_ERROR_STORAGE_FULL
),

111 
NRF_STRERROR_ENTITY
(
NRF_ERROR_API_NOT_IMPLEMENTED
),

112 
NRF_STRERROR_ENTITY
(
NRF_ERROR_FEATURE_NOT_ENABLED
),

113 
NRF_STRERROR_ENTITY
(
NRF_ERROR_IO_PENDING
),

116 
NRF_STRERROR_ENTITY
(
NRF_ERROR_DRV_TWI_ERR_OVERRUN
),

117 
NRF_STRERROR_ENTITY
(
NRF_ERROR_DRV_TWI_ERR_ANACK
),

118 
NRF_STRERROR_ENTITY
(
NRF_ERROR_DRV_TWI_ERR_DNACK
),

121 
NRF_STRERROR_ENTITY
(
NRF_ERROR_BLE_IPSP_RX_PKT_TRUNCATED
),

122 
NRF_STRERROR_ENTITY
(
NRF_ERROR_BLE_IPSP_CHANNEL_ALREADY_EXISTS
),

123 
NRF_STRERROR_ENTITY
(
NRF_ERROR_BLE_IPSP_LINK_DISCONNECTED
),

124 
NRF_STRERROR_ENTITY
(
NRF_ERROR_BLE_IPSP_PEER_REJECTED
)

128 cÚ¡ * 
	$Äf_¡»¼Ü_g‘
(
»t_code_t
 
code
)

130 cÚ¡ * 
p_»t
 = 
	`Äf_¡»¼Ü_fšd
(
code
);

131  (
p_»t
 =ğ
NULL
è? 
m_unknown_¡r
 :…_ret;

132 
	}
}

134 cÚ¡ * 
	$Äf_¡»¼Ü_fšd
(
»t_code_t
 
code
)

136 
Äf_¡»¼Ü_desc_t
 cÚ¡ * 
p_¡¬t
;

137 
Äf_¡»¼Ü_desc_t
 cÚ¡ * 
p_’d
;

138 
p_¡¬t
 = 
Äf_¡»¼Ü_¬¿y
;

139 
p_’d
 = 
Äf_¡»¼Ü_¬¿y
 + 
	`ARRAY_SIZE
(nrf_strerror_array);

141 
p_¡¬t
 < 
p_’d
)

143 
Äf_¡»¼Ü_desc_t
 cÚ¡ * 
p_mid
 = 
p_¡¬t
 + ((
p_’d
 -…_start) / 2);

144 
»t_code_t
 
mid_c
 = 
p_mid
->
code
;

145 ià(
mid_c
 > 
code
)

147 
p_’d
 = 
p_mid
;

149 ià(
mid_c
 < 
code
)

151 
p_¡¬t
 = 
p_mid
 + 1;

155  
p_mid
->
Çme
;

158  
NULL
;

159 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\timer\app_timer.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
APP_TIMER
)

42 
	~"­p_tim”.h
"

43 
	~<¡dlib.h
>

44 
	~"Äf.h
"

45 
	~"Äf_³rh”®s.h
"

46 
	~"Äf_soc.h
"

47 
	~"­p_”rÜ.h
"

48 
	~"Äf_d–ay.h
"

49 
	~"­p_ut_¶©fÜm.h
"

50 #ià
APP_TIMER_CONFIG_USE_SCHEDULER


51 
	~"­p_scheduËr.h
"

54 
	#RTC1_IRQ_PRI
 
APP_TIMER_CONFIG_IRQ_PRIORITY


	)

55 
	#SWI_IRQ_PRI
 
APP_TIMER_CONFIG_IRQ_PRIORITY


	)

60 
STATIC_ASSERT
(
RTC1_IRQ_PRI
 =ğ
SWI_IRQ_PRI
);

62 
	#MAX_RTC_COUNTER_VAL
 0x00FFFFFF

	)

64 
	#RTC_COMPARE_OFFSET_MIN
 3

	)

66 
	#MAX_RTC_TASKS_DELAY
 47

	)

68 #ifdeà
EGU_PRESENT


69 
	#SWI_PART
(
_id
è
	`CONCAT_2
(
SWI
,_id)

	)

70 
	#EGU_PART
(
_id
è
	`CONCAT_2
(
_EGU
,_id)

	)

71 
	#SWI_IRQ_n
(
_id
è
	`CONCAT_3
(
	`SWI_PART
(_id), 
	`EGU_PART
(_id),
_IRQn
)

	)

72 
	#SWI_IRQ_HªdËr_n
(
_id
è
	`CONCAT_3
(
	`SWI_PART
(_id), 
	`EGU_PART
(_id),
_IRQHªdËr
)

	)

74 
	#SWI_IRQ_n
(
_id
è
	`CONCAT_3
(
SWI
,_id,
_IRQn
)

	)

75 
	#SWI_IRQ_HªdËr_n
(
_id
è
	`CONCAT_3
(
SWI
,_id,
_IRQHªdËr
)

	)

78 
	#SWI_IRQn
 
	`SWI_IRQ_n
(
APP_TIMER_CONFIG_SWI_NUMBER
)

	)

79 
	#SWI_IRQHªdËr
 
	`SWI_IRQ_HªdËr_n
(
APP_TIMER_CONFIG_SWI_NUMBER
)

	)

82 
	#MODULE_INITIALIZED
 (
m_İ_queue
.
size
 !ğ0è

	)

87 
ušt32_t
 
	mticks_to_expœe
;

88 
ušt32_t
 
	mticks_©_¡¬t
;

89 
ušt32_t
 
	mticks_fœ¡_š‹rv®
;

90 
ušt32_t
 
	mticks_³riodic_š‹rv®
;

91 
boŞ
 
	mis_ruÂšg
;

92 
­p_tim”_mode_t
 
	mmode
;

93 
­p_tim”_timeout_hªdËr_t
 
	mp_timeout_hªdËr
;

94 * 
	mp_cÚ‹xt
;

95 * 
	mÃxt
;

96 } 
	ttim”_node_t
;

98 
STATIC_ASSERT
((
tim”_node_t
è=ğ
APP_TIMER_NODE_SIZE
);

103 
	mTIMER_USER_OP_TYPE_NONE
,

104 
	mTIMER_USER_OP_TYPE_START
,

105 
	mTIMER_USER_OP_TYPE_STOP
,

106 
	mTIMER_USER_OP_TYPE_STOP_ALL


107 } 
	ttim”_u£r_İ_ty³_t
;

112 
ušt32_t
 
	mticks_©_¡¬t
;

113 
ušt32_t
 
	mticks_fœ¡_š‹rv®
;

114 
ušt32_t
 
	mticks_³riodic_š‹rv®
;

115 * 
	mp_cÚ‹xt
;

116 } 
	ttim”_u£r_İ_¡¬t_t
;

121 
tim”_u£r_İ_ty³_t
 
	mİ_ty³
;

122 
tim”_node_t
 * 
	mp_node
;

125 
tim”_u£r_İ_¡¬t_t
 
	m¡¬t
;

126 } 
	m·¿ms
;

127 } 
	ttim”_u£r_İ_t
;

136 
ušt8_t
 
	mfœ¡
;

137 
ušt8_t
 
	mÏ¡
;

138 
ušt8_t
 
	msize
;

139 
tim”_u£r_İ_t
 
	mu£r_İ_queue
[
APP_TIMER_CONFIG_OP_QUEUE_SIZE
+1];

140 } 
	ttim”_İ_queue_t
;

142 
STATIC_ASSERT
((
tim”_İ_queue_t
) % 4 == 0);

144 
	#CONTEXT_QUEUE_SIZE_MAX
 (2)

	)

146 
tim”_İ_queue_t
 
	gm_İ_queue
;

147 
tim”_node_t
 * 
	gmp_tim”_id_h—d
;

148 
ušt32_t
 
	gm_ticks_Ï‹¡
;

149 
ušt32_t
 
	gm_ticks_–­£d
[
CONTEXT_QUEUE_SIZE_MAX
];

150 
ušt8_t
 
	gm_ticks_–­£d_q_»ad_šd
;

151 
ušt8_t
 
	gm_ticks_–­£d_q_wr™e_šd
;

152 
boŞ
 
	gm_¹c1_ruÂšg
;

153 
boŞ
 
	gm_¹c1_»£t
;

155 #ià
APP_TIMER_WITH_PROFILER


156 
ušt8_t
 
	gm_max_u£r_İ_queue_utiz©iÚ
;

163 
	$¹c1_š™
(
ušt32_t
 
´esÿËr
)

165 
NRF_RTC1
->
PRESCALER
 = 
´esÿËr
;

166 
	`NVIC_S‘PriÜ™y
(
RTC1_IRQn
, 
RTC1_IRQ_PRI
);

167 
	}
}

172 
	$¹c1_¡¬t
()

174 
NRF_RTC1
->
EVTENSET
 = 
RTC_EVTEN_COMPARE0_Msk
;

175 
NRF_RTC1
->
INTENSET
 = 
RTC_INTENSET_COMPARE0_Msk
;

177 
	`NVIC_CË¬P’dšgIRQ
(
RTC1_IRQn
);

178 
	`NVIC_EÇbËIRQ
(
RTC1_IRQn
);

180 
NRF_RTC1
->
TASKS_START
 = 1;

181 
	`Äf_d–ay_us
(
MAX_RTC_TASKS_DELAY
);

183 
m_¹c1_ruÂšg
 = 
Œue
;

184 
	}
}

189 
	$¹c1_¡İ
()

191 
	`NVIC_Di§bËIRQ
(
RTC1_IRQn
);

193 
NRF_RTC1
->
EVTENCLR
 = 
RTC_EVTEN_COMPARE0_Msk
;

194 
NRF_RTC1
->
INTENCLR
 = 
RTC_INTENSET_COMPARE0_Msk
;

196 
NRF_RTC1
->
TASKS_STOP
 = 1;

197 
	`Äf_d–ay_us
(
MAX_RTC_TASKS_DELAY
);

199 
NRF_RTC1
->
TASKS_CLEAR
 = 1;

200 
m_ticks_Ï‹¡
 = 0;

201 
	`Äf_d–ay_us
(
MAX_RTC_TASKS_DELAY
);

203 
m_¹c1_ruÂšg
 = 
çl£
;

204 
	}
}

211 
__INLINE
 
ušt32_t
 
	$¹c1_couÁ”_g‘
()

213  
NRF_RTC1
->
COUNTER
;

214 
	}
}

221 
__INLINE
 
ušt32_t
 
	$ticks_diff_g‘
(
ušt32_t
 
ticks_now
, ušt32_ˆ
ticks_Şd
)

223  ((
ticks_now
 - 
ticks_Şd
è& 
MAX_RTC_COUNTER_VAL
);

224 
	}
}

232 
__INLINE
 
	$¹c1_com·»0_£t
(
ušt32_t
 
v®ue
)

234 
NRF_RTC1
->
CC
[0] = 
v®ue
;

235 
	}
}

242 
	$tim”_li¡_š£¹
(
tim”_node_t
 * 
p_tim”
)

244 ià(
mp_tim”_id_h—d
 =ğ
NULL
)

246 
mp_tim”_id_h—d
 = 
p_tim”
;

250 ià(
p_tim”
->
ticks_to_expœe
 <ğ
mp_tim”_id_h—d
->ticks_to_expire)

252 
mp_tim”_id_h—d
->
ticks_to_expœe
 -ğ
p_tim”
->ticks_to_expire;

254 
p_tim”
->
Ãxt
 = 
mp_tim”_id_h—d
;

255 
mp_tim”_id_h—d
 = 
p_tim”
;

259 
tim”_node_t
 * 
p_´evious
;

260 
tim”_node_t
 * 
p_cu¼’t
;

261 
ušt32_t
 
ticks_to_expœe
;

263 
ticks_to_expœe
 = 
p_tim”
->ticks_to_expire;

264 
p_´evious
 = 
mp_tim”_id_h—d
;

265 
p_cu¼’t
 = 
mp_tim”_id_h—d
;

267 (
p_cu¼’t
 !ğ
NULL
è&& (
ticks_to_expœe
 >…_current->ticks_to_expire))

269 
ticks_to_expœe
 -ğ
p_cu¼’t
->ticks_to_expire;

270 
p_´evious
 = 
p_cu¼’t
;

271 
p_cu¼’t
 =…_cu¼’t->
Ãxt
;

274 ià(
p_cu¼’t
 !ğ
NULL
)

276 
p_cu¼’t
->
ticks_to_expœe
 -=icks_to_expire;

279 
p_tim”
->
ticks_to_expœe
 =icks_to_expire;

280 
p_tim”
->
Ãxt
 = 
p_cu¼’t
;

281 
p_´evious
->
Ãxt
 = 
p_tim”
;

284 
	}
}

293 
boŞ
 
	$tim”_li¡_»move
(
tim”_node_t
 * 
p_tim”
)

295 
tim”_node_t
 * 
p_Şd_h—d
;

296 
tim”_node_t
 * 
p_´evious
;

297 
tim”_node_t
 * 
p_cu¼’t
;

298 
ušt32_t
 
timeout
;

301 
p_Şd_h—d
 = 
mp_tim”_id_h—d
;

302 
p_´evious
 = 
mp_tim”_id_h—d
;

303 
p_cu¼’t
 = 
p_´evious
;

305 
p_cu¼’t
 !ğ
NULL
)

307 ià(
p_cu¼’t
 =ğ
p_tim”
)

311 
p_´evious
 = 
p_cu¼’t
;

312 
p_cu¼’t
 =…_cu¼’t->
Ãxt
;

316 ià(
p_cu¼’t
 =ğ
NULL
)

318  
çl£
;

322 ià(
p_´evious
 =ğ
p_cu¼’t
)

324 
mp_tim”_id_h—d
 = mp_tim”_id_h—d->
Ãxt
;

327 ià(
mp_tim”_id_h—d
 =ğ
NULL
)

329 
NRF_RTC1
->
TASKS_CLEAR
 = 1;

330 
m_ticks_Ï‹¡
 = 0;

331 
m_¹c1_»£t
 = 
Œue
;

332 
	`Äf_d–ay_us
(
MAX_RTC_TASKS_DELAY
);

337 
timeout
 = 
p_cu¼’t
->
ticks_to_expœe
;

340 
p_´evious
->
Ãxt
 = 
p_cu¼’t
->next;

343 
p_cu¼’t
 = 
p_´evious
->
Ãxt
;

344 ià(
p_cu¼’t
 !ğ
NULL
)

346 
p_cu¼’t
->
ticks_to_expœe
 +ğ
timeout
;

349  (
p_Şd_h—d
 !ğ
mp_tim”_id_h—d
);

350 
	}
}

355 
	$tim”_timeouts_check_sched
()

357 
	`NVIC_S‘P’dšgIRQ
(
RTC1_IRQn
);

358 
	}
}

363 
	$tim”_li¡_hªdËr_sched
()

365 
	`NVIC_S‘P’dšgIRQ
(
SWI_IRQn
);

366 
	}
}

368 #ià
APP_TIMER_CONFIG_USE_SCHEDULER


369 
	$timeout_hªdËr_scheduËd_exec
(* 
p_ev’t_d©a
, 
ušt16_t
 
ev’t_size
)

371 
	`APP_ERROR_CHECK_BOOL
(
ev’t_size
 =ğ(
­p_tim”_ev’t_t
));

372 
­p_tim”_ev’t_t
 cÚ¡ * 
p_tim”_ev’t
 = (­p_tim”_ev’t_ˆ*)
p_ev’t_d©a
;

374 
p_tim”_ev’t
->
	`timeout_hªdËr
Õ_tim”_ev’t->
p_cÚ‹xt
);

375 
	}
}

383 
	$timeout_hªdËr_exec
(
tim”_node_t
 * 
p_tim”
)

385 #ià
APP_TIMER_CONFIG_USE_SCHEDULER


386 
­p_tim”_ev’t_t
 
tim”_ev’t
;

388 
tim”_ev’t
.
timeout_hªdËr
 = 
p_tim”
->
p_timeout_hªdËr
;

389 
tim”_ev’t
.
p_cÚ‹xt
 = 
p_tim”
->p_context;

390 
ušt32_t
 
”r_code
 = 
	`­p_sched_ev’t_put
(&
tim”_ev’t
, Ñim”_ev’t), 
timeout_hªdËr_scheduËd_exec
);

391 
	`APP_ERROR_CHECK
(
”r_code
);

393 
p_tim”
->
	`p_timeout_hªdËr
Õ_tim”->
p_cÚ‹xt
);

395 
	}
}

400 
	$tim”_timeouts_check
()

403 ià(
mp_tim”_id_h—d
 !ğ
NULL
)

405 
tim”_node_t
 * 
p_tim”
;

406 
tim”_node_t
 * 
p_´evious_tim”
;

407 
ušt32_t
 
ticks_–­£d
;

408 
ušt32_t
 
ticks_expœed
;

411 
ticks_expœed
 = 0;

414 
ticks_–­£d
 = 
	`ticks_diff_g‘
(
	`¹c1_couÁ”_g‘
(), 
m_ticks_Ï‹¡
);

417 
p_tim”
 = 
mp_tim”_id_h—d
;

420 
p_tim”
 !ğ
NULL
)

423 ià(
ticks_–­£d
 < 
p_tim”
->
ticks_to_expœe
)

429 
ticks_–­£d
 -ğ
p_tim”
->
ticks_to_expœe
;

430 
ticks_expœed
 +ğ
p_tim”
->
ticks_to_expœe
;

433 
p_´evious_tim”
 = 
p_tim”
;

434 
p_tim”
 =…_tim”->
Ãxt
;

437 ià(
p_´evious_tim”
->
is_ruÂšg
)

439 
p_´evious_tim”
->
is_ruÂšg
 = 
çl£
;

440 
	`timeout_hªdËr_exec
(
p_´evious_tim”
);

445 ià(
m_ticks_–­£d_q_»ad_šd
 =ğ
m_ticks_–­£d_q_wr™e_šd
)

452 ià(++
m_ticks_–­£d_q_wr™e_šd
 =ğ
CONTEXT_QUEUE_SIZE_MAX
)

456 
m_ticks_–­£d_q_wr™e_šd
 = 0;

461 
m_ticks_–­£d
[
m_ticks_–­£d_q_wr™e_šd
] = 
ticks_expœed
;

463 
	`tim”_li¡_hªdËr_sched
();

465 
	}
}

474 
boŞ
 
	$–­£d_ticks_acquœe
(
ušt32_t
 * 
p_ticks_–­£d
)

477 ià(
m_ticks_–­£d_q_»ad_šd
 !ğ
m_ticks_–­£d_q_wr™e_šd
)

480 
m_ticks_–­£d_q_»ad_šd
++;

481 ià(
m_ticks_–­£d_q_»ad_šd
 =ğ
CONTEXT_QUEUE_SIZE_MAX
)

483 
m_ticks_–­£d_q_»ad_šd
 = 0;

486 *
p_ticks_–­£d
 = 
m_ticks_–­£d
[
m_ticks_–­£d_q_»ad_šd
];

488 
m_ticks_Ï‹¡
 +ğ*
p_ticks_–­£d
;

489 
m_ticks_Ï‹¡
 &ğ
MAX_RTC_COUNTER_VAL
;

491  
Œue
;

496 *
p_ticks_–­£d
 = 0;

497  
çl£
;

499 
	}
}

508 
	$expœed_tim”s_hªdËr
(
ušt32_t
 
ticks_–­£d
,

509 
ušt32_t
 
ticks_´evious
,

510 
tim”_node_t
 ** 
p_»¡¬t_li¡_h—d
)

512 
ušt32_t
 
ticks_expœed
 = 0;

514 
mp_tim”_id_h—d
 !ğ
NULL
)

516 
tim”_node_t
 * 
p_tim”
;

517 
tim”_node_t
 * 
p_tim”_expœed
;

520 
p_tim”
 = 
mp_tim”_id_h—d
;

523 ià(
ticks_–­£d
 < 
p_tim”
->
ticks_to_expœe
)

525 
p_tim”
->
ticks_to_expœe
 -ğ
ticks_–­£d
;

530 
ticks_–­£d
 -ğ
p_tim”
->
ticks_to_expœe
;

531 
ticks_expœed
 +ğ
p_tim”
->
ticks_to_expœe
;

534 
p_tim”
->
ticks_to_expœe
 = 0;

537 
p_tim”_expœed
 = 
mp_tim”_id_h—d
;

538 
mp_tim”_id_h—d
 = 
p_tim”
->
Ãxt
;

541 ià(
p_tim”
->
ticks_³riodic_š‹rv®
 != 0)

543 
p_tim”
->
ticks_©_¡¬t
 = (
ticks_´evious
 + 
ticks_expœed
è& 
MAX_RTC_COUNTER_VAL
;

544 
p_tim”
->
ticks_fœ¡_š‹rv®
 =…_tim”->
ticks_³riodic_š‹rv®
;

545 
p_tim”
->
Ãxt
 = *
p_»¡¬t_li¡_h—d
;

546 *
p_»¡¬t_li¡_h—d
 = 
p_tim”_expœed
;

549 
	}
}

558 
boŞ
 
	$li¡_š£¹iÚs_hªdËr
(
tim”_node_t
 * 
p_»¡¬t_li¡_h—d
)

560 
boŞ
 
com·»_upd©e
 = 
çl£
;

562 
tim”_node_t
 * 
p_tim”_id_Şd_h—d
;

565 
p_tim”_id_Şd_h—d
 = 
mp_tim”_id_h—d
;

568 (
p_»¡¬t_li¡_h—d
 !ğ
NULL
è|| (
m_İ_queue
.
fœ¡
 !ğm_İ_queue.
Ï¡
))

570 
tim”_node_t
 * 
p_tim”
;

572 ià(
p_»¡¬t_li¡_h—d
 !ğ
NULL
)

574 
p_tim”
 = 
p_»¡¬t_li¡_h—d
;

575 
p_»¡¬t_li¡_h—d
 = 
p_tim”
->
Ãxt
;

579 
tim”_u£r_İ_t
 * 
p_u£r_İ
 = &
m_İ_queue
.
u£r_İ_queue
[m_İ_queue.
fœ¡
];

581 
m_İ_queue
.
fœ¡
++;

582 ià(
m_İ_queue
.
fœ¡
 =ğm_İ_queue.
size
)

584 
m_İ_queue
.
fœ¡
 = 0;

587 
p_tim”
 = 
p_u£r_İ
->
p_node
;

589 
p_u£r_İ
->
İ_ty³
)

591 
TIMER_USER_OP_TYPE_STOP
:

593 ià(
	`tim”_li¡_»move
(
p_u£r_İ
->
p_node
))

595 
com·»_upd©e
 = 
Œue
;

598 
p_tim”
->
is_ruÂšg
 = 
çl£
;

601 
TIMER_USER_OP_TYPE_STOP_ALL
:

603 
mp_tim”_id_h—d
 !ğ
NULL
)

605 
tim”_node_t
 * 
p_h—d
 = 
mp_tim”_id_h—d
;

607 
p_h—d
->
is_ruÂšg
 = 
çl£
;

608 
mp_tim”_id_h—d
 = 
p_h—d
->
Ãxt
;

611 
TIMER_USER_OP_TYPE_START
:

618 ià(
p_tim”
->
is_ruÂšg
)

623 
p_tim”
->
ticks_©_¡¬t
 = 
p_u£r_İ
->
·¿ms
.
¡¬t
.ticks_at_start;

624 
p_tim”
->
ticks_fœ¡_š‹rv®
 = 
p_u£r_İ
->
·¿ms
.
¡¬t
.ticks_first_interval;

625 
p_tim”
->
ticks_³riodic_š‹rv®
 = 
p_u£r_İ
->
·¿ms
.
¡¬t
.ticks_periodic_interval;

626 
p_tim”
->
p_cÚ‹xt
 = 
p_u£r_İ
->
·¿ms
.
¡¬t
.p_context;

628 ià(
m_¹c1_»£t
)

630 
p_tim”
->
ticks_©_¡¬t
 = 0;

636 ((
p_tim”
->
ticks_©_¡¬t
 - 
m_ticks_Ï‹¡
è& 
MAX_RTC_COUNTER_VAL
)

638 (
MAX_RTC_COUNTER_VAL
 / 2)

641 
p_tim”
->
ticks_to_expœe
 = 
	`ticks_diff_g‘
Õ_tim”->
ticks_©_¡¬t
, 
m_ticks_Ï‹¡
) +

642 
p_tim”
->
ticks_fœ¡_š‹rv®
;

646 
ušt32_t
 
d–_cu¼’t_¡¬t
;

648 
d–_cu¼’t_¡¬t
 = 
	`ticks_diff_g‘
(
m_ticks_Ï‹¡
, 
p_tim”
->
ticks_©_¡¬t
);

649 ià(
p_tim”
->
ticks_fœ¡_š‹rv®
 > 
d–_cu¼’t_¡¬t
)

651 
p_tim”
->
ticks_to_expœe
 =…_tim”->
ticks_fœ¡_š‹rv®
 - 
d–_cu¼’t_¡¬t
;

655 
p_tim”
->
ticks_to_expœe
 = 0;

659 
p_tim”
->
ticks_©_¡¬t
 = 0;

660 
p_tim”
->
ticks_fœ¡_š‹rv®
 = 0;

661 
p_tim”
->
is_ruÂšg
 = 
Œue
;

662 
p_tim”
->
Ãxt
 = 
NULL
;

665 
	`tim”_li¡_š£¹
(
p_tim”
);

668  (
com·»_upd©e
 || (
mp_tim”_id_h—d
 !ğ
p_tim”_id_Şd_h—d
));

669 
	}
}

674 
	$com·»_»g_upd©e
(
tim”_node_t
 * 
p_tim”_id_h—d_Şd
)

677 ià(
mp_tim”_id_h—d
 !ğ
NULL
)

679 
ušt32_t
 
ticks_to_expœe
 = 
mp_tim”_id_h—d
->ticks_to_expire;

680 
ušt32_t
 
´e_couÁ”_v®
 = 
	`¹c1_couÁ”_g‘
();

681 
ušt32_t
 
cc
 = 
m_ticks_Ï‹¡
;

682 
ušt32_t
 
ticks_–­£d
 = 
	`ticks_diff_g‘
(
´e_couÁ”_v®
, 
cc
è+ 
RTC_COMPARE_OFFSET_MIN
;

684 ià(!
m_¹c1_ruÂšg
)

687 
	`¹c1_¡¬t
();

690 
cc
 +ğ(
ticks_–­£d
 < 
ticks_to_expœe
) ?icks_to_expire :icks_elapsed;

691 
cc
 &ğ
MAX_RTC_COUNTER_VAL
;

693 
	`¹c1_com·»0_£t
(
cc
);

695 
ušt32_t
 
po¡_couÁ”_v®
 = 
	`¹c1_couÁ”_g‘
();

698 (
	`ticks_diff_g‘
(
po¡_couÁ”_v®
, 
´e_couÁ”_v®
è+ 
RTC_COMPARE_OFFSET_MIN
)

700 
	`ticks_diff_g‘
(
cc
, 
´e_couÁ”_v®
)

708 
	`¹c1_com·»0_£t
(
	`¹c1_couÁ”_g‘
());

709 
	`Äf_d–ay_us
(
MAX_RTC_TASKS_DELAY
);

710 
	`tim”_timeouts_check_sched
();

715 #ià(
APP_TIMER_KEEPS_RTC_ACTIVE
 == 0)

717 
	`¹c1_¡İ
();

720 
	}
}

725 
	$tim”_li¡_hªdËr
()

727 
tim”_node_t
 * 
p_»¡¬t_li¡_h—d
 = 
NULL
;

729 
ušt32_t
 
ticks_–­£d
;

730 
ušt32_t
 
ticks_´evious
;

731 
boŞ
 
ticks_have_–­£d
;

732 
boŞ
 
com·»_upd©e
 = 
çl£
;

733 
tim”_node_t
 * 
p_tim”_id_h—d_Şd
;

735 #ià
APP_TIMER_WITH_PROFILER


737 
ušt8_t
 
size
 = 
m_İ_queue
.size;

738 
ušt8_t
 
fœ¡
 = 
m_İ_queue
.first;

739 
ušt8_t
 
Ï¡
 = 
m_İ_queue
.last;

740 
ušt8_t
 
utiz©iÚ
 = (
fœ¡
 <ğ
Ï¡
è? (Ï¡ - fœ¡è: (
size
 + 1 - first +†ast);

742 ià(
utiz©iÚ
 > 
m_max_u£r_İ_queue_utiz©iÚ
)

744 
m_max_u£r_İ_queue_utiz©iÚ
 = 
utiz©iÚ
;

750 
ticks_´evious
 = 
m_ticks_Ï‹¡
;

751 
p_tim”_id_h—d_Şd
 = 
mp_tim”_id_h—d
;

754 
ticks_have_–­£d
 = 
	`–­£d_ticks_acquœe
(&
ticks_–­£d
);

757 ià(
ticks_have_–­£d
)

759 
	`expœed_tim”s_hªdËr
(
ticks_–­£d
, 
ticks_´evious
, &
p_»¡¬t_li¡_h—d
);

760 
com·»_upd©e
 = 
Œue
;

765 ià(
	`li¡_š£¹iÚs_hªdËr
(
p_»¡¬t_li¡_h—d
))

767 
com·»_upd©e
 = 
Œue
;

771 ià(
com·»_upd©e
)

773 
	`com·»_»g_upd©e
(
p_tim”_id_h—d_Şd
);

775 
m_¹c1_»£t
 = 
çl£
;

776 
	}
}

783 
	$u£r_İ_’que
(
ušt8_t
 
Ï¡_šdex
)

785 
m_İ_queue
.
Ï¡
 = 
Ï¡_šdex
;

786 
	}
}

795 
tim”_u£r_İ_t
 * 
	$u£r_İ_®loc
Ğ
ušt8_t
 * 
p_Ï¡_šdex
)

797 
ušt8_t
 
Ï¡
;

798 
tim”_u£r_İ_t
 * 
p_u£r_İ
;

800 
Ï¡
 = 
m_İ_queue
.last + 1;

801 ià(
Ï¡
 =ğ
m_İ_queue
.
size
)

804 
Ï¡
 = 0;

806 ià(
Ï¡
 =ğ
m_İ_queue
.
fœ¡
)

809  
NULL
;

812 *
p_Ï¡_šdex
 = 
Ï¡
;

813 
p_u£r_İ
 = &
m_İ_queue
.
u£r_İ_queue
[m_İ_queue.
Ï¡
];

815  
p_u£r_İ
;

816 
	}
}

829 
ušt32_t
 
	$tim”_¡¬t_İ_scheduË
(
tim”_node_t
 * 
p_node
,

830 
ušt32_t
 
timeout_š™Ÿl
,

831 
ušt32_t
 
timeout_³riodic
,

832 * 
p_cÚ‹xt
)

834 
ušt8_t
 
Ï¡_šdex
;

835 
ušt32_t
 
”r_code
 = 
NRF_SUCCESS
;

837 
	`CRITICAL_REGION_ENTER
();

838 
tim”_u£r_İ_t
 * 
p_u£r_İ
 = 
	`u£r_İ_®loc
(&
Ï¡_šdex
);

839 ià(
p_u£r_İ
 =ğ
NULL
)

841 
”r_code
 = 
NRF_ERROR_NO_MEM
;

845 
p_u£r_İ
->
İ_ty³
 = 
TIMER_USER_OP_TYPE_START
;

846 
p_u£r_İ
->
p_node
 =…_node;

847 
p_u£r_İ
->
·¿ms
.
¡¬t
.
ticks_©_¡¬t
 = 
	`¹c1_couÁ”_g‘
();

848 
p_u£r_İ
->
·¿ms
.
¡¬t
.
ticks_fœ¡_š‹rv®
 = 
timeout_š™Ÿl
;

849 
p_u£r_İ
->
·¿ms
.
¡¬t
.
ticks_³riodic_š‹rv®
 = 
timeout_³riodic
;

850 
p_u£r_İ
->
·¿ms
.
¡¬t
.
p_cÚ‹xt
 =…_context;

852 
	`u£r_İ_’que
(
Ï¡_šdex
);

854 
	`CRITICAL_REGION_EXIT
();

856 ià(
”r_code
 =ğ
NRF_SUCCESS
)

858 
	`tim”_li¡_hªdËr_sched
();

861  
”r_code
;

862 
	}
}

873 
ušt32_t
 
	$tim”_¡İ_İ_scheduË
(
tim”_node_t
 * 
p_node
,

874 
tim”_u£r_İ_ty³_t
 
İ_ty³
)

876 
ušt8_t
 
Ï¡_šdex
;

877 
ušt32_t
 
”r_code
 = 
NRF_SUCCESS
;

879 
	`CRITICAL_REGION_ENTER
();

880 
tim”_u£r_İ_t
 * 
p_u£r_İ
 = 
	`u£r_İ_®loc
(&
Ï¡_šdex
);

881 ià(
p_u£r_İ
 =ğ
NULL
)

883 
”r_code
 = 
NRF_ERROR_NO_MEM
;

887 
p_u£r_İ
->
İ_ty³
 = op_type;

888 
p_u£r_İ
->
p_node
 =…_node;

890 
	`u£r_İ_’que
(
Ï¡_šdex
);

892 
	`CRITICAL_REGION_EXIT
();

894 ià(
”r_code
 =ğ
NRF_SUCCESS
)

896 
	`tim”_li¡_hªdËr_sched
();

899  
”r_code
;

900 
	}
}

906 
	$RTC1_IRQHªdËr
()

909 
NRF_RTC1
->
EVENTS_COMPARE
[0] = 0;

910 
NRF_RTC1
->
EVENTS_COMPARE
[1] = 0;

911 
NRF_RTC1
->
EVENTS_COMPARE
[2] = 0;

912 
NRF_RTC1
->
EVENTS_COMPARE
[3] = 0;

913 
NRF_RTC1
->
EVENTS_TICK
 = 0;

914 
NRF_RTC1
->
EVENTS_OVRFLW
 = 0;

917 
	`tim”_timeouts_check
();

918 
	}
}

925 
	$SWI_IRQHªdËr
()

927 
	`tim”_li¡_hªdËr
();

928 
	}
}

931 
»t_code_t
 
	$­p_tim”_š™
()

934 
	`¹c1_¡İ
();

937 
m_İ_queue
.
fœ¡
 = 0;

938 
m_İ_queue
.
Ï¡
 = 0;

939 
m_İ_queue
.
size
 = 
APP_TIMER_CONFIG_OP_QUEUE_SIZE
+1;

941 
mp_tim”_id_h—d
 = 
NULL
;

942 
m_ticks_–­£d_q_»ad_šd
 = 0;

943 
m_ticks_–­£d_q_wr™e_šd
 = 0;

945 #ià
APP_TIMER_WITH_PROFILER


946 
m_max_u£r_İ_queue_utiz©iÚ
 = 0;

949 
	`NVIC_CË¬P’dšgIRQ
(
SWI_IRQn
);

950 
	`NVIC_S‘PriÜ™y
(
SWI_IRQn
, 
SWI_IRQ_PRI
);

951 
	`NVIC_EÇbËIRQ
(
SWI_IRQn
);

953 
	`¹c1_š™
(
APP_TIMER_CONFIG_RTC_FREQUENCY
);

955 
m_ticks_Ï‹¡
 = 
	`¹c1_couÁ”_g‘
();

957  
NRF_SUCCESS
;

958 
	}
}

961 
»t_code_t
 
	$­p_tim”_ü—‹
(
­p_tim”_id_t
 cÚ¡ * 
p_tim”_id
,

962 
­p_tim”_mode_t
 
mode
,

963 
­p_tim”_timeout_hªdËr_t
 
timeout_hªdËr
)

966 
	`VERIFY_MODULE_INITIALIZED
();

968 ià(
timeout_hªdËr
 =ğ
NULL
)

970  
NRF_ERROR_INVALID_PARAM
;

972 ià(
p_tim”_id
 =ğ
NULL
)

974  
NRF_ERROR_INVALID_PARAM
;

976 ià(((
tim”_node_t
*)*
p_tim”_id
)->
is_ruÂšg
)

978  
NRF_ERROR_INVALID_STATE
;

981 
tim”_node_t
 * 
p_node
 = (tim”_node_ˆ*)*
p_tim”_id
;

982 
p_node
->
is_ruÂšg
 = 
çl£
;

983 
p_node
->
mode
 = mode;

984 
p_node
->
p_timeout_hªdËr
 = 
timeout_hªdËr
;

985  
NRF_SUCCESS
;

986 
	}
}

988 
»t_code_t
 
	$­p_tim”_¡¬t
(
­p_tim”_id_t
 
tim”_id
, 
ušt32_t
 
timeout_ticks
, * 
p_cÚ‹xt
)

990 
ušt32_t
 
timeout_³riodic
;

991 
tim”_node_t
 * 
p_node
 = (tim”_node_t*)
tim”_id
;

994 
	`VERIFY_MODULE_INITIALIZED
();

996 ià(
tim”_id
 == 0)

998  
NRF_ERROR_INVALID_STATE
;

1000 ià(
timeout_ticks
 < 
APP_TIMER_MIN_TIMEOUT_TICKS
)

1002  
NRF_ERROR_INVALID_PARAM
;

1004 ià(
p_node
->
p_timeout_hªdËr
 =ğ
NULL
)

1006  
NRF_ERROR_INVALID_STATE
;

1010 
timeout_³riodic
 = (
p_node
->
mode
 =ğ
APP_TIMER_MODE_REPEATED
è? 
timeout_ticks
 : 0;

1012  
	`tim”_¡¬t_İ_scheduË
(
p_node
,

1013 
timeout_ticks
,

1014 
timeout_³riodic
,

1015 
p_cÚ‹xt
);

1016 
	}
}

1019 
»t_code_t
 
	$­p_tim”_¡İ
(
­p_tim”_id_t
 
tim”_id
)

1021 
tim”_node_t
 * 
p_node
 = (tim”_node_t*)
tim”_id
;

1023 
	`VERIFY_MODULE_INITIALIZED
();

1025 ià((
tim”_id
 =ğ
NULL
è|| (
p_node
->
p_timeout_hªdËr
 == NULL))

1027  
NRF_ERROR_INVALID_STATE
;

1030 
p_node
->
is_ruÂšg
 = 
çl£
;

1033  
	`tim”_¡İ_İ_scheduË
(
p_node
, 
TIMER_USER_OP_TYPE_STOP
);

1034 
	}
}

1037 
»t_code_t
 
	$­p_tim”_¡İ_®l
()

1040 
	`VERIFY_MODULE_INITIALIZED
();

1042  
	`tim”_¡İ_İ_scheduË
(
NULL
, 
TIMER_USER_OP_TYPE_STOP_ALL
);

1043 
	}
}

1046 
ušt32_t
 
	$­p_tim”_út_g‘
()

1048  
	`¹c1_couÁ”_g‘
();

1049 
	}
}

1052 
ušt32_t
 
	$­p_tim”_út_diff_compu‹
(
ušt32_t
 
ticks_to
,

1053 
ušt32_t
 
ticks_äom
)

1055  
	`ticks_diff_g‘
(
ticks_to
, 
ticks_äom
);

1056 
	}
}

1058 #ià
APP_TIMER_WITH_PROFILER


1059 
ušt8_t
 
	$­p_tim”_İ_queue_utiz©iÚ_g‘
()

1061  
m_max_u£r_İ_queue_utiz©iÚ
;

1062 
	}
}

1065 
	$­p_tim”_·u£
()

1067 
NRF_RTC1
->
TASKS_STOP
 = 1;

1068 
	}
}

1070 
	$­p_tim”_»sume
()

1072 
NRF_RTC1
->
TASKS_START
 = 1;

1073 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\util\app_error.c

49 
	~"Äf.h
"

50 
	~<¡dio.h
>

51 
	~"­p_”rÜ.h
"

52 
	~"nÜdic_commÚ.h
"

53 
	~"sdk_”rÜs.h
"

64 
	$­p_”rÜ_hªdËr_b¬e
(
»t_code_t
 
”rÜ_code
)

66 
”rÜ_šfo_t
 
”rÜ_šfo
 =

68 .
lše_num
 = 0,

69 .
p_fe_Çme
 = 
NULL
,

70 .
”r_code
 = 
”rÜ_code
,

73 
	`­p_”rÜ_çuÉ_hªdËr
(
NRF_FAULT_ID_SDK_ERROR
, 0, (
ušt32_t
)(&
”rÜ_šfo
));

75 
	`UNUSED_VARIABLE
(
”rÜ_šfo
);

76 
	}
}

78 
	$­p_”rÜ_§ve_ªd_¡İ
(
ušt32_t
 
id
, ušt32_ˆ
pc
, ušt32_ˆ
šfo
)

83 
ušt32_t
 
çuÉ_id
;

84 
ušt32_t
 
pc
;

85 
ušt32_t
 
”rÜ_šfo
;

86 
as£¹_šfo_t
 * 
p_as£¹_šfo
;

87 
”rÜ_šfo_t
 * 
p_”rÜ_šfo
;

88 
»t_code_t
 
”r_code
;

89 
ušt32_t
 
lše_num
;

90 cÚ¡ 
ušt8_t
 * 
p_fe_Çme
;

91 } 
m_”rÜ_d©a
 = {0};

95 vŞ©
boŞ
 
loİ
 = 
Œue
;

96 
	`UNUSED_VARIABLE
(
loİ
);

98 
m_”rÜ_d©a
.
çuÉ_id
 = 
id
;

99 
m_”rÜ_d©a
.
pc
 =…c;

100 
m_”rÜ_d©a
.
”rÜ_šfo
 = 
šfo
;

102 
id
)

104 
NRF_FAULT_ID_SDK_ASSERT
:

105 
m_”rÜ_d©a
.
p_as£¹_šfo
 = (
as£¹_šfo_t
 *)
šfo
;

106 
m_”rÜ_d©a
.
lše_num
 = m_”rÜ_d©a.
p_as£¹_šfo
->line_num;

107 
m_”rÜ_d©a
.
p_fe_Çme
 = m_”rÜ_d©a.
p_as£¹_šfo
->p_file_name;

110 
NRF_FAULT_ID_SDK_ERROR
:

111 
m_”rÜ_d©a
.
p_”rÜ_šfo
 = (
”rÜ_šfo_t
 *)
šfo
;

112 
m_”rÜ_d©a
.
”r_code
 = m_”rÜ_d©a.
p_”rÜ_šfo
->err_code;

113 
m_”rÜ_d©a
.
lše_num
 = m_”rÜ_d©a.
p_”rÜ_šfo
->line_num;

114 
m_”rÜ_d©a
.
p_fe_Çme
 = m_”rÜ_d©a.
p_”rÜ_šfo
->p_file_name;

118 
	`UNUSED_VARIABLE
(
m_”rÜ_d©a
);

121 
	`__di§bË_œq
();

122 
loİ
);

124 
	`__’abË_œq
();

125 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\util\app_error_handler_gcc.c

40 
	~"sdk_commÚ.h
"

41 
	~"comp”_ab¡¿ùiÚ.h
"

42 
	~"­p_”rÜ.h
"

44 #ià
defšed
 (
__CORTEX_M
) && (__CORTEX_M == 0x04)

45 
	$­p_”rÜ_hªdËr
(
»t_code_t
 
”rÜ_code
, 
ušt32_t
 
lše_num
, cÚ¡ 
ušt8_t
 * 
p_fe_Çme
è
	`__©Œibu‹__
(Ğ
Çked
 ));

47 
	$­p_”rÜ_hªdËr
(
»t_code_t
 
”rÜ_code
, 
ušt32_t
 
lše_num
, cÚ¡ 
ušt8_t
 * 
p_fe_Çme
)

49 
__ASM
 volatile(

75 "I" (
APP_ERROR_ERROR_INFO_SIZE_ALIGNED_8BYTE
),

76 "I" (
APP_ERROR_ERROR_INFO_OFFSET_ERR_CODE
),

77 "I" (
APP_ERROR_ERROR_INFO_OFFSET_P_FILE_NAME
),

78 "I" (
APP_ERROR_ERROR_INFO_OFFSET_LINE_NUM
),

79 "X" (
NRF_FAULT_ID_SDK_ERROR
),

80 "X" (
­p_”rÜ_çuÉ_hªdËr
)

84 
	}
}

85 #–ià
defšed
(
__CORTEX_M
) && (__CORTEX_M == 0x00)

87 
	$­p_”rÜ_hªdËr
(
»t_code_t
 
”rÜ_code
, 
ušt32_t
 
lše_num
, cÚ¡ 
ušt8_t
 * 
p_fe_Çme
)

89 
”rÜ_šfo_t
 
”rÜ_šfo
 = {

90 .
lše_num
 =†ine_num,

91 .
p_fe_Çme
 =…_file_name,

92 .
”r_code
 = 
”rÜ_code
,

94 
	`­p_”rÜ_çuÉ_hªdËr
(
NRF_FAULT_ID_SDK_ERROR
, 0, (
ušt32_t
)(&
”rÜ_šfo
));

96 
	`UNUSED_VARIABLE
(
”rÜ_šfo
);

97 
	}
}

99 #”rÜ 
Arch™eùu»
 
nÙ
 
suµÜ‹d


	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\util\app_error_weak.c

40 
	~"­p_”rÜ.h
"

42 
	~"Äf_log.h
"

43 
	~"Äf_log_ù¾.h
"

44 
	~"­p_ut_¶©fÜm.h
"

45 
	~"Äf_¡»¼Ü.h
"

47 #ià
defšed
(
SOFTDEVICE_PRESENT
) && SOFTDEVICE_PRESENT

48 
	~"Äf_sdm.h
"

56 
__WEAK
 
	$­p_”rÜ_çuÉ_hªdËr
(
ušt32_t
 
id
, ušt32_ˆ
pc
, ušt32_ˆ
šfo
)

58 
	`__di§bË_œq
();

59 
	`NRF_LOG_FINAL_FLUSH
();

61 #iâdeà
DEBUG


62 
	`NRF_LOG_ERROR
("Fatalƒrror");

64 
id
)

66 #ià
	`defšed
(
SOFTDEVICE_PRESENT
) && SOFTDEVICE_PRESENT

67 
NRF_FAULT_ID_SD_ASSERT
:

68 
	`NRF_LOG_ERROR
("SOFTDEVICE: ASSERTION FAILED");

70 
NRF_FAULT_ID_APP_MEMACC
:

71 
	`NRF_LOG_ERROR
("SOFTDEVICE: INVALID MEMORY ACCESS");

74 
NRF_FAULT_ID_SDK_ASSERT
:

76 
as£¹_šfo_t
 * 
p_šfo
 = (as£¹_šfo_ˆ*)
šfo
;

77 
	`NRF_LOG_ERROR
("ASSERTION FAILED‡t %s:%u",

78 
p_šfo
->
p_fe_Çme
,

79 
p_šfo
->
lše_num
);

82 
NRF_FAULT_ID_SDK_ERROR
:

84 
”rÜ_šfo_t
 * 
p_šfo
 = (”rÜ_šfo_ˆ*)
šfo
;

85 
	`NRF_LOG_ERROR
("ERROR %u [%s]‡t %s:%u\r\nPC‡t: 0x%08x",

86 
p_šfo
->
”r_code
,

87 
	`Äf_¡»¼Ü_g‘
(
p_šfo
->
”r_code
),

88 
p_šfo
->
p_fe_Çme
,

89 
p_šfo
->
lše_num
,

90 
pc
);

91 
	`NRF_LOG_ERROR
("End ofƒrror„eport");

95 
	`NRF_LOG_ERROR
("UNKNOWN FAULT‡ˆ0x%08X", 
pc
);

100 
NRF_BREAKPOINT_COND
;

103 #iâdeà
DEBUG


104 
	`NRF_LOG_WARNING
("System„eset");

105 
	`NVIC_Sy¡emRe£t
();

107 
	`­p_”rÜ_§ve_ªd_¡İ
(
id
, 
pc
, 
šfo
);

109 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\util\app_util_platform.c

40 
	~"­p_ut_¶©fÜm.h
"

42 #ifdeà
SOFTDEVICE_PRESENT


44 
Äf_nvic_¡©e_t
 
	gÄf_nvic_¡©e
;

47 
ušt32_t
 
	gm_š_ü™iÿl_»giÚ
 = 0;

49 
	$­p_ut_di§bË_œq
()

51 
	`__di§bË_œq
();

52 
m_š_ü™iÿl_»giÚ
++;

53 
	}
}

55 
	$­p_ut_’abË_œq
()

57 
m_š_ü™iÿl_»giÚ
--;

58 ià(
m_š_ü™iÿl_»giÚ
 == 0)

60 
	`__’abË_œq
();

62 
	}
}

64 
	$­p_ut_ü™iÿl_»giÚ_’‹r
(
ušt8_t
 *
p_Ã¡ed
)

66 #ià
__CORTEX_M
 == (0x04U)

67 
	`ASSERT
(
APP_LEVEL_PRIVILEGED
 =ğ
	`´ivege_Ëv–_g‘
())

70 #ià
	`defšed
(
SOFTDEVICE_PRESENT
)

72 (è
	`sd_nvic_ü™iÿl_»giÚ_’‹r
(
p_Ã¡ed
);

74 
	`­p_ut_di§bË_œq
();

76 
	}
}

78 
	$­p_ut_ü™iÿl_»giÚ_ex™
(
ušt8_t
 
Ã¡ed
)

80 #ià
__CORTEX_M
 == (0x04U)

81 
	`ASSERT
(
APP_LEVEL_PRIVILEGED
 =ğ
	`´ivege_Ëv–_g‘
())

84 #ià
	`defšed
(
SOFTDEVICE_PRESENT
)

86 (è
	`sd_nvic_ü™iÿl_»giÚ_ex™
(
Ã¡ed
);

88 
	`­p_ut_’abË_œq
();

90 
	}
}

93 
ušt8_t
 
	$´ivege_Ëv–_g‘
()

95 #ià
__CORTEX_M
 =ğ(0x00Uè|| 
	`defšed
(
_WIN32
è|| defšed(
__unix
è|| defšed(
__APPLE__
)

97  
APP_LEVEL_PRIVILEGED
;

98 #–ià
__CORTEX_M
 == (0x04U)

99 
ušt32_t
 
i¤_veùÜ_num
 = 
	`__g‘_IPSR
(è& 
IPSR_ISR_Msk
 ;

100 ià(0 =ğ
i¤_veùÜ_num
)

103 
št32_t
 
cÚŒŞ
 = 
	`__g‘_CONTROL
();

104  
cÚŒŞ
 & 
CONTROL_nPRIV_Msk
 ? 
APP_LEVEL_UNPRIVILEGED
 : 
APP_LEVEL_PRIVILEGED
;

109  
APP_LEVEL_PRIVILEGED
;

112 
	}
}

115 
ušt8_t
 
	$cu¼’t_št_´iÜ™y_g‘
()

117 
ušt32_t
 
i¤_veùÜ_num
 = 
	`__g‘_IPSR
(è& 
IPSR_ISR_Msk
 ;

118 ià(
i¤_veùÜ_num
 > 0)

120 
št32_t
 
œq_ty³
 = ((št32_t)
i¤_veùÜ_num
 - 
EXTERNAL_INT_VECTOR_OFFSET
);

121  (
	`NVIC_G‘PriÜ™y
((
IRQn_Ty³
)
œq_ty³
) & 0xFF);

125  
APP_IRQ_PRIORITY_THREAD
;

127 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\util\nrf_assert.c

40 
	~"Äf_as£¹.h
"

41 
	~"­p_”rÜ.h
"

42 
	~"nÜdic_commÚ.h
"

44 
__WEAK
 
	$as£¹_Äf_ÿÎback
(
ušt16_t
 
lše_num
, cÚ¡ 
ušt8_t
 * 
fe_Çme
)

46 
as£¹_šfo_t
 
as£¹_šfo
 =

48 .
lše_num
 =†ine_num,

49 .
p_fe_Çme
 = 
fe_Çme
,

51 
	`­p_”rÜ_çuÉ_hªdËr
(
NRF_FAULT_ID_SDK_ASSERT
, 0, (
ušt32_t
)(&
as£¹_šfo
));

53 
	`UNUSED_VARIABLE
(
as£¹_šfo
);

54 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\softdevice\common\nrf_sdh.c

41 
	~"sdk_commÚ.h
"

42 #ià
NRF_MODULE_ENABLED
(
NRF_SDH
)

44 
	~"Äf_sdh.h
"

46 
	~<¡dšt.h
>

48 
	~"Äf_sdm.h
"

49 
	~"Äf_nvic.h
"

50 
	~"sdk_cÚfig.h
"

51 
	~"­p_”rÜ.h
"

52 
	~"­p_ut_¶©fÜm.h
"

55 
	#NRF_LOG_MODULE_NAME
 
Äf_sdh


	)

56 #ià
NRF_SDH_LOG_ENABLED


57 
	#NRF_LOG_LEVEL
 
NRF_SDH_LOG_LEVEL


	)

58 
	#NRF_LOG_INFO_COLOR
 
NRF_SDH_INFO_COLOR


	)

59 
	#NRF_LOG_DEBUG_COLOR
 
NRF_SDH_DEBUG_COLOR


	)

61 
	#NRF_LOG_LEVEL
 0

	)

63 
	~"Äf_log.h
"

64 
NRF_LOG_MODULE_REGISTER
();

69 #ià(
NRF_SDH_DISPATCH_MODEL
 =ğ
NRF_SDH_DISPATCH_MODEL_APPSH
)

70 #ià(!
APP_SCHEDULER_ENABLED
)

71 #”rÜ 
­p_scheduËr
 
is
 
»quœed
 
wh’
 
NRF_SDH_DISPATCH_MODEL
 i 
£t
 
to
 
NRF_SDH_DISPATCH_MODEL_APPSH


73 
	~"­p_scheduËr.h
"

76 #iàĞ(
NRF_SDH_CLOCK_LF_SRC
 =ğ
NRF_CLOCK_LF_SRC_RC
) \

77 && (
	gNRF_SDH_CLOCK_LF_ACCURACY
 !ğ
NRF_CLOCK_LF_ACCURACY_500_PPM
))

78 #w¬nšg 
PËa£
 
£Ëù
 
NRF_CLOCK_LF_ACCURACY_500_PPM
 
wh’
 
usšg
 
NRF_CLOCK_LF_SRC_RC


83 
NRF_SECTION_SET_DEF
(
sdh_»q_ob£rv”s
, 
Äf_sdh_»q_ob£rv”_t
, 
NRF_SDH_REQ_OBSERVER_PRIO_LEVELS
);

86 
NRF_SECTION_SET_DEF
(
sdh_¡©e_ob£rv”s
, 
Äf_sdh_¡©e_ob£rv”_t
, 
NRF_SDH_STATE_OBSERVER_PRIO_LEVELS
);

89 
NRF_SECTION_SET_DEF
(
sdh_¡ack_ob£rv”s
, 
Äf_sdh_¡ack_ob£rv”_t
, 
NRF_SDH_STACK_OBSERVER_PRIO_LEVELS
);

92 
boŞ
 
	gm_Äf_sdh_’abËd
;

93 
boŞ
 
	gm_Äf_sdh_su¥’ded
;

94 
boŞ
 
	gm_Äf_sdh_cÚtšue
;

101 
»t_code_t
 
	$sdh_»que¡_ob£rv”_nÙify
(
Äf_sdh_»q_evt_t
 
»q
)

103 
Äf_£ùiÚ_™”_t
 
™”
;

105 
	`NRF_LOG_DEBUG
("S‹„eque¡: 0x%08X", 
»q
);

107 
	`Äf_£ùiÚ_™”_š™
(&
™”
, &
sdh_»q_ob£rv”s
);

108 
	`Äf_£ùiÚ_™”_g‘
(&
™”
è!ğ
NULL
;

109 
	`Äf_£ùiÚ_™”_Ãxt
(&
™”
))

111 
Äf_sdh_»q_ob£rv”_t
 * 
p_ob£rv”
;

112 
Äf_sdh_»q_evt_hªdËr_t
 
hªdËr
;

114 
p_ob£rv”
 = (
Äf_sdh_»q_ob£rv”_t
 *è
	`Äf_£ùiÚ_™”_g‘
(&
™”
);

115 
hªdËr
 = 
p_ob£rv”
->handler;

117 ià(
	`hªdËr
(
»q
, 
p_ob£rv”
->
p_cÚ‹xt
))

119 
	`NRF_LOG_DEBUG
("NÙify ob£rv” 0x%08X =>„—dy", 
p_ob£rv”
);

124 
	`NRF_LOG_DEBUG
("NÙify ob£rv” 0x%08X => blockšg", 
p_ob£rv”
);

125  
NRF_ERROR_BUSY
;

128  
NRF_SUCCESS
;

129 
	}
}

136 
	$sdh_¡©e_ob£rv”_nÙify
(
Äf_sdh_¡©e_evt_t
 
evt
)

138 
Äf_£ùiÚ_™”_t
 
™”
;

140 
	`NRF_LOG_DEBUG
("S‹ chªge: 0x%08X", 
evt
);

142 
	`Äf_£ùiÚ_™”_š™
(&
™”
, &
sdh_¡©e_ob£rv”s
);

143 
	`Äf_£ùiÚ_™”_g‘
(&
™”
è!ğ
NULL
;

144 
	`Äf_£ùiÚ_™”_Ãxt
(&
™”
))

146 
Äf_sdh_¡©e_ob£rv”_t
 * 
p_ob£rv”
;

147 
Äf_sdh_¡©e_evt_hªdËr_t
 
hªdËr
;

149 
p_ob£rv”
 = (
Äf_sdh_¡©e_ob£rv”_t
 *è
	`Äf_£ùiÚ_™”_g‘
(&
™”
);

150 
hªdËr
 = 
p_ob£rv”
->handler;

152 
	`hªdËr
(
evt
, 
p_ob£rv”
->
p_cÚ‹xt
);

154 
	}
}

157 
	$soádeviûs_evt_œq_’abË
()

159 #ifdeà
SOFTDEVICE_PRESENT


160 
»t_code_t
 
»t_code
 = 
	`sd_nvic_EÇbËIRQ
((
IRQn_Ty³
)
SD_EVT_IRQn
);

161 
	`APP_ERROR_CHECK
(
»t_code
);

164 
	`NVIC_EÇbËIRQ
(
SD_EVT_IRQn
);

166 
	}
}

169 
	$soádeviû_evt_œq_di§bË
()

171 #ifdeà
SOFTDEVICE_PRESENT


172 
»t_code_t
 
»t_code
 = 
	`sd_nvic_Di§bËIRQ
((
IRQn_Ty³
)
SD_EVT_IRQn
);

173 
	`APP_ERROR_CHECK
(
»t_code
);

176 
	`NVIC_Di§bËIRQ
(
SD_EVT_IRQn
);

178 
	}
}

181 
»t_code_t
 
	$Äf_sdh_’abË_»que¡
()

183 
»t_code_t
 
»t_code
;

185 ià(
m_Äf_sdh_’abËd
)

187  
NRF_ERROR_INVALID_STATE
;

190 
m_Äf_sdh_cÚtšue
 = 
Œue
;

193 ià(
	`sdh_»que¡_ob£rv”_nÙify
(
NRF_SDH_EVT_ENABLE_REQUEST
è=ğ
NRF_ERROR_BUSY
)

196  
NRF_SUCCESS
;

200 
	`sdh_¡©e_ob£rv”_nÙify
(
NRF_SDH_EVT_STATE_ENABLE_PREPARE
);

202 
Äf_şock_lf_cfg_t
 cÚ¡ 
şock_lf_cfg
 =

204 .
sourû
 = 
NRF_SDH_CLOCK_LF_SRC
,

205 .
rc_ùiv
 = 
NRF_SDH_CLOCK_LF_RC_CTIV
,

206 .
rc_‹mp_ùiv
 = 
NRF_SDH_CLOCK_LF_RC_TEMP_CTIV
,

207 .
accu¿cy
 = 
NRF_SDH_CLOCK_LF_ACCURACY


210 
	`CRITICAL_REGION_ENTER
();

211 #ifdeà
ANT_LICENSE_KEY


212 
»t_code
 = 
	`sd_soádeviû_’abË
(&
şock_lf_cfg
, 
­p_”rÜ_çuÉ_hªdËr
, 
ANT_LICENSE_KEY
);

214 
»t_code
 = 
	`sd_soádeviû_’abË
(&
şock_lf_cfg
, 
­p_”rÜ_çuÉ_hªdËr
);

216 
m_Äf_sdh_’abËd
 = (
»t_code
 =ğ
NRF_SUCCESS
);

217 
	`CRITICAL_REGION_EXIT
();

219 ià(
»t_code
 !ğ
NRF_SUCCESS
)

221  
»t_code
;

224 
m_Äf_sdh_cÚtšue
 = 
çl£
;

225 
m_Äf_sdh_su¥’ded
 = 
çl£
;

229 
	`soádeviûs_evt_œq_’abË
();

232 
	`sdh_¡©e_ob£rv”_nÙify
(
NRF_SDH_EVT_STATE_ENABLED
);

234  
NRF_SUCCESS
;

235 
	}
}

238 
»t_code_t
 
	$Äf_sdh_di§bË_»que¡
()

240 
»t_code_t
 
»t_code
;

242 ià(!
m_Äf_sdh_’abËd
)

244  
NRF_ERROR_INVALID_STATE
;

247 
m_Äf_sdh_cÚtšue
 = 
Œue
;

250 ià(
	`sdh_»que¡_ob£rv”_nÙify
(
NRF_SDH_EVT_DISABLE_REQUEST
è=ğ
NRF_ERROR_BUSY
)

253  
NRF_SUCCESS
;

257 
	`sdh_¡©e_ob£rv”_nÙify
(
NRF_SDH_EVT_STATE_DISABLE_PREPARE
);

259 
	`CRITICAL_REGION_ENTER
();

260 
»t_code
 = 
	`sd_soádeviû_di§bË
();

261 
m_Äf_sdh_’abËd
 = 
çl£
;

262 
	`CRITICAL_REGION_EXIT
();

264 ià(
»t_code
 !ğ
NRF_SUCCESS
)

266  
»t_code
;

269 
m_Äf_sdh_cÚtšue
 = 
çl£
;

271 
	`soádeviû_evt_œq_di§bË
();

274 
	`sdh_¡©e_ob£rv”_nÙify
(
NRF_SDH_EVT_STATE_DISABLED
);

276  
NRF_SUCCESS
;

277 
	}
}

280 
»t_code_t
 
	$Äf_sdh_»que¡_cÚtšue
()

282 ià(!
m_Äf_sdh_cÚtšue
)

284  
NRF_ERROR_INVALID_STATE
;

287 ià(
m_Äf_sdh_’abËd
)

289  
	`Äf_sdh_di§bË_»que¡
();

293  
	`Äf_sdh_’abË_»que¡
();

295 
	}
}

298 
boŞ
 
	$Äf_sdh_is_’abËd
()

300  
m_Äf_sdh_’abËd
;

301 
	}
}

304 
	$Äf_sdh_su¥’d
()

306 ià(!
m_Äf_sdh_’abËd
)

311 
	`soádeviû_evt_œq_di§bË
();

312 
m_Äf_sdh_su¥’ded
 = 
Œue
;

313 
	}
}

316 
	$Äf_sdh_»sume
()

318 ià((!
m_Äf_sdh_su¥’ded
è|| (!
m_Äf_sdh_’abËd
))

324 #ifdeà
SOFTDEVICE_PRESENT


325 
»t_code_t
 
»t_code
 = 
	`sd_nvic_S‘P’dšgIRQ
((
IRQn_Ty³
)
SD_EVT_IRQn
);

326 
	`APP_ERROR_CHECK
(
»t_code
);

328 
	`NVIC_S‘P’dšgIRQ
((
IRQn_Ty³
)
SD_EVT_IRQn
);

331 
	`soádeviûs_evt_œq_’abË
();

333 
m_Äf_sdh_su¥’ded
 = 
çl£
;

334 
	}
}

337 
boŞ
 
	$Äf_sdh_is_su¥’ded
()

339  (!
m_Äf_sdh_’abËd
è|| (
m_Äf_sdh_su¥’ded
);

340 
	}
}

343 
	$Äf_sdh_evts_pŞl
()

345 
Äf_£ùiÚ_™”_t
 
™”
;

348 
	`Äf_£ùiÚ_™”_š™
(&
™”
, &
sdh_¡ack_ob£rv”s
);

349 
	`Äf_£ùiÚ_™”_g‘
(&
™”
è!ğ
NULL
;

350 
	`Äf_£ùiÚ_™”_Ãxt
(&
™”
))

352 
Äf_sdh_¡ack_ob£rv”_t
 * 
p_ob£rv”
;

353 
Äf_sdh_¡ack_evt_hªdËr_t
 
hªdËr
;

355 
p_ob£rv”
 = (
Äf_sdh_¡ack_ob£rv”_t
 *è
	`Äf_£ùiÚ_™”_g‘
(&
™”
);

356 
hªdËr
 = 
p_ob£rv”
->handler;

358 
	`hªdËr
(
p_ob£rv”
->
p_cÚ‹xt
);

360 
	}
}

363 #ià(
NRF_SDH_DISPATCH_MODEL
 =ğ
NRF_SDH_DISPATCH_MODEL_INTERRUPT
)

365 
	$SD_EVT_IRQHªdËr
()

367 
	`Äf_sdh_evts_pŞl
();

368 
	}
}

370 #–ià(
NRF_SDH_DISPATCH_MODEL
 =ğ
NRF_SDH_DISPATCH_MODEL_APPSH
)

379 
	$­psh_ev’ts_pŞl
(* 
p_ev’t_d©a
, 
ušt16_t
 
ev’t_size
)

381 
	`UNUSED_PARAMETER
(
p_ev’t_d©a
);

382 
	`UNUSED_PARAMETER
(
ev’t_size
);

384 
	`Äf_sdh_evts_pŞl
();

385 
	}
}

388 
	$SD_EVT_IRQHªdËr
()

390 
»t_code_t
 
»t_code
 = 
	`­p_sched_ev’t_put
(
NULL
, 0, 
­psh_ev’ts_pŞl
);

391 
	`APP_ERROR_CHECK
(
»t_code
);

392 
	}
}

394 #–ià(
NRF_SDH_DISPATCH_MODEL
 =ğ
NRF_SDH_DISPATCH_MODEL_POLLING
)

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\softdevice\common\nrf_sdh_ble.c

41 
	~"sdk_commÚ.h
"

42 #ià
NRF_MODULE_ENABLED
(
NRF_SDH_BLE
)

44 
	~"Äf_sdh_bË.h
"

46 
	~"Äf_sdh.h
"

47 
	~"­p_”rÜ.h
"

48 
	~"Äf_¡»¼Ü.h
"

51 
	#NRF_LOG_MODULE_NAME
 
Äf_sdh_bË


	)

52 #ià
NRF_SDH_BLE_LOG_ENABLED


53 
	#NRF_LOG_LEVEL
 
NRF_SDH_BLE_LOG_LEVEL


	)

54 
	#NRF_LOG_INFO_COLOR
 
NRF_SDH_BLE_INFO_COLOR


	)

55 
	#NRF_LOG_DEBUG_COLOR
 
NRF_SDH_BLE_DEBUG_COLOR


	)

57 
	#NRF_LOG_LEVEL
 0

	)

59 
	~"Äf_log.h
"

60 
NRF_LOG_MODULE_REGISTER
();

64 
NRF_SECTION_SET_DEF
(
sdh_bË_ob£rv”s
, 
Äf_sdh_bË_evt_ob£rv”_t
, 
NRF_SDH_BLE_OBSERVER_PRIO_LEVELS
);

68 #ià
defšed
(
__CC_ARM
)

69 
ušt32_t
 
Image$$RW_IRAM1$$Ba£
;

70 
ušt32_t
 cÚ¡ * cÚ¡ 
	gm_¿m_¡¬t
 = &
Image$$RW_IRAM1$$Ba£
;

71 #–ià
defšed
(
__ICCARM__
)

72 
ušt32_t
 
__ICFEDIT_»giÚ_RAM_¡¬t__
;

73 
ušt32_t
 cÚ¡ * cÚ¡ 
	gm_¿m_¡¬t
 = &
__ICFEDIT_»giÚ_RAM_¡¬t__
;

74 #–ià
defšed
(
__SES_ARM
)

75 
ušt32_t
 
__­p_¿m_¡¬t__
;

76 
ušt32_t
 cÚ¡ * cÚ¡ 
	gm_¿m_¡¬t
 = &
__­p_¿m_¡¬t__
;

77 #–ià
defšed
(
__GNUC__
)

78 
ušt32_t
 
__d©a_¡¬t__
;

79 
ušt32_t
 cÚ¡ * cÚ¡ 
	gm_¿m_¡¬t
 = &
__d©a_¡¬t__
;

83 
	#RAM_START
 0x20000000

	)

84 
	#APP_RAM_START
 (
ušt32_t
)
m_¿m_¡¬t


	)

87 
boŞ
 
	gm_¡ack_is_’abËd
;

90 
»t_code_t
 
	$Äf_sdh_bË_­p_¿m_¡¬t_g‘
(
ušt32_t
 * 
p_­p_¿m_¡¬t
)

92 ià(
p_­p_¿m_¡¬t
 =ğ
NULL
)

94  
NRF_ERROR_NULL
;

97 *
p_­p_¿m_¡¬t
 = 
APP_RAM_START
;

99  
NRF_SUCCESS
;

100 
	}
}

103 
»t_code_t
 
	$Äf_sdh_bË_deçuÉ_cfg_£t
(
ušt8_t
 
cÚn_cfg_g
, 
ušt32_t
 * 
p_¿m_¡¬t
)

105 
ušt32_t
 
»t_code
;

107 
»t_code
 = 
	`Äf_sdh_bË_­p_¿m_¡¬t_g‘
(
p_¿m_¡¬t
);

108 ià(
»t_code
 !ğ
NRF_SUCCESS
)

110  
»t_code
;

113 #ifdeà
S112


114 
	`STATIC_ASSERT
(
NRF_SDH_BLE_CENTRAL_LINK_COUNT
 == 0, "When using s112, NRF_SDH_BLE_CENTRAL_LINK_COUNT must be 0.");

121 
bË_cfg_t
 
bË_cfg
;

123 #ià(
NRF_SDH_BLE_TOTAL_LINK_COUNT
 != 0)

125 
	`mem£t
(&
bË_cfg
, 0, (ble_cfg));

126 
bË_cfg
.
cÚn_cfg
.
cÚn_cfg_g
 = conn_cfg_tag;

127 
bË_cfg
.
cÚn_cfg
.
·¿ms
.
g­_cÚn_cfg
.
cÚn_couÁ
 = 
NRF_SDH_BLE_TOTAL_LINK_COUNT
;

128 
bË_cfg
.
cÚn_cfg
.
·¿ms
.
g­_cÚn_cfg
.
ev’t_Ëngth
 = 
NRF_SDH_BLE_GAP_EVENT_LENGTH
;

130 
»t_code
 = 
	`sd_bË_cfg_£t
(
BLE_CONN_CFG_GAP
, &
bË_cfg
, *
p_¿m_¡¬t
);

131 ià(
»t_code
 !ğ
NRF_SUCCESS
)

133 
	`NRF_LOG_ERROR
("sd_ble_cfg_set()„eturned %s when‡ttemptingo set BLE_CONN_CFG_GAP.",

134 
	`Äf_¡»¼Ü_g‘
(
»t_code
));

138 
	`mem£t
(&
bË_cfg
, 0, (ble_cfg));

139 
bË_cfg
.
g­_cfg
.
rŞe_couÁ_cfg
.
³rh_rŞe_couÁ
 = 
NRF_SDH_BLE_PERIPHERAL_LINK_COUNT
;

140 #iâdeà
S112


141 
bË_cfg
.
g­_cfg
.
rŞe_couÁ_cfg
.
ûÁ¿l_rŞe_couÁ
 = 
NRF_SDH_BLE_CENTRAL_LINK_COUNT
;

142 
bË_cfg
.
g­_cfg
.
rŞe_couÁ_cfg
.
ûÁ¿l_£c_couÁ
 = 
	`MIN
(
NRF_SDH_BLE_CENTRAL_LINK_COUNT
,

143 
BLE_GAP_ROLE_COUNT_CENTRAL_SEC_DEFAULT
);

146 
»t_code
 = 
	`sd_bË_cfg_£t
(
BLE_GAP_CFG_ROLE_COUNT
, &
bË_cfg
, *
p_¿m_¡¬t
);

147 ià(
»t_code
 !ğ
NRF_SUCCESS
)

149 
	`NRF_LOG_ERROR
("sd_ble_cfg_set()„eturned %s when‡ttemptingo set BLE_GAP_CFG_ROLE_COUNT.",

150 
	`Äf_¡»¼Ü_g‘
(
»t_code
));

154 #ià(
NRF_SDH_BLE_GATT_MAX_MTU_SIZE
 != 23)

155 
	`mem£t
(&
bË_cfg
, 0x00, (ble_cfg));

156 
bË_cfg
.
cÚn_cfg
.
cÚn_cfg_g
 = conn_cfg_tag;

157 
bË_cfg
.
cÚn_cfg
.
·¿ms
.
g©t_cÚn_cfg
.
©t_mtu
 = 
NRF_SDH_BLE_GATT_MAX_MTU_SIZE
;

159 
»t_code
 = 
	`sd_bË_cfg_£t
(
BLE_CONN_CFG_GATT
, &
bË_cfg
, *
p_¿m_¡¬t
);

160 ià(
»t_code
 !ğ
NRF_SUCCESS
)

162 
	`NRF_LOG_ERROR
("sd_ble_cfg_set()„eturned %s when‡ttemptingo set BLE_CONN_CFG_GATT.",

163 
	`Äf_¡»¼Ü_g‘
(
»t_code
));

169 
	`mem£t
(&
bË_cfg
, 0, (ble_cfg));

170 
bË_cfg
.
commÚ_cfg
.
vs_uuid_cfg
.
vs_uuid_couÁ
 = 
NRF_SDH_BLE_VS_UUID_COUNT
;

172 
»t_code
 = 
	`sd_bË_cfg_£t
(
BLE_COMMON_CFG_VS_UUID
, &
bË_cfg
, *
p_¿m_¡¬t
);

173 ià(
»t_code
 !ğ
NRF_SUCCESS
)

175 
	`NRF_LOG_ERROR
("sd_ble_cfg_set()„eturned %s when‡ttemptingo set BLE_COMMON_CFG_VS_UUID.",

176 
	`Äf_¡»¼Ü_g‘
(
»t_code
));

180 
	`mem£t
(&
bË_cfg
, 0x00, (ble_cfg));

181 
bË_cfg
.
g©ts_cfg
.
©Œ_b_size
.©Œ_b_sizğ
NRF_SDH_BLE_GATTS_ATTR_TAB_SIZE
;

183 
»t_code
 = 
	`sd_bË_cfg_£t
(
BLE_GATTS_CFG_ATTR_TAB_SIZE
, &
bË_cfg
, *
p_¿m_¡¬t
);

184 ià(
»t_code
 !ğ
NRF_SUCCESS
)

186 
	`NRF_LOG_ERROR
("sd_ble_cfg_set()„eturned %s when‡ttemptingo set BLE_GATTS_CFG_ATTR_TAB_SIZE.",

187 
	`Äf_¡»¼Ü_g‘
(
»t_code
));

191 
	`mem£t
(&
bË_cfg
, 0x00, (ble_cfg));

192 
bË_cfg
.
g©ts_cfg
.
£rviû_chªged
.£rviû_chªged = 
NRF_SDH_BLE_SERVICE_CHANGED
;

194 
»t_code
 = 
	`sd_bË_cfg_£t
(
BLE_GATTS_CFG_SERVICE_CHANGED
, &
bË_cfg
, *
p_¿m_¡¬t
);

195 ià(
»t_code
 !ğ
NRF_SUCCESS
)

197 
	`NRF_LOG_ERROR
("sd_ble_cfg_set()„eturned %s when‡ttemptingo set BLE_GATTS_CFG_SERVICE_CHANGED.",

198 
	`Äf_¡»¼Ü_g‘
(
»t_code
));

201  
NRF_SUCCESS
;

202 
	}
}

206 
ušt32_t
 
	$¿m_’d_add»ss_g‘
()

208 
ušt32_t
 
¿m_tÙ®_size
;

210 #ifdeà
NRF51


211 
ušt32_t
 
block_size
 = 
NRF_FICR
->
SIZERAMBLOCKS
;

212 
¿m_tÙ®_size
 = 
block_size
 * 
NRF_FICR
->
NUMRAMBLOCK
;

214 
¿m_tÙ®_size
 = 
NRF_FICR
->
INFO
.
RAM
 * 1024;

217  
RAM_START
 + 
¿m_tÙ®_size
;

218 
	}
}

221 
»t_code_t
 
	$Äf_sdh_bË_’abË
(
ušt32_t
 * cÚ¡ 
p_­p_¿m_¡¬t
)

224 
ušt32_t
 cÚ¡ 
­p_¿m_¡¬t_lšk
 = *
p_­p_¿m_¡¬t
;

226 
»t_code_t
 
»t_code
 = 
	`sd_bË_’abË
(
p_­p_¿m_¡¬t
);

227 ià(*
p_­p_¿m_¡¬t
 > 
­p_¿m_¡¬t_lšk
)

229 
	`NRF_LOG_WARNING
("Insufficient RAM‡llocated forhe SoftDevice.");

231 
	`NRF_LOG_WARNING
("Changehe RAM start†ocation from 0x%xo 0x%x.",

232 
­p_¿m_¡¬t_lšk
, *
p_­p_¿m_¡¬t
);

233 
	`NRF_LOG_WARNING
("Maximum RAM size for‡pplication is 0x%x.",

234 
	`¿m_’d_add»ss_g‘
(è- (*
p_­p_¿m_¡¬t
));

238 
	`NRF_LOG_DEBUG
("RAM s¹ © 0x%x", 
­p_¿m_¡¬t_lšk
);

239 ià(*
p_­p_¿m_¡¬t
 !ğ
­p_¿m_¡¬t_lšk
)

241 
	`NRF_LOG_DEBUG
("RAM s¹†oÿtiÚ cª badju¡edØ0x%x.", *
p_­p_¿m_¡¬t
);

243 
	`NRF_LOG_DEBUG
("RAM size for‡pplication can be‡djustedo 0x%x.",

244 
	`¿m_’d_add»ss_g‘
(è- (*
p_­p_¿m_¡¬t
));

248 ià(
»t_code
 =ğ
NRF_SUCCESS
)

250 
m_¡ack_is_’abËd
 = 
Œue
;

254 
	`NRF_LOG_ERROR
("sd_bË_’abË(è»tuºed %s.", 
	`Äf_¡»¼Ü_g‘
(
»t_code
));

257  
»t_code
;

258 
	}
}

265 
	$Äf_sdh_bË_evts_pŞl
(* 
p_cÚ‹xt
)

267 
	`UNUSED_VARIABLE
(
p_cÚ‹xt
);

269 
»t_code_t
 
»t_code
;

271 ià(!
m_¡ack_is_’abËd
)

276 
Œue
)

279 
	`__ALIGN
(4è
ušt8_t
 
evt_bufãr
[
NRF_SDH_BLE_EVT_BUF_SIZE
];

282 
bË_evt_t
 * 
p_bË_evt
;

283 
ušt16_t
 
evt_Ën
 = (ušt16_t)(
evt_bufãr
);

285 
»t_code
 = 
	`sd_bË_evt_g‘
(
evt_bufãr
, &
evt_Ën
);

286 ià(
»t_code
 !ğ
NRF_SUCCESS
)

291 
p_bË_evt
 = (
bË_evt_t
 *)
evt_bufãr
;

293 
	`NRF_LOG_DEBUG
("BLEƒv’t: 0x%x.", 
p_bË_evt
->
h—d”
.
evt_id
);

296 
Äf_£ùiÚ_™”_t
 
™”
;

297 
	`Äf_£ùiÚ_™”_š™
(&
™”
, &
sdh_bË_ob£rv”s
);

298 
	`Äf_£ùiÚ_™”_g‘
(&
™”
è!ğ
NULL
;

299 
	`Äf_£ùiÚ_™”_Ãxt
(&
™”
))

301 
Äf_sdh_bË_evt_ob£rv”_t
 * 
p_ob£rv”
;

302 
Äf_sdh_bË_evt_hªdËr_t
 
hªdËr
;

304 
p_ob£rv”
 = (
Äf_sdh_bË_evt_ob£rv”_t
 *)
	`Äf_£ùiÚ_™”_g‘
(&
™”
);

305 
hªdËr
 = 
p_ob£rv”
->handler;

307 
	`hªdËr
(
p_bË_evt
, 
p_ob£rv”
->
p_cÚ‹xt
);

311 ià(
»t_code
 !ğ
NRF_ERROR_NOT_FOUND
)

313 
	`APP_ERROR_HANDLER
(
»t_code
);

315 
	}
}

318 
NRF_SDH_STACK_OBSERVER
(
m_Äf_sdh_bË_evts_pŞl
, 
NRF_SDH_BLE_STACK_OBSERVER_PRIO
) =

320 .
hªdËr
 = 
Äf_sdh_bË_evts_pŞl
,

321 .
	gp_cÚ‹xt
 = 
NULL
,

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\softdevice\common\nrf_sdh_soc.c

41 
	~"sdk_commÚ.h
"

42 #ià
NRF_MODULE_ENABLED
(
NRF_SDH_SOC
)

44 
	~"Äf_sdh_soc.h
"

46 
	~"Äf_sdh.h
"

47 
	~"Äf_soc.h
"

48 
	~"­p_”rÜ.h
"

51 
	#NRF_LOG_MODULE_NAME
 
Äf_sdh_soc


	)

52 #ià
NRF_SDH_SOC_LOG_ENABLED


53 
	#NRF_LOG_LEVEL
 
NRF_SDH_SOC_LOG_LEVEL


	)

54 
	#NRF_LOG_INFO_COLOR
 
NRF_SDH_SOC_INFO_COLOR


	)

55 
	#NRF_LOG_DEBUG_COLOR
 
NRF_SDH_SOC_DEBUG_COLOR


	)

57 
	#NRF_LOG_LEVEL
 0

	)

59 
	~"Äf_log.h
"

60 
NRF_LOG_MODULE_REGISTER
();

64 
NRF_SECTION_SET_DEF
(
sdh_soc_ob£rv”s
, 
Äf_sdh_soc_evt_ob£rv”_t
, 
NRF_SDH_SOC_OBSERVER_PRIO_LEVELS
);

71 
	$Äf_sdh_soc_evts_pŞl
(* 
p_cÚ‹xt
)

73 
»t_code_t
 
»t_code
;

75 
	`UNUSED_VARIABLE
(
p_cÚ‹xt
);

77 
Œue
)

79 
ušt32_t
 
evt_id
;

81 
»t_code
 = 
	`sd_evt_g‘
(&
evt_id
);

82 ià(
»t_code
 !ğ
NRF_SUCCESS
)

87 
	`NRF_LOG_DEBUG
("SoCƒv’t: 0x%x.", 
evt_id
);

90 
Äf_£ùiÚ_™”_t
 
™”
;

91 
	`Äf_£ùiÚ_™”_š™
(&
™”
, &
sdh_soc_ob£rv”s
);

92 
	`Äf_£ùiÚ_™”_g‘
(&
™”
è!ğ
NULL
;

93 
	`Äf_£ùiÚ_™”_Ãxt
(&
™”
))

95 
Äf_sdh_soc_evt_ob£rv”_t
 * 
p_ob£rv”
;

96 
Äf_sdh_soc_evt_hªdËr_t
 
hªdËr
;

98 
p_ob£rv”
 = (
Äf_sdh_soc_evt_ob£rv”_t
 *è
	`Äf_£ùiÚ_™”_g‘
(&
™”
);

99 
hªdËr
 = 
p_ob£rv”
->handler;

101 
	`hªdËr
(
evt_id
, 
p_ob£rv”
->
p_cÚ‹xt
);

105 ià(
»t_code
 !ğ
NRF_ERROR_NOT_FOUND
)

107 
	`APP_ERROR_HANDLER
(
»t_code
);

109 
	}
}

112 
NRF_SDH_STACK_OBSERVER
(
m_Äf_sdh_soc_evts_pŞl
, 
NRF_SDH_SOC_STACK_OBSERVER_PRIO
) =

114 .
hªdËr
 = 
Äf_sdh_soc_evts_pŞl
,

115 .
	gp_cÚ‹xt
 = 
NULL
,

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\examples\ble_peripheral\ble_app_hids_mouse\main.c

55 
	~<¡dšt.h
>

56 
	~<¡ršg.h
>

57 
	~"nÜdic_commÚ.h
"

58 
	~"Äf.h
"

59 
	~"Äf_sdm.h
"

60 
	~"­p_”rÜ.h
"

61 
	~"bË.h
"

62 
	~"bË_”r.h
"

63 
	~"bË_hci.h
"

64 
	~"bË_¤v_commÚ.h
"

65 
	~"bË_advd©a.h
"

66 
	~"bË_hids.h
"

67 
	~"bË_bas.h
"

68 
	~"bË_dis.h
"

69 
	~"bË_cÚn_·¿ms.h
"

70 
	~"£nsÜsim.h
"

71 
	~"b¥_bŠ_bË.h
"

72 
	~"­p_scheduËr.h
"

73 
	~"Äf_sdh.h
"

74 
	~"Äf_sdh_soc.h
"

75 
	~"Äf_sdh_bË.h
"

76 
	~"­p_tim”.h
"

77 
	~"³”_mªag”.h
"

78 
	~"bË_adv”tisšg.h
"

79 
	~"fds.h
"

80 
	~"bË_cÚn_¡©e.h
"

81 
	~"Äf_bË_g©t.h
"

82 
	~"Äf_bË_qwr.h
"

83 
	~"Äf_pwr_mgmt.h
"

84 
	~"³”_mªag”_hªdËr.h
"

86 
	~"Äf_log.h
"

87 
	~"Äf_log_ù¾.h
"

88 
	~"Äf_log_deçuÉ_back’ds.h
"

91 
	#DEVICE_NAME
 "nRF5_Mou£"

	)

92 
	#MANUFACTURER_NAME
 "NÜdicSemicÚduùÜ"

	)

94 
	#APP_BLE_OBSERVER_PRIO
 3

	)

95 
	#APP_BLE_CONN_CFG_TAG
 1

	)

97 
	#BATTERY_LEVEL_MEAS_INTERVAL
 
	`APP_TIMER_TICKS
(2000è

	)

98 
	#MIN_BATTERY_LEVEL
 81

	)

99 
	#MAX_BATTERY_LEVEL
 100

	)

100 
	#BATTERY_LEVEL_INCREMENT
 1

	)

102 
	#PNP_ID_VENDOR_ID_SOURCE
 0x02

	)

103 
	#PNP_ID_VENDOR_ID
 0x1915

	)

104 
	#PNP_ID_PRODUCT_ID
 0xEEEE

	)

105 
	#PNP_ID_PRODUCT_VERSION
 0x0001

	)

108 
	#MIN_CONN_INTERVAL
 
	`MSEC_TO_UNITS
(7.5, 
UNIT_1_25_MS
è

	)

109 
	#MAX_CONN_INTERVAL
 
	`MSEC_TO_UNITS
(15, 
UNIT_1_25_MS
è

	)

110 
	#SLAVE_LATENCY
 20

	)

111 
	#CONN_SUP_TIMEOUT
 
	`MSEC_TO_UNITS
(3000, 
UNIT_10_MS
è

	)

113 
	#FIRST_CONN_PARAMS_UPDATE_DELAY
 
	`APP_TIMER_TICKS
(5000è

	)

114 
	#NEXT_CONN_PARAMS_UPDATE_DELAY
 
	`APP_TIMER_TICKS
(30000è

	)

115 
	#MAX_CONN_PARAM_UPDATE_COUNT
 3

	)

117 
	#SEC_PARAM_BOND
 1

	)

118 
	#SEC_PARAM_MITM
 0

	)

119 
	#SEC_PARAM_LESC
 0

	)

120 
	#SEC_PARAM_KEYPRESS
 0

	)

121 
	#SEC_PARAM_IO_CAPABILITIES
 
BLE_GAP_IO_CAPS_NONE


	)

122 
	#SEC_PARAM_OOB
 0

	)

123 
	#SEC_PARAM_MIN_KEY_SIZE
 7

	)

124 
	#SEC_PARAM_MAX_KEY_SIZE
 16

	)

126 
	#SWIFT_PAIR_SUPPORTED
 1

	)

127 #ià
SWIFT_PAIR_SUPPORTED
 == 1

128 
	#MICROSOFT_VENDOR_ID
 0x0006

	)

129 
	#MICROSOFT_BEACON_ID
 0x03

	)

130 
	#MICROSOFT_BEACON_SUB_SCENARIO
 0x00

	)

131 
	#RESERVED_RSSI_BYTE
 0x80

	)

134 
	#MOVEMENT_SPEED
 5

	)

135 
	#INPUT_REPORT_COUNT
 3

	)

136 
	#INPUT_REP_BUTTONS_LEN
 3

	)

137 
	#INPUT_REP_MOVEMENT_LEN
 3

	)

138 
	#INPUT_REP_MEDIA_PLAYER_LEN
 1

	)

139 
	#INPUT_REP_BUTTONS_INDEX
 0

	)

140 
	#INPUT_REP_MOVEMENT_INDEX
 1

	)

141 
	#INPUT_REP_MPLAYER_INDEX
 2

	)

142 
	#INPUT_REP_REF_BUTTONS_ID
 1

	)

143 
	#INPUT_REP_REF_MOVEMENT_ID
 2

	)

144 
	#INPUT_REP_REF_MPLAYER_ID
 3

	)

146 
	#BASE_USB_HID_SPEC_VERSION
 0x0101

	)

148 
	#SCHED_MAX_EVENT_DATA_SIZE
 
APP_TIMER_SCHED_EVENT_DATA_SIZE


	)

149 #ifdeà
SVCALL_AS_NORMAL_FUNCTION


150 
	#SCHED_QUEUE_SIZE
 20

	)

152 
	#SCHED_QUEUE_SIZE
 10

	)

155 
	#DEAD_BEEF
 0xDEADBEEF

	)

157 
	#APP_ADV_FAST_INTERVAL
 0x0028

	)

158 
	#APP_ADV_SLOW_INTERVAL
 0x00A0

	)

160 
	#APP_ADV_FAST_DURATION
 3000

	)

161 
	#APP_ADV_SLOW_DURATION
 18000

	)

164 
APP_TIMER_DEF
(
m_b©‹ry_tim”_id
);

165 
BLE_BAS_DEF
(
m_bas
);

166 
BLE_HIDS_DEF
(
m_hids
,

167 
NRF_SDH_BLE_TOTAL_LINK_COUNT
,

168 
INPUT_REP_BUTTONS_LEN
,

169 
INPUT_REP_MOVEMENT_LEN
,

170 
INPUT_REP_MEDIA_PLAYER_LEN
);

171 
NRF_BLE_GATT_DEF
(
m_g©t
);

172 
NRF_BLE_QWR_DEF
(
m_qwr
);

173 
BLE_ADVERTISING_DEF
(
m_adv”tisšg
);

175 
boŞ
 
	gm_š_boÙ_mode
 = 
çl£
;

176 
ušt16_t
 
	gm_cÚn_hªdË
 = 
BLE_CONN_HANDLE_INVALID
;

177 
pm_³”_id_t
 
	gm_³”_id
;

178 
£nsÜsim_cfg_t
 
	gm_b©‹ry_sim_cfg
;

179 
£nsÜsim_¡©e_t
 
	gm_b©‹ry_sim_¡©e
;

180 
bË_uuid_t
 
	gm_adv_uuids
[] =

182 {
BLE_UUID_HUMAN_INTERFACE_DEVICE_SERVICE
, 
BLE_UUID_TYPE_BLE
}

185 #ià
SWIFT_PAIR_SUPPORTED
 == 1

186 
ušt8_t
 
	gm_¥_·ylßd
[] =

188 
MICROSOFT_BEACON_ID
,

189 
MICROSOFT_BEACON_SUB_SCENARIO
,

190 
RESERVED_RSSI_BYTE


192 
bË_advd©a_mªuf_d©a_t
 
	gm_¥_mªuf_advd©a
 =

194 .
com·ny_id’tif›r
 = 
MICROSOFT_VENDOR_ID
,

195 .
	gd©a
 =

197 .
size
 = (
m_¥_·ylßd
),

198 .
	gp_d©a
 = &
m_¥_·ylßd
[0]

201 
ušt8_t
 
	gm_¥_’c_advd©a
[
BLE_GAP_ADV_SET_DATA_SIZE_MAX
];

202 
bË_g­_adv_d©a_t
 
	gm_¥_advd©a_buf
 =

204 .
adv_d©a
 =

206 .
p_d©a
 = 
m_¥_’c_advd©a
,

207 .
	gËn
 = (
m_¥_’c_advd©a
)

212 
Ú_hids_evt
(
bË_hids_t
 * 
p_hids
, 
bË_hids_evt_t
 * 
p_evt
);

214 
Ú_hids_evt
(
bË_hids_t
 * 
p_hids
, 
bË_hids_evt_t
 * 
p_evt
);

215 
bË_evt_hªdËr
(
bË_evt_t
 cÚ¡ * 
p_bË_evt
, * 
p_cÚ‹xt
);

216 
pm_evt_hªdËr
(
pm_evt_t
 cÚ¡ * 
p_evt
);

217 
Ú_adv_evt
(
bË_adv_evt_t
 
bË_adv_evt
);

218 
bË_adv”tisšg_”rÜ_hªdËr
(
ušt32_t
 
Äf_”rÜ
);

219 
³”_li¡_g‘
(
pm_³”_id_t
 * 
p_³”s
, 
ušt32_t
 * 
p_size
);

220 
¥_advd©a_´•¬e
(
bË_advd©a_t
 cÚ¡ * cÚ¡ 
p_Ãw_advd©a
, 
bË_g­_adv_d©a_t
 * cÚ¡ 
p_Ãw_advd©a_buf
);

234 
	~"fds.h
"

236 
	~"Üd”Proûssšg.h
"

237 
	~"sy¡emTime.h
"

239 
	#DETECTED_DEV_FREE
 0xFF

	)

240 
	#DIRECT_CONN_QUANTITY
 0x3

	)

242 
	#FILE_ORDER
 0xBAAB

	)

243 
	#RECORD_KEY_ORDER
 0xABBA

	)

245 
	#APP_ADV_GLOBAL_INTERVAL
 0x0023

	)

246 
	#APP_ADV_GLOBAL_TIMEOUT
 60

	)

249 
	#APP_ADV_FAST_SCANING_INTERVAL
 0x0023

	)

250 
	#APP_ADV_FAST_SCANING_TIMEOUT
 10

	)

252 
	#APP_ADV_FAST_CONNECT_INTERVAL
 0x0023

	)

253 
	#APP_ADV_FAST_CONNECT_TIMEOUT
 10

	)

255 
	#APP_ADV_FAST_SEARCH_INTERVAL
 0x0140

	)

256 
	#APP_ADV_FAST_SEARCH_TIMEOUT
 60

	)

258 
	#ORDER_FLASHE_PAGE
 254

	)

260 
	#ADV_RECONNECT_SCAN_TIMEOUT
 10000

	)

262 
	#GET_PAGE_ADDRESS
(
X
è(
ušt32_t
)(X*4096)

	)

267 
	mADV_PROC_START_CONNECT
,

268 
	mADV_PROC_STOP_ADV
,

269 
	mADV_PROC_CONNECT_PREV
,

270 
	mADV_PROC_CONNECT


271 }
	tÄfBLEAdvEvT
;

275 
	mDEV_SCANNING
,

276 
	mDEV_CONNECTION
,

277 }
	tcÚnPha£
;

281 
	mADV_IDLE
,

282 
	mADV_ADD_NEW
,

283 
	mADV_RECONNECT_SCAN
,

284 
	mADV_RECONNECT_CONNECT
,

285 }
	tadvTy³T
;

289 
	mCONNECTION_CONNECT
 = 0x0,

290 
	mCONNECTION_START_DISCONNECT
 = 0x1,

291 
	mCONNECTION_DISCONNECT
 = 0x2,

292 }
	tcÚÃùiÚS‹T
;

297 
cÚnPha£
 
	mpha£
;

298 
ušt16_t
 
	mli¡D‘eùedDev
[
BLE_GAP_WHITELIST_ADDR_MAX_COUNT
];

299 
ušt8_t
 
	mquªt™yD‘eùedDev
;

300 
ušt8_t
 
	mcÚÃùCÁ
;

301 
ušt8_t
 
	mloİCÁ
;

302 }
	gadvDœOrdCÚnS‹
 =

304 .
li¡D‘eùedDev
 = {[0 ... 
BLE_GAP_WHITELIST_ADDR_MAX_COUNT
-1] = 
DETECTED_DEV_FREE
}

307 
Üd”T
 
	gdeviûOrd”
;

308 
tim”C®lbacT
 
	g¡İSÿnAdvTim”C®lback
;

309 
tim”C®lbacT
 
	gsw™chToCÚnAdvTim”C®lback
;

311 
boŞ
 
	misD–‘eBÚds
;

312 
boŞ
 
	misR—lAdv
;

313 
boŞ
 
	misAµAdv
;

314 
boŞ
 
	misP»vCÚn
;

315 
ušt16_t
 
	mcÚÃùiÚHªdËr
;

316 
advTy³T
 
	mcu¼’tAdvTy³
;

317 
cÚÃùiÚS‹T
 
	mcÚÃùS‹
;

318 } 
	g­pS‹
 =

320 .
isD–‘eBÚds
 = 
çl£
,

321 .
	gisR—lAdv
 = 
çl£
,

322 .
	gisAµAdv
 = 
çl£
,

323 .
	gisP»vCÚn
 = 
çl£
,

324 .
	gcÚÃùiÚHªdËr
 = 
BLE_CONN_HANDLE_INVALID
,

325 .
	gcu¼’tAdvTy³
 = 
ADV_IDLE
,

326 .
	gcÚÃùS‹
 = 
CONNECTION_DISCONNECT
,

328 
ušt32_t
 
	gsÿnšgTimeout
;

330 
boŞ
 
	$­pAdvG‘P»vCÚn
()

332  
­pS‹
.
isP»vCÚn
;

333 
	}
}

336 
	$­pAdvS‘P»vCÚn
(
boŞ
 
´evCÚnS‘
)

338 
­pS‹
.
isP»vCÚn
 = 
´evCÚnS‘
;

339 
	}
}

342 
advTy³T
 
	$­pAdvG‘Cu¼’tTy³
()

344  
­pS‹
.
cu¼’tAdvTy³
;

345 
	}
}

348 
boŞ
 
	$­pAdvG‘S‹
()

350  
­pS‹
.
isAµAdv
;

351 
	}
}

354 
	$­pAdvS‘R—lS‹
(
boŞ
 
¡©e
)

356 
­pS‹
.
isR—lAdv
 = 
¡©e
;

357 
	}
}

360 
	$­pCÚÃùS‘S‹
(
cÚÃùiÚS‹T
 
cÚnS‹
, 
ušt16_t
 
cÚÃùiÚHªdËr
)

362 
­pS‹
.
cÚÃùiÚHªdËr
 = connectionHandler;

363 
­pS‹
.
cÚÃùS‹
 = 
cÚnS‹
;

364 
	}
}

366 
ušt16_t
 
	$­pG‘BLEP“rs
()

368 
pm_³”_id_t
 
útP“rs
[
BLE_GAP_WHITELIST_ADDR_MAX_COUNT
];

369 
ušt32_t
 
m_wh™–i¡_³”s
 = 0;

370 
ušt32_t
 
pCÁ
 = 0;

371 
	`mem£t
(
útP“rs
, 
PM_PEER_ID_INVALID
, (
m_wh™–i¡_³”s
));

372 
pCÁ
 = ((
útP“rs
è/ (
pm_³”_id_t
));

373 
	`³”_li¡_g‘
(
útP“rs
, &
pCÁ
);

374  
pCÁ
;

375 
	}
}

379 
	$­pDiscÚÃù
()

381 
»t_code_t
 
»t
;

382 if(
­pS‹
.
cÚÃùS‹
 !ğ
CONNECTION_CONNECT
)

384 
	`NRF_LOG_INFO
("DISCONNECT: disconnected");

387 
	`NRF_LOG_INFO
("DISCONNECT: start disconnect");

388 
­pS‹
.
cÚÃùS‹
 = 
CONNECTION_START_DISCONNECT
;

389 
­pS‹
.
isR—lAdv
 = 
Œue
;

390 
»t
 = 
	`sd_bË_g­_discÚÃù
(
­pS‹
.
cÚÃùiÚHªdËr
, 
BLE_HCI_REMOTE_USER_TERMINATED_CONNECTION
);

391 
	`NRF_LOG_INFO
("DISCONNECT:„‘ = %d", 
»t
);

392 
	`APP_ERROR_CHECK
(
»t
);

393 
	`NRF_LOG_INFO
("DISCONNECT: ok");

394 
	}
}

397 
	$­pAdvStİ
()

399 
»t_code_t
 
»t
;

400 
	`NRF_LOG_INFO
("ADV STOP:");

401 
­pS‹
.
cÚÃùS‹
)

403 
CONNECTION_CONNECT
:

404 
­pS‹
.
isAµAdv
 = 
çl£
;

405 
	`NRF_LOG_INFO
("ADV STOP:‡lready stoped");

407 
CONNECTION_START_DISCONNECT
:

408 
­pS‹
.
isAµAdv
 = 
çl£
;

409 
	`NRF_LOG_INFO
("ADV STOP: disconnected…rocess");

411 
CONNECTION_DISCONNECT
:

412 
­pS‹
.
isAµAdv
 = 
çl£
;

413 if(!
­pS‹
.
isR—lAdv
)

415 
	`NRF_LOG_INFO
("ADV STOP: current stop");

418 
­pS‹
.
isR—lAdv
 = 
çl£
;

419 
»t
 = 
	`sd_bË_g­_adv_¡İ
();

420 
	`NRF_LOG_INFO
("ADV STOP:„‘ = %d", 
»t
);

421 
	`APP_ERROR_CHECK
(
»t
);

422 
	`NRF_LOG_INFO
("ADV STOP: ok");

427 
	`NRF_LOG_INFO
("ADV STOP: ok");

429 
	}
}

432 
	$­pAdvS¹
()

434 
»t_code_t
 
»t
;

435 
­pS‹
.
cÚÃùS‹
)

437 
CONNECTION_CONNECT
:

439 
­pS‹
.
isAµAdv
 = 
Œue
;

440 
	`NRF_LOG_INFO
("ADV START: disconnect connection");

442 
	`­pDiscÚÃù
();

444 
CONNECTION_START_DISCONNECT
:

445 
­pS‹
.
isAµAdv
 = 
Œue
;

446 
	`NRF_LOG_INFO
("ADV START: wait disconnect");

448 
CONNECTION_DISCONNECT
:

449 if(
­pS‹
.
isR—lAdv
)

451 
	`NRF_LOG_INFO
("ADV START:„unning state");

454 
­pS‹
.
isAµAdv
 = 
Œue
;

455 
­pS‹
.
isR—lAdv
 = 
Œue
;

456 
	`NRF_LOG_INFO
("ADV START: start");

457 
»t
 = 
	`bË_adv”tisšg_¡¬t
(&
m_adv”tisšg
, 
BLE_ADV_MODE_FAST
);

458 
	`NRF_LOG_INFO
("ADV START:„‘ = %d", 
»t
);

459 
	`APP_ERROR_CHECK
(
»t
);

463 
	`NRF_LOG_INFO
("ADV START: ok");

464 
	}
}

505 
	$adv”tisšg_š™
(
ušt16_t
 
š‹rv®MSecÚds
, ušt16_ˆ
³riodSecÚds
, 
boŞ
 
wh™–i¡EÇbËd
)

507 
»t_code_t
 
”r_code
;

508 
ušt8_t
 
adv_æags
;

509 
bË_adv”tisšg_š™_t
 
š™
;

511 
	`mem£t
(&
š™
, 0, (init));

513 
adv_æags
 = 
BLE_GAP_ADV_FLAGS_LE_ONLY_LIMITED_DISC_MODE
;

514 
š™
.
advd©a
.
Çme_ty³
 = 
BLE_ADVDATA_FULL_NAME
;

515 
š™
.
advd©a
.
šşude_­³¬ªû
 = 
Œue
;

516 
š™
.
advd©a
.
æags
 = 
adv_æags
;

517 
š™
.
advd©a
.
uuids_com¶‘e
.
uuid_út
 = (
m_adv_uuids
) / (m_adv_uuids[0]);

518 
š™
.
advd©a
.
uuids_com¶‘e
.
p_uuids
 = 
m_adv_uuids
;

520 
š™
.
cÚfig
.
bË_adv_Ú_discÚÃù_di§bËd
 = 
çl£
;

521 
š™
.
cÚfig
.
bË_adv_wh™–i¡_’abËd
 = 
wh™–i¡EÇbËd
;

522 
š™
.
cÚfig
.
bË_adv_dœeùed_high_duty_’abËd
 = 
çl£
;

523 
š™
.
cÚfig
.
bË_adv_dœeùed_’abËd
 = 
çl£
;

524 
š™
.
cÚfig
.
bË_adv_dœeùed_š‹rv®
 = 0;

525 
š™
.
cÚfig
.
bË_adv_dœeùed_timeout
 = 0;

526 
š™
.
cÚfig
.
bË_adv_ç¡_’abËd
 = 
Œue
;

527 
š™
.
cÚfig
.
bË_adv_ç¡_š‹rv®
 = 
š‹rv®MSecÚds
;

528 
š™
.
cÚfig
.
bË_adv_ç¡_timeout
 = 
³riodSecÚds
;

529 
š™
.
cÚfig
.
bË_adv_¦ow_’abËd
 = 
çl£
;

530 
š™
.
cÚfig
.
bË_adv_¦ow_š‹rv®
 = 
APP_ADV_SLOW_INTERVAL
;

531 
š™
.
cÚfig
.
bË_adv_¦ow_timeout
 = 
APP_ADV_SLOW_DURATION
;

533 
š™
.
evt_hªdËr
 = 
Ú_adv_evt
;

534 
š™
.
”rÜ_hªdËr
 = 
bË_adv”tisšg_”rÜ_hªdËr
;

536 
”r_code
 = 
	`bË_adv”tisšg_š™
(&
m_adv”tisšg
, &
š™
);

537 
	`APP_ERROR_CHECK
(
”r_code
);

539 
	`bË_adv”tisšg_cÚn_cfg_g_£t
(&
m_adv”tisšg
, 
APP_BLE_CONN_CFG_TAG
);

541 #ià
SWIFT_PAIR_SUPPORTED
 == 1

542 
š™
.
advd©a
.
p_mªuf_¥ecific_d©a
 = &
m_¥_mªuf_advd©a
;

543 
	`¥_advd©a_´•¬e
(&
š™
.
advd©a
, &
m_¥_advd©a_buf
);

545 
	}
}

559 
boŞ
 
	$­pP“rG‘IdInLi¡
(
pm_³”_id_t
 
³”IdIn
)

561 
pm_³”_id_t
 
³”_id
;

563 
³”_id
 = 
	`pm_Ãxt_³”_id_g‘
(
PM_PEER_ID_INVALID
);

565 
³”_id
 !ğ
PM_PEER_ID_INVALID
 )

567 ifĞ
³”IdIn
 =ğ
³”_id
)

569  
Œue
;

571 
³”_id
 = 
	`pm_Ãxt_³”_id_g‘
(peer_id);

573  
çl£
;

574 
	}
}

577 
	$­pAdvS‘S¹
(
advTy³T
 
advTy³
, 
ušt16_t
 
³”Id
)

579 
»t_code_t
 
»t
;

580 
pm_³”_id_t
 
m_wh™–i¡_³”s
[
BLE_GAP_WHITELIST_ADDR_MAX_COUNT
];

581 
ušt32_t
 
m_wh™–i¡_³”_út
;

583 
advTy³
)

585 
ADV_IDLE
:

586 
	`NRF_LOG_INFO
("ADV idle");

587 
­pS‹
.
cu¼’tAdvTy³
 = 
ADV_IDLE
;

588 
	`­pAdvStİ
();

590 
ADV_ADD_NEW
:

591 
	`NRF_LOG_INFO
("ADV‡dd‚ew");

592 
	`tim”Stİ
(
¡İSÿnAdvTim”C®lback
);

593 
­pS‹
.
cu¼’tAdvTy³
 = 
ADV_ADD_NEW
;

594 
m_wh™–i¡_³”_út
 = 0;

596 
ADV_RECONNECT_SCAN
:

597 
	`mem£t
(
m_wh™–i¡_³”s
, 
PM_PEER_ID_INVALID
, (m_whitelist_peers));

598 
m_wh™–i¡_³”_út
 = ((
m_wh™–i¡_³”s
è/ (
pm_³”_id_t
));

599 
	`³”_li¡_g‘
(
m_wh™–i¡_³”s
, &
m_wh™–i¡_³”_út
);

601 
	`NRF_LOG_INFO
("Adv„ecÚ: %d", 
m_wh™–i¡_³”_út
);

603 if(
m_wh™–i¡_³”_út
 == 0)

605 
­pS‹
.
cu¼’tAdvTy³
 = 
ADV_ADD_NEW
;

609 
­pS‹
.
cu¼’tAdvTy³
 = 
ADV_RECONNECT_SCAN
;

610 
	`tim”Run
(
¡İSÿnAdvTim”C®lback
, 
ADV_RECONNECT_SCAN_TIMEOUT
);

611 
sÿnšgTimeout
 = 
	`g‘Time
();

614 
ADV_RECONNECT_CONNECT
:

615 
­pS‹
.
cu¼’tAdvTy³
 = 
ADV_RECONNECT_CONNECT
;

617 
	`NRF_LOG_INFO
("Adv„econ conn");

618 
m_wh™–i¡_³”s
[0] = 
³”Id
;

619 
m_wh™–i¡_³”_út
 = 1;

624 
	`­pAdvStİ
();

626 
»t
 = 
	`pm_wh™–i¡_£t
((
m_wh™–i¡_³”_út
 =ğ0 ) ? (
NULL
è: (
m_wh™–i¡_³”s
),

627 (
m_wh™–i¡_³”_út
 == 0 ) ? (0) : (m_whitelist_peer_cnt));

628 
»t
 = 
	`pm_deviû_id’t™›s_li¡_£t
((
m_wh™–i¡_³”_út
 =ğ0 ) ? (
NULL
è: (
m_wh™–i¡_³”s
),

629 (
m_wh™–i¡_³”_út
 == 0 ) ? (0) : (m_whitelist_peer_cnt));

630 
	`NRF_LOG_INFO
("»ˆğ%d", 
»t
);

632 ià(
»t
 !ğ
NRF_ERROR_NOT_SUPPORTED
)

634 
	`APP_ERROR_CHECK
(
»t
);

636 
	`­pAdvS¹
();

637 
	}
}

640 
	$­pAdvAddNew
(
ÄfBLEAdvEvT
 
šEv
, 
pm_³”_id_t
 
³”Id
)

642 
šEv
)

644 
ADV_PROC_START_CONNECT
:

646 
ADV_PROC_STOP_ADV
:

648 
ADV_PROC_CONNECT_PREV
:

649 
	`NRF_LOG_INFO
("Disconnect old dev");

650 
	`­pDiscÚÃù
();

652 
ADV_PROC_CONNECT
:

653 
	`NRF_LOG_INFO
("No device onhe†ist");

654 
	`­pAdvStİ
();

658 
	}
}

661 
	$­pAdvDœeùProc
(
ÄfBLEAdvEvT
 
šEv
, 
pm_³”_id_t
 
³”Id
)

663 
»t_code_t
 
”r_code
;

664 
šEv
)

666 
ADV_PROC_START_CONNECT
:

667 
	`NRF_LOG_INFO
("CONNECT");

668 
advDœOrdCÚnS‹
.
pha£
)

670 
DEV_SCANNING
:

672 
ušt8_t
 
pos
;

674 
	`NRF_LOG_INFO
("_SCANNING_");

676 
ušt8_t
 
út
 = 0;

677 ; 
út
 < 
m_wh™–i¡_³”_út
; cnt++)

679 if(
m_wh™–i¡_³”s
[
út
] =ğ
³”Id
)

685 if(
út
 < 
m_wh™–i¡_³”_út
)

687 
	`NRF_LOG_INFO
("»movdev %d", 
m_wh™–i¡_³”s
[
út
] );

688 ; 
út
 < (
m_wh™–i¡_³”_út
 - 1); cnt++)

690 
m_wh™–i¡_³”s
[
út
] = m_whitelist_peers[cnt+1];

692 
m_wh™–i¡_³”_út
--;

693 
m_wh™–i¡_³”s
[
út
] = 
PM_PEER_ID_INVALID
;

694 
	`NRF_LOG_INFO
("PDL quª %d", 
m_wh™–i¡_³”_út
);

697 
”r_code
 = 
	`pm_wh™–i¡_£t
((
m_wh™–i¡_³”_út
 =ğ0 ) ? (
NULL
è: (
m_wh™–i¡_³”s
),

698 (
m_wh™–i¡_³”_út
 == 0 ) ? (0) : (m_whitelist_peer_cnt));

699 
	`APP_ERROR_CHECK
(
”r_code
);

702 
”r_code
 = 
	`pm_deviû_id’t™›s_li¡_£t
((
m_wh™–i¡_³”_út
 =ğ0 ) ? (
NULL
è: (
m_wh™–i¡_³”s
),

703 (
m_wh™–i¡_³”_út
 == 0 ) ? (0) : (m_whitelist_peer_cnt));

704 
	`APP_ERROR_CHECK
(
”r_code
);

707 
	`­pDiscÚÃù
();

709 
	`NRF_LOG_INFO
("--------Dev iÀli¡ ? %d", 
³”Id
);

710 if(
	`Üd”G‘Pos
(
deviûOrd”
, 
³”Id
, &
pos
))

712 
	`NRF_LOG_INFO
("Dev fšd %d %d ", 
³”Id
, 
pos
);

713 if(
advDœOrdCÚnS‹
.
li¡D‘eùedDev
[
pos
] =ğ
DETECTED_DEV_FREE
)

715 
	`NRF_LOG_INFO
("Dev save");

716 
advDœOrdCÚnS‹
.
li¡D‘eùedDev
[
pos
] = 
³”Id
;

717 
advDœOrdCÚnS‹
.
quªt™yD‘eùedDev
++;

720 if(
advDœOrdCÚnS‹
.
quªt™yD‘eùedDev
 >ğ
	`Üd”G‘Quªt™y
(
deviûOrd”
))

722 
	`NRF_LOG_INFO
("---------SCANED TIME = %d", 
	`g‘Time
(è- 
sÿnšgTimeout
);

723 
	`­pAdvStİ
();

727 
DEV_CONNECTION
:

729 
	`NRF_LOG_INFO
("_CONNECTION_");

730 
	`­pAdvStİ
();

734 
ADV_PROC_STOP_ADV
:

735 
	`NRF_LOG_INFO
("STOP_ADV");

736 
advDœOrdCÚnS‹
.
pha£
)

738 
DEV_SCANNING
:

740 
ušt8_t
 
út_1
 = 0;

741 
ušt8_t
 
út_2
 = 0;

742 
	`NRF_LOG_INFO
("_SCANNING_");

743 
	`NRF_LOG_INFO
("Fšd %d", 
advDœOrdCÚnS‹
.
quªt™yD‘eùedDev
);

745 if(
advDœOrdCÚnS‹
.
quªt™yD‘eùedDev
 == 0)

747 
	`­pAdvS‘S¹
(
ADV_RECONNECT_SCAN
 , 0);

751 
út_1
 = 0; cÁ_1 < 
BLE_GAP_WHITELIST_ADDR_MAX_COUNT
 - 1; cnt_1++)

753 
út_2
 = 
BLE_GAP_WHITELIST_ADDR_MAX_COUNT
-1; cnt_2 > 0; cnt_2--)

755 if(
advDœOrdCÚnS‹
.
li¡D‘eùedDev
[
út_2
 - 1] =ğ
DETECTED_DEV_FREE
 &&

756 
advDœOrdCÚnS‹
.
li¡D‘eùedDev
[
út_2
 ] !ğ
DETECTED_DEV_FREE
)

758 
advDœOrdCÚnS‹
.
li¡D‘eùedDev
[
út_2
 - 1] =‡dvDirOrdConnState.listDetectedDev[cnt_2 ];

759 
advDœOrdCÚnS‹
.
li¡D‘eùedDev
[
út_2
 ] = 
DETECTED_DEV_FREE
;

764 
advDœOrdCÚnS‹
.
cÚÃùCÁ
 = 0;

765 
	`NRF_LOG_INFO
("+++++++++");

766 
	`­pAdvS‘S¹
(
ADV_RECONNECT_CONNECT
 , 
advDœOrdCÚnS‹
.
li¡D‘eùedDev
[advDœOrdCÚnS‹.
cÚÃùCÁ
]);

767 
	`NRF_LOG_INFO
("---------");

768 
advDœOrdCÚnS‹
.
pha£
 = 
DEV_CONNECTION
;

771 
DEV_CONNECTION
:

777 
	`NRF_LOG_INFO
("_CONNECTION_");

778 if(
advDœOrdCÚnS‹
.
cÚÃùCÁ
 >ğadvDœOrdCÚnS‹.
quªt™yD‘eùedDev
)

781 
advDœOrdCÚnS‹
.
loİCÁ
++;

783 if(
advDœOrdCÚnS‹
.
loİCÁ
 >ğ
DIRECT_CONN_QUANTITY
)

789 
	`mem£t
(
advDœOrdCÚnS‹
.
li¡D‘eùedDev
, 
DETECTED_DEV_FREE
, (advDirOrdConnState.listDetectedDev));

790 
advDœOrdCÚnS‹
.
cÚÃùCÁ
 = 0;

791 
advDœOrdCÚnS‹
.
pha£
 = 
DEV_SCANNING
;

792 
	`­pAdvS‘S¹
(
ADV_RECONNECT_SCAN
, 0);

795 
advDœOrdCÚnS‹
.
cÚÃùCÁ
++;

796 
	`­pAdvS‘S¹
(
ADV_RECONNECT_CONNECT
, 
advDœOrdCÚnS‹
.
li¡D‘eùedDev
[advDœOrdCÚnS‹.
cÚÃùCÁ
]);

803 
	}
}

806 
	$­pAdvProûssšg
(
ÄfBLEAdvEvT
 
šEv
, 
pm_³”_id_t
 
³”Id
)

808 
­pS‹
.
cu¼’tAdvTy³
)

810 
ADV_ADD_NEW
:

811 
	`NRF_LOG_INFO
("ADV_ADD_NEW");

812 
	`­pAdvAddNew
(
šEv
, 
³”Id
);

814 
ADV_RECONNECT_SCAN
:

815 
	`NRF_LOG_INFO
("ADV_SCAN");

816 
	`­pAdvDœeùProc
(
šEv
, 
³”Id
);

818 
ADV_RECONNECT_CONNECT
:

819 
	`NRF_LOG_INFO
("ADV_CONNECT");

820 
	`­pAdvDœeùProc
(
šEv
, 
³”Id
);

825 
	}
}

828 
	$­pAdvSÿnStİCB
()

830 
	`NRF_LOG_INFO
("Stop Scan");

831 
	`­pAdvStİ
();

832 
	`­pAdvProûssšg
(
ADV_PROC_STOP_ADV
, 0);

833 
	}
}

837 
	$d–‘e_bÚds
()

839 
»t_code_t
 
”r_code
;

841 
	`NRF_LOG_INFO
("Erase bonds!");

843 
”r_code
 = 
	`pm_³”s_d–‘e
();

844 
	`NRF_LOG_INFO
("DELETE ERR %d", 
”r_code
);

845 
	`APP_ERROR_CHECK
(
”r_code
);

846 
	}
}

849 
	$­pProûssšg
()

852 if(
­pS‹
.
isAµAdv
 !ğ­pS‹.
isR—lAdv
)

854 if(
­pS‹
.
isAµAdv
)

856 
	`­pAdvS¹
();

860 
	`­pAdvStİ
();

865 if(
­pS‹
.
isD–‘eBÚds
 &&‡µS‹.
cÚÃùS‹
 =ğ
CONNECTION_DISCONNECT
)

867 
­pS‹
.
isD–‘eBÚds
 = 
çl£
;

868 
	`tim”Stİ
(
¡İSÿnAdvTim”C®lback
);

869 
	`NRF_LOG_INFO
("Clear bonds");

870 
	`­pAdvS‘S¹
(
ADV_IDLE
, 0);

871 
	`d–‘e_bÚds
();

872 
	`adv”tisšg_š™
(
APP_ADV_GLOBAL_INTERVAL
, 
APP_ADV_GLOBAL_TIMEOUT
, 
Œue
);

873 
	`Üd”CËª
(
deviûOrd”
);

874 
	`Üd”Wr™eFÏsh
(
deviûOrd”
, 
	`GET_PAGE_ADDRESS
(
ORDER_FLASHE_PAGE
));

875 
	`NRF_LOG_INFO
("Numm…“r ğ%d", 
	`­pG‘BLEP“rs
());

877 
	}
}

880 
	$æashMemWr™eBy‹s
(
ušt32_t
 
æashAdd»ss
, 
ušt8_t
 
bufãr
[], ušt32_ˆ
bufãrSize
)

882 
fds_»cÜd_t
 
»cÜd
;

883 
fds_»cÜd_desc_t
 
»cÜd_desc
;

885 
»cÜd
.
fe_id
 = 
FILE_ORDER
;

886 
»cÜd
.
key
 = 
RECORD_KEY_ORDER
;

887 
»cÜd
.
d©a
.
p_d©a
 = 
bufãr
;

888 
»cÜd
.
d©a
.
Ëngth_wÜds
 = (
bufãrSize
+ 3) / 4;

889 
»t_code_t
 
»t
;

890 
fds_fšd_tok’_t
 
áok
;

893 
	`mem£t
(&
áok
, 0x00, (
fds_fšd_tok’_t
));

896 
	`fds_»cÜd_fšd
(
FILE_ORDER
, 
RECORD_KEY_ORDER
, &
»cÜd_desc
, &
áok
è=ğ
FDS_SUCCESS
)

898 
»t
 = 
	`fds_»cÜd_d–‘e
(&
»cÜd_desc
);

899 ià(
»t
 !ğ
FDS_SUCCESS
)

904 
»t
 = 
	`fds_»cÜd_wr™e
(&
»cÜd_desc
, &
»cÜd
);

905 ià(
»t
 !ğ
FDS_SUCCESS
)

909 
	}
}

912 
	$æashMemR—dBy‹s
(
ušt32_t
 
æashAdd»ss
, 
ušt8_t
 
bufãr
[], ušt32_ˆ
bufãrSize
)

914 
fds_æash_»cÜd_t
 
æash_»cÜd
;

915 
fds_»cÜd_desc_t
 
»cÜd_desc
;

916 
fds_fšd_tok’_t
 
áok
;

919 
	`mem£t
(&
áok
, 0x00, (
fds_fšd_tok’_t
));

922 
	`fds_»cÜd_fšd
(
FILE_ORDER
, 
RECORD_KEY_ORDER
, &
»cÜd_desc
, &
áok
è=ğ
FDS_SUCCESS
)

924 
	`NRF_LOG_INFO
("Read start");

925 ià(
	`fds_»cÜd_İ’
(&
»cÜd_desc
, &
æash_»cÜd
è!ğ
FDS_SUCCESS
)

930 
	`memıy
(
bufãr
, (
ušt8_t
*)
æash_»cÜd
.
p_d©a
, 
bufãrSize
);

934 ià(
	`fds_»cÜd_şo£
(&
»cÜd_desc
è!ğ
FDS_SUCCESS
)

939 
	`NRF_LOG_INFO
("Read End");

940 
	}
}

949 
	$³”_li¡_g‘
(
pm_³”_id_t
 * 
p_³”s
, 
ušt32_t
 * 
p_size
)

951 
pm_³”_id_t
 
³”_id
;

952 
ušt32_t
 
³”s_to_cİy
;

954 
³”s_to_cİy
 = (*
p_size
 < 
BLE_GAP_WHITELIST_ADDR_MAX_COUNT
) ?

955 *
p_size
 : 
BLE_GAP_WHITELIST_ADDR_MAX_COUNT
;

957 
³”_id
 = 
	`pm_Ãxt_³”_id_g‘
(
PM_PEER_ID_INVALID
);

958 *
p_size
 = 0;

960 (
³”_id
 !ğ
PM_PEER_ID_INVALID
è&& (
³”s_to_cİy
--))

962 
p_³”s
[(*
p_size
)++] = 
³”_id
;

963 
³”_id
 = 
	`pm_Ãxt_³”_id_g‘
(peer_id);

965 
	}
}

982 
	$as£¹_Äf_ÿÎback
(
ušt16_t
 
lše_num
, cÚ¡ 
ušt8_t
 * 
p_fe_Çme
)

984 
	`­p_”rÜ_hªdËr
(
DEAD_BEEF
, 
lše_num
, 
p_fe_Çme
);

985 
	}
}

992 
	$wh™–i¡_£t
(
pm_³”_id_li¡_sk_t
 
sk
)

994 
pm_³”_id_t
 
³”_ids
[
BLE_GAP_WHITELIST_ADDR_MAX_COUNT
];

995 
ušt32_t
 
³”_id_couÁ
 = 
BLE_GAP_WHITELIST_ADDR_MAX_COUNT
;

997 
»t_code_t
 
”r_code
 = 
	`pm_³”_id_li¡
(
³”_ids
, &
³”_id_couÁ
, 
PM_PEER_ID_INVALID
, 
sk
);

998 
	`APP_ERROR_CHECK
(
”r_code
);

1000 
	`NRF_LOG_INFO
("\tm_whitelist_peer_cnt %d, MAX_PEERS_WLIST %d",

1001 
³”_id_couÁ
 + 1,

1002 
BLE_GAP_WHITELIST_ADDR_MAX_COUNT
);

1004 
”r_code
 = 
	`pm_wh™–i¡_£t
(
³”_ids
, 
³”_id_couÁ
);

1005 
	`APP_ERROR_CHECK
(
”r_code
);

1006 
	}
}

1013 
	$id’t™›s_£t
(
pm_³”_id_li¡_sk_t
 
sk
)

1015 
pm_³”_id_t
 
³”_ids
[
BLE_GAP_DEVICE_IDENTITIES_MAX_COUNT
];

1016 
ušt32_t
 
³”_id_couÁ
 = 
BLE_GAP_DEVICE_IDENTITIES_MAX_COUNT
;

1018 
»t_code_t
 
”r_code
 = 
	`pm_³”_id_li¡
(
³”_ids
, &
³”_id_couÁ
, 
PM_PEER_ID_INVALID
, 
sk
);

1019 
	`APP_ERROR_CHECK
(
”r_code
);

1021 
”r_code
 = 
	`pm_deviû_id’t™›s_li¡_£t
(
³”_ids
, 
³”_id_couÁ
);

1022 
	`APP_ERROR_CHECK
(
”r_code
);

1023 
	}
}

1028 
	$adv”tisšg_¡¬t
(
boŞ
 
”a£_bÚds
)

1030 ià(
”a£_bÚds
 =ğ
Œue
)

1032 
	`d–‘e_bÚds
();

1037 
	`wh™–i¡_£t
(
PM_PEER_ID_LIST_SKIP_NO_ID_ADDR
);

1039 
»t_code_t
 
»t
 = 
	`bË_adv”tisšg_¡¬t
(&
m_adv”tisšg
, 
BLE_ADV_MODE_FAST
);

1040 
	`APP_ERROR_CHECK
(
»t
);

1042 
	}
}

1054 
	$£rviû_”rÜ_hªdËr
(
ušt32_t
 
Äf_”rÜ
)

1056 
	`APP_ERROR_HANDLER
(
Äf_”rÜ
);

1057 
	}
}

1064 
	$bË_adv”tisšg_”rÜ_hªdËr
(
ušt32_t
 
Äf_”rÜ
)

1066 
	`APP_ERROR_HANDLER
(
Äf_”rÜ
);

1067 
	}
}

1072 
	$b©‹ry_Ëv–_upd©e
()

1074 
»t_code_t
 
”r_code
;

1075 
ušt8_t
 
b©‹ry_Ëv–
;

1077 
b©‹ry_Ëv–
 = (
ušt8_t
)
	`£nsÜsim_m—su»
(&
m_b©‹ry_sim_¡©e
, &
m_b©‹ry_sim_cfg
);

1079 
”r_code
 = 
	`bË_bas_b©‹ry_Ëv–_upd©e
(&
m_bas
, 
b©‹ry_Ëv–
, 
BLE_CONN_HANDLE_ALL
);

1080 ià((
”r_code
 !ğ
NRF_SUCCESS
) &&

1081 (
”r_code
 !ğ
NRF_ERROR_BUSY
) &&

1082 (
”r_code
 !ğ
NRF_ERROR_RESOURCES
) &&

1083 (
”r_code
 !ğ
NRF_ERROR_FORBIDDEN
) &&

1084 (
”r_code
 !ğ
NRF_ERROR_INVALID_STATE
) &&

1085 (
”r_code
 !ğ
BLE_ERROR_GATTS_SYS_ATTR_MISSING
)

1088 
	`APP_ERROR_HANDLER
(
”r_code
);

1090 
	}
}

1100 
	$b©‹ry_Ëv–_m—s_timeout_hªdËr
(* 
p_cÚ‹xt
)

1102 
	`UNUSED_PARAMETER
(
p_cÚ‹xt
);

1103 
	`b©‹ry_Ëv–_upd©e
();

1104 
	}
}

1111 
	$tim”s_š™
()

1113 
»t_code_t
 
”r_code
;

1115 
”r_code
 = 
	`­p_tim”_š™
();

1116 
	`APP_ERROR_CHECK
(
”r_code
);

1119 
”r_code
 = 
	`­p_tim”_ü—‹
(&
m_b©‹ry_tim”_id
,

1120 
APP_TIMER_MODE_REPEATED
,

1121 
b©‹ry_Ëv–_m—s_timeout_hªdËr
);

1122 
	`APP_ERROR_CHECK
(
”r_code
);

1123 
	}
}

1131 
	$g­_·¿ms_š™
()

1133 
»t_code_t
 
”r_code
;

1134 
bË_g­_cÚn_·¿ms_t
 
g­_cÚn_·¿ms
;

1135 
bË_g­_cÚn_£c_mode_t
 
£c_mode
;

1137 
	`BLE_GAP_CONN_SEC_MODE_SET_OPEN
(&
£c_mode
);

1139 
”r_code
 = 
	`sd_bË_g­_deviû_Çme_£t
(&
£c_mode
,

1140 (cÚ¡ 
ušt8_t
 *)
DEVICE_NAME
,

1141 
	`¡¾’
(
DEVICE_NAME
));

1142 
	`APP_ERROR_CHECK
(
”r_code
);

1144 
”r_code
 = 
	`sd_bË_g­_­³¬ªû_£t
(
BLE_APPEARANCE_HID_MOUSE
);

1145 
	`APP_ERROR_CHECK
(
”r_code
);

1147 
	`mem£t
(&
g­_cÚn_·¿ms
, 0, (gap_conn_params));

1149 
g­_cÚn_·¿ms
.
mš_cÚn_š‹rv®
 = 
MIN_CONN_INTERVAL
;

1150 
g­_cÚn_·¿ms
.
max_cÚn_š‹rv®
 = 
MAX_CONN_INTERVAL
;

1151 
g­_cÚn_·¿ms
.
¦ave_Ï‹ncy
 = 
SLAVE_LATENCY
;

1152 
g­_cÚn_·¿ms
.
cÚn_sup_timeout
 = 
CONN_SUP_TIMEOUT
;

1154 
”r_code
 = 
	`sd_bË_g­_µı_£t
(&
g­_cÚn_·¿ms
);

1155 
	`APP_ERROR_CHECK
(
”r_code
);

1156 
	}
}

1161 
	$g©t_š™
()

1163 
»t_code_t
 
”r_code
 = 
	`Äf_bË_g©t_š™
(&
m_g©t
, 
NULL
);

1164 
	`APP_ERROR_CHECK
(
”r_code
);

1165 
	}
}

1175 
	$Äf_qwr_”rÜ_hªdËr
(
ušt32_t
 
Äf_”rÜ
)

1177 
	`APP_ERROR_HANDLER
(
Äf_”rÜ
);

1178 
	}
}

1183 
	$qwr_š™
()

1185 
»t_code_t
 
”r_code
;

1186 
Äf_bË_qwr_š™_t
 
qwr_š™_obj
 = {0};

1188 
qwr_š™_obj
.
”rÜ_hªdËr
 = 
Äf_qwr_”rÜ_hªdËr
;

1190 
”r_code
 = 
	`Äf_bË_qwr_š™
(&
m_qwr
, &
qwr_š™_obj
);

1191 
	`APP_ERROR_CHECK
(
”r_code
);

1192 
	}
}

1197 
	$dis_š™
()

1199 
»t_code_t
 
”r_code
;

1200 
bË_dis_š™_t
 
dis_š™_obj
;

1201 
bË_dis_²p_id_t
 
²p_id
;

1203 
²p_id
.
v’dÜ_id_sourû
 = 
PNP_ID_VENDOR_ID_SOURCE
;

1204 
²p_id
.
v’dÜ_id
 = 
PNP_ID_VENDOR_ID
;

1205 
²p_id
.
´oduù_id
 = 
PNP_ID_PRODUCT_ID
;

1206 
²p_id
.
´oduù_v”siÚ
 = 
PNP_ID_PRODUCT_VERSION
;

1208 
	`mem£t
(&
dis_š™_obj
, 0, (dis_init_obj));

1210 
	`bË_¤v_ascii_to_utf8
(&
dis_š™_obj
.
mªuçù_Çme_¡r
, 
MANUFACTURER_NAME
);

1211 
dis_š™_obj
.
p_²p_id
 = &
²p_id
;

1213 
dis_š™_obj
.
dis_ch¬_rd_£c
 = 
SEC_JUST_WORKS
;

1215 
”r_code
 = 
	`bË_dis_š™
(&
dis_š™_obj
);

1216 
	`APP_ERROR_CHECK
(
”r_code
);

1217 
	}
}

1222 
	$bas_š™
()

1224 
»t_code_t
 
”r_code
;

1225 
bË_bas_š™_t
 
bas_š™_obj
;

1227 
	`mem£t
(&
bas_š™_obj
, 0, (bas_init_obj));

1229 
bas_š™_obj
.
evt_hªdËr
 = 
NULL
;

1230 
bas_š™_obj
.
suµÜt_nÙifiÿtiÚ
 = 
Œue
;

1231 
bas_š™_obj
.
p_»pÜt_»f
 = 
NULL
;

1232 
bas_š™_obj
.
š™Ÿl_b©t_Ëv–
 = 100;

1234 
bas_š™_obj
.
bl_rd_£c
 = 
SEC_JUST_WORKS
;

1235 
bas_š™_obj
.
bl_cccd_wr_£c
 = 
SEC_JUST_WORKS
;

1236 
bas_š™_obj
.
bl_»pÜt_rd_£c
 = 
SEC_JUST_WORKS
;

1238 
”r_code
 = 
	`bË_bas_š™
(&
m_bas
, &
bas_š™_obj
);

1239 
	`APP_ERROR_CHECK
(
”r_code
);

1240 
	}
}

1245 
	$hids_š™
()

1247 
»t_code_t
 
”r_code
;

1248 
bË_hids_š™_t
 
hids_š™_obj
;

1249 
bË_hids_šp_»p_š™_t
 * 
p_šput_»pÜt
;

1250 
ušt8_t
 
hid_šfo_æags
;

1252 
bË_hids_šp_»p_š™_t
 
šp_»p_¬¿y
[
INPUT_REPORT_COUNT
];

1253 
ušt8_t
 
»p_m­_d©a
[] =

1333 
	`mem£t
(
šp_»p_¬¿y
, 0, (inp_rep_array));

1335 
p_šput_»pÜt
 = &
šp_»p_¬¿y
[
INPUT_REP_BUTTONS_INDEX
];

1336 
p_šput_»pÜt
->
max_Ën
 = 
INPUT_REP_BUTTONS_LEN
;

1337 
p_šput_»pÜt
->
»p_»f
.
»pÜt_id
 = 
INPUT_REP_REF_BUTTONS_ID
;

1338 
p_šput_»pÜt
->
»p_»f
.
»pÜt_ty³
 = 
BLE_HIDS_REP_TYPE_INPUT
;

1340 
p_šput_»pÜt
->
£c
.
cccd_wr
 = 
SEC_JUST_WORKS
;

1341 
p_šput_»pÜt
->
£c
.
wr
 = 
SEC_JUST_WORKS
;

1342 
p_šput_»pÜt
->
£c
.
rd
 = 
SEC_JUST_WORKS
;

1344 
p_šput_»pÜt
 = &
šp_»p_¬¿y
[
INPUT_REP_MOVEMENT_INDEX
];

1345 
p_šput_»pÜt
->
max_Ën
 = 
INPUT_REP_MOVEMENT_LEN
;

1346 
p_šput_»pÜt
->
»p_»f
.
»pÜt_id
 = 
INPUT_REP_REF_MOVEMENT_ID
;

1347 
p_šput_»pÜt
->
»p_»f
.
»pÜt_ty³
 = 
BLE_HIDS_REP_TYPE_INPUT
;

1349 
p_šput_»pÜt
->
£c
.
cccd_wr
 = 
SEC_JUST_WORKS
;

1350 
p_šput_»pÜt
->
£c
.
wr
 = 
SEC_JUST_WORKS
;

1351 
p_šput_»pÜt
->
£c
.
rd
 = 
SEC_JUST_WORKS
;

1353 
p_šput_»pÜt
 = &
šp_»p_¬¿y
[
INPUT_REP_MPLAYER_INDEX
];

1354 
p_šput_»pÜt
->
max_Ën
 = 
INPUT_REP_MEDIA_PLAYER_LEN
;

1355 
p_šput_»pÜt
->
»p_»f
.
»pÜt_id
 = 
INPUT_REP_REF_MPLAYER_ID
;

1356 
p_šput_»pÜt
->
»p_»f
.
»pÜt_ty³
 = 
BLE_HIDS_REP_TYPE_INPUT
;

1358 
p_šput_»pÜt
->
£c
.
cccd_wr
 = 
SEC_JUST_WORKS
;

1359 
p_šput_»pÜt
->
£c
.
wr
 = 
SEC_JUST_WORKS
;

1360 
p_šput_»pÜt
->
£c
.
rd
 = 
SEC_JUST_WORKS
;

1362 
hid_šfo_æags
 = 
HID_INFO_FLAG_REMOTE_WAKE_MSK
 | 
HID_INFO_FLAG_NORMALLY_CONNECTABLE_MSK
;

1364 
	`mem£t
(&
hids_š™_obj
, 0, (hids_init_obj));

1366 
hids_š™_obj
.
evt_hªdËr
 = 
Ú_hids_evt
;

1367 
hids_š™_obj
.
”rÜ_hªdËr
 = 
£rviû_”rÜ_hªdËr
;

1368 
hids_š™_obj
.
is_kb
 = 
çl£
;

1369 
hids_š™_obj
.
is_mou£
 = 
Œue
;

1370 
hids_š™_obj
.
šp_»p_couÁ
 = 
INPUT_REPORT_COUNT
;

1371 
hids_š™_obj
.
p_šp_»p_¬¿y
 = 
šp_»p_¬¿y
;

1372 
hids_š™_obj
.
ou_»p_couÁ
 = 0;

1373 
hids_š™_obj
.
p_ou_»p_¬¿y
 = 
NULL
;

1374 
hids_š™_obj
.
ã©u»_»p_couÁ
 = 0;

1375 
hids_š™_obj
.
p_ã©u»_»p_¬¿y
 = 
NULL
;

1376 
hids_š™_obj
.
»p_m­
.
d©a_Ën
 = (
»p_m­_d©a
);

1377 
hids_š™_obj
.
»p_m­
.
p_d©a
 = 
»p_m­_d©a
;

1378 
hids_š™_obj
.
hid_šfÜm©iÚ
.
bcd_hid
 = 
BASE_USB_HID_SPEC_VERSION
;

1379 
hids_š™_obj
.
hid_šfÜm©iÚ
.
b_couÁry_code
 = 0;

1380 
hids_š™_obj
.
hid_šfÜm©iÚ
.
æags
 = 
hid_šfo_æags
;

1381 
hids_š™_obj
.
šşuded_£rviûs_couÁ
 = 0;

1382 
hids_š™_obj
.
p_šşuded_£rviûs_¬¿y
 = 
NULL
;

1384 
hids_š™_obj
.
»p_m­
.
rd_£c
 = 
SEC_JUST_WORKS
;

1385 
hids_š™_obj
.
hid_šfÜm©iÚ
.
rd_£c
 = 
SEC_JUST_WORKS
;

1387 
hids_š™_obj
.
boÙ_mou£_šp_»p_£c
.
cccd_wr
 = 
SEC_JUST_WORKS
;

1388 
hids_š™_obj
.
boÙ_mou£_šp_»p_£c
.
wr
 = 
SEC_JUST_WORKS
;

1389 
hids_š™_obj
.
boÙ_mou£_šp_»p_£c
.
rd
 = 
SEC_JUST_WORKS
;

1391 
hids_š™_obj
.
´ÙocŞ_mode_rd_£c
 = 
SEC_JUST_WORKS
;

1392 
hids_š™_obj
.
´ÙocŞ_mode_wr_£c
 = 
SEC_JUST_WORKS
;

1393 
hids_š™_obj
.
ù¾_pošt_wr_£c
 = 
SEC_JUST_WORKS
;

1395 
”r_code
 = 
	`bË_hids_š™
(&
m_hids
, &
hids_š™_obj
);

1396 
	`APP_ERROR_CHECK
(
”r_code
);

1397 
	}
}

1402 
	$£rviûs_š™
()

1404 
	`qwr_š™
();

1405 
	`dis_š™
();

1406 
	`bas_š™
();

1407 
	`hids_š™
();

1408 
	}
}

1413 
	$£nsÜ_simuÏtÜ_š™
()

1415 
m_b©‹ry_sim_cfg
.
mš
 = 
MIN_BATTERY_LEVEL
;

1416 
m_b©‹ry_sim_cfg
.
max
 = 
MAX_BATTERY_LEVEL
;

1417 
m_b©‹ry_sim_cfg
.
šü
 = 
BATTERY_LEVEL_INCREMENT
;

1418 
m_b©‹ry_sim_cfg
.
¡¬t_©_max
 = 
Œue
;

1420 
	`£nsÜsim_š™
(&
m_b©‹ry_sim_¡©e
, &
m_b©‹ry_sim_cfg
);

1421 
	}
}

1428 
	$cÚn_·¿ms_”rÜ_hªdËr
(
ušt32_t
 
Äf_”rÜ
)

1430 
	`APP_ERROR_HANDLER
(
Äf_”rÜ
);

1431 
	}
}

1436 
	$cÚn_·¿ms_š™
()

1438 
»t_code_t
 
”r_code
;

1439 
bË_cÚn_·¿ms_š™_t
 
ı_š™
;

1441 
	`mem£t
(&
ı_š™
, 0, (cp_init));

1443 
ı_š™
.
p_cÚn_·¿ms
 = 
NULL
;

1444 
ı_š™
.
fœ¡_cÚn_·¿ms_upd©e_d–ay
 = 
FIRST_CONN_PARAMS_UPDATE_DELAY
;

1445 
ı_š™
.
Ãxt_cÚn_·¿ms_upd©e_d–ay
 = 
NEXT_CONN_PARAMS_UPDATE_DELAY
;

1446 
ı_š™
.
max_cÚn_·¿ms_upd©e_couÁ
 = 
MAX_CONN_PARAM_UPDATE_COUNT
;

1447 
ı_š™
.
¡¬t_Ú_nÙify_cccd_hªdË
 = 
BLE_GATT_HANDLE_INVALID
;

1448 
ı_š™
.
discÚÃù_Ú_ç
 = 
çl£
;

1449 
ı_š™
.
evt_hªdËr
 = 
NULL
;

1450 
ı_š™
.
”rÜ_hªdËr
 = 
cÚn_·¿ms_”rÜ_hªdËr
;

1452 
”r_code
 = 
	`bË_cÚn_·¿ms_š™
(&
ı_š™
);

1453 
	`APP_ERROR_CHECK
(
”r_code
);

1454 
	}
}

1459 
	$tim”s_¡¬t
()

1461 
»t_code_t
 
”r_code
;

1463 
”r_code
 = 
	`­p_tim”_¡¬t
(
m_b©‹ry_tim”_id
, 
BATTERY_LEVEL_MEAS_INTERVAL
, 
NULL
);

1464 
	`APP_ERROR_CHECK
(
”r_code
);

1465 
	}
}

1472 
	$¦“p_mode_’‹r
()

1474 
»t_code_t
 
”r_code
;

1476 
”r_code
 = 
	`b¥_šdiÿtiÚ_£t
(
BSP_INDICATE_IDLE
);

1477 
	`APP_ERROR_CHECK
(
”r_code
);

1480 
”r_code
 = 
	`b¥_bŠ_bË_¦“p_mode_´•¬e
();

1481 
	`APP_ERROR_CHECK
(
”r_code
);

1484 
”r_code
 = 
	`sd_pow”_sy¡em_off
();

1485 
	`APP_ERROR_CHECK
(
”r_code
);

1486 
	}
}

1496 
	$Ú_hids_evt
(
bË_hids_t
 * 
p_hids
, 
bË_hids_evt_t
 * 
p_evt
)

1498 
p_evt
->
evt_ty³
)

1500 
BLE_HIDS_EVT_BOOT_MODE_ENTERED
:

1501 
m_š_boÙ_mode
 = 
Œue
;

1504 
BLE_HIDS_EVT_REPORT_MODE_ENTERED
:

1505 
m_š_boÙ_mode
 = 
çl£
;

1508 
BLE_HIDS_EVT_NOTIF_ENABLED
:

1515 
	}
}

1523 
	$bË_¡ack_š™
()

1525 
»t_code_t
 
”r_code
;

1527 
”r_code
 = 
	`Äf_sdh_’abË_»que¡
();

1528 
	`APP_ERROR_CHECK
(
”r_code
);

1532 
ušt32_t
 
¿m_¡¬t
 = 0;

1533 
”r_code
 = 
	`Äf_sdh_bË_deçuÉ_cfg_£t
(
APP_BLE_CONN_CFG_TAG
, &
¿m_¡¬t
);

1534 
	`APP_ERROR_CHECK
(
”r_code
);

1537 
”r_code
 = 
	`Äf_sdh_bË_’abË
(&
¿m_¡¬t
);

1538 
	`APP_ERROR_CHECK
(
”r_code
);

1541 
	`NRF_SDH_BLE_OBSERVER
(
m_bË_ob£rv”
, 
APP_BLE_OBSERVER_PRIO
, 
bË_evt_hªdËr
, 
NULL
);

1542 
	}
}

1547 
	$³”_mªag”_š™
()

1549 
bË_g­_£c_·¿ms_t
 
£c_·¿m
;

1550 
»t_code_t
 
”r_code
;

1552 
”r_code
 = 
	`pm_š™
();

1553 
	`APP_ERROR_CHECK
(
”r_code
);

1555 
	`mem£t
(&
£c_·¿m
, 0, (
bË_g­_£c_·¿ms_t
));

1558 
£c_·¿m
.
bÚd
 = 
SEC_PARAM_BOND
;

1559 
£c_·¿m
.
m™m
 = 
SEC_PARAM_MITM
;

1560 
£c_·¿m
.
Ësc
 = 
SEC_PARAM_LESC
;

1561 
£c_·¿m
.
key´ess
 = 
SEC_PARAM_KEYPRESS
;

1562 
£c_·¿m
.
io_ÿps
 = 
SEC_PARAM_IO_CAPABILITIES
;

1563 
£c_·¿m
.
oob
 = 
SEC_PARAM_OOB
;

1564 
£c_·¿m
.
mš_key_size
 = 
SEC_PARAM_MIN_KEY_SIZE
;

1565 
£c_·¿m
.
max_key_size
 = 
SEC_PARAM_MAX_KEY_SIZE
;

1566 
£c_·¿m
.
kdi¡_own
.
’c
 = 1;

1567 
£c_·¿m
.
kdi¡_own
.
id
 = 1;

1568 
£c_·¿m
.
kdi¡_³”
.
’c
 = 1;

1569 
£c_·¿m
.
kdi¡_³”
.
id
 = 1;

1571 
”r_code
 = 
	`pm_£c_·¿ms_£t
(&
£c_·¿m
);

1572 
	`APP_ERROR_CHECK
(
”r_code
);

1574 
”r_code
 = 
	`pm_»gi¡”
(
pm_evt_hªdËr
);

1575 
	`APP_ERROR_CHECK
(
”r_code
);

1576 
	}
}

1579 #ià
SWIFT_PAIR_SUPPORTED
 == 1

1586 
	$¥_advd©a_´•¬e
(
bË_advd©a_t
 cÚ¡ * cÚ¡ 
p_Ãw_advd©a
,

1587 
bË_g­_adv_d©a_t
 * cÚ¡ 
p_Ãw_advd©a_buf
)

1589 
»t_code_t
 
»t
 = 
	`bË_advd©a_’code
(
p_Ãw_advd©a
,

1590 
p_Ãw_advd©a_buf
->
adv_d©a
.
p_d©a
,

1591 &
p_Ãw_advd©a_buf
->
adv_d©a
.
Ën
);

1592 
	`APP_ERROR_CHECK
(
»t
);

1594 ià(
p_Ãw_advd©a_buf
->
sÿn_r¥_d©a
.
p_d©a
 !ğ
NULL
)

1596 
»t
 = 
	`bË_advd©a_’code
(
p_Ãw_advd©a
,

1597 
p_Ãw_advd©a_buf
->
sÿn_r¥_d©a
.
p_d©a
,

1598 &
p_Ãw_advd©a_buf
->
sÿn_r¥_d©a
.
Ën
);

1599 
	`APP_ERROR_CHECK
(
»t
);

1601 
	}
}

1652 
	$scheduËr_š™
()

1654 
	`APP_SCHED_INIT
(
SCHED_MAX_EVENT_DATA_SIZE
, 
SCHED_QUEUE_SIZE
);

1655 
	}
}

1663 
	$mou£_movem’t_£nd
(
št16_t
 
x_d–
, iÁ16_ˆ
y_d–
)

1665 
»t_code_t
 
”r_code
;

1667 ià(
m_š_boÙ_mode
)

1669 
x_d–
 = 
	`MIN
(x_delta, 0x00ff);

1670 
y_d–
 = 
	`MIN
(y_delta, 0x00ff);

1672 
”r_code
 = 
	`bË_hids_boÙ_mou£_šp_»p_£nd
(&
m_hids
,

1674 (
št8_t
)
x_d–
,

1675 (
št8_t
)
y_d–
,

1677 
NULL
,

1678 
m_cÚn_hªdË
);

1682 
ušt8_t
 
bufãr
[
INPUT_REP_MOVEMENT_LEN
];

1684 
	`APP_ERROR_CHECK_BOOL
(
INPUT_REP_MOVEMENT_LEN
 == 3);

1686 
x_d–
 = 
	`MIN
(x_delta, 0x0fff);

1687 
y_d–
 = 
	`MIN
(y_delta, 0x0fff);

1689 
bufãr
[0] = 
x_d–
 & 0x00ff;

1690 
bufãr
[1] = ((
y_d–
 & 0x000fè<< 4è| ((
x_d–
 & 0x0f00) >> 8);

1691 
bufãr
[2] = (
y_d–
 & 0x0ff0) >> 4;

1693 
”r_code
 = 
	`bË_hids_šp_»p_£nd
(&
m_hids
,

1694 
INPUT_REP_MOVEMENT_INDEX
,

1695 
INPUT_REP_MOVEMENT_LEN
,

1696 
bufãr
,

1697 
m_cÚn_hªdË
);

1700 ià((
”r_code
 !ğ
NRF_SUCCESS
) &&

1701 (
”r_code
 !ğ
NRF_ERROR_INVALID_STATE
) &&

1702 (
”r_code
 !ğ
NRF_ERROR_RESOURCES
) &&

1703 (
”r_code
 !ğ
NRF_ERROR_BUSY
) &&

1704 (
”r_code
 !ğ
BLE_ERROR_GATTS_SYS_ATTR_MISSING
)

1707 
	`APP_ERROR_HANDLER
(
”r_code
);

1709 
	}
}

1716 
	$b¥_ev’t_hªdËr
(
b¥_ev’t_t
 
ev’t
)

1718 
»t_code_t
 
”r_code
;

1720 
ev’t
)

1722 
BSP_EVENT_SLEEP
:

1723 
	`¦“p_mode_’‹r
();

1726 
BSP_EVENT_DISCONNECT
:

1727 
”r_code
 = 
	`sd_bË_g­_discÚÃù
(
m_cÚn_hªdË
,

1728 
BLE_HCI_REMOTE_USER_TERMINATED_CONNECTION
);

1729 ià(
”r_code
 !ğ
NRF_ERROR_INVALID_STATE
)

1731 
	`APP_ERROR_CHECK
(
”r_code
);

1735 
BSP_EVENT_WHITELIST_OFF
:

1736 ià(
m_cÚn_hªdË
 =ğ
BLE_CONN_HANDLE_INVALID
)

1738 
”r_code
 = 
	`bË_adv”tisšg_»¡¬t_w™hout_wh™–i¡
(&
m_adv”tisšg
);

1739 ià(
”r_code
 !ğ
NRF_ERROR_INVALID_STATE
)

1741 
	`APP_ERROR_CHECK
(
”r_code
);

1746 
BSP_EVENT_KEY_0
:

1747 ià(
m_cÚn_hªdË
 !ğ
BLE_CONN_HANDLE_INVALID
)

1749 
	`mou£_movem’t_£nd
(-
MOVEMENT_SPEED
, 0);

1753 
BSP_EVENT_KEY_1
:

1754 ià(
m_cÚn_hªdË
 !ğ
BLE_CONN_HANDLE_INVALID
)

1756 
	`mou£_movem’t_£nd
(0, -
MOVEMENT_SPEED
);

1760 
BSP_EVENT_KEY_2
:

1761 
	`NRF_LOG_INFO
("Clear‡ll bonds");

1762 
­pS‹
.
isD–‘eBÚds
 = 
Œue
;

1766 
BSP_EVENT_KEY_3
:

1767 
	`NRF_LOG_INFO
("ADD_NEW‡dv start");

1768 
	`­pAdvS‘S¹
(
ADV_ADD_NEW
, 0);

1774 
	}
}

1781 
	$bu‰Ús_Ëds_š™
(
boŞ
 * 
p_”a£_bÚds
)

1783 
»t_code_t
 
”r_code
;

1784 
b¥_ev’t_t
 
¡¬tup_ev’t
;

1786 
”r_code
 = 
	`b¥_š™
(
BSP_INIT_LEDS
 | 
BSP_INIT_BUTTONS
, 
b¥_ev’t_hªdËr
);

1788 
	`APP_ERROR_CHECK
(
”r_code
);

1790 
”r_code
 = 
	`b¥_bŠ_bË_š™
(
NULL
, &
¡¬tup_ev’t
);

1791 
	`APP_ERROR_CHECK
(
”r_code
);

1793 *
p_”a£_bÚds
 = (
¡¬tup_ev’t
 =ğ
BSP_EVENT_CLEAR_BONDING_DATA
);

1794 
	}
}

1799 
	$log_š™
()

1801 
»t_code_t
 
”r_code
 = 
	`NRF_LOG_INIT
(
NULL
);

1802 
	`APP_ERROR_CHECK
(
”r_code
);

1804 
	`NRF_LOG_DEFAULT_BACKENDS_INIT
();

1805 
	}
}

1810 
	$pow”_mªagem’t_š™
()

1812 
»t_code_t
 
”r_code
;

1813 
”r_code
 = 
	`Äf_pwr_mgmt_š™
();

1814 
	`APP_ERROR_CHECK
(
”r_code
);

1815 
	}
}

1822 
	$idË_¡©e_hªdË
()

1824 
	`­p_sched_execu‹
();

1825 ià(
	`NRF_LOG_PROCESS
(è=ğ
çl£
)

1827 
	`Äf_pwr_mgmt_run
();

1829 
	}
}

1834 
	$fds_evt_hªdËr
(
fds_evt_t
 cÚ¡ * 
p_fds_evt
)

1836 
p_fds_evt
->
id
)

1838 
FDS_EVT_INIT
: 
	`NRF_LOG_INFO
("FDS_EVT_INIT"); ;

1839 
FDS_EVT_WRITE
: 
	`NRF_LOG_INFO
("FDS_EVT_WRITE"); ;

1840 
FDS_EVT_UPDATE
: 
	`NRF_LOG_INFO
("FDS_EVT_UPDATE"); ;

1841 
FDS_EVT_DEL_RECORD
: 
	`NRF_LOG_INFO
("FDS_EVT_DEL_RECORD"); ;

1842 
FDS_EVT_DEL_FILE
: 
	`NRF_LOG_INFO
("FDS_EVT_DEL_FILE"); ;

1843 
FDS_EVT_GC
: 
	`NRF_LOG_INFO
("FDS_EVT_GC"); ;

1846 
p_fds_evt
->
id
)

1848 
FDS_EVT_INIT
:

1849 ià(
p_fds_evt
->
»suÉ
 !ğ
FDS_SUCCESS
)

1857 
	}
}

1864 
	$maš
()

1866 
boŞ
 
”a£_bÚds
;

1869 
	`log_š™
();

1870 
	`NRF_LOG_INFO
("Gerasimchuk started.");

1872 
	`š™U£rTim”
();

1873 
¡İSÿnAdvTim”C®lback
 = 
	`tim”G‘C®lback
(
­pAdvSÿnStİCB
);

1874 
deviûOrd”
 = 
	`Üd”M®loc
();

1876 
»t_code_t
 
»t
 = 
	`fds_»gi¡”
(
fds_evt_hªdËr
);

1877 ià(
»t
 !ğ
FDS_SUCCESS
)

1881 
»t
 = 
	`fds_š™
();

1882 ià(
»t
 !ğ
FDS_SUCCESS
)

1887 
	`Üd”R—dFÏsh
(
deviûOrd”
, 
	`GET_PAGE_ADDRESS
(
ORDER_FLASHE_PAGE
));

1888 
	`NRF_LOG_INFO
("Ord” i‹m ğ%d", 
	`Üd”G‘Quªt™y
(
deviûOrd”
));

1889 
ušt8_t
 
út
 = 0; cÁ < 
ORDER_ITEM_QUANTITY
; cnt++ )

1891 
	`NRF_LOG_INFO
("™em = %d \n", 
	`Üd”G‘I‹m
(
deviûOrd”
, 
út
));

1894 
	`tim”s_š™
();

1895 
	`bu‰Ús_Ëds_š™
(&
”a£_bÚds
);

1896 
	`pow”_mªagem’t_š™
();

1897 
	`bË_¡ack_š™
();

1898 
	`scheduËr_š™
();

1899 
	`g­_·¿ms_š™
();

1900 
	`g©t_š™
();

1902 
	`£rviûs_š™
();

1903 
	`£nsÜ_simuÏtÜ_š™
();

1904 
	`cÚn_·¿ms_š™
();

1905 
	`³”_mªag”_š™
();

1909 
	`tim”s_¡¬t
();

1911 
	`adv”tisšg_š™
(
APP_ADV_GLOBAL_INTERVAL
, 
APP_ADV_GLOBAL_TIMEOUT
, 
Œue
);

1912 
	`­pAdvS‘S¹
(
ADV_RECONNECT_SCAN
, 0);

1918 
	`idË_¡©e_hªdË
();

1921 
	`­pProûssšg
();

1922 
	`u£rProûssšgTim”C®lbackFun
();

1925 
	}
}

1933 
	$bË_evt_hªdËr
(
bË_evt_t
 cÚ¡ * 
p_bË_evt
, * 
p_cÚ‹xt
)

1935 
»t_code_t
 
”r_code
;

1937 
p_bË_evt
->
h—d”
.
evt_id
)

1939 
BLE_GAP_EVT_CONNECTED
: 
	`NRF_LOG_INFO
("CONNECTED"); ;

1940 
BLE_GAP_EVT_DISCONNECTED
: 
	`NRF_LOG_INFO
("DISCONNECTED"); ;

1941 
BLE_GAP_EVT_CONN_PARAM_UPDATE
: 
	`NRF_LOG_INFO
("CONN_PARAM_UPDATE"); ;

1942 
BLE_GAP_EVT_SEC_PARAMS_REQUEST
: 
	`NRF_LOG_INFO
("SEC_PARAMS_REQUEST"); ;

1943 
BLE_GAP_EVT_SEC_INFO_REQUEST
: 
	`NRF_LOG_INFO
("SEC_INFO_REQUEST"); ;

1944 
BLE_GAP_EVT_PASSKEY_DISPLAY
: 
	`NRF_LOG_INFO
("PASSKEY_DISPLAY"); ;

1945 
BLE_GAP_EVT_KEY_PRESSED
: 
	`NRF_LOG_INFO
("KEY_PRESSED"); ;

1946 
BLE_GAP_EVT_AUTH_KEY_REQUEST
: 
	`NRF_LOG_INFO
("AUTH_KEY_REQUEST"); ;

1947 
BLE_GAP_EVT_LESC_DHKEY_REQUEST
: 
	`NRF_LOG_INFO
("LESC_DHKEY_REQUEST"); ;

1948 
BLE_GAP_EVT_AUTH_STATUS
: 
	`NRF_LOG_INFO
("AUTH_STATUS"); ;

1949 
BLE_GAP_EVT_CONN_SEC_UPDATE
: 
	`NRF_LOG_INFO
("CONN_SEC_UPDATE"); ;

1950 
BLE_GAP_EVT_TIMEOUT
: 
	`NRF_LOG_INFO
("TIMEOUT"); ;

1951 
BLE_GAP_EVT_RSSI_CHANGED
: 
	`NRF_LOG_INFO
("RSSI_CHANGED"); ;

1952 
BLE_GAP_EVT_ADV_REPORT
: 
	`NRF_LOG_INFO
("ADV_REPORT"); ;

1953 
BLE_GAP_EVT_SEC_REQUEST
: 
	`NRF_LOG_INFO
("SEC_REQUEST"); ;

1954 
BLE_GAP_EVT_CONN_PARAM_UPDATE_REQUEST
: 
	`NRF_LOG_INFO
("CONN_PARAM_UPDATE_REQUEST"); ;

1955 
BLE_GAP_EVT_SCAN_REQ_REPORT
: 
	`NRF_LOG_INFO
("SCAN_REQ_REPORT"); ;

1956 
BLE_GAP_EVT_PHY_UPDATE
: 
	`NRF_LOG_INFO
("PHY_UPDATE"); ;

1957 
BLE_GAP_EVT_DATA_LENGTH_UPDATE_REQUEST
: 
	`NRF_LOG_INFO
("DATA_LENGTH_UPDATE_REQUEST"); ;

1958 
BLE_GAP_EVT_DATA_LENGTH_UPDATE
: 
	`NRF_LOG_INFO
("DATA_LENGTH_UPDATE"); ;

1962 
p_bË_evt
->
h—d”
.
evt_id
)

1964 
BLE_GAP_EVT_CONNECTED
:

1965 
”r_code
 = 
	`b¥_šdiÿtiÚ_£t
(
BSP_INDICATE_CONNECTED
);

1966 
	`APP_ERROR_CHECK
(
”r_code
);

1967 
m_cÚn_hªdË
 = 
p_bË_evt
->
evt
.
g­_evt
.
cÚn_hªdË
;

1968 
”r_code
 = 
	`Äf_bË_qwr_cÚn_hªdË_assign
(&
m_qwr
, 
m_cÚn_hªdË
);

1969 
	`APP_ERROR_CHECK
(
”r_code
);

1971 if(
	`­pAdvG‘P»vCÚn
())

1973 
	`NRF_LOG_INFO
("CON:rue");

1976 
	`NRF_LOG_INFO
("CON: false");

1978 
	`­pAdvS‘R—lS‹
(
çl£
);

1979 
	`­pCÚÃùS‘S‹
(
CONNECTION_CONNECT
, 
m_cÚn_hªdË
);

1980 
	`­pAdvProûssšg
(
ADV_PROC_CONNECT
,0);

1984 
BLE_GAP_EVT_DISCONNECTED
:

1985 
	`NRF_LOG_INFO
("Disconnected");

1987 
	`­pAdvS‘P»vCÚn
(
çl£
);

1988 
	`­pCÚÃùS‘S‹
(
CONNECTION_DISCONNECT
, 
BLE_CONN_HANDLE_INVALID
);

1991 
m_cÚn_hªdË
 = 
BLE_CONN_HANDLE_INVALID
;

1994 
BLE_GAP_EVT_PHY_UPDATE_REQUEST
:

1996 
	`NRF_LOG_DEBUG
("PHY update„equest.");

1997 
bË_g­_phys_t
 cÚ¡ 
phys
 =

1999 .
rx_phys
 = 
BLE_GAP_PHY_AUTO
,

2000 .
tx_phys
 = 
BLE_GAP_PHY_AUTO
,

2002 
”r_code
 = 
	`sd_bË_g­_phy_upd©e
(
p_bË_evt
->
evt
.
g­_evt
.
cÚn_hªdË
, &
phys
);

2003 
	`APP_ERROR_CHECK
(
”r_code
);

2006 
BLE_GATTC_EVT_TIMEOUT
:

2008 
	`NRF_LOG_DEBUG
("GATT Client Timeout.");

2009 
”r_code
 = 
	`sd_bË_g­_discÚÃù
(
p_bË_evt
->
evt
.
g©tc_evt
.
cÚn_hªdË
,

2010 
BLE_HCI_REMOTE_USER_TERMINATED_CONNECTION
);

2011 
	`APP_ERROR_CHECK
(
”r_code
);

2014 
BLE_GATTS_EVT_TIMEOUT
:

2016 
	`NRF_LOG_DEBUG
("GATT Server Timeout.");

2017 
”r_code
 = 
	`sd_bË_g­_discÚÃù
(
p_bË_evt
->
evt
.
g©ts_evt
.
cÚn_hªdË
,

2018 
BLE_HCI_REMOTE_USER_TERMINATED_CONNECTION
);

2019 
	`APP_ERROR_CHECK
(
”r_code
);

2026 
	}
}

2034 
	$pm_evt_hªdËr
(
pm_evt_t
 cÚ¡ * 
p_evt
)

2036 
	`pm_hªdËr_Ú_pm_evt
(
p_evt
);

2037 
	`pm_hªdËr_æash_ş—n
(
p_evt
);

2039 
p_evt
->
evt_id
)

2041 
PM_EVT_BONDED_PEER_CONNECTED
: 
	`NRF_LOG_INFO
("PM_EVT_BONDED_PEER_CONNECTED"); ;

2042 
PM_EVT_CONN_SEC_START
: 
	`NRF_LOG_INFO
("PM_EVT_CONN_SEC_START"); ;

2043 
PM_EVT_CONN_SEC_SUCCEEDED
: 
	`NRF_LOG_INFO
("PM_EVT_CONN_SEC_SUCCEEDED"); ;

2044 
PM_EVT_CONN_SEC_FAILED
: 
	`NRF_LOG_INFO
("PM_EVT_CONN_SEC_FAILED"); ;

2045 
PM_EVT_CONN_SEC_CONFIG_REQ
: 
	`NRF_LOG_INFO
("PM_EVT_CONN_SEC_CONFIG_REQ"); ;

2046 
PM_EVT_CONN_SEC_PARAMS_REQ
: 
	`NRF_LOG_INFO
("PM_EVT_CONN_SEC_PARAMS_REQ"); ;

2047 
PM_EVT_STORAGE_FULL
: 
	`NRF_LOG_INFO
("PM_EVT_STORAGE_FULL"); ;

2048 
PM_EVT_ERROR_UNEXPECTED
: 
	`NRF_LOG_INFO
("PM_EVT_ERROR_UNEXPECTED"); ;

2049 
PM_EVT_PEER_DATA_UPDATE_SUCCEEDED
: 
	`NRF_LOG_INFO
("PM_EVT_PEER_DATA_UPDATE_SUCCEEDED"); ;

2050 
PM_EVT_PEER_DATA_UPDATE_FAILED
: 
	`NRF_LOG_INFO
("PM_EVT_PEER_DATA_UPDATE_FAILED"); ;

2051 
PM_EVT_PEER_DELETE_SUCCEEDED
: 
	`NRF_LOG_INFO
("PM_EVT_PEER_DELETE_SUCCEEDED"); ;

2052 
PM_EVT_PEER_DELETE_FAILED
: 
	`NRF_LOG_INFO
("PM_EVT_PEER_DELETE_FAILED"); ;

2053 
PM_EVT_PEERS_DELETE_SUCCEEDED
: 
	`NRF_LOG_INFO
("PM_EVT_PEERS_DELETE_SUCCEEDED"); ;

2054 
PM_EVT_PEERS_DELETE_FAILED
: 
	`NRF_LOG_INFO
("PM_EVT_PEERS_DELETE_FAILED"); ;

2055 
PM_EVT_LOCAL_DB_CACHE_APPLIED
: 
	`NRF_LOG_INFO
("PM_EVT_LOCAL_DB_CACHE_APPLIED"); ;

2056 
PM_EVT_LOCAL_DB_CACHE_APPLY_FAILED
: 
	`NRF_LOG_INFO
("PM_EVT_LOCAL_DB_CACHE_APPLY_FAILED"); ;

2057 
PM_EVT_SERVICE_CHANGED_IND_SENT
: 
	`NRF_LOG_INFO
("PM_EVT_SERVICE_CHANGED_IND_SENT"); ;

2058 
PM_EVT_SERVICE_CHANGED_IND_CONFIRMED
: 
	`NRF_LOG_INFO
("PM_EVT_SERVICE_CHANGED_IND_CONFIRMED"); ;

2059 
PM_EVT_SLAVE_SECURITY_REQ
: 
	`NRF_LOG_INFO
("PM_EVT_SLAVE_SECURITY_REQ"); ;

2064 
p_evt
->
evt_id
)

2067 
PM_EVT_BONDED_PEER_CONNECTED
:

2069 
	`NRF_LOG_INFO
("P»v cÚ: %d", 
p_evt
->
³”_id
);

2071 
	`­pAdvS‘P»vCÚn
(
Œue
);

2072 
	`­pAdvS‘R—lS‹
(
çl£
);

2073 
	`­pCÚÃùS‘S‹
(
CONNECTION_CONNECT
, 
p_evt
->
cÚn_hªdË
);

2074 
	`­pAdvProûssšg
(
ADV_PROC_START_CONNECT
, 
p_evt
->
³”_id
);

2079 
PM_EVT_CONN_SEC_SUCCEEDED
:

2081 
	`NRF_LOG_INFO
("Connection secured:„ole: %d, conn_handle: 0x%x,…rocedure: %d.",

2082 
	`bË_cÚn_¡©e_rŞe
(
p_evt
->
cÚn_hªdË
),

2083 
p_evt
->
cÚn_hªdË
,

2084 
p_evt
->
·¿ms
.
cÚn_£c_sucûeded
.
´oûdu»
);

2087 
	`Üd”S‘Fœ¡
(
deviûOrd”
, 
p_evt
->
³”_id
);

2088 
	`Üd”Wr™eFÏsh
(
deviûOrd”
, 
	`GET_PAGE_ADDRESS
(
ORDER_FLASHE_PAGE
));

2093 
PM_EVT_CONN_SEC_FAILED
:

2095 
	`­pAdvS¹
();

2099 
PM_EVT_PEERS_DELETE_SUCCEEDED
:

2100 
	`adv”tisšg_¡¬t
(
çl£
);

2103 
PM_EVT_PEER_DATA_UPDATE_SUCCEEDED
:

2104 iàĞ
p_evt
->
·¿ms
.
³”_d©a_upd©e_sucûeded
.
æash_chªged


2105 && (
p_evt
->
·¿ms
.
³”_d©a_upd©e_sucûeded
.
d©a_id
 =ğ
PM_PEER_DATA_ID_BONDING
))

2107 
	`NRF_LOG_INFO
("New Bond,‡ddhe…eerohe whitelist if…ossible");

2110 
	`wh™–i¡_£t
(
PM_PEER_ID_LIST_SKIP_NO_ID_ADDR
);

2117 
	}
}

2127 
	$Ú_adv_evt
(
bË_adv_evt_t
 
bË_adv_evt
)

2129 
»t_code_t
 
”r_code
;

2131 
	`NRF_LOG_INFO
("ADV_EV %d", 
bË_adv_evt
);

2133 ifĞ(
	`­pAdvG‘S‹
(è=ğ
çl£
è&& (
bË_adv_evt
 !ğ
BLE_ADV_EVT_IDLE
))

2135 
	`NRF_LOG_INFO
("Stop Adv");

2136 
	`­pAdvStİ
();

2140 
bË_adv_evt
)

2142 
BLE_ADV_EVT_DIRECTED_HIGH_DUTY
:

2143 
	`NRF_LOG_INFO
("Directed‡dvertising.");

2144 
”r_code
 = 
	`b¥_šdiÿtiÚ_£t
(
BSP_INDICATE_ADVERTISING_DIRECTED
);

2145 
	`APP_ERROR_CHECK
(
”r_code
);

2148 
BLE_ADV_EVT_FAST
:

2149 
	`NRF_LOG_INFO
("Fast‡dvertising.");

2150 #ià
SWIFT_PAIR_SUPPORTED
 == 1

2151 
”r_code
 = 
	`bË_adv”tisšg_advd©a_upd©e
(&
m_adv”tisšg
, &
m_¥_advd©a_buf
, 
çl£
);

2152 
	`APP_ERROR_CHECK
(
”r_code
);

2154 
”r_code
 = 
	`b¥_šdiÿtiÚ_£t
(
BSP_INDICATE_ADVERTISING
);

2155 
	`APP_ERROR_CHECK
(
”r_code
);

2158 
BLE_ADV_EVT_SLOW
:

2159 
	`NRF_LOG_INFO
("Slow‡dvertising.");

2160 
”r_code
 = 
	`b¥_šdiÿtiÚ_£t
(
BSP_INDICATE_ADVERTISING_SLOW
);

2161 
	`APP_ERROR_CHECK
(
”r_code
);

2164 
BLE_ADV_EVT_FAST_WHITELIST
:

2165 
	`NRF_LOG_INFO
("Fast‡dvertising with whitelist.");

2166 
”r_code
 = 
	`b¥_šdiÿtiÚ_£t
(
BSP_INDICATE_ADVERTISING_WHITELIST
);

2167 
	`APP_ERROR_CHECK
(
”r_code
);

2170 
BLE_ADV_EVT_SLOW_WHITELIST
:

2171 
	`NRF_LOG_INFO
("Slow‡dvertising with whitelist.");

2172 
”r_code
 = 
	`b¥_šdiÿtiÚ_£t
(
BSP_INDICATE_ADVERTISING_WHITELIST
);

2173 
	`APP_ERROR_CHECK
(
”r_code
);

2174 
”r_code
 = 
	`bË_adv”tisšg_»¡¬t_w™hout_wh™–i¡
(&
m_adv”tisšg
);

2175 
	`APP_ERROR_CHECK
(
”r_code
);

2178 
BLE_ADV_EVT_IDLE
:

2179 
”r_code
 = 
	`b¥_šdiÿtiÚ_£t
(
BSP_INDICATE_IDLE
);

2180 
	`APP_ERROR_CHECK
(
”r_code
);

2182 
	`­pAdvS‘R—lS‹
(
çl£
);

2187 
BLE_ADV_EVT_WHITELIST_REQUEST
:

2189 
bË_g­_addr_t
 
wh™–i¡_addrs
[
BLE_GAP_WHITELIST_ADDR_MAX_COUNT
];

2190 
bË_g­_œk_t
 
wh™–i¡_œks
[
BLE_GAP_WHITELIST_ADDR_MAX_COUNT
];

2191 
ušt32_t
 
addr_út
 = 
BLE_GAP_WHITELIST_ADDR_MAX_COUNT
;

2192 
ušt32_t
 
œk_út
 = 
BLE_GAP_WHITELIST_ADDR_MAX_COUNT
;

2194 
”r_code
 = 
	`pm_wh™–i¡_g‘
(
wh™–i¡_addrs
, &
addr_út
,

2195 
wh™–i¡_œks
, &
œk_út
);

2196 
	`APP_ERROR_CHECK
(
”r_code
);

2197 
	`NRF_LOG_DEBUG
("pm_whitelist_get„eturns %d‡ddr in whitelist‡nd %d irk whitelist",

2198 
addr_út
,

2199 
œk_út
);

2202 
	`id’t™›s_£t
(
PM_PEER_ID_LIST_SKIP_NO_IRK
);

2205 
”r_code
 = 
	`bË_adv”tisšg_wh™–i¡_»¶y
(&
m_adv”tisšg
,

2206 
wh™–i¡_addrs
,

2207 
addr_út
,

2208 
wh™–i¡_œks
,

2209 
œk_út
);

2210 
	`APP_ERROR_CHECK
(
”r_code
);

2214 
BLE_ADV_EVT_PEER_ADDR_REQUEST
:

2216 
pm_³”_d©a_bÚdšg_t
 
³”_bÚdšg_d©a
;

2219 ià(
m_³”_id
 !ğ
PM_PEER_ID_INVALID
)

2222 
”r_code
 = 
	`pm_³”_d©a_bÚdšg_lßd
(
m_³”_id
, &
³”_bÚdšg_d©a
);

2223 ià(
”r_code
 !ğ
NRF_ERROR_NOT_FOUND
)

2225 
	`APP_ERROR_CHECK
(
”r_code
);

2228 
	`id’t™›s_£t
(
PM_PEER_ID_LIST_SKIP_ALL
);

2230 
bË_g­_addr_t
 * 
p_³”_addr
 = &(
³”_bÚdšg_d©a
.
³”_bË_id
.
id_addr_šfo
);

2231 
”r_code
 = 
	`bË_adv”tisšg_³”_addr_»¶y
(&
m_adv”tisšg
, 
p_³”_addr
);

2232 
	`APP_ERROR_CHECK
(
”r_code
);

2242 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\examples\ble_peripheral\ble_app_hids_mouse\pca10056\s140\armgcc\ble_app_hids_mouse_gcc_nrf52.ld

3 
	$SEARCH_DIR
(.)

4 
	`GROUP
(-
lgcc
 -
lc
 -
Êosys
)

6 
MEMORY


8 
	`FLASH
 (
rx
è: 
ORIGIN
 = 0x26000, 
LENGTH
 = 0xda000

9 
	`RAM
 (
rwx
è: 
ORIGIN
 = 0x20002210, 
LENGTH
 = 0x3ddf0

10 
	}
}

12 
	gSECTIONS


16 
	gSECTIONS


18 . = 
ALIGN
(4);

19 .
	gmem_£ùiÚ_dummy_¿m
 :

22 .
şi_sÜ‹d_cmd_±rs
 :

24 
PROVIDE
(
__¡¬t_şi_sÜ‹d_cmd_±rs
 = .);

25 
KEEP
(*(.
şi_sÜ‹d_cmd_±rs
))

26 
PROVIDE
(
__¡İ_şi_sÜ‹d_cmd_±rs
 = .);

27 } > 
	gRAM


28 .
	gfs_d©a
 :

30 
PROVIDE
(
__¡¬t_fs_d©a
 = .);

31 
KEEP
(*(.
fs_d©a
))

32 
PROVIDE
(
__¡İ_fs_d©a
 = .);

33 } > 
	gRAM


34 .
	glog_dyÇmic_d©a
 :

36 
PROVIDE
(
__¡¬t_log_dyÇmic_d©a
 = .);

37 
KEEP
(*(
SORT
(.
log_dyÇmic_d©a
*)))

38 
PROVIDE
(
__¡İ_log_dyÇmic_d©a
 = .);

39 } > 
	gRAM


40 .
	glog_f‹r_d©a
 :

42 
PROVIDE
(
__¡¬t_log_f‹r_d©a
 = .);

43 
KEEP
(*(
SORT
(.
log_f‹r_d©a
*)))

44 
PROVIDE
(
__¡İ_log_f‹r_d©a
 = .);

45 } > 
	gRAM


47 } 
INSERT
 
	gAFTER
 .
	gd©a
;

49 
	gSECTIONS


51 .
	gmem_£ùiÚ_dummy_rom
 :

54 .
sdh_soc_ob£rv”s
 :

56 
PROVIDE
(
__¡¬t_sdh_soc_ob£rv”s
 = .);

57 
KEEP
(*(
SORT
(.
sdh_soc_ob£rv”s
*)))

58 
PROVIDE
(
__¡İ_sdh_soc_ob£rv”s
 = .);

59 } > 
	gFLASH


60 .
	gpwr_mgmt_d©a
 :

62 
PROVIDE
(
__¡¬t_pwr_mgmt_d©a
 = .);

63 
KEEP
(*(
SORT
(.
pwr_mgmt_d©a
*)))

64 
PROVIDE
(
__¡İ_pwr_mgmt_d©a
 = .);

65 } > 
	gFLASH


66 .
	gsdh_bË_ob£rv”s
 :

68 
PROVIDE
(
__¡¬t_sdh_bË_ob£rv”s
 = .);

69 
KEEP
(*(
SORT
(.
sdh_bË_ob£rv”s
*)))

70 
PROVIDE
(
__¡İ_sdh_bË_ob£rv”s
 = .);

71 } > 
	gFLASH


72 .
	gsdh_¡ack_ob£rv”s
 :

74 
PROVIDE
(
__¡¬t_sdh_¡ack_ob£rv”s
 = .);

75 
KEEP
(*(
SORT
(.
sdh_¡ack_ob£rv”s
*)))

76 
PROVIDE
(
__¡İ_sdh_¡ack_ob£rv”s
 = .);

77 } > 
	gFLASH


78 .
	gsdh_»q_ob£rv”s
 :

80 
PROVIDE
(
__¡¬t_sdh_»q_ob£rv”s
 = .);

81 
KEEP
(*(
SORT
(.
sdh_»q_ob£rv”s
*)))

82 
PROVIDE
(
__¡İ_sdh_»q_ob£rv”s
 = .);

83 } > 
	gFLASH


84 .
	gsdh_¡©e_ob£rv”s
 :

86 
PROVIDE
(
__¡¬t_sdh_¡©e_ob£rv”s
 = .);

87 
KEEP
(*(
SORT
(.
sdh_¡©e_ob£rv”s
*)))

88 
PROVIDE
(
__¡İ_sdh_¡©e_ob£rv”s
 = .);

89 } > 
	gFLASH


90 .
	gÄf_queue
 :

92 
PROVIDE
(
__¡¬t_Äf_queue
 = .);

93 
KEEP
(*(.
Äf_queue
))

94 
PROVIDE
(
__¡İ_Äf_queue
 = .);

95 } > 
	gFLASH


96 .
	gÄf_b®loc
 :

98 
PROVIDE
(
__¡¬t_Äf_b®loc
 = .);

99 
KEEP
(*(.
Äf_b®loc
))

100 
PROVIDE
(
__¡İ_Äf_b®loc
 = .);

101 } > 
	gFLASH


102 .
	gşi_commªd
 :

104 
PROVIDE
(
__¡¬t_şi_commªd
 = .);

105 
KEEP
(*(.
şi_commªd
))

106 
PROVIDE
(
__¡İ_şi_commªd
 = .);

107 } > 
	gFLASH


108 .
	güy±o_d©a
 :

110 
PROVIDE
(
__¡¬t_üy±o_d©a
 = .);

111 
KEEP
(*(
SORT
(.
üy±o_d©a
*)))

112 
PROVIDE
(
__¡İ_üy±o_d©a
 = .);

113 } > 
	gFLASH


114 .
	glog_cÚ¡_d©a
 :

116 
PROVIDE
(
__¡¬t_log_cÚ¡_d©a
 = .);

117 
KEEP
(*(
SORT
(.
log_cÚ¡_d©a
*)))

118 
PROVIDE
(
__¡İ_log_cÚ¡_d©a
 = .);

119 } > 
	gFLASH


120 .
	glog_back’ds
 :

122 
PROVIDE
(
__¡¬t_log_back’ds
 = .);

123 
KEEP
(*(
SORT
(.
log_back’ds
*)))

124 
PROVIDE
(
__¡İ_log_back’ds
 = .);

125 } > 
	gFLASH


127 } 
INSERT
 
	gAFTER
 .
‹xt


129 
	gINCLUDE
 "nrf_common.ld"

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\examples\ble_peripheral\ble_app_hids_mouse\pca10056\s140\config\sdk_config.h

43 #iâdeà
SDK_CONFIG_H


44 
	#SDK_CONFIG_H


	)

46 #ifdeà
USE_APP_CONFIG


47 
	~"­p_cÚfig.h
"

55 #iâdeà
BSP_BTN_BLE_ENABLED


56 
	#BSP_BTN_BLE_ENABLED
 1

	)

68 #iâdeà
BLE_ADVERTISING_ENABLED


69 
	#BLE_ADVERTISING_ENABLED
 1

	)

75 #iâdeà
BLE_DTM_ENABLED


76 
	#BLE_DTM_ENABLED
 0

	)

82 #iâdeà
BLE_RACP_ENABLED


83 
	#BLE_RACP_ENABLED
 0

	)

88 #iâdeà
NRF_BLE_CONN_PARAMS_ENABLED


89 
	#NRF_BLE_CONN_PARAMS_ENABLED
 1

	)

94 #iâdeà
NRF_BLE_CONN_PARAMS_MAX_SLAVE_LATENCY_DEVIATION


95 
	#NRF_BLE_CONN_PARAMS_MAX_SLAVE_LATENCY_DEVIATION
 499

	)

101 #iâdeà
NRF_BLE_CONN_PARAMS_MAX_SUPERVISION_TIMEOUT_DEVIATION


102 
	#NRF_BLE_CONN_PARAMS_MAX_SUPERVISION_TIMEOUT_DEVIATION
 65535

	)

110 #iâdeà
NRF_BLE_GATT_ENABLED


111 
	#NRF_BLE_GATT_ENABLED
 1

	)

116 #iâdeà
NRF_BLE_QWR_ENABLED


117 
	#NRF_BLE_QWR_ENABLED
 1

	)

120 #iâdeà
NRF_BLE_QWR_MAX_ATTR


121 
	#NRF_BLE_QWR_MAX_ATTR
 0

	)

128 #iâdeà
PEER_MANAGER_ENABLED


129 
	#PEER_MANAGER_ENABLED
 1

	)

132 #iâdeà
PM_MAX_REGISTRANTS


133 
	#PM_MAX_REGISTRANTS
 3

	)

139 #iâdeà
PM_FLASH_BUFFERS


140 
	#PM_FLASH_BUFFERS
 4

	)

148 #iâdeà
PM_CENTRAL_ENABLED


149 
	#PM_CENTRAL_ENABLED
 0

	)

158 #iâdeà
PM_SERVICE_CHANGED_ENABLED


159 
	#PM_SERVICE_CHANGED_ENABLED
 1

	)

167 #iâdeà
PM_PEER_RANKS_ENABLED


168 
	#PM_PEER_RANKS_ENABLED
 1

	)

176 #iâdeà
PM_LESC_ENABLED


177 
	#PM_LESC_ENABLED
 0

	)

182 #iâdeà
PM_RA_PROTECTION_ENABLED


183 
	#PM_RA_PROTECTION_ENABLED
 0

	)

186 #iâdeà
PM_RA_PROTECTION_TRACKED_PEERS_NUM


187 
	#PM_RA_PROTECTION_TRACKED_PEERS_NUM
 8

	)

191 #iâdeà
PM_RA_PROTECTION_MIN_WAIT_INTERVAL


192 
	#PM_RA_PROTECTION_MIN_WAIT_INTERVAL
 4000

	)

196 #iâdeà
PM_RA_PROTECTION_MAX_WAIT_INTERVAL


197 
	#PM_RA_PROTECTION_MAX_WAIT_INTERVAL
 64000

	)

203 #iâdeà
PM_RA_PROTECTION_REWARD_PERIOD


204 
	#PM_RA_PROTECTION_REWARD_PERIOD
 10000

	)

212 #iâdeà
PM_HANDLER_SEC_DELAY_MS


213 
	#PM_HANDLER_SEC_DELAY_MS
 0

	)

227 #iâdeà
BLE_ANCS_C_ENABLED


228 
	#BLE_ANCS_C_ENABLED
 0

	)

234 #iâdeà
BLE_ANS_C_ENABLED


235 
	#BLE_ANS_C_ENABLED
 0

	)

241 #iâdeà
BLE_BAS_C_ENABLED


242 
	#BLE_BAS_C_ENABLED
 0

	)

247 #iâdeà
BLE_BAS_ENABLED


248 
	#BLE_BAS_ENABLED
 1

	)

252 #iâdeà
BLE_BAS_CONFIG_LOG_ENABLED


253 
	#BLE_BAS_CONFIG_LOG_ENABLED
 0

	)

263 #iâdeà
BLE_BAS_CONFIG_LOG_LEVEL


264 
	#BLE_BAS_CONFIG_LOG_LEVEL
 3

	)

279 #iâdeà
BLE_BAS_CONFIG_INFO_COLOR


280 
	#BLE_BAS_CONFIG_INFO_COLOR
 0

	)

295 #iâdeà
BLE_BAS_CONFIG_DEBUG_COLOR


296 
	#BLE_BAS_CONFIG_DEBUG_COLOR
 0

	)

306 #iâdeà
BLE_CSCS_ENABLED


307 
	#BLE_CSCS_ENABLED
 0

	)

313 #iâdeà
BLE_CTS_C_ENABLED


314 
	#BLE_CTS_C_ENABLED
 0

	)

320 #iâdeà
BLE_DIS_ENABLED


321 
	#BLE_DIS_ENABLED
 1

	)

327 #iâdeà
BLE_GLS_ENABLED


328 
	#BLE_GLS_ENABLED
 0

	)

334 #iâdeà
BLE_HIDS_ENABLED


335 
	#BLE_HIDS_ENABLED
 1

	)

341 #iâdeà
BLE_HRS_C_ENABLED


342 
	#BLE_HRS_C_ENABLED
 0

	)

348 #iâdeà
BLE_HRS_ENABLED


349 
	#BLE_HRS_ENABLED
 0

	)

355 #iâdeà
BLE_HTS_ENABLED


356 
	#BLE_HTS_ENABLED
 0

	)

362 #iâdeà
BLE_IAS_C_ENABLED


363 
	#BLE_IAS_C_ENABLED
 0

	)

368 #iâdeà
BLE_IAS_ENABLED


369 
	#BLE_IAS_ENABLED
 0

	)

373 #iâdeà
BLE_IAS_CONFIG_LOG_ENABLED


374 
	#BLE_IAS_CONFIG_LOG_ENABLED
 0

	)

384 #iâdeà
BLE_IAS_CONFIG_LOG_LEVEL


385 
	#BLE_IAS_CONFIG_LOG_LEVEL
 3

	)

400 #iâdeà
BLE_IAS_CONFIG_INFO_COLOR


401 
	#BLE_IAS_CONFIG_INFO_COLOR
 0

	)

416 #iâdeà
BLE_IAS_CONFIG_DEBUG_COLOR


417 
	#BLE_IAS_CONFIG_DEBUG_COLOR
 0

	)

427 #iâdeà
BLE_LBS_C_ENABLED


428 
	#BLE_LBS_C_ENABLED
 0

	)

434 #iâdeà
BLE_LBS_ENABLED


435 
	#BLE_LBS_ENABLED
 0

	)

441 #iâdeà
BLE_LLS_ENABLED


442 
	#BLE_LLS_ENABLED
 0

	)

448 #iâdeà
BLE_NUS_C_ENABLED


449 
	#BLE_NUS_C_ENABLED
 0

	)

454 #iâdeà
BLE_NUS_ENABLED


455 
	#BLE_NUS_ENABLED
 0

	)

459 #iâdeà
BLE_NUS_CONFIG_LOG_ENABLED


460 
	#BLE_NUS_CONFIG_LOG_ENABLED
 0

	)

470 #iâdeà
BLE_NUS_CONFIG_LOG_LEVEL


471 
	#BLE_NUS_CONFIG_LOG_LEVEL
 3

	)

486 #iâdeà
BLE_NUS_CONFIG_INFO_COLOR


487 
	#BLE_NUS_CONFIG_INFO_COLOR
 0

	)

502 #iâdeà
BLE_NUS_CONFIG_DEBUG_COLOR


503 
	#BLE_NUS_CONFIG_DEBUG_COLOR
 0

	)

513 #iâdeà
BLE_RSCS_C_ENABLED


514 
	#BLE_RSCS_C_ENABLED
 0

	)

520 #iâdeà
BLE_RSCS_ENABLED


521 
	#BLE_RSCS_ENABLED
 0

	)

527 #iâdeà
BLE_TPS_ENABLED


528 
	#BLE_TPS_ENABLED
 0

	)

539 #iâdeà
NRF_MPU_ENABLED


540 
	#NRF_MPU_ENABLED
 0

	)

545 #iâdeà
NRF_MPU_CLI_CMDS


546 
	#NRF_MPU_CLI_CMDS
 0

	)

553 #iâdeà
NRF_STACK_GUARD_ENABLED


554 
	#NRF_STACK_GUARD_ENABLED
 0

	)

567 #iâdeà
NRF_STACK_GUARD_CONFIG_SIZE


568 
	#NRF_STACK_GUARD_CONFIG_SIZE
 7

	)

581 #iâdeà
NRF_CRYPTO_ENABLED


582 
	#NRF_CRYPTO_ENABLED
 1

	)

594 #iâdeà
NRF_CRYPTO_ALLOCATOR


595 
	#NRF_CRYPTO_ALLOCATOR
 0

	)

602 #iâdeà
NRF_CRYPTO_BACKEND_CC310_BL_ENABLED


603 
	#NRF_CRYPTO_BACKEND_CC310_BL_ENABLED
 0

	)

608 #iâdeà
NRF_CRYPTO_BACKEND_CC310_BL_ECC_SECP224R1_ENABLED


609 
	#NRF_CRYPTO_BACKEND_CC310_BL_ECC_SECP224R1_ENABLED
 0

	)

615 #iâdeà
NRF_CRYPTO_BACKEND_CC310_BL_ECC_SECP256R1_ENABLED


616 
	#NRF_CRYPTO_BACKEND_CC310_BL_ECC_SECP256R1_ENABLED
 1

	)

624 #iâdeà
NRF_CRYPTO_BACKEND_CC310_BL_HASH_SHA256_ENABLED


625 
	#NRF_CRYPTO_BACKEND_CC310_BL_HASH_SHA256_ENABLED
 1

	)

633 #iâdeà
NRF_CRYPTO_BACKEND_CC310_BL_HASH_AUTOMATIC_RAM_BUFFER_ENABLED


634 
	#NRF_CRYPTO_BACKEND_CC310_BL_HASH_AUTOMATIC_RAM_BUFFER_ENABLED
 0

	)

640 #iâdeà
NRF_CRYPTO_BACKEND_CC310_BL_HASH_AUTOMATIC_RAM_BUFFER_SIZE


641 
	#NRF_CRYPTO_BACKEND_CC310_BL_HASH_AUTOMATIC_RAM_BUFFER_SIZE
 4096

	)

650 #iâdeà
NRF_CRYPTO_BACKEND_CC310_ENABLED


651 
	#NRF_CRYPTO_BACKEND_CC310_ENABLED
 0

	)

656 #iâdeà
NRF_CRYPTO_BACKEND_CC310_AES_CBC_ENABLED


657 
	#NRF_CRYPTO_BACKEND_CC310_AES_CBC_ENABLED
 1

	)

663 #iâdeà
NRF_CRYPTO_BACKEND_CC310_AES_CTR_ENABLED


664 
	#NRF_CRYPTO_BACKEND_CC310_AES_CTR_ENABLED
 1

	)

670 #iâdeà
NRF_CRYPTO_BACKEND_CC310_AES_ECB_ENABLED


671 
	#NRF_CRYPTO_BACKEND_CC310_AES_ECB_ENABLED
 1

	)

677 #iâdeà
NRF_CRYPTO_BACKEND_CC310_AES_CBC_MAC_ENABLED


678 
	#NRF_CRYPTO_BACKEND_CC310_AES_CBC_MAC_ENABLED
 1

	)

684 #iâdeà
NRF_CRYPTO_BACKEND_CC310_AES_CMAC_ENABLED


685 
	#NRF_CRYPTO_BACKEND_CC310_AES_CMAC_ENABLED
 1

	)

691 #iâdeà
NRF_CRYPTO_BACKEND_CC310_AES_CCM_ENABLED


692 
	#NRF_CRYPTO_BACKEND_CC310_AES_CCM_ENABLED
 1

	)

698 #iâdeà
NRF_CRYPTO_BACKEND_CC310_AES_CCM_STAR_ENABLED


699 
	#NRF_CRYPTO_BACKEND_CC310_AES_CCM_STAR_ENABLED
 1

	)

705 #iâdeà
NRF_CRYPTO_BACKEND_CC310_CHACHA_POLY_ENABLED


706 
	#NRF_CRYPTO_BACKEND_CC310_CHACHA_POLY_ENABLED
 1

	)

712 #iâdeà
NRF_CRYPTO_BACKEND_CC310_ECC_SECP160R1_ENABLED


713 
	#NRF_CRYPTO_BACKEND_CC310_ECC_SECP160R1_ENABLED
 1

	)

719 #iâdeà
NRF_CRYPTO_BACKEND_CC310_ECC_SECP160R2_ENABLED


720 
	#NRF_CRYPTO_BACKEND_CC310_ECC_SECP160R2_ENABLED
 1

	)

726 #iâdeà
NRF_CRYPTO_BACKEND_CC310_ECC_SECP192R1_ENABLED


727 
	#NRF_CRYPTO_BACKEND_CC310_ECC_SECP192R1_ENABLED
 1

	)

733 #iâdeà
NRF_CRYPTO_BACKEND_CC310_ECC_SECP224R1_ENABLED


734 
	#NRF_CRYPTO_BACKEND_CC310_ECC_SECP224R1_ENABLED
 1

	)

740 #iâdeà
NRF_CRYPTO_BACKEND_CC310_ECC_SECP256R1_ENABLED


741 
	#NRF_CRYPTO_BACKEND_CC310_ECC_SECP256R1_ENABLED
 1

	)

747 #iâdeà
NRF_CRYPTO_BACKEND_CC310_ECC_SECP384R1_ENABLED


748 
	#NRF_CRYPTO_BACKEND_CC310_ECC_SECP384R1_ENABLED
 1

	)

754 #iâdeà
NRF_CRYPTO_BACKEND_CC310_ECC_SECP521R1_ENABLED


755 
	#NRF_CRYPTO_BACKEND_CC310_ECC_SECP521R1_ENABLED
 1

	)

761 #iâdeà
NRF_CRYPTO_BACKEND_CC310_ECC_SECP160K1_ENABLED


762 
	#NRF_CRYPTO_BACKEND_CC310_ECC_SECP160K1_ENABLED
 1

	)

768 #iâdeà
NRF_CRYPTO_BACKEND_CC310_ECC_SECP192K1_ENABLED


769 
	#NRF_CRYPTO_BACKEND_CC310_ECC_SECP192K1_ENABLED
 1

	)

775 #iâdeà
NRF_CRYPTO_BACKEND_CC310_ECC_SECP224K1_ENABLED


776 
	#NRF_CRYPTO_BACKEND_CC310_ECC_SECP224K1_ENABLED
 1

	)

782 #iâdeà
NRF_CRYPTO_BACKEND_CC310_ECC_SECP256K1_ENABLED


783 
	#NRF_CRYPTO_BACKEND_CC310_ECC_SECP256K1_ENABLED
 1

	)

789 #iâdeà
NRF_CRYPTO_BACKEND_CC310_ECC_CURVE25519_ENABLED


790 
	#NRF_CRYPTO_BACKEND_CC310_ECC_CURVE25519_ENABLED
 1

	)

796 #iâdeà
NRF_CRYPTO_BACKEND_CC310_ECC_ED25519_ENABLED


797 
	#NRF_CRYPTO_BACKEND_CC310_ECC_ED25519_ENABLED
 1

	)

805 #iâdeà
NRF_CRYPTO_BACKEND_CC310_HASH_SHA256_ENABLED


806 
	#NRF_CRYPTO_BACKEND_CC310_HASH_SHA256_ENABLED
 1

	)

814 #iâdeà
NRF_CRYPTO_BACKEND_CC310_HASH_SHA512_ENABLED


815 
	#NRF_CRYPTO_BACKEND_CC310_HASH_SHA512_ENABLED
 1

	)

823 #iâdeà
NRF_CRYPTO_BACKEND_CC310_HMAC_SHA256_ENABLED


824 
	#NRF_CRYPTO_BACKEND_CC310_HMAC_SHA256_ENABLED
 1

	)

832 #iâdeà
NRF_CRYPTO_BACKEND_CC310_HMAC_SHA512_ENABLED


833 
	#NRF_CRYPTO_BACKEND_CC310_HMAC_SHA512_ENABLED
 1

	)

839 #iâdeà
NRF_CRYPTO_BACKEND_CC310_RNG_ENABLED


840 
	#NRF_CRYPTO_BACKEND_CC310_RNG_ENABLED
 1

	)

847 #iâdeà
NRF_CRYPTO_BACKEND_CIFRA_ENABLED


848 
	#NRF_CRYPTO_BACKEND_CIFRA_ENABLED
 0

	)

853 #iâdeà
NRF_CRYPTO_BACKEND_CIFRA_AES_EAX_ENABLED


854 
	#NRF_CRYPTO_BACKEND_CIFRA_AES_EAX_ENABLED
 1

	)

861 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_ENABLED


862 
	#NRF_CRYPTO_BACKEND_MBEDTLS_ENABLED
 0

	)

867 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_AES_CBC_ENABLED


868 
	#NRF_CRYPTO_BACKEND_MBEDTLS_AES_CBC_ENABLED
 1

	)

874 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_AES_CTR_ENABLED


875 
	#NRF_CRYPTO_BACKEND_MBEDTLS_AES_CTR_ENABLED
 1

	)

881 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_AES_CFB_ENABLED


882 
	#NRF_CRYPTO_BACKEND_MBEDTLS_AES_CFB_ENABLED
 1

	)

888 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_AES_ECB_ENABLED


889 
	#NRF_CRYPTO_BACKEND_MBEDTLS_AES_ECB_ENABLED
 1

	)

895 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_AES_CBC_MAC_ENABLED


896 
	#NRF_CRYPTO_BACKEND_MBEDTLS_AES_CBC_MAC_ENABLED
 1

	)

902 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_AES_CMAC_ENABLED


903 
	#NRF_CRYPTO_BACKEND_MBEDTLS_AES_CMAC_ENABLED
 1

	)

909 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_AES_CCM_ENABLED


910 
	#NRF_CRYPTO_BACKEND_MBEDTLS_AES_CCM_ENABLED
 1

	)

916 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_AES_GCM_ENABLED


917 
	#NRF_CRYPTO_BACKEND_MBEDTLS_AES_GCM_ENABLED
 1

	)

925 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_ECC_SECP192R1_ENABLED


926 
	#NRF_CRYPTO_BACKEND_MBEDTLS_ECC_SECP192R1_ENABLED
 1

	)

934 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_ECC_SECP224R1_ENABLED


935 
	#NRF_CRYPTO_BACKEND_MBEDTLS_ECC_SECP224R1_ENABLED
 1

	)

943 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_ECC_SECP256R1_ENABLED


944 
	#NRF_CRYPTO_BACKEND_MBEDTLS_ECC_SECP256R1_ENABLED
 1

	)

952 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_ECC_SECP384R1_ENABLED


953 
	#NRF_CRYPTO_BACKEND_MBEDTLS_ECC_SECP384R1_ENABLED
 1

	)

961 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_ECC_SECP521R1_ENABLED


962 
	#NRF_CRYPTO_BACKEND_MBEDTLS_ECC_SECP521R1_ENABLED
 1

	)

970 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_ECC_SECP192K1_ENABLED


971 
	#NRF_CRYPTO_BACKEND_MBEDTLS_ECC_SECP192K1_ENABLED
 1

	)

979 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_ECC_SECP224K1_ENABLED


980 
	#NRF_CRYPTO_BACKEND_MBEDTLS_ECC_SECP224K1_ENABLED
 1

	)

988 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_ECC_SECP256K1_ENABLED


989 
	#NRF_CRYPTO_BACKEND_MBEDTLS_ECC_SECP256K1_ENABLED
 1

	)

997 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_ECC_BP256R1_ENABLED


998 
	#NRF_CRYPTO_BACKEND_MBEDTLS_ECC_BP256R1_ENABLED
 1

	)

1006 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_ECC_BP384R1_ENABLED


1007 
	#NRF_CRYPTO_BACKEND_MBEDTLS_ECC_BP384R1_ENABLED
 1

	)

1015 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_ECC_BP512R1_ENABLED


1016 
	#NRF_CRYPTO_BACKEND_MBEDTLS_ECC_BP512R1_ENABLED
 1

	)

1024 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_ECC_CURVE25519_ENABLED


1025 
	#NRF_CRYPTO_BACKEND_MBEDTLS_ECC_CURVE25519_ENABLED
 1

	)

1033 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_HASH_SHA256_ENABLED


1034 
	#NRF_CRYPTO_BACKEND_MBEDTLS_HASH_SHA256_ENABLED
 1

	)

1042 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_HASH_SHA512_ENABLED


1043 
	#NRF_CRYPTO_BACKEND_MBEDTLS_HASH_SHA512_ENABLED
 1

	)

1051 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_HMAC_SHA256_ENABLED


1052 
	#NRF_CRYPTO_BACKEND_MBEDTLS_HMAC_SHA256_ENABLED
 1

	)

1060 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_HMAC_SHA512_ENABLED


1061 
	#NRF_CRYPTO_BACKEND_MBEDTLS_HMAC_SHA512_ENABLED
 1

	)

1068 #iâdeà
NRF_CRYPTO_BACKEND_MICRO_ECC_ENABLED


1069 
	#NRF_CRYPTO_BACKEND_MICRO_ECC_ENABLED
 0

	)

1076 #iâdeà
NRF_CRYPTO_BACKEND_MICRO_ECC_ECC_SECP192R1_ENABLED


1077 
	#NRF_CRYPTO_BACKEND_MICRO_ECC_ECC_SECP192R1_ENABLED
 1

	)

1085 #iâdeà
NRF_CRYPTO_BACKEND_MICRO_ECC_ECC_SECP224R1_ENABLED


1086 
	#NRF_CRYPTO_BACKEND_MICRO_ECC_ECC_SECP224R1_ENABLED
 1

	)

1094 #iâdeà
NRF_CRYPTO_BACKEND_MICRO_ECC_ECC_SECP256R1_ENABLED


1095 
	#NRF_CRYPTO_BACKEND_MICRO_ECC_ECC_SECP256R1_ENABLED
 1

	)

1103 #iâdeà
NRF_CRYPTO_BACKEND_MICRO_ECC_ECC_SECP256K1_ENABLED


1104 
	#NRF_CRYPTO_BACKEND_MICRO_ECC_ECC_SECP256K1_ENABLED
 1

	)

1113 #iâdeà
NRF_CRYPTO_BACKEND_NRF_HW_RNG_ENABLED


1114 
	#NRF_CRYPTO_BACKEND_NRF_HW_RNG_ENABLED
 0

	)

1121 #iâdeà
NRF_CRYPTO_BACKEND_NRF_HW_RNG_MBEDTLS_CTR_DRBG_ENABLED


1122 
	#NRF_CRYPTO_BACKEND_NRF_HW_RNG_MBEDTLS_CTR_DRBG_ENABLED
 1

	)

1131 #iâdeà
NRF_CRYPTO_BACKEND_NRF_SW_ENABLED


1132 
	#NRF_CRYPTO_BACKEND_NRF_SW_ENABLED
 0

	)

1139 #iâdeà
NRF_CRYPTO_BACKEND_NRF_SW_HASH_SHA256_ENABLED


1140 
	#NRF_CRYPTO_BACKEND_NRF_SW_HASH_SHA256_ENABLED
 1

	)

1149 #iâdeà
NRF_CRYPTO_BACKEND_OBERON_ENABLED


1150 
	#NRF_CRYPTO_BACKEND_OBERON_ENABLED
 0

	)

1155 #iâdeà
NRF_CRYPTO_BACKEND_OBERON_CHACHA_POLY_ENABLED


1156 
	#NRF_CRYPTO_BACKEND_OBERON_CHACHA_POLY_ENABLED
 1

	)

1164 #iâdeà
NRF_CRYPTO_BACKEND_OBERON_ECC_SECP256R1_ENABLED


1165 
	#NRF_CRYPTO_BACKEND_OBERON_ECC_SECP256R1_ENABLED
 1

	)

1173 #iâdeà
NRF_CRYPTO_BACKEND_OBERON_ECC_CURVE25519_ENABLED


1174 
	#NRF_CRYPTO_BACKEND_OBERON_ECC_CURVE25519_ENABLED
 1

	)

1182 #iâdeà
NRF_CRYPTO_BACKEND_OBERON_ECC_ED25519_ENABLED


1183 
	#NRF_CRYPTO_BACKEND_OBERON_ECC_ED25519_ENABLED
 1

	)

1191 #iâdeà
NRF_CRYPTO_BACKEND_OBERON_HASH_SHA256_ENABLED


1192 
	#NRF_CRYPTO_BACKEND_OBERON_HASH_SHA256_ENABLED
 1

	)

1200 #iâdeà
NRF_CRYPTO_BACKEND_OBERON_HASH_SHA512_ENABLED


1201 
	#NRF_CRYPTO_BACKEND_OBERON_HASH_SHA512_ENABLED
 1

	)

1209 #iâdeà
NRF_CRYPTO_BACKEND_OBERON_HMAC_SHA256_ENABLED


1210 
	#NRF_CRYPTO_BACKEND_OBERON_HMAC_SHA256_ENABLED
 1

	)

1218 #iâdeà
NRF_CRYPTO_BACKEND_OBERON_HMAC_SHA512_ENABLED


1219 
	#NRF_CRYPTO_BACKEND_OBERON_HMAC_SHA512_ENABLED
 1

	)

1229 #iâdeà
NRF_CRYPTO_CURVE25519_BIG_ENDIAN_ENABLED


1230 
	#NRF_CRYPTO_CURVE25519_BIG_ENDIAN_ENABLED
 0

	)

1247 #iâdeà
BLE_DFU_ENABLED


1248 
	#BLE_DFU_ENABLED
 0

	)

1254 #iâdeà
NRF_DFU_BLE_BUTTONLESS_SUPPORTS_BONDS


1255 
	#NRF_DFU_BLE_BUTTONLESS_SUPPORTS_BONDS
 0

	)

1269 #iâdeà
COMP_ENABLED


1270 
	#COMP_ENABLED
 0

	)

1280 #iâdeà
COMP_CONFIG_REF


1281 
	#COMP_CONFIG_REF
 1

	)

1289 #iâdeà
COMP_CONFIG_MAIN_MODE


1290 
	#COMP_CONFIG_MAIN_MODE
 0

	)

1299 #iâdeà
COMP_CONFIG_SPEED_MODE


1300 
	#COMP_CONFIG_SPEED_MODE
 2

	)

1308 #iâdeà
COMP_CONFIG_HYST


1309 
	#COMP_CONFIG_HYST
 0

	)

1319 #iâdeà
COMP_CONFIG_ISOURCE


1320 
	#COMP_CONFIG_ISOURCE
 0

	)

1334 #iâdeà
COMP_CONFIG_INPUT


1335 
	#COMP_CONFIG_INPUT
 0

	)

1351 #iâdeà
COMP_CONFIG_IRQ_PRIORITY


1352 
	#COMP_CONFIG_IRQ_PRIORITY
 6

	)

1360 #iâdeà
EGU_ENABLED


1361 
	#EGU_ENABLED
 0

	)

1366 #iâdeà
GPIOTE_ENABLED


1367 
	#GPIOTE_ENABLED
 1

	)

1370 #iâdeà
GPIOTE_CONFIG_NUM_OF_LOW_POWER_EVENTS


1371 
	#GPIOTE_CONFIG_NUM_OF_LOW_POWER_EVENTS
 4

	)

1387 #iâdeà
GPIOTE_CONFIG_IRQ_PRIORITY


1388 
	#GPIOTE_CONFIG_IRQ_PRIORITY
 6

	)

1395 #iâdeà
I2S_ENABLED


1396 
	#I2S_ENABLED
 0

	)

1401 #iâdeà
I2S_CONFIG_SCK_PIN


1402 
	#I2S_CONFIG_SCK_PIN
 31

	)

1408 #iâdeà
I2S_CONFIG_LRCK_PIN


1409 
	#I2S_CONFIG_LRCK_PIN
 30

	)

1413 #iâdeà
I2S_CONFIG_MCK_PIN


1414 
	#I2S_CONFIG_MCK_PIN
 255

	)

1420 #iâdeà
I2S_CONFIG_SDOUT_PIN


1421 
	#I2S_CONFIG_SDOUT_PIN
 29

	)

1427 #iâdeà
I2S_CONFIG_SDIN_PIN


1428 
	#I2S_CONFIG_SDIN_PIN
 28

	)

1436 #iâdeà
I2S_CONFIG_MASTER


1437 
	#I2S_CONFIG_MASTER
 0

	)

1445 #iâdeà
I2S_CONFIG_FORMAT


1446 
	#I2S_CONFIG_FORMAT
 0

	)

1454 #iâdeà
I2S_CONFIG_ALIGN


1455 
	#I2S_CONFIG_ALIGN
 0

	)

1464 #iâdeà
I2S_CONFIG_SWIDTH


1465 
	#I2S_CONFIG_SWIDTH
 1

	)

1474 #iâdeà
I2S_CONFIG_CHANNELS


1475 
	#I2S_CONFIG_CHANNELS
 1

	)

1500 #iâdeà
I2S_CONFIG_MCK_SETUP


1501 
	#I2S_CONFIG_MCK_SETUP
 536870912

	)

1516 #iâdeà
I2S_CONFIG_RATIO


1517 
	#I2S_CONFIG_RATIO
 2000

	)

1533 #iâdeà
I2S_CONFIG_IRQ_PRIORITY


1534 
	#I2S_CONFIG_IRQ_PRIORITY
 6

	)

1539 #iâdeà
I2S_CONFIG_LOG_ENABLED


1540 
	#I2S_CONFIG_LOG_ENABLED
 0

	)

1550 #iâdeà
I2S_CONFIG_LOG_LEVEL


1551 
	#I2S_CONFIG_LOG_LEVEL
 3

	)

1566 #iâdeà
I2S_CONFIG_INFO_COLOR


1567 
	#I2S_CONFIG_INFO_COLOR
 0

	)

1582 #iâdeà
I2S_CONFIG_DEBUG_COLOR


1583 
	#I2S_CONFIG_DEBUG_COLOR
 0

	)

1592 #iâdeà
LPCOMP_ENABLED


1593 
	#LPCOMP_ENABLED
 0

	)

1615 #iâdeà
LPCOMP_CONFIG_REFERENCE


1616 
	#LPCOMP_CONFIG_REFERENCE
 3

	)

1625 #iâdeà
LPCOMP_CONFIG_DETECTION


1626 
	#LPCOMP_CONFIG_DETECTION
 2

	)

1640 #iâdeà
LPCOMP_CONFIG_INPUT


1641 
	#LPCOMP_CONFIG_INPUT
 0

	)

1647 #iâdeà
LPCOMP_CONFIG_HYST


1648 
	#LPCOMP_CONFIG_HYST
 0

	)

1664 #iâdeà
LPCOMP_CONFIG_IRQ_PRIORITY


1665 
	#LPCOMP_CONFIG_IRQ_PRIORITY
 6

	)

1672 #iâdeà
NRFX_CLOCK_ENABLED


1673 
	#NRFX_CLOCK_ENABLED
 1

	)

1683 #iâdeà
NRFX_CLOCK_CONFIG_LF_SRC


1684 
	#NRFX_CLOCK_CONFIG_LF_SRC
 1

	)

1698 #iâdeà
NRFX_CLOCK_CONFIG_IRQ_PRIORITY


1699 
	#NRFX_CLOCK_CONFIG_IRQ_PRIORITY
 6

	)

1704 #iâdeà
NRFX_CLOCK_CONFIG_LOG_ENABLED


1705 
	#NRFX_CLOCK_CONFIG_LOG_ENABLED
 0

	)

1715 #iâdeà
NRFX_CLOCK_CONFIG_LOG_LEVEL


1716 
	#NRFX_CLOCK_CONFIG_LOG_LEVEL
 3

	)

1731 #iâdeà
NRFX_CLOCK_CONFIG_INFO_COLOR


1732 
	#NRFX_CLOCK_CONFIG_INFO_COLOR
 0

	)

1747 #iâdeà
NRFX_CLOCK_CONFIG_DEBUG_COLOR


1748 
	#NRFX_CLOCK_CONFIG_DEBUG_COLOR
 0

	)

1757 #iâdeà
NRFX_COMP_ENABLED


1758 
	#NRFX_COMP_ENABLED
 0

	)

1768 #iâdeà
NRFX_COMP_CONFIG_REF


1769 
	#NRFX_COMP_CONFIG_REF
 1

	)

1777 #iâdeà
NRFX_COMP_CONFIG_MAIN_MODE


1778 
	#NRFX_COMP_CONFIG_MAIN_MODE
 0

	)

1787 #iâdeà
NRFX_COMP_CONFIG_SPEED_MODE


1788 
	#NRFX_COMP_CONFIG_SPEED_MODE
 2

	)

1796 #iâdeà
NRFX_COMP_CONFIG_HYST


1797 
	#NRFX_COMP_CONFIG_HYST
 0

	)

1807 #iâdeà
NRFX_COMP_CONFIG_ISOURCE


1808 
	#NRFX_COMP_CONFIG_ISOURCE
 0

	)

1822 #iâdeà
NRFX_COMP_CONFIG_INPUT


1823 
	#NRFX_COMP_CONFIG_INPUT
 0

	)

1837 #iâdeà
NRFX_COMP_CONFIG_IRQ_PRIORITY


1838 
	#NRFX_COMP_CONFIG_IRQ_PRIORITY
 6

	)

1843 #iâdeà
NRFX_COMP_CONFIG_LOG_ENABLED


1844 
	#NRFX_COMP_CONFIG_LOG_ENABLED
 0

	)

1854 #iâdeà
NRFX_COMP_CONFIG_LOG_LEVEL


1855 
	#NRFX_COMP_CONFIG_LOG_LEVEL
 3

	)

1870 #iâdeà
NRFX_COMP_CONFIG_INFO_COLOR


1871 
	#NRFX_COMP_CONFIG_INFO_COLOR
 0

	)

1886 #iâdeà
NRFX_COMP_CONFIG_DEBUG_COLOR


1887 
	#NRFX_COMP_CONFIG_DEBUG_COLOR
 0

	)

1896 #iâdeà
NRFX_GPIOTE_ENABLED


1897 
	#NRFX_GPIOTE_ENABLED
 1

	)

1900 #iâdeà
NRFX_GPIOTE_CONFIG_NUM_OF_LOW_POWER_EVENTS


1901 
	#NRFX_GPIOTE_CONFIG_NUM_OF_LOW_POWER_EVENTS
 1

	)

1915 #iâdeà
NRFX_GPIOTE_CONFIG_IRQ_PRIORITY


1916 
	#NRFX_GPIOTE_CONFIG_IRQ_PRIORITY
 6

	)

1921 #iâdeà
NRFX_GPIOTE_CONFIG_LOG_ENABLED


1922 
	#NRFX_GPIOTE_CONFIG_LOG_ENABLED
 0

	)

1932 #iâdeà
NRFX_GPIOTE_CONFIG_LOG_LEVEL


1933 
	#NRFX_GPIOTE_CONFIG_LOG_LEVEL
 3

	)

1948 #iâdeà
NRFX_GPIOTE_CONFIG_INFO_COLOR


1949 
	#NRFX_GPIOTE_CONFIG_INFO_COLOR
 0

	)

1964 #iâdeà
NRFX_GPIOTE_CONFIG_DEBUG_COLOR


1965 
	#NRFX_GPIOTE_CONFIG_DEBUG_COLOR
 0

	)

1974 #iâdeà
NRFX_I2S_ENABLED


1975 
	#NRFX_I2S_ENABLED
 0

	)

1980 #iâdeà
NRFX_I2S_CONFIG_SCK_PIN


1981 
	#NRFX_I2S_CONFIG_SCK_PIN
 31

	)

1987 #iâdeà
NRFX_I2S_CONFIG_LRCK_PIN


1988 
	#NRFX_I2S_CONFIG_LRCK_PIN
 30

	)

1992 #iâdeà
NRFX_I2S_CONFIG_MCK_PIN


1993 
	#NRFX_I2S_CONFIG_MCK_PIN
 255

	)

1999 #iâdeà
NRFX_I2S_CONFIG_SDOUT_PIN


2000 
	#NRFX_I2S_CONFIG_SDOUT_PIN
 29

	)

2006 #iâdeà
NRFX_I2S_CONFIG_SDIN_PIN


2007 
	#NRFX_I2S_CONFIG_SDIN_PIN
 28

	)

2015 #iâdeà
NRFX_I2S_CONFIG_MASTER


2016 
	#NRFX_I2S_CONFIG_MASTER
 0

	)

2024 #iâdeà
NRFX_I2S_CONFIG_FORMAT


2025 
	#NRFX_I2S_CONFIG_FORMAT
 0

	)

2033 #iâdeà
NRFX_I2S_CONFIG_ALIGN


2034 
	#NRFX_I2S_CONFIG_ALIGN
 0

	)

2043 #iâdeà
NRFX_I2S_CONFIG_SWIDTH


2044 
	#NRFX_I2S_CONFIG_SWIDTH
 1

	)

2053 #iâdeà
NRFX_I2S_CONFIG_CHANNELS


2054 
	#NRFX_I2S_CONFIG_CHANNELS
 1

	)

2079 #iâdeà
NRFX_I2S_CONFIG_MCK_SETUP


2080 
	#NRFX_I2S_CONFIG_MCK_SETUP
 536870912

	)

2095 #iâdeà
NRFX_I2S_CONFIG_RATIO


2096 
	#NRFX_I2S_CONFIG_RATIO
 2000

	)

2110 #iâdeà
NRFX_I2S_CONFIG_IRQ_PRIORITY


2111 
	#NRFX_I2S_CONFIG_IRQ_PRIORITY
 6

	)

2116 #iâdeà
NRFX_I2S_CONFIG_LOG_ENABLED


2117 
	#NRFX_I2S_CONFIG_LOG_ENABLED
 0

	)

2127 #iâdeà
NRFX_I2S_CONFIG_LOG_LEVEL


2128 
	#NRFX_I2S_CONFIG_LOG_LEVEL
 3

	)

2143 #iâdeà
NRFX_I2S_CONFIG_INFO_COLOR


2144 
	#NRFX_I2S_CONFIG_INFO_COLOR
 0

	)

2159 #iâdeà
NRFX_I2S_CONFIG_DEBUG_COLOR


2160 
	#NRFX_I2S_CONFIG_DEBUG_COLOR
 0

	)

2169 #iâdeà
NRFX_LPCOMP_ENABLED


2170 
	#NRFX_LPCOMP_ENABLED
 0

	)

2192 #iâdeà
NRFX_LPCOMP_CONFIG_REFERENCE


2193 
	#NRFX_LPCOMP_CONFIG_REFERENCE
 3

	)

2202 #iâdeà
NRFX_LPCOMP_CONFIG_DETECTION


2203 
	#NRFX_LPCOMP_CONFIG_DETECTION
 2

	)

2217 #iâdeà
NRFX_LPCOMP_CONFIG_INPUT


2218 
	#NRFX_LPCOMP_CONFIG_INPUT
 0

	)

2224 #iâdeà
NRFX_LPCOMP_CONFIG_HYST


2225 
	#NRFX_LPCOMP_CONFIG_HYST
 0

	)

2239 #iâdeà
NRFX_LPCOMP_CONFIG_IRQ_PRIORITY


2240 
	#NRFX_LPCOMP_CONFIG_IRQ_PRIORITY
 6

	)

2245 #iâdeà
NRFX_LPCOMP_CONFIG_LOG_ENABLED


2246 
	#NRFX_LPCOMP_CONFIG_LOG_ENABLED
 0

	)

2256 #iâdeà
NRFX_LPCOMP_CONFIG_LOG_LEVEL


2257 
	#NRFX_LPCOMP_CONFIG_LOG_LEVEL
 3

	)

2272 #iâdeà
NRFX_LPCOMP_CONFIG_INFO_COLOR


2273 
	#NRFX_LPCOMP_CONFIG_INFO_COLOR
 0

	)

2288 #iâdeà
NRFX_LPCOMP_CONFIG_DEBUG_COLOR


2289 
	#NRFX_LPCOMP_CONFIG_DEBUG_COLOR
 0

	)

2298 #iâdeà
NRFX_PDM_ENABLED


2299 
	#NRFX_PDM_ENABLED
 0

	)

2306 #iâdeà
NRFX_PDM_CONFIG_MODE


2307 
	#NRFX_PDM_CONFIG_MODE
 1

	)

2315 #iâdeà
NRFX_PDM_CONFIG_EDGE


2316 
	#NRFX_PDM_CONFIG_EDGE
 0

	)

2325 #iâdeà
NRFX_PDM_CONFIG_CLOCK_FREQ


2326 
	#NRFX_PDM_CONFIG_CLOCK_FREQ
 138412032

	)

2340 #iâdeà
NRFX_PDM_CONFIG_IRQ_PRIORITY


2341 
	#NRFX_PDM_CONFIG_IRQ_PRIORITY
 6

	)

2346 #iâdeà
NRFX_PDM_CONFIG_LOG_ENABLED


2347 
	#NRFX_PDM_CONFIG_LOG_ENABLED
 0

	)

2357 #iâdeà
NRFX_PDM_CONFIG_LOG_LEVEL


2358 
	#NRFX_PDM_CONFIG_LOG_LEVEL
 3

	)

2373 #iâdeà
NRFX_PDM_CONFIG_INFO_COLOR


2374 
	#NRFX_PDM_CONFIG_INFO_COLOR
 0

	)

2389 #iâdeà
NRFX_PDM_CONFIG_DEBUG_COLOR


2390 
	#NRFX_PDM_CONFIG_DEBUG_COLOR
 0

	)

2399 #iâdeà
NRFX_POWER_ENABLED


2400 
	#NRFX_POWER_ENABLED
 0

	)

2413 #iâdeà
NRFX_POWER_CONFIG_IRQ_PRIORITY


2414 
	#NRFX_POWER_CONFIG_IRQ_PRIORITY
 6

	)

2422 #iâdeà
NRFX_POWER_CONFIG_DEFAULT_DCDCEN


2423 
	#NRFX_POWER_CONFIG_DEFAULT_DCDCEN
 0

	)

2431 #iâdeà
NRFX_POWER_CONFIG_DEFAULT_DCDCENHV


2432 
	#NRFX_POWER_CONFIG_DEFAULT_DCDCENHV
 0

	)

2439 #iâdeà
NRFX_PPI_ENABLED


2440 
	#NRFX_PPI_ENABLED
 0

	)

2444 #iâdeà
NRFX_PPI_CONFIG_LOG_ENABLED


2445 
	#NRFX_PPI_CONFIG_LOG_ENABLED
 0

	)

2455 #iâdeà
NRFX_PPI_CONFIG_LOG_LEVEL


2456 
	#NRFX_PPI_CONFIG_LOG_LEVEL
 3

	)

2471 #iâdeà
NRFX_PPI_CONFIG_INFO_COLOR


2472 
	#NRFX_PPI_CONFIG_INFO_COLOR
 0

	)

2487 #iâdeà
NRFX_PPI_CONFIG_DEBUG_COLOR


2488 
	#NRFX_PPI_CONFIG_DEBUG_COLOR
 0

	)

2497 #iâdeà
NRFX_PRS_ENABLED


2498 
	#NRFX_PRS_ENABLED
 1

	)

2503 #iâdeà
NRFX_PRS_BOX_0_ENABLED


2504 
	#NRFX_PRS_BOX_0_ENABLED
 0

	)

2510 #iâdeà
NRFX_PRS_BOX_1_ENABLED


2511 
	#NRFX_PRS_BOX_1_ENABLED
 0

	)

2517 #iâdeà
NRFX_PRS_BOX_2_ENABLED


2518 
	#NRFX_PRS_BOX_2_ENABLED
 0

	)

2524 #iâdeà
NRFX_PRS_BOX_3_ENABLED


2525 
	#NRFX_PRS_BOX_3_ENABLED
 0

	)

2531 #iâdeà
NRFX_PRS_BOX_4_ENABLED


2532 
	#NRFX_PRS_BOX_4_ENABLED
 1

	)

2537 #iâdeà
NRFX_PRS_CONFIG_LOG_ENABLED


2538 
	#NRFX_PRS_CONFIG_LOG_ENABLED
 0

	)

2548 #iâdeà
NRFX_PRS_CONFIG_LOG_LEVEL


2549 
	#NRFX_PRS_CONFIG_LOG_LEVEL
 3

	)

2564 #iâdeà
NRFX_PRS_CONFIG_INFO_COLOR


2565 
	#NRFX_PRS_CONFIG_INFO_COLOR
 0

	)

2580 #iâdeà
NRFX_PRS_CONFIG_DEBUG_COLOR


2581 
	#NRFX_PRS_CONFIG_DEBUG_COLOR
 0

	)

2590 #iâdeà
NRFX_PWM_ENABLED


2591 
	#NRFX_PWM_ENABLED
 0

	)

2596 #iâdeà
NRFX_PWM0_ENABLED


2597 
	#NRFX_PWM0_ENABLED
 0

	)

2603 #iâdeà
NRFX_PWM1_ENABLED


2604 
	#NRFX_PWM1_ENABLED
 0

	)

2610 #iâdeà
NRFX_PWM2_ENABLED


2611 
	#NRFX_PWM2_ENABLED
 0

	)

2617 #iâdeà
NRFX_PWM3_ENABLED


2618 
	#NRFX_PWM3_ENABLED
 0

	)

2624 #iâdeà
NRFX_PWM_DEFAULT_CONFIG_OUT0_PIN


2625 
	#NRFX_PWM_DEFAULT_CONFIG_OUT0_PIN
 31

	)

2631 #iâdeà
NRFX_PWM_DEFAULT_CONFIG_OUT1_PIN


2632 
	#NRFX_PWM_DEFAULT_CONFIG_OUT1_PIN
 31

	)

2638 #iâdeà
NRFX_PWM_DEFAULT_CONFIG_OUT2_PIN


2639 
	#NRFX_PWM_DEFAULT_CONFIG_OUT2_PIN
 31

	)

2645 #iâdeà
NRFX_PWM_DEFAULT_CONFIG_OUT3_PIN


2646 
	#NRFX_PWM_DEFAULT_CONFIG_OUT3_PIN
 31

	)

2660 #iâdeà
NRFX_PWM_DEFAULT_CONFIG_BASE_CLOCK


2661 
	#NRFX_PWM_DEFAULT_CONFIG_BASE_CLOCK
 4

	)

2669 #iâdeà
NRFX_PWM_DEFAULT_CONFIG_COUNT_MODE


2670 
	#NRFX_PWM_DEFAULT_CONFIG_COUNT_MODE
 0

	)

2674 #iâdeà
NRFX_PWM_DEFAULT_CONFIG_TOP_VALUE


2675 
	#NRFX_PWM_DEFAULT_CONFIG_TOP_VALUE
 1000

	)

2685 #iâdeà
NRFX_PWM_DEFAULT_CONFIG_LOAD_MODE


2686 
	#NRFX_PWM_DEFAULT_CONFIG_LOAD_MODE
 0

	)

2694 #iâdeà
NRFX_PWM_DEFAULT_CONFIG_STEP_MODE


2695 
	#NRFX_PWM_DEFAULT_CONFIG_STEP_MODE
 0

	)

2709 #iâdeà
NRFX_PWM_DEFAULT_CONFIG_IRQ_PRIORITY


2710 
	#NRFX_PWM_DEFAULT_CONFIG_IRQ_PRIORITY
 6

	)

2715 #iâdeà
NRFX_PWM_CONFIG_LOG_ENABLED


2716 
	#NRFX_PWM_CONFIG_LOG_ENABLED
 0

	)

2726 #iâdeà
NRFX_PWM_CONFIG_LOG_LEVEL


2727 
	#NRFX_PWM_CONFIG_LOG_LEVEL
 3

	)

2742 #iâdeà
NRFX_PWM_CONFIG_INFO_COLOR


2743 
	#NRFX_PWM_CONFIG_INFO_COLOR
 0

	)

2758 #iâdeà
NRFX_PWM_CONFIG_DEBUG_COLOR


2759 
	#NRFX_PWM_CONFIG_DEBUG_COLOR
 0

	)

2768 #iâdeà
NRFX_QDEC_ENABLED


2769 
	#NRFX_QDEC_ENABLED
 0

	)

2782 #iâdeà
NRFX_QDEC_CONFIG_REPORTPER


2783 
	#NRFX_QDEC_CONFIG_REPORTPER
 0

	)

2797 #iâdeà
NRFX_QDEC_CONFIG_SAMPLEPER


2798 
	#NRFX_QDEC_CONFIG_SAMPLEPER
 7

	)

2804 #iâdeà
NRFX_QDEC_CONFIG_PIO_A


2805 
	#NRFX_QDEC_CONFIG_PIO_A
 31

	)

2811 #iâdeà
NRFX_QDEC_CONFIG_PIO_B


2812 
	#NRFX_QDEC_CONFIG_PIO_B
 31

	)

2818 #iâdeà
NRFX_QDEC_CONFIG_PIO_LED


2819 
	#NRFX_QDEC_CONFIG_PIO_LED
 31

	)

2823 #iâdeà
NRFX_QDEC_CONFIG_LEDPRE


2824 
	#NRFX_QDEC_CONFIG_LEDPRE
 511

	)

2832 #iâdeà
NRFX_QDEC_CONFIG_LEDPOL


2833 
	#NRFX_QDEC_CONFIG_LEDPOL
 1

	)

2839 #iâdeà
NRFX_QDEC_CONFIG_DBFEN


2840 
	#NRFX_QDEC_CONFIG_DBFEN
 0

	)

2846 #iâdeà
NRFX_QDEC_CONFIG_SAMPLE_INTEN


2847 
	#NRFX_QDEC_CONFIG_SAMPLE_INTEN
 0

	)

2861 #iâdeà
NRFX_QDEC_CONFIG_IRQ_PRIORITY


2862 
	#NRFX_QDEC_CONFIG_IRQ_PRIORITY
 6

	)

2867 #iâdeà
NRFX_QDEC_CONFIG_LOG_ENABLED


2868 
	#NRFX_QDEC_CONFIG_LOG_ENABLED
 0

	)

2878 #iâdeà
NRFX_QDEC_CONFIG_LOG_LEVEL


2879 
	#NRFX_QDEC_CONFIG_LOG_LEVEL
 3

	)

2894 #iâdeà
NRFX_QDEC_CONFIG_INFO_COLOR


2895 
	#NRFX_QDEC_CONFIG_INFO_COLOR
 0

	)

2910 #iâdeà
NRFX_QDEC_CONFIG_DEBUG_COLOR


2911 
	#NRFX_QDEC_CONFIG_DEBUG_COLOR
 0

	)

2920 #iâdeà
NRFX_QSPI_ENABLED


2921 
	#NRFX_QSPI_ENABLED
 0

	)

2926 #iâdeà
NRFX_QSPI_CONFIG_SCK_DELAY


2927 
	#NRFX_QSPI_CONFIG_SCK_DELAY
 1

	)

2931 #iâdeà
NRFX_QSPI_CONFIG_XIP_OFFSET


2932 
	#NRFX_QSPI_CONFIG_XIP_OFFSET
 0

	)

2943 #iâdeà
NRFX_QSPI_CONFIG_READOC


2944 
	#NRFX_QSPI_CONFIG_READOC
 0

	)

2954 #iâdeà
NRFX_QSPI_CONFIG_WRITEOC


2955 
	#NRFX_QSPI_CONFIG_WRITEOC
 0

	)

2963 #iâdeà
NRFX_QSPI_CONFIG_ADDRMODE


2964 
	#NRFX_QSPI_CONFIG_ADDRMODE
 0

	)

2972 #iâdeà
NRFX_QSPI_CONFIG_MODE


2973 
	#NRFX_QSPI_CONFIG_MODE
 0

	)

2995 #iâdeà
NRFX_QSPI_CONFIG_FREQUENCY


2996 
	#NRFX_QSPI_CONFIG_FREQUENCY
 15

	)

3000 #iâdeà
NRFX_QSPI_PIN_SCK


3001 
	#NRFX_QSPI_PIN_SCK
 
NRF_QSPI_PIN_NOT_CONNECTED


	)

3005 #iâdeà
NRFX_QSPI_PIN_CSN


3006 
	#NRFX_QSPI_PIN_CSN
 
NRF_QSPI_PIN_NOT_CONNECTED


	)

3010 #iâdeà
NRFX_QSPI_PIN_IO0


3011 
	#NRFX_QSPI_PIN_IO0
 
NRF_QSPI_PIN_NOT_CONNECTED


	)

3015 #iâdeà
NRFX_QSPI_PIN_IO1


3016 
	#NRFX_QSPI_PIN_IO1
 
NRF_QSPI_PIN_NOT_CONNECTED


	)

3020 #iâdeà
NRFX_QSPI_PIN_IO2


3021 
	#NRFX_QSPI_PIN_IO2
 
NRF_QSPI_PIN_NOT_CONNECTED


	)

3025 #iâdeà
NRFX_QSPI_PIN_IO3


3026 
	#NRFX_QSPI_PIN_IO3
 
NRF_QSPI_PIN_NOT_CONNECTED


	)

3040 #iâdeà
NRFX_QSPI_CONFIG_IRQ_PRIORITY


3041 
	#NRFX_QSPI_CONFIG_IRQ_PRIORITY
 6

	)

3048 #iâdeà
NRFX_RNG_ENABLED


3049 
	#NRFX_RNG_ENABLED
 0

	)

3054 #iâdeà
NRFX_RNG_CONFIG_ERROR_CORRECTION


3055 
	#NRFX_RNG_CONFIG_ERROR_CORRECTION
 1

	)

3069 #iâdeà
NRFX_RNG_CONFIG_IRQ_PRIORITY


3070 
	#NRFX_RNG_CONFIG_IRQ_PRIORITY
 6

	)

3075 #iâdeà
NRFX_RNG_CONFIG_LOG_ENABLED


3076 
	#NRFX_RNG_CONFIG_LOG_ENABLED
 0

	)

3086 #iâdeà
NRFX_RNG_CONFIG_LOG_LEVEL


3087 
	#NRFX_RNG_CONFIG_LOG_LEVEL
 3

	)

3102 #iâdeà
NRFX_RNG_CONFIG_INFO_COLOR


3103 
	#NRFX_RNG_CONFIG_INFO_COLOR
 0

	)

3118 #iâdeà
NRFX_RNG_CONFIG_DEBUG_COLOR


3119 
	#NRFX_RNG_CONFIG_DEBUG_COLOR
 0

	)

3128 #iâdeà
NRFX_RTC_ENABLED


3129 
	#NRFX_RTC_ENABLED
 0

	)

3134 #iâdeà
NRFX_RTC0_ENABLED


3135 
	#NRFX_RTC0_ENABLED
 0

	)

3141 #iâdeà
NRFX_RTC1_ENABLED


3142 
	#NRFX_RTC1_ENABLED
 0

	)

3148 #iâdeà
NRFX_RTC2_ENABLED


3149 
	#NRFX_RTC2_ENABLED
 0

	)

3153 #iâdeà
NRFX_RTC_MAXIMUM_LATENCY_US


3154 
	#NRFX_RTC_MAXIMUM_LATENCY_US
 2000

	)

3160 #iâdeà
NRFX_RTC_DEFAULT_CONFIG_FREQUENCY


3161 
	#NRFX_RTC_DEFAULT_CONFIG_FREQUENCY
 32768

	)

3167 #iâdeà
NRFX_RTC_DEFAULT_CONFIG_RELIABLE


3168 
	#NRFX_RTC_DEFAULT_CONFIG_RELIABLE
 0

	)

3182 #iâdeà
NRFX_RTC_DEFAULT_CONFIG_IRQ_PRIORITY


3183 
	#NRFX_RTC_DEFAULT_CONFIG_IRQ_PRIORITY
 6

	)

3188 #iâdeà
NRFX_RTC_CONFIG_LOG_ENABLED


3189 
	#NRFX_RTC_CONFIG_LOG_ENABLED
 0

	)

3199 #iâdeà
NRFX_RTC_CONFIG_LOG_LEVEL


3200 
	#NRFX_RTC_CONFIG_LOG_LEVEL
 3

	)

3215 #iâdeà
NRFX_RTC_CONFIG_INFO_COLOR


3216 
	#NRFX_RTC_CONFIG_INFO_COLOR
 0

	)

3231 #iâdeà
NRFX_RTC_CONFIG_DEBUG_COLOR


3232 
	#NRFX_RTC_CONFIG_DEBUG_COLOR
 0

	)

3241 #iâdeà
NRFX_SAADC_ENABLED


3242 
	#NRFX_SAADC_ENABLED
 0

	)

3251 #iâdeà
NRFX_SAADC_CONFIG_RESOLUTION


3252 
	#NRFX_SAADC_CONFIG_RESOLUTION
 1

	)

3267 #iâdeà
NRFX_SAADC_CONFIG_OVERSAMPLE


3268 
	#NRFX_SAADC_CONFIG_OVERSAMPLE
 0

	)

3274 #iâdeà
NRFX_SAADC_CONFIG_LP_MODE


3275 
	#NRFX_SAADC_CONFIG_LP_MODE
 0

	)

3289 #iâdeà
NRFX_SAADC_CONFIG_IRQ_PRIORITY


3290 
	#NRFX_SAADC_CONFIG_IRQ_PRIORITY
 6

	)

3295 #iâdeà
NRFX_SAADC_CONFIG_LOG_ENABLED


3296 
	#NRFX_SAADC_CONFIG_LOG_ENABLED
 0

	)

3306 #iâdeà
NRFX_SAADC_CONFIG_LOG_LEVEL


3307 
	#NRFX_SAADC_CONFIG_LOG_LEVEL
 3

	)

3322 #iâdeà
NRFX_SAADC_CONFIG_INFO_COLOR


3323 
	#NRFX_SAADC_CONFIG_INFO_COLOR
 0

	)

3338 #iâdeà
NRFX_SAADC_CONFIG_DEBUG_COLOR


3339 
	#NRFX_SAADC_CONFIG_DEBUG_COLOR
 0

	)

3348 #iâdeà
NRFX_SPIM_ENABLED


3349 
	#NRFX_SPIM_ENABLED
 0

	)

3354 #iâdeà
NRFX_SPIM0_ENABLED


3355 
	#NRFX_SPIM0_ENABLED
 0

	)

3361 #iâdeà
NRFX_SPIM1_ENABLED


3362 
	#NRFX_SPIM1_ENABLED
 0

	)

3368 #iâdeà
NRFX_SPIM2_ENABLED


3369 
	#NRFX_SPIM2_ENABLED
 0

	)

3375 #iâdeà
NRFX_SPIM3_ENABLED


3376 
	#NRFX_SPIM3_ENABLED
 0

	)

3382 #iâdeà
NRFX_SPIM_EXTENDED_ENABLED


3383 
	#NRFX_SPIM_EXTENDED_ENABLED
 0

	)

3392 #iâdeà
NRFX_SPIM_MISO_PULL_CFG


3393 
	#NRFX_SPIM_MISO_PULL_CFG
 1

	)

3407 #iâdeà
NRFX_SPIM_DEFAULT_CONFIG_IRQ_PRIORITY


3408 
	#NRFX_SPIM_DEFAULT_CONFIG_IRQ_PRIORITY
 6

	)

3413 #iâdeà
NRFX_SPIM_CONFIG_LOG_ENABLED


3414 
	#NRFX_SPIM_CONFIG_LOG_ENABLED
 0

	)

3424 #iâdeà
NRFX_SPIM_CONFIG_LOG_LEVEL


3425 
	#NRFX_SPIM_CONFIG_LOG_LEVEL
 3

	)

3440 #iâdeà
NRFX_SPIM_CONFIG_INFO_COLOR


3441 
	#NRFX_SPIM_CONFIG_INFO_COLOR
 0

	)

3456 #iâdeà
NRFX_SPIM_CONFIG_DEBUG_COLOR


3457 
	#NRFX_SPIM_CONFIG_DEBUG_COLOR
 0

	)

3466 #iâdeà
NRFX_SPIS_ENABLED


3467 
	#NRFX_SPIS_ENABLED
 0

	)

3472 #iâdeà
NRFX_SPIS0_ENABLED


3473 
	#NRFX_SPIS0_ENABLED
 0

	)

3479 #iâdeà
NRFX_SPIS1_ENABLED


3480 
	#NRFX_SPIS1_ENABLED
 0

	)

3486 #iâdeà
NRFX_SPIS2_ENABLED


3487 
	#NRFX_SPIS2_ENABLED
 0

	)

3501 #iâdeà
NRFX_SPIS_DEFAULT_CONFIG_IRQ_PRIORITY


3502 
	#NRFX_SPIS_DEFAULT_CONFIG_IRQ_PRIORITY
 6

	)

3508 #iâdeà
NRFX_SPIS_DEFAULT_DEF


3509 
	#NRFX_SPIS_DEFAULT_DEF
 255

	)

3515 #iâdeà
NRFX_SPIS_DEFAULT_ORC


3516 
	#NRFX_SPIS_DEFAULT_ORC
 255

	)

3521 #iâdeà
NRFX_SPIS_CONFIG_LOG_ENABLED


3522 
	#NRFX_SPIS_CONFIG_LOG_ENABLED
 0

	)

3532 #iâdeà
NRFX_SPIS_CONFIG_LOG_LEVEL


3533 
	#NRFX_SPIS_CONFIG_LOG_LEVEL
 3

	)

3548 #iâdeà
NRFX_SPIS_CONFIG_INFO_COLOR


3549 
	#NRFX_SPIS_CONFIG_INFO_COLOR
 0

	)

3564 #iâdeà
NRFX_SPIS_CONFIG_DEBUG_COLOR


3565 
	#NRFX_SPIS_CONFIG_DEBUG_COLOR
 0

	)

3574 #iâdeà
NRFX_SPI_ENABLED


3575 
	#NRFX_SPI_ENABLED
 0

	)

3580 #iâdeà
NRFX_SPI0_ENABLED


3581 
	#NRFX_SPI0_ENABLED
 0

	)

3587 #iâdeà
NRFX_SPI1_ENABLED


3588 
	#NRFX_SPI1_ENABLED
 0

	)

3594 #iâdeà
NRFX_SPI2_ENABLED


3595 
	#NRFX_SPI2_ENABLED
 0

	)

3604 #iâdeà
NRFX_SPI_MISO_PULL_CFG


3605 
	#NRFX_SPI_MISO_PULL_CFG
 1

	)

3619 #iâdeà
NRFX_SPI_DEFAULT_CONFIG_IRQ_PRIORITY


3620 
	#NRFX_SPI_DEFAULT_CONFIG_IRQ_PRIORITY
 6

	)

3625 #iâdeà
NRFX_SPI_CONFIG_LOG_ENABLED


3626 
	#NRFX_SPI_CONFIG_LOG_ENABLED
 0

	)

3636 #iâdeà
NRFX_SPI_CONFIG_LOG_LEVEL


3637 
	#NRFX_SPI_CONFIG_LOG_LEVEL
 3

	)

3652 #iâdeà
NRFX_SPI_CONFIG_INFO_COLOR


3653 
	#NRFX_SPI_CONFIG_INFO_COLOR
 0

	)

3668 #iâdeà
NRFX_SPI_CONFIG_DEBUG_COLOR


3669 
	#NRFX_SPI_CONFIG_DEBUG_COLOR
 0

	)

3678 #iâdeà
NRFX_SWI_ENABLED


3679 
	#NRFX_SWI_ENABLED
 0

	)

3684 #iâdeà
NRFX_EGU_ENABLED


3685 
	#NRFX_EGU_ENABLED
 0

	)

3691 #iâdeà
NRFX_SWI0_DISABLED


3692 
	#NRFX_SWI0_DISABLED
 0

	)

3698 #iâdeà
NRFX_SWI1_DISABLED


3699 
	#NRFX_SWI1_DISABLED
 0

	)

3705 #iâdeà
NRFX_SWI2_DISABLED


3706 
	#NRFX_SWI2_DISABLED
 0

	)

3712 #iâdeà
NRFX_SWI3_DISABLED


3713 
	#NRFX_SWI3_DISABLED
 0

	)

3719 #iâdeà
NRFX_SWI4_DISABLED


3720 
	#NRFX_SWI4_DISABLED
 0

	)

3726 #iâdeà
NRFX_SWI5_DISABLED


3727 
	#NRFX_SWI5_DISABLED
 0

	)

3732 #iâdeà
NRFX_SWI_CONFIG_LOG_ENABLED


3733 
	#NRFX_SWI_CONFIG_LOG_ENABLED
 0

	)

3743 #iâdeà
NRFX_SWI_CONFIG_LOG_LEVEL


3744 
	#NRFX_SWI_CONFIG_LOG_LEVEL
 3

	)

3759 #iâdeà
NRFX_SWI_CONFIG_INFO_COLOR


3760 
	#NRFX_SWI_CONFIG_INFO_COLOR
 0

	)

3775 #iâdeà
NRFX_SWI_CONFIG_DEBUG_COLOR


3776 
	#NRFX_SWI_CONFIG_DEBUG_COLOR
 0

	)

3785 #iâdeà
NRFX_TIMER_ENABLED


3786 
	#NRFX_TIMER_ENABLED
 0

	)

3791 #iâdeà
NRFX_TIMER0_ENABLED


3792 
	#NRFX_TIMER0_ENABLED
 0

	)

3798 #iâdeà
NRFX_TIMER1_ENABLED


3799 
	#NRFX_TIMER1_ENABLED
 0

	)

3805 #iâdeà
NRFX_TIMER2_ENABLED


3806 
	#NRFX_TIMER2_ENABLED
 0

	)

3812 #iâdeà
NRFX_TIMER3_ENABLED


3813 
	#NRFX_TIMER3_ENABLED
 0

	)

3819 #iâdeà
NRFX_TIMER4_ENABLED


3820 
	#NRFX_TIMER4_ENABLED
 0

	)

3836 #iâdeà
NRFX_TIMER_DEFAULT_CONFIG_FREQUENCY


3837 
	#NRFX_TIMER_DEFAULT_CONFIG_FREQUENCY
 0

	)

3845 #iâdeà
NRFX_TIMER_DEFAULT_CONFIG_MODE


3846 
	#NRFX_TIMER_DEFAULT_CONFIG_MODE
 0

	)

3856 #iâdeà
NRFX_TIMER_DEFAULT_CONFIG_BIT_WIDTH


3857 
	#NRFX_TIMER_DEFAULT_CONFIG_BIT_WIDTH
 0

	)

3871 #iâdeà
NRFX_TIMER_DEFAULT_CONFIG_IRQ_PRIORITY


3872 
	#NRFX_TIMER_DEFAULT_CONFIG_IRQ_PRIORITY
 6

	)

3877 #iâdeà
NRFX_TIMER_CONFIG_LOG_ENABLED


3878 
	#NRFX_TIMER_CONFIG_LOG_ENABLED
 0

	)

3888 #iâdeà
NRFX_TIMER_CONFIG_LOG_LEVEL


3889 
	#NRFX_TIMER_CONFIG_LOG_LEVEL
 3

	)

3904 #iâdeà
NRFX_TIMER_CONFIG_INFO_COLOR


3905 
	#NRFX_TIMER_CONFIG_INFO_COLOR
 0

	)

3920 #iâdeà
NRFX_TIMER_CONFIG_DEBUG_COLOR


3921 
	#NRFX_TIMER_CONFIG_DEBUG_COLOR
 0

	)

3930 #iâdeà
NRFX_TWIM_ENABLED


3931 
	#NRFX_TWIM_ENABLED
 0

	)

3936 #iâdeà
NRFX_TWIM0_ENABLED


3937 
	#NRFX_TWIM0_ENABLED
 0

	)

3943 #iâdeà
NRFX_TWIM1_ENABLED


3944 
	#NRFX_TWIM1_ENABLED
 0

	)

3953 #iâdeà
NRFX_TWIM_DEFAULT_CONFIG_FREQUENCY


3954 
	#NRFX_TWIM_DEFAULT_CONFIG_FREQUENCY
 26738688

	)

3960 #iâdeà
NRFX_TWIM_DEFAULT_CONFIG_HOLD_BUS_UNINIT


3961 
	#NRFX_TWIM_DEFAULT_CONFIG_HOLD_BUS_UNINIT
 0

	)

3975 #iâdeà
NRFX_TWIM_DEFAULT_CONFIG_IRQ_PRIORITY


3976 
	#NRFX_TWIM_DEFAULT_CONFIG_IRQ_PRIORITY
 6

	)

3981 #iâdeà
NRFX_TWIM_CONFIG_LOG_ENABLED


3982 
	#NRFX_TWIM_CONFIG_LOG_ENABLED
 0

	)

3992 #iâdeà
NRFX_TWIM_CONFIG_LOG_LEVEL


3993 
	#NRFX_TWIM_CONFIG_LOG_LEVEL
 3

	)

4008 #iâdeà
NRFX_TWIM_CONFIG_INFO_COLOR


4009 
	#NRFX_TWIM_CONFIG_INFO_COLOR
 0

	)

4024 #iâdeà
NRFX_TWIM_CONFIG_DEBUG_COLOR


4025 
	#NRFX_TWIM_CONFIG_DEBUG_COLOR
 0

	)

4034 #iâdeà
NRFX_TWIS_ENABLED


4035 
	#NRFX_TWIS_ENABLED
 0

	)

4040 #iâdeà
NRFX_TWIS0_ENABLED


4041 
	#NRFX_TWIS0_ENABLED
 0

	)

4047 #iâdeà
NRFX_TWIS1_ENABLED


4048 
	#NRFX_TWIS1_ENABLED
 0

	)

4056 #iâdeà
NRFX_TWIS_ASSUME_INIT_AFTER_RESET_ONLY


4057 
	#NRFX_TWIS_ASSUME_INIT_AFTER_RESET_ONLY
 0

	)

4065 #iâdeà
NRFX_TWIS_NO_SYNC_MODE


4066 
	#NRFX_TWIS_NO_SYNC_MODE
 0

	)

4070 #iâdeà
NRFX_TWIS_DEFAULT_CONFIG_ADDR0


4071 
	#NRFX_TWIS_DEFAULT_CONFIG_ADDR0
 0

	)

4075 #iâdeà
NRFX_TWIS_DEFAULT_CONFIG_ADDR1


4076 
	#NRFX_TWIS_DEFAULT_CONFIG_ADDR1
 0

	)

4085 #iâdeà
NRFX_TWIS_DEFAULT_CONFIG_SCL_PULL


4086 
	#NRFX_TWIS_DEFAULT_CONFIG_SCL_PULL
 0

	)

4095 #iâdeà
NRFX_TWIS_DEFAULT_CONFIG_SDA_PULL


4096 
	#NRFX_TWIS_DEFAULT_CONFIG_SDA_PULL
 0

	)

4110 #iâdeà
NRFX_TWIS_DEFAULT_CONFIG_IRQ_PRIORITY


4111 
	#NRFX_TWIS_DEFAULT_CONFIG_IRQ_PRIORITY
 6

	)

4116 #iâdeà
NRFX_TWIS_CONFIG_LOG_ENABLED


4117 
	#NRFX_TWIS_CONFIG_LOG_ENABLED
 0

	)

4127 #iâdeà
NRFX_TWIS_CONFIG_LOG_LEVEL


4128 
	#NRFX_TWIS_CONFIG_LOG_LEVEL
 3

	)

4143 #iâdeà
NRFX_TWIS_CONFIG_INFO_COLOR


4144 
	#NRFX_TWIS_CONFIG_INFO_COLOR
 0

	)

4159 #iâdeà
NRFX_TWIS_CONFIG_DEBUG_COLOR


4160 
	#NRFX_TWIS_CONFIG_DEBUG_COLOR
 0

	)

4169 #iâdeà
NRFX_TWI_ENABLED


4170 
	#NRFX_TWI_ENABLED
 0

	)

4175 #iâdeà
NRFX_TWI0_ENABLED


4176 
	#NRFX_TWI0_ENABLED
 0

	)

4182 #iâdeà
NRFX_TWI1_ENABLED


4183 
	#NRFX_TWI1_ENABLED
 0

	)

4192 #iâdeà
NRFX_TWI_DEFAULT_CONFIG_FREQUENCY


4193 
	#NRFX_TWI_DEFAULT_CONFIG_FREQUENCY
 26738688

	)

4199 #iâdeà
NRFX_TWI_DEFAULT_CONFIG_HOLD_BUS_UNINIT


4200 
	#NRFX_TWI_DEFAULT_CONFIG_HOLD_BUS_UNINIT
 0

	)

4214 #iâdeà
NRFX_TWI_DEFAULT_CONFIG_IRQ_PRIORITY


4215 
	#NRFX_TWI_DEFAULT_CONFIG_IRQ_PRIORITY
 6

	)

4220 #iâdeà
NRFX_TWI_CONFIG_LOG_ENABLED


4221 
	#NRFX_TWI_CONFIG_LOG_ENABLED
 0

	)

4231 #iâdeà
NRFX_TWI_CONFIG_LOG_LEVEL


4232 
	#NRFX_TWI_CONFIG_LOG_LEVEL
 3

	)

4247 #iâdeà
NRFX_TWI_CONFIG_INFO_COLOR


4248 
	#NRFX_TWI_CONFIG_INFO_COLOR
 0

	)

4263 #iâdeà
NRFX_TWI_CONFIG_DEBUG_COLOR


4264 
	#NRFX_TWI_CONFIG_DEBUG_COLOR
 0

	)

4273 #iâdeà
NRFX_UARTE_ENABLED


4274 
	#NRFX_UARTE_ENABLED
 1

	)

4277 #iâdeà
NRFX_UARTE0_ENABLED


4278 
	#NRFX_UARTE0_ENABLED
 0

	)

4282 #iâdeà
NRFX_UARTE1_ENABLED


4283 
	#NRFX_UARTE1_ENABLED
 0

	)

4291 #iâdeà
NRFX_UARTE_DEFAULT_CONFIG_HWFC


4292 
	#NRFX_UARTE_DEFAULT_CONFIG_HWFC
 0

	)

4300 #iâdeà
NRFX_UARTE_DEFAULT_CONFIG_PARITY


4301 
	#NRFX_UARTE_DEFAULT_CONFIG_PARITY
 0

	)

4325 #iâdeà
NRFX_UARTE_DEFAULT_CONFIG_BAUDRATE


4326 
	#NRFX_UARTE_DEFAULT_CONFIG_BAUDRATE
 30801920

	)

4340 #iâdeà
NRFX_UARTE_DEFAULT_CONFIG_IRQ_PRIORITY


4341 
	#NRFX_UARTE_DEFAULT_CONFIG_IRQ_PRIORITY
 6

	)

4346 #iâdeà
NRFX_UARTE_CONFIG_LOG_ENABLED


4347 
	#NRFX_UARTE_CONFIG_LOG_ENABLED
 0

	)

4357 #iâdeà
NRFX_UARTE_CONFIG_LOG_LEVEL


4358 
	#NRFX_UARTE_CONFIG_LOG_LEVEL
 3

	)

4373 #iâdeà
NRFX_UARTE_CONFIG_INFO_COLOR


4374 
	#NRFX_UARTE_CONFIG_INFO_COLOR
 0

	)

4389 #iâdeà
NRFX_UARTE_CONFIG_DEBUG_COLOR


4390 
	#NRFX_UARTE_CONFIG_DEBUG_COLOR
 0

	)

4399 #iâdeà
NRFX_UART_ENABLED


4400 
	#NRFX_UART_ENABLED
 1

	)

4403 #iâdeà
NRFX_UART0_ENABLED


4404 
	#NRFX_UART0_ENABLED
 0

	)

4412 #iâdeà
NRFX_UART_DEFAULT_CONFIG_HWFC


4413 
	#NRFX_UART_DEFAULT_CONFIG_HWFC
 0

	)

4421 #iâdeà
NRFX_UART_DEFAULT_CONFIG_PARITY


4422 
	#NRFX_UART_DEFAULT_CONFIG_PARITY
 0

	)

4446 #iâdeà
NRFX_UART_DEFAULT_CONFIG_BAUDRATE


4447 
	#NRFX_UART_DEFAULT_CONFIG_BAUDRATE
 30924800

	)

4461 #iâdeà
NRFX_UART_DEFAULT_CONFIG_IRQ_PRIORITY


4462 
	#NRFX_UART_DEFAULT_CONFIG_IRQ_PRIORITY
 6

	)

4467 #iâdeà
NRFX_UART_CONFIG_LOG_ENABLED


4468 
	#NRFX_UART_CONFIG_LOG_ENABLED
 0

	)

4478 #iâdeà
NRFX_UART_CONFIG_LOG_LEVEL


4479 
	#NRFX_UART_CONFIG_LOG_LEVEL
 3

	)

4494 #iâdeà
NRFX_UART_CONFIG_INFO_COLOR


4495 
	#NRFX_UART_CONFIG_INFO_COLOR
 0

	)

4510 #iâdeà
NRFX_UART_CONFIG_DEBUG_COLOR


4511 
	#NRFX_UART_CONFIG_DEBUG_COLOR
 0

	)

4520 #iâdeà
NRFX_WDT_ENABLED


4521 
	#NRFX_WDT_ENABLED
 0

	)

4530 #iâdeà
NRFX_WDT_CONFIG_BEHAVIOUR


4531 
	#NRFX_WDT_CONFIG_BEHAVIOUR
 1

	)

4537 #iâdeà
NRFX_WDT_CONFIG_RELOAD_VALUE


4538 
	#NRFX_WDT_CONFIG_RELOAD_VALUE
 2000

	)

4552 #iâdeà
NRFX_WDT_CONFIG_IRQ_PRIORITY


4553 
	#NRFX_WDT_CONFIG_IRQ_PRIORITY
 6

	)

4558 #iâdeà
NRFX_WDT_CONFIG_LOG_ENABLED


4559 
	#NRFX_WDT_CONFIG_LOG_ENABLED
 0

	)

4569 #iâdeà
NRFX_WDT_CONFIG_LOG_LEVEL


4570 
	#NRFX_WDT_CONFIG_LOG_LEVEL
 3

	)

4585 #iâdeà
NRFX_WDT_CONFIG_INFO_COLOR


4586 
	#NRFX_WDT_CONFIG_INFO_COLOR
 0

	)

4601 #iâdeà
NRFX_WDT_CONFIG_DEBUG_COLOR


4602 
	#NRFX_WDT_CONFIG_DEBUG_COLOR
 0

	)

4611 #iâdeà
NRF_CLOCK_ENABLED


4612 
	#NRF_CLOCK_ENABLED
 1

	)

4622 #iâdeà
CLOCK_CONFIG_LF_SRC


4623 
	#CLOCK_CONFIG_LF_SRC
 1

	)

4639 #iâdeà
CLOCK_CONFIG_IRQ_PRIORITY


4640 
	#CLOCK_CONFIG_IRQ_PRIORITY
 6

	)

4647 #iâdeà
PDM_ENABLED


4648 
	#PDM_ENABLED
 0

	)

4655 #iâdeà
PDM_CONFIG_MODE


4656 
	#PDM_CONFIG_MODE
 1

	)

4664 #iâdeà
PDM_CONFIG_EDGE


4665 
	#PDM_CONFIG_EDGE
 0

	)

4674 #iâdeà
PDM_CONFIG_CLOCK_FREQ


4675 
	#PDM_CONFIG_CLOCK_FREQ
 138412032

	)

4691 #iâdeà
PDM_CONFIG_IRQ_PRIORITY


4692 
	#PDM_CONFIG_IRQ_PRIORITY
 6

	)

4699 #iâdeà
POWER_ENABLED


4700 
	#POWER_ENABLED
 0

	)

4715 #iâdeà
POWER_CONFIG_IRQ_PRIORITY


4716 
	#POWER_CONFIG_IRQ_PRIORITY
 6

	)

4724 #iâdeà
POWER_CONFIG_DEFAULT_DCDCEN


4725 
	#POWER_CONFIG_DEFAULT_DCDCEN
 0

	)

4733 #iâdeà
POWER_CONFIG_DEFAULT_DCDCENHV


4734 
	#POWER_CONFIG_DEFAULT_DCDCENHV
 0

	)

4742 #iâdeà
PPI_ENABLED


4743 
	#PPI_ENABLED
 0

	)

4748 #iâdeà
PWM_ENABLED


4749 
	#PWM_ENABLED
 0

	)

4754 #iâdeà
PWM_DEFAULT_CONFIG_OUT0_PIN


4755 
	#PWM_DEFAULT_CONFIG_OUT0_PIN
 31

	)

4761 #iâdeà
PWM_DEFAULT_CONFIG_OUT1_PIN


4762 
	#PWM_DEFAULT_CONFIG_OUT1_PIN
 31

	)

4768 #iâdeà
PWM_DEFAULT_CONFIG_OUT2_PIN


4769 
	#PWM_DEFAULT_CONFIG_OUT2_PIN
 31

	)

4775 #iâdeà
PWM_DEFAULT_CONFIG_OUT3_PIN


4776 
	#PWM_DEFAULT_CONFIG_OUT3_PIN
 31

	)

4790 #iâdeà
PWM_DEFAULT_CONFIG_BASE_CLOCK


4791 
	#PWM_DEFAULT_CONFIG_BASE_CLOCK
 4

	)

4799 #iâdeà
PWM_DEFAULT_CONFIG_COUNT_MODE


4800 
	#PWM_DEFAULT_CONFIG_COUNT_MODE
 0

	)

4804 #iâdeà
PWM_DEFAULT_CONFIG_TOP_VALUE


4805 
	#PWM_DEFAULT_CONFIG_TOP_VALUE
 1000

	)

4815 #iâdeà
PWM_DEFAULT_CONFIG_LOAD_MODE


4816 
	#PWM_DEFAULT_CONFIG_LOAD_MODE
 0

	)

4824 #iâdeà
PWM_DEFAULT_CONFIG_STEP_MODE


4825 
	#PWM_DEFAULT_CONFIG_STEP_MODE
 0

	)

4841 #iâdeà
PWM_DEFAULT_CONFIG_IRQ_PRIORITY


4842 
	#PWM_DEFAULT_CONFIG_IRQ_PRIORITY
 6

	)

4848 #iâdeà
PWM0_ENABLED


4849 
	#PWM0_ENABLED
 0

	)

4855 #iâdeà
PWM1_ENABLED


4856 
	#PWM1_ENABLED
 0

	)

4862 #iâdeà
PWM2_ENABLED


4863 
	#PWM2_ENABLED
 0

	)

4869 #iâdeà
PWM3_ENABLED


4870 
	#PWM3_ENABLED
 0

	)

4877 #iâdeà
QDEC_ENABLED


4878 
	#QDEC_ENABLED
 0

	)

4891 #iâdeà
QDEC_CONFIG_REPORTPER


4892 
	#QDEC_CONFIG_REPORTPER
 0

	)

4906 #iâdeà
QDEC_CONFIG_SAMPLEPER


4907 
	#QDEC_CONFIG_SAMPLEPER
 7

	)

4913 #iâdeà
QDEC_CONFIG_PIO_A


4914 
	#QDEC_CONFIG_PIO_A
 31

	)

4920 #iâdeà
QDEC_CONFIG_PIO_B


4921 
	#QDEC_CONFIG_PIO_B
 31

	)

4927 #iâdeà
QDEC_CONFIG_PIO_LED


4928 
	#QDEC_CONFIG_PIO_LED
 31

	)

4932 #iâdeà
QDEC_CONFIG_LEDPRE


4933 
	#QDEC_CONFIG_LEDPRE
 511

	)

4941 #iâdeà
QDEC_CONFIG_LEDPOL


4942 
	#QDEC_CONFIG_LEDPOL
 1

	)

4948 #iâdeà
QDEC_CONFIG_DBFEN


4949 
	#QDEC_CONFIG_DBFEN
 0

	)

4955 #iâdeà
QDEC_CONFIG_SAMPLE_INTEN


4956 
	#QDEC_CONFIG_SAMPLE_INTEN
 0

	)

4972 #iâdeà
QDEC_CONFIG_IRQ_PRIORITY


4973 
	#QDEC_CONFIG_IRQ_PRIORITY
 6

	)

4980 #iâdeà
QSPI_ENABLED


4981 
	#QSPI_ENABLED
 0

	)

4986 #iâdeà
QSPI_CONFIG_SCK_DELAY


4987 
	#QSPI_CONFIG_SCK_DELAY
 1

	)

4991 #iâdeà
QSPI_CONFIG_XIP_OFFSET


4992 
	#QSPI_CONFIG_XIP_OFFSET
 0

	)

5003 #iâdeà
QSPI_CONFIG_READOC


5004 
	#QSPI_CONFIG_READOC
 0

	)

5014 #iâdeà
QSPI_CONFIG_WRITEOC


5015 
	#QSPI_CONFIG_WRITEOC
 0

	)

5023 #iâdeà
QSPI_CONFIG_ADDRMODE


5024 
	#QSPI_CONFIG_ADDRMODE
 0

	)

5032 #iâdeà
QSPI_CONFIG_MODE


5033 
	#QSPI_CONFIG_MODE
 0

	)

5055 #iâdeà
QSPI_CONFIG_FREQUENCY


5056 
	#QSPI_CONFIG_FREQUENCY
 15

	)

5060 #iâdeà
QSPI_PIN_SCK


5061 
	#QSPI_PIN_SCK
 
NRF_QSPI_PIN_NOT_CONNECTED


	)

5065 #iâdeà
QSPI_PIN_CSN


5066 
	#QSPI_PIN_CSN
 
NRF_QSPI_PIN_NOT_CONNECTED


	)

5070 #iâdeà
QSPI_PIN_IO0


5071 
	#QSPI_PIN_IO0
 
NRF_QSPI_PIN_NOT_CONNECTED


	)

5075 #iâdeà
QSPI_PIN_IO1


5076 
	#QSPI_PIN_IO1
 
NRF_QSPI_PIN_NOT_CONNECTED


	)

5080 #iâdeà
QSPI_PIN_IO2


5081 
	#QSPI_PIN_IO2
 
NRF_QSPI_PIN_NOT_CONNECTED


	)

5085 #iâdeà
QSPI_PIN_IO3


5086 
	#QSPI_PIN_IO3
 
NRF_QSPI_PIN_NOT_CONNECTED


	)

5102 #iâdeà
QSPI_CONFIG_IRQ_PRIORITY


5103 
	#QSPI_CONFIG_IRQ_PRIORITY
 6

	)

5110 #iâdeà
RNG_ENABLED


5111 
	#RNG_ENABLED
 0

	)

5116 #iâdeà
RNG_CONFIG_ERROR_CORRECTION


5117 
	#RNG_CONFIG_ERROR_CORRECTION
 1

	)

5121 #iâdeà
RNG_CONFIG_POOL_SIZE


5122 
	#RNG_CONFIG_POOL_SIZE
 64

	)

5138 #iâdeà
RNG_CONFIG_IRQ_PRIORITY


5139 
	#RNG_CONFIG_IRQ_PRIORITY
 6

	)

5146 #iâdeà
RTC_ENABLED


5147 
	#RTC_ENABLED
 0

	)

5152 #iâdeà
RTC_DEFAULT_CONFIG_FREQUENCY


5153 
	#RTC_DEFAULT_CONFIG_FREQUENCY
 32768

	)

5159 #iâdeà
RTC_DEFAULT_CONFIG_RELIABLE


5160 
	#RTC_DEFAULT_CONFIG_RELIABLE
 0

	)

5176 #iâdeà
RTC_DEFAULT_CONFIG_IRQ_PRIORITY


5177 
	#RTC_DEFAULT_CONFIG_IRQ_PRIORITY
 6

	)

5183 #iâdeà
RTC0_ENABLED


5184 
	#RTC0_ENABLED
 0

	)

5190 #iâdeà
RTC1_ENABLED


5191 
	#RTC1_ENABLED
 0

	)

5197 #iâdeà
RTC2_ENABLED


5198 
	#RTC2_ENABLED
 0

	)

5202 #iâdeà
NRF_MAXIMUM_LATENCY_US


5203 
	#NRF_MAXIMUM_LATENCY_US
 2000

	)

5210 #iâdeà
SAADC_ENABLED


5211 
	#SAADC_ENABLED
 0

	)

5220 #iâdeà
SAADC_CONFIG_RESOLUTION


5221 
	#SAADC_CONFIG_RESOLUTION
 1

	)

5236 #iâdeà
SAADC_CONFIG_OVERSAMPLE


5237 
	#SAADC_CONFIG_OVERSAMPLE
 0

	)

5243 #iâdeà
SAADC_CONFIG_LP_MODE


5244 
	#SAADC_CONFIG_LP_MODE
 0

	)

5260 #iâdeà
SAADC_CONFIG_IRQ_PRIORITY


5261 
	#SAADC_CONFIG_IRQ_PRIORITY
 6

	)

5268 #iâdeà
SPIS_ENABLED


5269 
	#SPIS_ENABLED
 0

	)

5284 #iâdeà
SPIS_DEFAULT_CONFIG_IRQ_PRIORITY


5285 
	#SPIS_DEFAULT_CONFIG_IRQ_PRIORITY
 6

	)

5295 #iâdeà
SPIS_DEFAULT_MODE


5296 
	#SPIS_DEFAULT_MODE
 0

	)

5304 #iâdeà
SPIS_DEFAULT_BIT_ORDER


5305 
	#SPIS_DEFAULT_BIT_ORDER
 0

	)

5311 #iâdeà
SPIS_DEFAULT_DEF


5312 
	#SPIS_DEFAULT_DEF
 255

	)

5318 #iâdeà
SPIS_DEFAULT_ORC


5319 
	#SPIS_DEFAULT_ORC
 255

	)

5325 #iâdeà
SPIS0_ENABLED


5326 
	#SPIS0_ENABLED
 0

	)

5332 #iâdeà
SPIS1_ENABLED


5333 
	#SPIS1_ENABLED
 0

	)

5339 #iâdeà
SPIS2_ENABLED


5340 
	#SPIS2_ENABLED
 0

	)

5347 #iâdeà
SPI_ENABLED


5348 
	#SPI_ENABLED
 0

	)

5363 #iâdeà
SPI_DEFAULT_CONFIG_IRQ_PRIORITY


5364 
	#SPI_DEFAULT_CONFIG_IRQ_PRIORITY
 6

	)

5373 #iâdeà
NRF_SPI_DRV_MISO_PULLUP_CFG


5374 
	#NRF_SPI_DRV_MISO_PULLUP_CFG
 1

	)

5379 #iâdeà
SPI0_ENABLED


5380 
	#SPI0_ENABLED
 0

	)

5385 #iâdeà
SPI0_USE_EASY_DMA


5386 
	#SPI0_USE_EASY_DMA
 1

	)

5393 #iâdeà
SPI1_ENABLED


5394 
	#SPI1_ENABLED
 0

	)

5399 #iâdeà
SPI1_USE_EASY_DMA


5400 
	#SPI1_USE_EASY_DMA
 1

	)

5407 #iâdeà
SPI2_ENABLED


5408 
	#SPI2_ENABLED
 0

	)

5413 #iâdeà
SPI2_USE_EASY_DMA


5414 
	#SPI2_USE_EASY_DMA
 1

	)

5423 #iâdeà
TIMER_ENABLED


5424 
	#TIMER_ENABLED
 0

	)

5439 #iâdeà
TIMER_DEFAULT_CONFIG_FREQUENCY


5440 
	#TIMER_DEFAULT_CONFIG_FREQUENCY
 0

	)

5448 #iâdeà
TIMER_DEFAULT_CONFIG_MODE


5449 
	#TIMER_DEFAULT_CONFIG_MODE
 0

	)

5459 #iâdeà
TIMER_DEFAULT_CONFIG_BIT_WIDTH


5460 
	#TIMER_DEFAULT_CONFIG_BIT_WIDTH
 0

	)

5476 #iâdeà
TIMER_DEFAULT_CONFIG_IRQ_PRIORITY


5477 
	#TIMER_DEFAULT_CONFIG_IRQ_PRIORITY
 6

	)

5483 #iâdeà
TIMER0_ENABLED


5484 
	#TIMER0_ENABLED
 0

	)

5490 #iâdeà
TIMER1_ENABLED


5491 
	#TIMER1_ENABLED
 0

	)

5497 #iâdeà
TIMER2_ENABLED


5498 
	#TIMER2_ENABLED
 0

	)

5504 #iâdeà
TIMER3_ENABLED


5505 
	#TIMER3_ENABLED
 0

	)

5511 #iâdeà
TIMER4_ENABLED


5512 
	#TIMER4_ENABLED
 0

	)

5519 #iâdeà
TWIS_ENABLED


5520 
	#TWIS_ENABLED
 0

	)

5525 #iâdeà
TWIS0_ENABLED


5526 
	#TWIS0_ENABLED
 0

	)

5532 #iâdeà
TWIS1_ENABLED


5533 
	#TWIS1_ENABLED
 0

	)

5541 #iâdeà
TWIS_ASSUME_INIT_AFTER_RESET_ONLY


5542 
	#TWIS_ASSUME_INIT_AFTER_RESET_ONLY
 0

	)

5550 #iâdeà
TWIS_NO_SYNC_MODE


5551 
	#TWIS_NO_SYNC_MODE
 0

	)

5555 #iâdeà
TWIS_DEFAULT_CONFIG_ADDR0


5556 
	#TWIS_DEFAULT_CONFIG_ADDR0
 0

	)

5560 #iâdeà
TWIS_DEFAULT_CONFIG_ADDR1


5561 
	#TWIS_DEFAULT_CONFIG_ADDR1
 0

	)

5570 #iâdeà
TWIS_DEFAULT_CONFIG_SCL_PULL


5571 
	#TWIS_DEFAULT_CONFIG_SCL_PULL
 0

	)

5580 #iâdeà
TWIS_DEFAULT_CONFIG_SDA_PULL


5581 
	#TWIS_DEFAULT_CONFIG_SDA_PULL
 0

	)

5597 #iâdeà
TWIS_DEFAULT_CONFIG_IRQ_PRIORITY


5598 
	#TWIS_DEFAULT_CONFIG_IRQ_PRIORITY
 6

	)

5605 #iâdeà
TWI_ENABLED


5606 
	#TWI_ENABLED
 0

	)

5614 #iâdeà
TWI_DEFAULT_CONFIG_FREQUENCY


5615 
	#TWI_DEFAULT_CONFIG_FREQUENCY
 26738688

	)

5621 #iâdeà
TWI_DEFAULT_CONFIG_CLR_BUS_INIT


5622 
	#TWI_DEFAULT_CONFIG_CLR_BUS_INIT
 0

	)

5628 #iâdeà
TWI_DEFAULT_CONFIG_HOLD_BUS_UNINIT


5629 
	#TWI_DEFAULT_CONFIG_HOLD_BUS_UNINIT
 0

	)

5645 #iâdeà
TWI_DEFAULT_CONFIG_IRQ_PRIORITY


5646 
	#TWI_DEFAULT_CONFIG_IRQ_PRIORITY
 6

	)

5651 #iâdeà
TWI0_ENABLED


5652 
	#TWI0_ENABLED
 0

	)

5657 #iâdeà
TWI0_USE_EASY_DMA


5658 
	#TWI0_USE_EASY_DMA
 0

	)

5665 #iâdeà
TWI1_ENABLED


5666 
	#TWI1_ENABLED
 0

	)

5671 #iâdeà
TWI1_USE_EASY_DMA


5672 
	#TWI1_USE_EASY_DMA
 0

	)

5681 #iâdeà
UART_ENABLED


5682 
	#UART_ENABLED
 1

	)

5689 #iâdeà
UART_DEFAULT_CONFIG_HWFC


5690 
	#UART_DEFAULT_CONFIG_HWFC
 0

	)

5698 #iâdeà
UART_DEFAULT_CONFIG_PARITY


5699 
	#UART_DEFAULT_CONFIG_PARITY
 0

	)

5721 #iâdeà
UART_DEFAULT_CONFIG_BAUDRATE


5722 
	#UART_DEFAULT_CONFIG_BAUDRATE
 30801920

	)

5738 #iâdeà
UART_DEFAULT_CONFIG_IRQ_PRIORITY


5739 
	#UART_DEFAULT_CONFIG_IRQ_PRIORITY
 6

	)

5745 #iâdeà
UART_EASY_DMA_SUPPORT


5746 
	#UART_EASY_DMA_SUPPORT
 1

	)

5752 #iâdeà
UART_LEGACY_SUPPORT


5753 
	#UART_LEGACY_SUPPORT
 1

	)

5758 #iâdeà
UART0_ENABLED


5759 
	#UART0_ENABLED
 1

	)

5764 #iâdeà
UART0_CONFIG_USE_EASY_DMA


5765 
	#UART0_CONFIG_USE_EASY_DMA
 1

	)

5772 #iâdeà
UART1_ENABLED


5773 
	#UART1_ENABLED
 0

	)

5781 #iâdeà
USBD_ENABLED


5782 
	#USBD_ENABLED
 0

	)

5797 #iâdeà
USBD_CONFIG_IRQ_PRIORITY


5798 
	#USBD_CONFIG_IRQ_PRIORITY
 6

	)

5806 #iâdeà
USBD_CONFIG_DMASCHEDULER_MODE


5807 
	#USBD_CONFIG_DMASCHEDULER_MODE
 0

	)

5819 #iâdeà
USBD_CONFIG_DMASCHEDULER_ISO_BOOST


5820 
	#USBD_CONFIG_DMASCHEDULER_ISO_BOOST
 1

	)

5829 #iâdeà
USBD_CONFIG_ISO_IN_ZLP


5830 
	#USBD_CONFIG_ISO_IN_ZLP
 0

	)

5837 #iâdeà
WDT_ENABLED


5838 
	#WDT_ENABLED
 0

	)

5847 #iâdeà
WDT_CONFIG_BEHAVIOUR


5848 
	#WDT_CONFIG_BEHAVIOUR
 1

	)

5854 #iâdeà
WDT_CONFIG_RELOAD_VALUE


5855 
	#WDT_CONFIG_RELOAD_VALUE
 2000

	)

5871 #iâdeà
WDT_CONFIG_IRQ_PRIORITY


5872 
	#WDT_CONFIG_IRQ_PRIORITY
 6

	)

5886 #iâdeà
NRF_TWI_SENSOR_ENABLED


5887 
	#NRF_TWI_SENSOR_ENABLED
 0

	)

5899 #iâdeà
APP_GPIOTE_ENABLED


5900 
	#APP_GPIOTE_ENABLED
 0

	)

5906 #iâdeà
APP_PWM_ENABLED


5907 
	#APP_PWM_ENABLED
 0

	)

5912 #iâdeà
APP_SCHEDULER_ENABLED


5913 
	#APP_SCHEDULER_ENABLED
 1

	)

5918 #iâdeà
APP_SCHEDULER_WITH_PAUSE


5919 
	#APP_SCHEDULER_WITH_PAUSE
 0

	)

5925 #iâdeà
APP_SCHEDULER_WITH_PROFILER


5926 
	#APP_SCHEDULER_WITH_PROFILER
 0

	)

5933 #iâdeà
APP_SDCARD_ENABLED


5934 
	#APP_SDCARD_ENABLED
 0

	)

5942 #iâdeà
APP_SDCARD_SPI_INSTANCE


5943 
	#APP_SDCARD_SPI_INSTANCE
 0

	)

5956 #iâdeà
APP_SDCARD_FREQ_INIT


5957 
	#APP_SDCARD_FREQ_INIT
 67108864

	)

5970 #iâdeà
APP_SDCARD_FREQ_DATA


5971 
	#APP_SDCARD_FREQ_DATA
 1073741824

	)

5978 #iâdeà
APP_TIMER_ENABLED


5979 
	#APP_TIMER_ENABLED
 1

	)

5990 #iâdeà
APP_TIMER_CONFIG_RTC_FREQUENCY


5991 
	#APP_TIMER_CONFIG_RTC_FREQUENCY
 0

	)

6007 #iâdeà
APP_TIMER_CONFIG_IRQ_PRIORITY


6008 
	#APP_TIMER_CONFIG_IRQ_PRIORITY
 6

	)

6017 #iâdeà
APP_TIMER_CONFIG_OP_QUEUE_SIZE


6018 
	#APP_TIMER_CONFIG_OP_QUEUE_SIZE
 10

	)

6024 #iâdeà
APP_TIMER_CONFIG_USE_SCHEDULER


6025 
	#APP_TIMER_CONFIG_USE_SCHEDULER
 1

	)

6034 #iâdeà
APP_TIMER_KEEPS_RTC_ACTIVE


6035 
	#APP_TIMER_KEEPS_RTC_ACTIVE
 0

	)

6045 #iâdeà
APP_TIMER_SAFE_WINDOW_MS


6046 
	#APP_TIMER_SAFE_WINDOW_MS
 300000

	)

6055 #iâdeà
APP_TIMER_WITH_PROFILER


6056 
	#APP_TIMER_WITH_PROFILER
 0

	)

6062 #iâdeà
APP_TIMER_CONFIG_SWI_NUMBER


6063 
	#APP_TIMER_CONFIG_SWI_NUMBER
 0

	)

6074 #iâdeà
APP_USBD_AUDIO_ENABLED


6075 
	#APP_USBD_AUDIO_ENABLED
 0

	)

6080 #iâdeà
APP_USBD_ENABLED


6081 
	#APP_USBD_ENABLED
 0

	)

6089 #iâdeà
APP_USBD_VID


6090 
	#APP_USBD_VID
 0

	)

6099 #iâdeà
APP_USBD_PID


6100 
	#APP_USBD_PID
 0

	)

6108 #iâdeà
APP_USBD_DEVICE_VER_MAJOR


6109 
	#APP_USBD_DEVICE_VER_MAJOR
 1

	)

6117 #iâdeà
APP_USBD_DEVICE_VER_MINOR


6118 
	#APP_USBD_DEVICE_VER_MINOR
 0

	)

6124 #iâdeà
APP_USBD_CONFIG_SELF_POWERED


6125 
	#APP_USBD_CONFIG_SELF_POWERED
 1

	)

6131 #iâdeà
APP_USBD_CONFIG_MAX_POWER


6132 
	#APP_USBD_CONFIG_MAX_POWER
 500

	)

6140 #iâdeà
APP_USBD_CONFIG_POWER_EVENTS_PROCESS


6141 
	#APP_USBD_CONFIG_POWER_EVENTS_PROCESS
 1

	)

6151 #iâdeà
APP_USBD_CONFIG_EVENT_QUEUE_ENABLE


6152 
	#APP_USBD_CONFIG_EVENT_QUEUE_ENABLE
 1

	)

6159 #iâdeà
APP_USBD_CONFIG_EVENT_QUEUE_SIZE


6160 
	#APP_USBD_CONFIG_EVENT_QUEUE_SIZE
 32

	)

6174 #iâdeà
APP_USBD_CONFIG_SOF_HANDLING_MODE


6175 
	#APP_USBD_CONFIG_SOF_HANDLING_MODE
 1

	)

6189 #iâdeà
APP_USBD_CONFIG_SOF_TIMESTAMP_PROVIDE


6190 
	#APP_USBD_CONFIG_SOF_TIMESTAMP_PROVIDE
 0

	)

6199 #iâdeà
APP_USBD_CONFIG_DESC_STRING_SIZE


6200 
	#APP_USBD_CONFIG_DESC_STRING_SIZE
 31

	)

6208 #iâdeà
APP_USBD_CONFIG_DESC_STRING_UTF_ENABLED


6209 
	#APP_USBD_CONFIG_DESC_STRING_UTF_ENABLED
 0

	)

6216 #iâdeà
APP_USBD_STRINGS_LANGIDS


6217 
	#APP_USBD_STRINGS_LANGIDS
 
	`APP_USBD_LANG_AND_SUBLANG
(
APP_USBD_LANG_ENGLISH
, 
APP_USBD_SUBLANG_ENGLISH_US
)

	)

6224 #iâdeà
APP_USBD_STRING_ID_MANUFACTURER


6225 
	#APP_USBD_STRING_ID_MANUFACTURER
 1

	)

6230 #iâdeà
APP_USBD_STRINGS_MANUFACTURER_EXTERN


6231 
	#APP_USBD_STRINGS_MANUFACTURER_EXTERN
 0

	)

6244 #iâdeà
APP_USBD_STRINGS_MANUFACTURER


6245 
	#APP_USBD_STRINGS_MANUFACTURER
 
	`APP_USBD_STRING_DESC
("NÜdiøSemicÚduùÜ")

	)

6254 #iâdeà
APP_USBD_STRING_ID_PRODUCT


6255 
	#APP_USBD_STRING_ID_PRODUCT
 2

	)

6260 #iâdeà
APP_USBD_STRINGS_PRODUCT_EXTERN


6261 
	#APP_USBD_STRINGS_PRODUCT_EXTERN
 0

	)

6268 #iâdeà
APP_USBD_STRINGS_PRODUCT


6269 
	#APP_USBD_STRINGS_PRODUCT
 
	`APP_USBD_STRING_DESC
("nRF52 USB Produù")

	)

6278 #iâdeà
APP_USBD_STRING_ID_SERIAL


6279 
	#APP_USBD_STRING_ID_SERIAL
 3

	)

6284 #iâdeà
APP_USBD_STRING_SERIAL_EXTERN


6285 
	#APP_USBD_STRING_SERIAL_EXTERN
 0

	)

6292 #iâdeà
APP_USBD_STRING_SERIAL


6293 
	#APP_USBD_STRING_SERIAL
 
	`APP_USBD_STRING_DESC
("000000000000")

	)

6302 #iâdeà
APP_USBD_STRING_ID_CONFIGURATION


6303 
	#APP_USBD_STRING_ID_CONFIGURATION
 4

	)

6308 #iâdeà
APP_USBD_STRING_CONFIGURATION_EXTERN


6309 
	#APP_USBD_STRING_CONFIGURATION_EXTERN
 0

	)

6316 #iâdeà
APP_USBD_STRINGS_CONFIGURATION


6317 
	#APP_USBD_STRINGS_CONFIGURATION
 
	`APP_USBD_STRING_DESC
("DeçuÉ cÚfigu¿tiÚ")

	)

6337 #iâdeà
APP_USBD_STRINGS_USER


6338 
	#APP_USBD_STRINGS_USER
 
	`X
(
APP_USER_1
, , 
	`APP_USBD_STRING_DESC
("U£¸1"))

	)

6345 #iâdeà
APP_USBD_HID_ENABLED


6346 
	#APP_USBD_HID_ENABLED
 0

	)

6353 #iâdeà
APP_USBD_HID_DEFAULT_IDLE_RATE


6354 
	#APP_USBD_HID_DEFAULT_IDLE_RATE
 0

	)

6362 #iâdeà
APP_USBD_HID_REPORT_IDLE_TABLE_SIZE


6363 
	#APP_USBD_HID_REPORT_IDLE_TABLE_SIZE
 4

	)

6371 #iâdeà
APP_USBD_HID_GENERIC_ENABLED


6372 
	#APP_USBD_HID_GENERIC_ENABLED
 0

	)

6378 #iâdeà
APP_USBD_HID_KBD_ENABLED


6379 
	#APP_USBD_HID_KBD_ENABLED
 0

	)

6385 #iâdeà
APP_USBD_HID_MOUSE_ENABLED


6386 
	#APP_USBD_HID_MOUSE_ENABLED
 0

	)

6392 #iâdeà
APP_USBD_MSC_ENABLED


6393 
	#APP_USBD_MSC_ENABLED
 0

	)

6399 #iâdeà
CRC16_ENABLED


6400 
	#CRC16_ENABLED
 1

	)

6406 #iâdeà
CRC32_ENABLED


6407 
	#CRC32_ENABLED
 0

	)

6413 #iâdeà
ECC_ENABLED


6414 
	#ECC_ENABLED
 0

	)

6419 #iâdeà
FDS_ENABLED


6420 
	#FDS_ENABLED
 1

	)

6431 #iâdeà
FDS_VIRTUAL_PAGES


6432 
	#FDS_VIRTUAL_PAGES
 3

	)

6444 #iâdeà
FDS_VIRTUAL_PAGE_SIZE


6445 
	#FDS_VIRTUAL_PAGE_SIZE
 1024

	)

6463 #iâdeà
FDS_BACKEND


6464 
	#FDS_BACKEND
 2

	)

6476 #iâdeà
FDS_OP_QUEUE_SIZE


6477 
	#FDS_OP_QUEUE_SIZE
 4

	)

6492 #iâdeà
FDS_CRC_CHECK_ON_READ


6493 
	#FDS_CRC_CHECK_ON_READ
 0

	)

6503 #iâdeà
FDS_CRC_CHECK_ON_WRITE


6504 
	#FDS_CRC_CHECK_ON_WRITE
 0

	)

6516 #iâdeà
FDS_MAX_USERS


6517 
	#FDS_MAX_USERS
 4

	)

6528 #iâdeà
HARDFAULT_HANDLER_ENABLED


6529 
	#HARDFAULT_HANDLER_ENABLED
 0

	)

6534 #iâdeà
HCI_MEM_POOL_ENABLED


6535 
	#HCI_MEM_POOL_ENABLED
 0

	)

6538 #iâdeà
HCI_TX_BUF_SIZE


6539 
	#HCI_TX_BUF_SIZE
 600

	)

6543 #iâdeà
HCI_RX_BUF_SIZE


6544 
	#HCI_RX_BUF_SIZE
 600

	)

6548 #iâdeà
HCI_RX_BUF_QUEUE_SIZE


6549 
	#HCI_RX_BUF_QUEUE_SIZE
 4

	)

6556 #iâdeà
HCI_SLIP_ENABLED


6557 
	#HCI_SLIP_ENABLED
 0

	)

6578 #iâdeà
HCI_UART_BAUDRATE


6579 
	#HCI_UART_BAUDRATE
 30801920

	)

6587 #iâdeà
HCI_UART_FLOW_CONTROL


6588 
	#HCI_UART_FLOW_CONTROL
 0

	)

6592 #iâdeà
HCI_UART_RX_PIN


6593 
	#HCI_UART_RX_PIN
 8

	)

6597 #iâdeà
HCI_UART_TX_PIN


6598 
	#HCI_UART_TX_PIN
 6

	)

6602 #iâdeà
HCI_UART_RTS_PIN


6603 
	#HCI_UART_RTS_PIN
 5

	)

6607 #iâdeà
HCI_UART_CTS_PIN


6608 
	#HCI_UART_CTS_PIN
 7

	)

6615 #iâdeà
HCI_TRANSPORT_ENABLED


6616 
	#HCI_TRANSPORT_ENABLED
 0

	)

6619 #iâdeà
HCI_MAX_PACKET_SIZE_IN_BITS


6620 
	#HCI_MAX_PACKET_SIZE_IN_BITS
 8000

	)

6628 #iâdeà
LED_SOFTBLINK_ENABLED


6629 
	#LED_SOFTBLINK_ENABLED
 0

	)

6635 #iâdeà
LOW_POWER_PWM_ENABLED


6636 
	#LOW_POWER_PWM_ENABLED
 0

	)

6641 #iâdeà
MEM_MANAGER_ENABLED


6642 
	#MEM_MANAGER_ENABLED
 0

	)

6647 #iâdeà
MEMORY_MANAGER_SMALL_BLOCK_COUNT


6648 
	#MEMORY_MANAGER_SMALL_BLOCK_COUNT
 1

	)

6654 #iâdeà
MEMORY_MANAGER_SMALL_BLOCK_SIZE


6655 
	#MEMORY_MANAGER_SMALL_BLOCK_SIZE
 32

	)

6661 #iâdeà
MEMORY_MANAGER_MEDIUM_BLOCK_COUNT


6662 
	#MEMORY_MANAGER_MEDIUM_BLOCK_COUNT
 0

	)

6668 #iâdeà
MEMORY_MANAGER_MEDIUM_BLOCK_SIZE


6669 
	#MEMORY_MANAGER_MEDIUM_BLOCK_SIZE
 256

	)

6675 #iâdeà
MEMORY_MANAGER_LARGE_BLOCK_COUNT


6676 
	#MEMORY_MANAGER_LARGE_BLOCK_COUNT
 0

	)

6682 #iâdeà
MEMORY_MANAGER_LARGE_BLOCK_SIZE


6683 
	#MEMORY_MANAGER_LARGE_BLOCK_SIZE
 256

	)

6689 #iâdeà
MEMORY_MANAGER_XLARGE_BLOCK_COUNT


6690 
	#MEMORY_MANAGER_XLARGE_BLOCK_COUNT
 0

	)

6696 #iâdeà
MEMORY_MANAGER_XLARGE_BLOCK_SIZE


6697 
	#MEMORY_MANAGER_XLARGE_BLOCK_SIZE
 1320

	)

6703 #iâdeà
MEMORY_MANAGER_XXLARGE_BLOCK_COUNT


6704 
	#MEMORY_MANAGER_XXLARGE_BLOCK_COUNT
 0

	)

6710 #iâdeà
MEMORY_MANAGER_XXLARGE_BLOCK_SIZE


6711 
	#MEMORY_MANAGER_XXLARGE_BLOCK_SIZE
 3444

	)

6717 #iâdeà
MEMORY_MANAGER_XSMALL_BLOCK_COUNT


6718 
	#MEMORY_MANAGER_XSMALL_BLOCK_COUNT
 0

	)

6724 #iâdeà
MEMORY_MANAGER_XSMALL_BLOCK_SIZE


6725 
	#MEMORY_MANAGER_XSMALL_BLOCK_SIZE
 64

	)

6731 #iâdeà
MEMORY_MANAGER_XXSMALL_BLOCK_COUNT


6732 
	#MEMORY_MANAGER_XXSMALL_BLOCK_COUNT
 0

	)

6738 #iâdeà
MEMORY_MANAGER_XXSMALL_BLOCK_SIZE


6739 
	#MEMORY_MANAGER_XXSMALL_BLOCK_SIZE
 32

	)

6744 #iâdeà
MEM_MANAGER_CONFIG_LOG_ENABLED


6745 
	#MEM_MANAGER_CONFIG_LOG_ENABLED
 0

	)

6755 #iâdeà
MEM_MANAGER_CONFIG_LOG_LEVEL


6756 
	#MEM_MANAGER_CONFIG_LOG_LEVEL
 3

	)

6771 #iâdeà
MEM_MANAGER_CONFIG_INFO_COLOR


6772 
	#MEM_MANAGER_CONFIG_INFO_COLOR
 0

	)

6787 #iâdeà
MEM_MANAGER_CONFIG_DEBUG_COLOR


6788 
	#MEM_MANAGER_CONFIG_DEBUG_COLOR
 0

	)

6796 #iâdeà
MEM_MANAGER_DISABLE_API_PARAM_CHECK


6797 
	#MEM_MANAGER_DISABLE_API_PARAM_CHECK
 0

	)

6804 #iâdeà
NRF_BALLOC_ENABLED


6805 
	#NRF_BALLOC_ENABLED
 1

	)

6809 #iâdeà
NRF_BALLOC_CONFIG_DEBUG_ENABLED


6810 
	#NRF_BALLOC_CONFIG_DEBUG_ENABLED
 0

	)

6815 #iâdeà
NRF_BALLOC_CONFIG_HEAD_GUARD_WORDS


6816 
	#NRF_BALLOC_CONFIG_HEAD_GUARD_WORDS
 1

	)

6822 #iâdeà
NRF_BALLOC_CONFIG_TAIL_GUARD_WORDS


6823 
	#NRF_BALLOC_CONFIG_TAIL_GUARD_WORDS
 1

	)

6829 #iâdeà
NRF_BALLOC_CONFIG_BASIC_CHECKS_ENABLED


6830 
	#NRF_BALLOC_CONFIG_BASIC_CHECKS_ENABLED
 0

	)

6836 #iâdeà
NRF_BALLOC_CONFIG_DOUBLE_FREE_CHECK_ENABLED


6837 
	#NRF_BALLOC_CONFIG_DOUBLE_FREE_CHECK_ENABLED
 0

	)

6843 #iâdeà
NRF_BALLOC_CONFIG_DATA_TRASHING_CHECK_ENABLED


6844 
	#NRF_BALLOC_CONFIG_DATA_TRASHING_CHECK_ENABLED
 0

	)

6850 #iâdeà
NRF_BALLOC_CLI_CMDS


6851 
	#NRF_BALLOC_CLI_CMDS
 0

	)

6860 #iâdeà
NRF_CSENSE_ENABLED


6861 
	#NRF_CSENSE_ENABLED
 0

	)

6864 #iâdeà
NRF_CSENSE_PAD_HYSTERESIS


6865 
	#NRF_CSENSE_PAD_HYSTERESIS
 15

	)

6869 #iâdeà
NRF_CSENSE_PAD_DEVIATION


6870 
	#NRF_CSENSE_PAD_DEVIATION
 70

	)

6874 #iâdeà
NRF_CSENSE_MIN_PAD_VALUE


6875 
	#NRF_CSENSE_MIN_PAD_VALUE
 20

	)

6879 #iâdeà
NRF_CSENSE_MAX_PADS_NUMBER


6880 
	#NRF_CSENSE_MAX_PADS_NUMBER
 20

	)

6884 #iâdeà
NRF_CSENSE_MAX_VALUE


6885 
	#NRF_CSENSE_MAX_VALUE
 1000

	)

6891 #iâdeà
NRF_CSENSE_OUTPUT_PIN


6892 
	#NRF_CSENSE_OUTPUT_PIN
 26

	)

6899 #iâdeà
NRF_DRV_CSENSE_ENABLED


6900 
	#NRF_DRV_CSENSE_ENABLED
 0

	)

6906 #iâdeà
USE_COMP


6907 
	#USE_COMP
 0

	)

6910 #iâdeà
TIMER0_FOR_CSENSE


6911 
	#TIMER0_FOR_CSENSE
 1

	)

6915 #iâdeà
TIMER1_FOR_CSENSE


6916 
	#TIMER1_FOR_CSENSE
 2

	)

6924 #iâdeà
MEASUREMENT_PERIOD


6925 
	#MEASUREMENT_PERIOD
 20

	)

6935 #iâdeà
NRF_FPRINTF_ENABLED


6936 
	#NRF_FPRINTF_ENABLED
 1

	)

6941 #iâdeà
NRF_FSTORAGE_ENABLED


6942 
	#NRF_FSTORAGE_ENABLED
 1

	)

6955 #iâdeà
NRF_FSTORAGE_PARAM_CHECK_DISABLED


6956 
	#NRF_FSTORAGE_PARAM_CHECK_DISABLED
 0

	)

6969 #iâdeà
NRF_FSTORAGE_SD_QUEUE_SIZE


6970 
	#NRF_FSTORAGE_SD_QUEUE_SIZE
 4

	)

6977 #iâdeà
NRF_FSTORAGE_SD_MAX_RETRIES


6978 
	#NRF_FSTORAGE_SD_MAX_RETRIES
 8

	)

6987 #iâdeà
NRF_FSTORAGE_SD_MAX_WRITE_SIZE


6988 
	#NRF_FSTORAGE_SD_MAX_WRITE_SIZE
 4096

	)

6999 #iâdeà
NRF_GFX_ENABLED


7000 
	#NRF_GFX_ENABLED
 0

	)

7006 #iâdeà
NRF_MEMOBJ_ENABLED


7007 
	#NRF_MEMOBJ_ENABLED
 1

	)

7012 #iâdeà
NRF_PWR_MGMT_ENABLED


7013 
	#NRF_PWR_MGMT_ENABLED
 1

	)

7019 #iâdeà
NRF_PWR_MGMT_CONFIG_DEBUG_PIN_ENABLED


7020 
	#NRF_PWR_MGMT_CONFIG_DEBUG_PIN_ENABLED
 0

	)

7074 #iâdeà
NRF_PWR_MGMT_SLEEP_DEBUG_PIN


7075 
	#NRF_PWR_MGMT_SLEEP_DEBUG_PIN
 31

	)

7085 #iâdeà
NRF_PWR_MGMT_CONFIG_CPU_USAGE_MONITOR_ENABLED


7086 
	#NRF_PWR_MGMT_CONFIG_CPU_USAGE_MONITOR_ENABLED
 0

	)

7091 #iâdeà
NRF_PWR_MGMT_CONFIG_STANDBY_TIMEOUT_ENABLED


7092 
	#NRF_PWR_MGMT_CONFIG_STANDBY_TIMEOUT_ENABLED
 0

	)

7097 #iâdeà
NRF_PWR_MGMT_CONFIG_STANDBY_TIMEOUT_S


7098 
	#NRF_PWR_MGMT_CONFIG_STANDBY_TIMEOUT_S
 3

	)

7106 #iâdeà
NRF_PWR_MGMT_CONFIG_FPU_SUPPORT_ENABLED


7107 
	#NRF_PWR_MGMT_CONFIG_FPU_SUPPORT_ENABLED
 1

	)

7113 #iâdeà
NRF_PWR_MGMT_CONFIG_AUTO_SHUTDOWN_RETRY


7114 
	#NRF_PWR_MGMT_CONFIG_AUTO_SHUTDOWN_RETRY
 0

	)

7120 #iâdeà
NRF_PWR_MGMT_CONFIG_USE_SCHEDULER


7121 
	#NRF_PWR_MGMT_CONFIG_USE_SCHEDULER
 0

	)

7127 #iâdeà
NRF_PWR_MGMT_CONFIG_HANDLER_PRIORITY_COUNT


7128 
	#NRF_PWR_MGMT_CONFIG_HANDLER_PRIORITY_COUNT
 3

	)

7135 #iâdeà
NRF_QUEUE_ENABLED


7136 
	#NRF_QUEUE_ENABLED
 0

	)

7141 #iâdeà
NRF_QUEUE_CLI_CMDS


7142 
	#NRF_QUEUE_CLI_CMDS
 0

	)

7150 #iâdeà
NRF_SECTION_ITER_ENABLED


7151 
	#NRF_SECTION_ITER_ENABLED
 1

	)

7157 #iâdeà
NRF_SORTLIST_ENABLED


7158 
	#NRF_SORTLIST_ENABLED
 0

	)

7164 #iâdeà
NRF_SPI_MNGR_ENABLED


7165 
	#NRF_SPI_MNGR_ENABLED
 0

	)

7171 #iâdeà
NRF_STRERROR_ENABLED


7172 
	#NRF_STRERROR_ENABLED
 1

	)

7178 #iâdeà
NRF_TWI_MNGR_ENABLED


7179 
	#NRF_TWI_MNGR_ENABLED
 0

	)

7185 #iâdeà
SLIP_ENABLED


7186 
	#SLIP_ENABLED
 0

	)

7191 #iâdeà
TASK_MANAGER_ENABLED


7192 
	#TASK_MANAGER_ENABLED
 0

	)

7197 #iâdeà
TASK_MANAGER_CLI_CMDS


7198 
	#TASK_MANAGER_CLI_CMDS
 0

	)

7202 #iâdeà
TASK_MANAGER_CONFIG_MAX_TASKS


7203 
	#TASK_MANAGER_CONFIG_MAX_TASKS
 2

	)

7207 #iâdeà
TASK_MANAGER_CONFIG_STACK_SIZE


7208 
	#TASK_MANAGER_CONFIG_STACK_SIZE
 1024

	)

7214 #iâdeà
TASK_MANAGER_CONFIG_STACK_PROFILER_ENABLED


7215 
	#TASK_MANAGER_CONFIG_STACK_PROFILER_ENABLED
 1

	)

7227 #iâdeà
TASK_MANAGER_CONFIG_STACK_GUARD


7228 
	#TASK_MANAGER_CONFIG_STACK_GUARD
 7

	)

7239 #iâdeà
BUTTON_ENABLED


7240 
	#BUTTON_ENABLED
 1

	)

7246 #iâdeà
BUTTON_HIGH_ACCURACY_ENABLED


7247 
	#BUTTON_HIGH_ACCURACY_ENABLED
 0

	)

7259 #iâdeà
APP_USBD_CDC_ACM_ENABLED


7260 
	#APP_USBD_CDC_ACM_ENABLED
 0

	)

7269 #iâdeà
APP_USBD_CDC_ACM_ZLP_ON_EPSIZE_WRITE


7270 
	#APP_USBD_CDC_ACM_ZLP_ON_EPSIZE_WRITE
 1

	)

7282 #iâdeà
NRF_CLI_ENABLED


7283 
	#NRF_CLI_ENABLED
 0

	)

7287 #iâdeà
NRF_CLI_ARGC_MAX


7288 
	#NRF_CLI_ARGC_MAX
 12

	)

7294 #iâdeà
NRF_CLI_BUILD_IN_CMDS_ENABLED


7295 
	#NRF_CLI_BUILD_IN_CMDS_ENABLED
 1

	)

7299 #iâdeà
NRF_CLI_CMD_BUFF_SIZE


7300 
	#NRF_CLI_CMD_BUFF_SIZE
 128

	)

7306 #iâdeà
NRF_CLI_ECHO_STATUS


7307 
	#NRF_CLI_ECHO_STATUS
 1

	)

7313 #iâdeà
NRF_CLI_WILDCARD_ENABLED


7314 
	#NRF_CLI_WILDCARD_ENABLED
 0

	)

7320 #iâdeà
NRF_CLI_METAKEYS_ENABLED


7321 
	#NRF_CLI_METAKEYS_ENABLED
 0

	)

7325 #iâdeà
NRF_CLI_PRINTF_BUFF_SIZE


7326 
	#NRF_CLI_PRINTF_BUFF_SIZE
 23

	)

7331 #iâdeà
NRF_CLI_HISTORY_ENABLED


7332 
	#NRF_CLI_HISTORY_ENABLED
 1

	)

7335 #iâdeà
NRF_CLI_HISTORY_ELEMENT_SIZE


7336 
	#NRF_CLI_HISTORY_ELEMENT_SIZE
 32

	)

7340 #iâdeà
NRF_CLI_HISTORY_ELEMENT_COUNT


7341 
	#NRF_CLI_HISTORY_ELEMENT_COUNT
 8

	)

7349 #iâdeà
NRF_CLI_VT100_COLORS_ENABLED


7350 
	#NRF_CLI_VT100_COLORS_ENABLED
 1

	)

7356 #iâdeà
NRF_CLI_STATISTICS_ENABLED


7357 
	#NRF_CLI_STATISTICS_ENABLED
 1

	)

7363 #iâdeà
NRF_CLI_LOG_BACKEND


7364 
	#NRF_CLI_LOG_BACKEND
 1

	)

7370 #iâdeà
NRF_CLI_USES_TASK_MANAGER_ENABLED


7371 
	#NRF_CLI_USES_TASK_MANAGER_ENABLED
 0

	)

7385 #iâdeà
NRF_LOG_BACKEND_RTT_ENABLED


7386 
	#NRF_LOG_BACKEND_RTT_ENABLED
 0

	)

7394 #iâdeà
NRF_LOG_BACKEND_RTT_TEMP_BUFFER_SIZE


7395 
	#NRF_LOG_BACKEND_RTT_TEMP_BUFFER_SIZE
 64

	)

7399 #iâdeà
NRF_LOG_BACKEND_RTT_TX_RETRY_DELAY_MS


7400 
	#NRF_LOG_BACKEND_RTT_TX_RETRY_DELAY_MS
 1

	)

7410 #iâdeà
NRF_LOG_BACKEND_RTT_TX_RETRY_CNT


7411 
	#NRF_LOG_BACKEND_RTT_TX_RETRY_CNT
 3

	)

7418 #iâdeà
NRF_LOG_BACKEND_UART_ENABLED


7419 
	#NRF_LOG_BACKEND_UART_ENABLED
 1

	)

7422 #iâdeà
NRF_LOG_BACKEND_UART_TX_PIN


7423 
	#NRF_LOG_BACKEND_UART_TX_PIN
 6

	)

7445 #iâdeà
NRF_LOG_BACKEND_UART_BAUDRATE


7446 
	#NRF_LOG_BACKEND_UART_BAUDRATE
 30801920

	)

7455 #iâdeà
NRF_LOG_BACKEND_UART_TEMP_BUFFER_SIZE


7456 
	#NRF_LOG_BACKEND_UART_TEMP_BUFFER_SIZE
 64

	)

7463 #iâdeà
NRF_LOG_ENABLED


7464 
	#NRF_LOG_ENABLED
 1

	)

7475 #iâdeà
NRF_LOG_MSGPOOL_ELEMENT_SIZE


7476 
	#NRF_LOG_MSGPOOL_ELEMENT_SIZE
 20

	)

7485 #iâdeà
NRF_LOG_MSGPOOL_ELEMENT_COUNT


7486 
	#NRF_LOG_MSGPOOL_ELEMENT_COUNT
 8

	)

7498 #iâdeà
NRF_LOG_ALLOW_OVERFLOW


7499 
	#NRF_LOG_ALLOW_OVERFLOW
 1

	)

7516 #iâdeà
NRF_LOG_BUFSIZE


7517 
	#NRF_LOG_BUFSIZE
 1024

	)

7523 #iâdeà
NRF_LOG_CLI_CMDS


7524 
	#NRF_LOG_CLI_CMDS
 0

	)

7535 #iâdeà
NRF_LOG_DEFAULT_LEVEL


7536 
	#NRF_LOG_DEFAULT_LEVEL
 3

	)

7544 #iâdeà
NRF_LOG_DEFERRED


7545 
	#NRF_LOG_DEFERRED
 1

	)

7551 #iâdeà
NRF_LOG_FILTERS_ENABLED


7552 
	#NRF_LOG_FILTERS_ENABLED
 0

	)

7565 #iâdeà
NRF_LOG_STR_PUSH_BUFFER_SIZE


7566 
	#NRF_LOG_STR_PUSH_BUFFER_SIZE
 128

	)

7579 #iâdeà
NRF_LOG_STR_PUSH_BUFFER_SIZE


7580 
	#NRF_LOG_STR_PUSH_BUFFER_SIZE
 128

	)

7585 #iâdeà
NRF_LOG_USES_COLORS


7586 
	#NRF_LOG_USES_COLORS
 0

	)

7600 #iâdeà
NRF_LOG_COLOR_DEFAULT


7601 
	#NRF_LOG_COLOR_DEFAULT
 0

	)

7616 #iâdeà
NRF_LOG_ERROR_COLOR


7617 
	#NRF_LOG_ERROR_COLOR
 2

	)

7632 #iâdeà
NRF_LOG_WARNING_COLOR


7633 
	#NRF_LOG_WARNING_COLOR
 4

	)

7642 #iâdeà
NRF_LOG_USES_TIMESTAMP


7643 
	#NRF_LOG_USES_TIMESTAMP
 0

	)

7646 #iâdeà
NRF_LOG_TIMESTAMP_DEFAULT_FREQUENCY


7647 
	#NRF_LOG_TIMESTAMP_DEFAULT_FREQUENCY
 0

	)

7660 #iâdeà
NRF_MPU_CONFIG_LOG_ENABLED


7661 
	#NRF_MPU_CONFIG_LOG_ENABLED
 0

	)

7671 #iâdeà
NRF_MPU_CONFIG_LOG_LEVEL


7672 
	#NRF_MPU_CONFIG_LOG_LEVEL
 3

	)

7687 #iâdeà
NRF_MPU_CONFIG_INFO_COLOR


7688 
	#NRF_MPU_CONFIG_INFO_COLOR
 0

	)

7703 #iâdeà
NRF_MPU_CONFIG_DEBUG_COLOR


7704 
	#NRF_MPU_CONFIG_DEBUG_COLOR
 0

	)

7711 #iâdeà
NRF_STACK_GUARD_CONFIG_LOG_ENABLED


7712 
	#NRF_STACK_GUARD_CONFIG_LOG_ENABLED
 0

	)

7722 #iâdeà
NRF_STACK_GUARD_CONFIG_LOG_LEVEL


7723 
	#NRF_STACK_GUARD_CONFIG_LOG_LEVEL
 3

	)

7738 #iâdeà
NRF_STACK_GUARD_CONFIG_INFO_COLOR


7739 
	#NRF_STACK_GUARD_CONFIG_INFO_COLOR
 0

	)

7754 #iâdeà
NRF_STACK_GUARD_CONFIG_DEBUG_COLOR


7755 
	#NRF_STACK_GUARD_CONFIG_DEBUG_COLOR
 0

	)

7762 #iâdeà
TASK_MANAGER_CONFIG_LOG_ENABLED


7763 
	#TASK_MANAGER_CONFIG_LOG_ENABLED
 0

	)

7773 #iâdeà
TASK_MANAGER_CONFIG_LOG_LEVEL


7774 
	#TASK_MANAGER_CONFIG_LOG_LEVEL
 3

	)

7789 #iâdeà
TASK_MANAGER_CONFIG_INFO_COLOR


7790 
	#TASK_MANAGER_CONFIG_INFO_COLOR
 0

	)

7805 #iâdeà
TASK_MANAGER_CONFIG_DEBUG_COLOR


7806 
	#TASK_MANAGER_CONFIG_DEBUG_COLOR
 0

	)

7819 #iâdeà
CLOCK_CONFIG_LOG_ENABLED


7820 
	#CLOCK_CONFIG_LOG_ENABLED
 0

	)

7830 #iâdeà
CLOCK_CONFIG_LOG_LEVEL


7831 
	#CLOCK_CONFIG_LOG_LEVEL
 3

	)

7846 #iâdeà
CLOCK_CONFIG_INFO_COLOR


7847 
	#CLOCK_CONFIG_INFO_COLOR
 0

	)

7862 #iâdeà
CLOCK_CONFIG_DEBUG_COLOR


7863 
	#CLOCK_CONFIG_DEBUG_COLOR
 0

	)

7870 #iâdeà
COMP_CONFIG_LOG_ENABLED


7871 
	#COMP_CONFIG_LOG_ENABLED
 0

	)

7881 #iâdeà
COMP_CONFIG_LOG_LEVEL


7882 
	#COMP_CONFIG_LOG_LEVEL
 3

	)

7897 #iâdeà
COMP_CONFIG_INFO_COLOR


7898 
	#COMP_CONFIG_INFO_COLOR
 0

	)

7913 #iâdeà
COMP_CONFIG_DEBUG_COLOR


7914 
	#COMP_CONFIG_DEBUG_COLOR
 0

	)

7921 #iâdeà
GPIOTE_CONFIG_LOG_ENABLED


7922 
	#GPIOTE_CONFIG_LOG_ENABLED
 0

	)

7932 #iâdeà
GPIOTE_CONFIG_LOG_LEVEL


7933 
	#GPIOTE_CONFIG_LOG_LEVEL
 3

	)

7948 #iâdeà
GPIOTE_CONFIG_INFO_COLOR


7949 
	#GPIOTE_CONFIG_INFO_COLOR
 0

	)

7964 #iâdeà
GPIOTE_CONFIG_DEBUG_COLOR


7965 
	#GPIOTE_CONFIG_DEBUG_COLOR
 0

	)

7972 #iâdeà
LPCOMP_CONFIG_LOG_ENABLED


7973 
	#LPCOMP_CONFIG_LOG_ENABLED
 0

	)

7983 #iâdeà
LPCOMP_CONFIG_LOG_LEVEL


7984 
	#LPCOMP_CONFIG_LOG_LEVEL
 3

	)

7999 #iâdeà
LPCOMP_CONFIG_INFO_COLOR


8000 
	#LPCOMP_CONFIG_INFO_COLOR
 0

	)

8015 #iâdeà
LPCOMP_CONFIG_DEBUG_COLOR


8016 
	#LPCOMP_CONFIG_DEBUG_COLOR
 0

	)

8023 #iâdeà
MAX3421E_HOST_CONFIG_LOG_ENABLED


8024 
	#MAX3421E_HOST_CONFIG_LOG_ENABLED
 0

	)

8034 #iâdeà
MAX3421E_HOST_CONFIG_LOG_LEVEL


8035 
	#MAX3421E_HOST_CONFIG_LOG_LEVEL
 3

	)

8050 #iâdeà
MAX3421E_HOST_CONFIG_INFO_COLOR


8051 
	#MAX3421E_HOST_CONFIG_INFO_COLOR
 0

	)

8066 #iâdeà
MAX3421E_HOST_CONFIG_DEBUG_COLOR


8067 
	#MAX3421E_HOST_CONFIG_DEBUG_COLOR
 0

	)

8074 #iâdeà
PDM_CONFIG_LOG_ENABLED


8075 
	#PDM_CONFIG_LOG_ENABLED
 0

	)

8085 #iâdeà
PDM_CONFIG_LOG_LEVEL


8086 
	#PDM_CONFIG_LOG_LEVEL
 3

	)

8101 #iâdeà
PDM_CONFIG_INFO_COLOR


8102 
	#PDM_CONFIG_INFO_COLOR
 0

	)

8117 #iâdeà
PDM_CONFIG_DEBUG_COLOR


8118 
	#PDM_CONFIG_DEBUG_COLOR
 0

	)

8125 #iâdeà
PPI_CONFIG_LOG_ENABLED


8126 
	#PPI_CONFIG_LOG_ENABLED
 0

	)

8136 #iâdeà
PPI_CONFIG_LOG_LEVEL


8137 
	#PPI_CONFIG_LOG_LEVEL
 3

	)

8152 #iâdeà
PPI_CONFIG_INFO_COLOR


8153 
	#PPI_CONFIG_INFO_COLOR
 0

	)

8168 #iâdeà
PPI_CONFIG_DEBUG_COLOR


8169 
	#PPI_CONFIG_DEBUG_COLOR
 0

	)

8176 #iâdeà
PWM_CONFIG_LOG_ENABLED


8177 
	#PWM_CONFIG_LOG_ENABLED
 0

	)

8187 #iâdeà
PWM_CONFIG_LOG_LEVEL


8188 
	#PWM_CONFIG_LOG_LEVEL
 3

	)

8203 #iâdeà
PWM_CONFIG_INFO_COLOR


8204 
	#PWM_CONFIG_INFO_COLOR
 0

	)

8219 #iâdeà
PWM_CONFIG_DEBUG_COLOR


8220 
	#PWM_CONFIG_DEBUG_COLOR
 0

	)

8227 #iâdeà
QDEC_CONFIG_LOG_ENABLED


8228 
	#QDEC_CONFIG_LOG_ENABLED
 0

	)

8238 #iâdeà
QDEC_CONFIG_LOG_LEVEL


8239 
	#QDEC_CONFIG_LOG_LEVEL
 3

	)

8254 #iâdeà
QDEC_CONFIG_INFO_COLOR


8255 
	#QDEC_CONFIG_INFO_COLOR
 0

	)

8270 #iâdeà
QDEC_CONFIG_DEBUG_COLOR


8271 
	#QDEC_CONFIG_DEBUG_COLOR
 0

	)

8278 #iâdeà
RNG_CONFIG_LOG_ENABLED


8279 
	#RNG_CONFIG_LOG_ENABLED
 0

	)

8289 #iâdeà
RNG_CONFIG_LOG_LEVEL


8290 
	#RNG_CONFIG_LOG_LEVEL
 3

	)

8305 #iâdeà
RNG_CONFIG_INFO_COLOR


8306 
	#RNG_CONFIG_INFO_COLOR
 0

	)

8321 #iâdeà
RNG_CONFIG_DEBUG_COLOR


8322 
	#RNG_CONFIG_DEBUG_COLOR
 0

	)

8328 #iâdeà
RNG_CONFIG_RANDOM_NUMBER_LOG_ENABLED


8329 
	#RNG_CONFIG_RANDOM_NUMBER_LOG_ENABLED
 0

	)

8336 #iâdeà
RTC_CONFIG_LOG_ENABLED


8337 
	#RTC_CONFIG_LOG_ENABLED
 0

	)

8347 #iâdeà
RTC_CONFIG_LOG_LEVEL


8348 
	#RTC_CONFIG_LOG_LEVEL
 3

	)

8363 #iâdeà
RTC_CONFIG_INFO_COLOR


8364 
	#RTC_CONFIG_INFO_COLOR
 0

	)

8379 #iâdeà
RTC_CONFIG_DEBUG_COLOR


8380 
	#RTC_CONFIG_DEBUG_COLOR
 0

	)

8387 #iâdeà
SAADC_CONFIG_LOG_ENABLED


8388 
	#SAADC_CONFIG_LOG_ENABLED
 0

	)

8398 #iâdeà
SAADC_CONFIG_LOG_LEVEL


8399 
	#SAADC_CONFIG_LOG_LEVEL
 3

	)

8414 #iâdeà
SAADC_CONFIG_INFO_COLOR


8415 
	#SAADC_CONFIG_INFO_COLOR
 0

	)

8430 #iâdeà
SAADC_CONFIG_DEBUG_COLOR


8431 
	#SAADC_CONFIG_DEBUG_COLOR
 0

	)

8438 #iâdeà
SPIS_CONFIG_LOG_ENABLED


8439 
	#SPIS_CONFIG_LOG_ENABLED
 0

	)

8449 #iâdeà
SPIS_CONFIG_LOG_LEVEL


8450 
	#SPIS_CONFIG_LOG_LEVEL
 3

	)

8465 #iâdeà
SPIS_CONFIG_INFO_COLOR


8466 
	#SPIS_CONFIG_INFO_COLOR
 0

	)

8481 #iâdeà
SPIS_CONFIG_DEBUG_COLOR


8482 
	#SPIS_CONFIG_DEBUG_COLOR
 0

	)

8489 #iâdeà
SPI_CONFIG_LOG_ENABLED


8490 
	#SPI_CONFIG_LOG_ENABLED
 0

	)

8500 #iâdeà
SPI_CONFIG_LOG_LEVEL


8501 
	#SPI_CONFIG_LOG_LEVEL
 3

	)

8516 #iâdeà
SPI_CONFIG_INFO_COLOR


8517 
	#SPI_CONFIG_INFO_COLOR
 0

	)

8532 #iâdeà
SPI_CONFIG_DEBUG_COLOR


8533 
	#SPI_CONFIG_DEBUG_COLOR
 0

	)

8540 #iâdeà
TIMER_CONFIG_LOG_ENABLED


8541 
	#TIMER_CONFIG_LOG_ENABLED
 0

	)

8551 #iâdeà
TIMER_CONFIG_LOG_LEVEL


8552 
	#TIMER_CONFIG_LOG_LEVEL
 3

	)

8567 #iâdeà
TIMER_CONFIG_INFO_COLOR


8568 
	#TIMER_CONFIG_INFO_COLOR
 0

	)

8583 #iâdeà
TIMER_CONFIG_DEBUG_COLOR


8584 
	#TIMER_CONFIG_DEBUG_COLOR
 0

	)

8591 #iâdeà
TWIS_CONFIG_LOG_ENABLED


8592 
	#TWIS_CONFIG_LOG_ENABLED
 0

	)

8602 #iâdeà
TWIS_CONFIG_LOG_LEVEL


8603 
	#TWIS_CONFIG_LOG_LEVEL
 3

	)

8618 #iâdeà
TWIS_CONFIG_INFO_COLOR


8619 
	#TWIS_CONFIG_INFO_COLOR
 0

	)

8634 #iâdeà
TWIS_CONFIG_DEBUG_COLOR


8635 
	#TWIS_CONFIG_DEBUG_COLOR
 0

	)

8642 #iâdeà
TWI_CONFIG_LOG_ENABLED


8643 
	#TWI_CONFIG_LOG_ENABLED
 0

	)

8653 #iâdeà
TWI_CONFIG_LOG_LEVEL


8654 
	#TWI_CONFIG_LOG_LEVEL
 3

	)

8669 #iâdeà
TWI_CONFIG_INFO_COLOR


8670 
	#TWI_CONFIG_INFO_COLOR
 0

	)

8685 #iâdeà
TWI_CONFIG_DEBUG_COLOR


8686 
	#TWI_CONFIG_DEBUG_COLOR
 0

	)

8693 #iâdeà
UART_CONFIG_LOG_ENABLED


8694 
	#UART_CONFIG_LOG_ENABLED
 0

	)

8704 #iâdeà
UART_CONFIG_LOG_LEVEL


8705 
	#UART_CONFIG_LOG_LEVEL
 3

	)

8720 #iâdeà
UART_CONFIG_INFO_COLOR


8721 
	#UART_CONFIG_INFO_COLOR
 0

	)

8736 #iâdeà
UART_CONFIG_DEBUG_COLOR


8737 
	#UART_CONFIG_DEBUG_COLOR
 0

	)

8744 #iâdeà
USBD_CONFIG_LOG_ENABLED


8745 
	#USBD_CONFIG_LOG_ENABLED
 0

	)

8755 #iâdeà
USBD_CONFIG_LOG_LEVEL


8756 
	#USBD_CONFIG_LOG_LEVEL
 3

	)

8771 #iâdeà
USBD_CONFIG_INFO_COLOR


8772 
	#USBD_CONFIG_INFO_COLOR
 0

	)

8787 #iâdeà
USBD_CONFIG_DEBUG_COLOR


8788 
	#USBD_CONFIG_DEBUG_COLOR
 0

	)

8795 #iâdeà
WDT_CONFIG_LOG_ENABLED


8796 
	#WDT_CONFIG_LOG_ENABLED
 0

	)

8806 #iâdeà
WDT_CONFIG_LOG_LEVEL


8807 
	#WDT_CONFIG_LOG_LEVEL
 3

	)

8822 #iâdeà
WDT_CONFIG_INFO_COLOR


8823 
	#WDT_CONFIG_INFO_COLOR
 0

	)

8838 #iâdeà
WDT_CONFIG_DEBUG_COLOR


8839 
	#WDT_CONFIG_DEBUG_COLOR
 0

	)

8852 #iâdeà
APP_TIMER_CONFIG_LOG_ENABLED


8853 
	#APP_TIMER_CONFIG_LOG_ENABLED
 0

	)

8863 #iâdeà
APP_TIMER_CONFIG_LOG_LEVEL


8864 
	#APP_TIMER_CONFIG_LOG_LEVEL
 3

	)

8879 #iâdeà
APP_TIMER_CONFIG_INITIAL_LOG_LEVEL


8880 
	#APP_TIMER_CONFIG_INITIAL_LOG_LEVEL
 3

	)

8895 #iâdeà
APP_TIMER_CONFIG_INFO_COLOR


8896 
	#APP_TIMER_CONFIG_INFO_COLOR
 0

	)

8911 #iâdeà
APP_TIMER_CONFIG_DEBUG_COLOR


8912 
	#APP_TIMER_CONFIG_DEBUG_COLOR
 0

	)

8919 #iâdeà
APP_USBD_CDC_ACM_CONFIG_LOG_ENABLED


8920 
	#APP_USBD_CDC_ACM_CONFIG_LOG_ENABLED
 0

	)

8930 #iâdeà
APP_USBD_CDC_ACM_CONFIG_LOG_LEVEL


8931 
	#APP_USBD_CDC_ACM_CONFIG_LOG_LEVEL
 3

	)

8946 #iâdeà
APP_USBD_CDC_ACM_CONFIG_INFO_COLOR


8947 
	#APP_USBD_CDC_ACM_CONFIG_INFO_COLOR
 0

	)

8962 #iâdeà
APP_USBD_CDC_ACM_CONFIG_DEBUG_COLOR


8963 
	#APP_USBD_CDC_ACM_CONFIG_DEBUG_COLOR
 0

	)

8970 #iâdeà
APP_USBD_CONFIG_LOG_ENABLED


8971 
	#APP_USBD_CONFIG_LOG_ENABLED
 0

	)

8981 #iâdeà
APP_USBD_CONFIG_LOG_LEVEL


8982 
	#APP_USBD_CONFIG_LOG_LEVEL
 3

	)

8997 #iâdeà
APP_USBD_CONFIG_INFO_COLOR


8998 
	#APP_USBD_CONFIG_INFO_COLOR
 0

	)

9013 #iâdeà
APP_USBD_CONFIG_DEBUG_COLOR


9014 
	#APP_USBD_CONFIG_DEBUG_COLOR
 0

	)

9021 #iâdeà
APP_USBD_DUMMY_CONFIG_LOG_ENABLED


9022 
	#APP_USBD_DUMMY_CONFIG_LOG_ENABLED
 0

	)

9032 #iâdeà
APP_USBD_DUMMY_CONFIG_LOG_LEVEL


9033 
	#APP_USBD_DUMMY_CONFIG_LOG_LEVEL
 3

	)

9048 #iâdeà
APP_USBD_DUMMY_CONFIG_INFO_COLOR


9049 
	#APP_USBD_DUMMY_CONFIG_INFO_COLOR
 0

	)

9064 #iâdeà
APP_USBD_DUMMY_CONFIG_DEBUG_COLOR


9065 
	#APP_USBD_DUMMY_CONFIG_DEBUG_COLOR
 0

	)

9072 #iâdeà
APP_USBD_MSC_CONFIG_LOG_ENABLED


9073 
	#APP_USBD_MSC_CONFIG_LOG_ENABLED
 0

	)

9083 #iâdeà
APP_USBD_MSC_CONFIG_LOG_LEVEL


9084 
	#APP_USBD_MSC_CONFIG_LOG_LEVEL
 3

	)

9099 #iâdeà
APP_USBD_MSC_CONFIG_INFO_COLOR


9100 
	#APP_USBD_MSC_CONFIG_INFO_COLOR
 0

	)

9115 #iâdeà
APP_USBD_MSC_CONFIG_DEBUG_COLOR


9116 
	#APP_USBD_MSC_CONFIG_DEBUG_COLOR
 0

	)

9123 #iâdeà
APP_USBD_NRF_DFU_TRIGGER_CONFIG_LOG_ENABLED


9124 
	#APP_USBD_NRF_DFU_TRIGGER_CONFIG_LOG_ENABLED
 0

	)

9134 #iâdeà
APP_USBD_NRF_DFU_TRIGGER_CONFIG_LOG_LEVEL


9135 
	#APP_USBD_NRF_DFU_TRIGGER_CONFIG_LOG_LEVEL
 3

	)

9150 #iâdeà
APP_USBD_NRF_DFU_TRIGGER_CONFIG_INFO_COLOR


9151 
	#APP_USBD_NRF_DFU_TRIGGER_CONFIG_INFO_COLOR
 0

	)

9166 #iâdeà
APP_USBD_NRF_DFU_TRIGGER_CONFIG_DEBUG_COLOR


9167 
	#APP_USBD_NRF_DFU_TRIGGER_CONFIG_DEBUG_COLOR
 0

	)

9174 #iâdeà
NRF_ATFIFO_CONFIG_LOG_ENABLED


9175 
	#NRF_ATFIFO_CONFIG_LOG_ENABLED
 0

	)

9185 #iâdeà
NRF_ATFIFO_CONFIG_LOG_LEVEL


9186 
	#NRF_ATFIFO_CONFIG_LOG_LEVEL
 3

	)

9197 #iâdeà
NRF_ATFIFO_CONFIG_LOG_INIT_FILTER_LEVEL


9198 
	#NRF_ATFIFO_CONFIG_LOG_INIT_FILTER_LEVEL
 3

	)

9213 #iâdeà
NRF_ATFIFO_CONFIG_INFO_COLOR


9214 
	#NRF_ATFIFO_CONFIG_INFO_COLOR
 0

	)

9229 #iâdeà
NRF_ATFIFO_CONFIG_DEBUG_COLOR


9230 
	#NRF_ATFIFO_CONFIG_DEBUG_COLOR
 0

	)

9237 #iâdeà
NRF_BALLOC_CONFIG_LOG_ENABLED


9238 
	#NRF_BALLOC_CONFIG_LOG_ENABLED
 0

	)

9248 #iâdeà
NRF_BALLOC_CONFIG_LOG_LEVEL


9249 
	#NRF_BALLOC_CONFIG_LOG_LEVEL
 3

	)

9264 #iâdeà
NRF_BALLOC_CONFIG_INITIAL_LOG_LEVEL


9265 
	#NRF_BALLOC_CONFIG_INITIAL_LOG_LEVEL
 3

	)

9280 #iâdeà
NRF_BALLOC_CONFIG_INFO_COLOR


9281 
	#NRF_BALLOC_CONFIG_INFO_COLOR
 0

	)

9296 #iâdeà
NRF_BALLOC_CONFIG_DEBUG_COLOR


9297 
	#NRF_BALLOC_CONFIG_DEBUG_COLOR
 0

	)

9304 #iâdeà
NRF_BLOCK_DEV_EMPTY_CONFIG_LOG_ENABLED


9305 
	#NRF_BLOCK_DEV_EMPTY_CONFIG_LOG_ENABLED
 0

	)

9315 #iâdeà
NRF_BLOCK_DEV_EMPTY_CONFIG_LOG_LEVEL


9316 
	#NRF_BLOCK_DEV_EMPTY_CONFIG_LOG_LEVEL
 3

	)

9327 #iâdeà
NRF_BLOCK_DEV_EMPTY_CONFIG_LOG_INIT_FILTER_LEVEL


9328 
	#NRF_BLOCK_DEV_EMPTY_CONFIG_LOG_INIT_FILTER_LEVEL
 3

	)

9343 #iâdeà
NRF_BLOCK_DEV_EMPTY_CONFIG_INFO_COLOR


9344 
	#NRF_BLOCK_DEV_EMPTY_CONFIG_INFO_COLOR
 0

	)

9359 #iâdeà
NRF_BLOCK_DEV_EMPTY_CONFIG_DEBUG_COLOR


9360 
	#NRF_BLOCK_DEV_EMPTY_CONFIG_DEBUG_COLOR
 0

	)

9367 #iâdeà
NRF_BLOCK_DEV_QSPI_CONFIG_LOG_ENABLED


9368 
	#NRF_BLOCK_DEV_QSPI_CONFIG_LOG_ENABLED
 0

	)

9378 #iâdeà
NRF_BLOCK_DEV_QSPI_CONFIG_LOG_LEVEL


9379 
	#NRF_BLOCK_DEV_QSPI_CONFIG_LOG_LEVEL
 3

	)

9390 #iâdeà
NRF_BLOCK_DEV_QSPI_CONFIG_LOG_INIT_FILTER_LEVEL


9391 
	#NRF_BLOCK_DEV_QSPI_CONFIG_LOG_INIT_FILTER_LEVEL
 3

	)

9406 #iâdeà
NRF_BLOCK_DEV_QSPI_CONFIG_INFO_COLOR


9407 
	#NRF_BLOCK_DEV_QSPI_CONFIG_INFO_COLOR
 0

	)

9422 #iâdeà
NRF_BLOCK_DEV_QSPI_CONFIG_DEBUG_COLOR


9423 
	#NRF_BLOCK_DEV_QSPI_CONFIG_DEBUG_COLOR
 0

	)

9430 #iâdeà
NRF_BLOCK_DEV_RAM_CONFIG_LOG_ENABLED


9431 
	#NRF_BLOCK_DEV_RAM_CONFIG_LOG_ENABLED
 0

	)

9441 #iâdeà
NRF_BLOCK_DEV_RAM_CONFIG_LOG_LEVEL


9442 
	#NRF_BLOCK_DEV_RAM_CONFIG_LOG_LEVEL
 3

	)

9453 #iâdeà
NRF_BLOCK_DEV_RAM_CONFIG_LOG_INIT_FILTER_LEVEL


9454 
	#NRF_BLOCK_DEV_RAM_CONFIG_LOG_INIT_FILTER_LEVEL
 3

	)

9469 #iâdeà
NRF_BLOCK_DEV_RAM_CONFIG_INFO_COLOR


9470 
	#NRF_BLOCK_DEV_RAM_CONFIG_INFO_COLOR
 0

	)

9485 #iâdeà
NRF_BLOCK_DEV_RAM_CONFIG_DEBUG_COLOR


9486 
	#NRF_BLOCK_DEV_RAM_CONFIG_DEBUG_COLOR
 0

	)

9493 #iâdeà
NRF_CLI_BLE_UART_CONFIG_LOG_ENABLED


9494 
	#NRF_CLI_BLE_UART_CONFIG_LOG_ENABLED
 0

	)

9504 #iâdeà
NRF_CLI_BLE_UART_CONFIG_LOG_LEVEL


9505 
	#NRF_CLI_BLE_UART_CONFIG_LOG_LEVEL
 3

	)

9520 #iâdeà
NRF_CLI_BLE_UART_CONFIG_INFO_COLOR


9521 
	#NRF_CLI_BLE_UART_CONFIG_INFO_COLOR
 0

	)

9536 #iâdeà
NRF_CLI_BLE_UART_CONFIG_DEBUG_COLOR


9537 
	#NRF_CLI_BLE_UART_CONFIG_DEBUG_COLOR
 0

	)

9544 #iâdeà
NRF_CLI_LIBUARTE_CONFIG_LOG_ENABLED


9545 
	#NRF_CLI_LIBUARTE_CONFIG_LOG_ENABLED
 0

	)

9555 #iâdeà
NRF_CLI_LIBUARTE_CONFIG_LOG_LEVEL


9556 
	#NRF_CLI_LIBUARTE_CONFIG_LOG_LEVEL
 3

	)

9571 #iâdeà
NRF_CLI_LIBUARTE_CONFIG_INFO_COLOR


9572 
	#NRF_CLI_LIBUARTE_CONFIG_INFO_COLOR
 0

	)

9587 #iâdeà
NRF_CLI_LIBUARTE_CONFIG_DEBUG_COLOR


9588 
	#NRF_CLI_LIBUARTE_CONFIG_DEBUG_COLOR
 0

	)

9595 #iâdeà
NRF_CLI_UART_CONFIG_LOG_ENABLED


9596 
	#NRF_CLI_UART_CONFIG_LOG_ENABLED
 0

	)

9606 #iâdeà
NRF_CLI_UART_CONFIG_LOG_LEVEL


9607 
	#NRF_CLI_UART_CONFIG_LOG_LEVEL
 3

	)

9622 #iâdeà
NRF_CLI_UART_CONFIG_INFO_COLOR


9623 
	#NRF_CLI_UART_CONFIG_INFO_COLOR
 0

	)

9638 #iâdeà
NRF_CLI_UART_CONFIG_DEBUG_COLOR


9639 
	#NRF_CLI_UART_CONFIG_DEBUG_COLOR
 0

	)

9646 #iâdeà
NRF_LIBUARTE_CONFIG_LOG_ENABLED


9647 
	#NRF_LIBUARTE_CONFIG_LOG_ENABLED
 0

	)

9657 #iâdeà
NRF_LIBUARTE_CONFIG_LOG_LEVEL


9658 
	#NRF_LIBUARTE_CONFIG_LOG_LEVEL
 3

	)

9673 #iâdeà
NRF_LIBUARTE_CONFIG_INFO_COLOR


9674 
	#NRF_LIBUARTE_CONFIG_INFO_COLOR
 0

	)

9689 #iâdeà
NRF_LIBUARTE_CONFIG_DEBUG_COLOR


9690 
	#NRF_LIBUARTE_CONFIG_DEBUG_COLOR
 0

	)

9697 #iâdeà
NRF_MEMOBJ_CONFIG_LOG_ENABLED


9698 
	#NRF_MEMOBJ_CONFIG_LOG_ENABLED
 0

	)

9708 #iâdeà
NRF_MEMOBJ_CONFIG_LOG_LEVEL


9709 
	#NRF_MEMOBJ_CONFIG_LOG_LEVEL
 3

	)

9724 #iâdeà
NRF_MEMOBJ_CONFIG_INFO_COLOR


9725 
	#NRF_MEMOBJ_CONFIG_INFO_COLOR
 0

	)

9740 #iâdeà
NRF_MEMOBJ_CONFIG_DEBUG_COLOR


9741 
	#NRF_MEMOBJ_CONFIG_DEBUG_COLOR
 0

	)

9748 #iâdeà
NRF_PWR_MGMT_CONFIG_LOG_ENABLED


9749 
	#NRF_PWR_MGMT_CONFIG_LOG_ENABLED
 0

	)

9759 #iâdeà
NRF_PWR_MGMT_CONFIG_LOG_LEVEL


9760 
	#NRF_PWR_MGMT_CONFIG_LOG_LEVEL
 3

	)

9775 #iâdeà
NRF_PWR_MGMT_CONFIG_INFO_COLOR


9776 
	#NRF_PWR_MGMT_CONFIG_INFO_COLOR
 0

	)

9791 #iâdeà
NRF_PWR_MGMT_CONFIG_DEBUG_COLOR


9792 
	#NRF_PWR_MGMT_CONFIG_DEBUG_COLOR
 0

	)

9799 #iâdeà
NRF_QUEUE_CONFIG_LOG_ENABLED


9800 
	#NRF_QUEUE_CONFIG_LOG_ENABLED
 0

	)

9810 #iâdeà
NRF_QUEUE_CONFIG_LOG_LEVEL


9811 
	#NRF_QUEUE_CONFIG_LOG_LEVEL
 3

	)

9822 #iâdeà
NRF_QUEUE_CONFIG_LOG_INIT_FILTER_LEVEL


9823 
	#NRF_QUEUE_CONFIG_LOG_INIT_FILTER_LEVEL
 3

	)

9838 #iâdeà
NRF_QUEUE_CONFIG_INFO_COLOR


9839 
	#NRF_QUEUE_CONFIG_INFO_COLOR
 0

	)

9854 #iâdeà
NRF_QUEUE_CONFIG_DEBUG_COLOR


9855 
	#NRF_QUEUE_CONFIG_DEBUG_COLOR
 0

	)

9862 #iâdeà
NRF_SDH_ANT_LOG_ENABLED


9863 
	#NRF_SDH_ANT_LOG_ENABLED
 0

	)

9873 #iâdeà
NRF_SDH_ANT_LOG_LEVEL


9874 
	#NRF_SDH_ANT_LOG_LEVEL
 3

	)

9889 #iâdeà
NRF_SDH_ANT_INFO_COLOR


9890 
	#NRF_SDH_ANT_INFO_COLOR
 0

	)

9905 #iâdeà
NRF_SDH_ANT_DEBUG_COLOR


9906 
	#NRF_SDH_ANT_DEBUG_COLOR
 0

	)

9913 #iâdeà
NRF_SDH_BLE_LOG_ENABLED


9914 
	#NRF_SDH_BLE_LOG_ENABLED
 1

	)

9924 #iâdeà
NRF_SDH_BLE_LOG_LEVEL


9925 
	#NRF_SDH_BLE_LOG_LEVEL
 3

	)

9940 #iâdeà
NRF_SDH_BLE_INFO_COLOR


9941 
	#NRF_SDH_BLE_INFO_COLOR
 0

	)

9956 #iâdeà
NRF_SDH_BLE_DEBUG_COLOR


9957 
	#NRF_SDH_BLE_DEBUG_COLOR
 0

	)

9964 #iâdeà
NRF_SDH_LOG_ENABLED


9965 
	#NRF_SDH_LOG_ENABLED
 1

	)

9975 #iâdeà
NRF_SDH_LOG_LEVEL


9976 
	#NRF_SDH_LOG_LEVEL
 3

	)

9991 #iâdeà
NRF_SDH_INFO_COLOR


9992 
	#NRF_SDH_INFO_COLOR
 0

	)

10007 #iâdeà
NRF_SDH_DEBUG_COLOR


10008 
	#NRF_SDH_DEBUG_COLOR
 0

	)

10015 #iâdeà
NRF_SDH_SOC_LOG_ENABLED


10016 
	#NRF_SDH_SOC_LOG_ENABLED
 1

	)

10026 #iâdeà
NRF_SDH_SOC_LOG_LEVEL


10027 
	#NRF_SDH_SOC_LOG_LEVEL
 3

	)

10042 #iâdeà
NRF_SDH_SOC_INFO_COLOR


10043 
	#NRF_SDH_SOC_INFO_COLOR
 0

	)

10058 #iâdeà
NRF_SDH_SOC_DEBUG_COLOR


10059 
	#NRF_SDH_SOC_DEBUG_COLOR
 0

	)

10066 #iâdeà
NRF_SORTLIST_CONFIG_LOG_ENABLED


10067 
	#NRF_SORTLIST_CONFIG_LOG_ENABLED
 0

	)

10077 #iâdeà
NRF_SORTLIST_CONFIG_LOG_LEVEL


10078 
	#NRF_SORTLIST_CONFIG_LOG_LEVEL
 3

	)

10093 #iâdeà
NRF_SORTLIST_CONFIG_INFO_COLOR


10094 
	#NRF_SORTLIST_CONFIG_INFO_COLOR
 0

	)

10109 #iâdeà
NRF_SORTLIST_CONFIG_DEBUG_COLOR


10110 
	#NRF_SORTLIST_CONFIG_DEBUG_COLOR
 0

	)

10117 #iâdeà
NRF_TWI_SENSOR_CONFIG_LOG_ENABLED


10118 
	#NRF_TWI_SENSOR_CONFIG_LOG_ENABLED
 0

	)

10128 #iâdeà
NRF_TWI_SENSOR_CONFIG_LOG_LEVEL


10129 
	#NRF_TWI_SENSOR_CONFIG_LOG_LEVEL
 3

	)

10144 #iâdeà
NRF_TWI_SENSOR_CONFIG_INFO_COLOR


10145 
	#NRF_TWI_SENSOR_CONFIG_INFO_COLOR
 0

	)

10160 #iâdeà
NRF_TWI_SENSOR_CONFIG_DEBUG_COLOR


10161 
	#NRF_TWI_SENSOR_CONFIG_DEBUG_COLOR
 0

	)

10168 #iâdeà
PM_LOG_ENABLED


10169 
	#PM_LOG_ENABLED
 1

	)

10179 #iâdeà
PM_LOG_LEVEL


10180 
	#PM_LOG_LEVEL
 3

	)

10195 #iâdeà
PM_LOG_INFO_COLOR


10196 
	#PM_LOG_INFO_COLOR
 0

	)

10211 #iâdeà
PM_LOG_DEBUG_COLOR


10212 
	#PM_LOG_DEBUG_COLOR
 0

	)

10225 #iâdeà
SER_HAL_TRANSPORT_CONFIG_LOG_ENABLED


10226 
	#SER_HAL_TRANSPORT_CONFIG_LOG_ENABLED
 0

	)

10236 #iâdeà
SER_HAL_TRANSPORT_CONFIG_LOG_LEVEL


10237 
	#SER_HAL_TRANSPORT_CONFIG_LOG_LEVEL
 3

	)

10252 #iâdeà
SER_HAL_TRANSPORT_CONFIG_INFO_COLOR


10253 
	#SER_HAL_TRANSPORT_CONFIG_INFO_COLOR
 0

	)

10268 #iâdeà
SER_HAL_TRANSPORT_CONFIG_DEBUG_COLOR


10269 
	#SER_HAL_TRANSPORT_CONFIG_DEBUG_COLOR
 0

	)

10285 #iâdeà
NRF_LOG_STR_FORMATTER_TIMESTAMP_FORMAT_ENABLED


10286 
	#NRF_LOG_STR_FORMATTER_TIMESTAMP_FORMAT_ENABLED
 1

	)

10298 #iâdeà
NFC_AC_REC_ENABLED


10299 
	#NFC_AC_REC_ENABLED
 0

	)

10305 #iâdeà
NFC_AC_REC_PARSER_ENABLED


10306 
	#NFC_AC_REC_PARSER_ENABLED
 0

	)

10311 #iâdeà
NFC_BLE_OOB_ADVDATA_ENABLED


10312 
	#NFC_BLE_OOB_ADVDATA_ENABLED
 0

	)

10319 #iâdeà
ADVANCED_ADVDATA_SUPPORT


10320 
	#ADVANCED_ADVDATA_SUPPORT
 0

	)

10328 #iâdeà
NFC_BLE_OOB_ADVDATA_PARSER_ENABLED


10329 
	#NFC_BLE_OOB_ADVDATA_PARSER_ENABLED
 0

	)

10334 #iâdeà
NFC_BLE_PAIR_LIB_ENABLED


10335 
	#NFC_BLE_PAIR_LIB_ENABLED
 0

	)

10339 #iâdeà
NFC_BLE_PAIR_LIB_LOG_ENABLED


10340 
	#NFC_BLE_PAIR_LIB_LOG_ENABLED
 0

	)

10350 #iâdeà
NFC_BLE_PAIR_LIB_LOG_LEVEL


10351 
	#NFC_BLE_PAIR_LIB_LOG_LEVEL
 3

	)

10366 #iâdeà
NFC_BLE_PAIR_LIB_INFO_COLOR


10367 
	#NFC_BLE_PAIR_LIB_INFO_COLOR
 0

	)

10382 #iâdeà
NFC_BLE_PAIR_LIB_DEBUG_COLOR


10383 
	#NFC_BLE_PAIR_LIB_DEBUG_COLOR
 0

	)

10395 #iâdeà
BLE_NFC_SEC_PARAM_BOND


10396 
	#BLE_NFC_SEC_PARAM_BOND
 1

	)

10401 #iâdeà
BLE_NFC_SEC_PARAM_KDIST_OWN_ENC


10402 
	#BLE_NFC_SEC_PARAM_KDIST_OWN_ENC
 1

	)

10408 #iâdeà
BLE_NFC_SEC_PARAM_KDIST_OWN_ID


10409 
	#BLE_NFC_SEC_PARAM_KDIST_OWN_ID
 1

	)

10415 #iâdeà
BLE_NFC_SEC_PARAM_KDIST_PEER_ENC


10416 
	#BLE_NFC_SEC_PARAM_KDIST_PEER_ENC
 1

	)

10422 #iâdeà
BLE_NFC_SEC_PARAM_KDIST_PEER_ID


10423 
	#BLE_NFC_SEC_PARAM_KDIST_PEER_ID
 1

	)

10441 #iâdeà
BLE_NFC_SEC_PARAM_MIN_KEY_SIZE


10442 
	#BLE_NFC_SEC_PARAM_MIN_KEY_SIZE
 7

	)

10458 #iâdeà
BLE_NFC_SEC_PARAM_MAX_KEY_SIZE


10459 
	#BLE_NFC_SEC_PARAM_MAX_KEY_SIZE
 16

	)

10470 #iâdeà
NFC_BLE_PAIR_MSG_ENABLED


10471 
	#NFC_BLE_PAIR_MSG_ENABLED
 0

	)

10477 #iâdeà
NFC_CH_COMMON_ENABLED


10478 
	#NFC_CH_COMMON_ENABLED
 0

	)

10484 #iâdeà
NFC_EP_OOB_REC_ENABLED


10485 
	#NFC_EP_OOB_REC_ENABLED
 0

	)

10491 #iâdeà
NFC_HS_REC_ENABLED


10492 
	#NFC_HS_REC_ENABLED
 0

	)

10498 #iâdeà
NFC_LE_OOB_REC_ENABLED


10499 
	#NFC_LE_OOB_REC_ENABLED
 0

	)

10505 #iâdeà
NFC_LE_OOB_REC_PARSER_ENABLED


10506 
	#NFC_LE_OOB_REC_PARSER_ENABLED
 0

	)

10512 #iâdeà
NFC_NDEF_LAUNCHAPP_MSG_ENABLED


10513 
	#NFC_NDEF_LAUNCHAPP_MSG_ENABLED
 0

	)

10519 #iâdeà
NFC_NDEF_LAUNCHAPP_REC_ENABLED


10520 
	#NFC_NDEF_LAUNCHAPP_REC_ENABLED
 0

	)

10525 #iâdeà
NFC_NDEF_MSG_ENABLED


10526 
	#NFC_NDEF_MSG_ENABLED
 0

	)

10533 #iâdeà
NFC_NDEF_MSG_TAG_TYPE


10534 
	#NFC_NDEF_MSG_TAG_TYPE
 2

	)

10541 #iâdeà
NFC_NDEF_MSG_PARSER_ENABLED


10542 
	#NFC_NDEF_MSG_PARSER_ENABLED
 0

	)

10546 #iâdeà
NFC_NDEF_MSG_PARSER_LOG_ENABLED


10547 
	#NFC_NDEF_MSG_PARSER_LOG_ENABLED
 0

	)

10557 #iâdeà
NFC_NDEF_MSG_PARSER_LOG_LEVEL


10558 
	#NFC_NDEF_MSG_PARSER_LOG_LEVEL
 3

	)

10573 #iâdeà
NFC_NDEF_MSG_PARSER_INFO_COLOR


10574 
	#NFC_NDEF_MSG_PARSER_INFO_COLOR
 0

	)

10584 #iâdeà
NFC_NDEF_RECORD_ENABLED


10585 
	#NFC_NDEF_RECORD_ENABLED
 0

	)

10590 #iâdeà
NFC_NDEF_RECORD_PARSER_ENABLED


10591 
	#NFC_NDEF_RECORD_PARSER_ENABLED
 0

	)

10595 #iâdeà
NFC_NDEF_RECORD_PARSER_LOG_ENABLED


10596 
	#NFC_NDEF_RECORD_PARSER_LOG_ENABLED
 0

	)

10606 #iâdeà
NFC_NDEF_RECORD_PARSER_LOG_LEVEL


10607 
	#NFC_NDEF_RECORD_PARSER_LOG_LEVEL
 3

	)

10622 #iâdeà
NFC_NDEF_RECORD_PARSER_INFO_COLOR


10623 
	#NFC_NDEF_RECORD_PARSER_INFO_COLOR
 0

	)

10633 #iâdeà
NFC_NDEF_TEXT_RECORD_ENABLED


10634 
	#NFC_NDEF_TEXT_RECORD_ENABLED
 0

	)

10640 #iâdeà
NFC_NDEF_URI_MSG_ENABLED


10641 
	#NFC_NDEF_URI_MSG_ENABLED
 0

	)

10647 #iâdeà
NFC_NDEF_URI_REC_ENABLED


10648 
	#NFC_NDEF_URI_REC_ENABLED
 0

	)

10653 #iâdeà
NFC_T2T_HAL_ENABLED


10654 
	#NFC_T2T_HAL_ENABLED
 0

	)

10669 #iâdeà
NFCT_CONFIG_IRQ_PRIORITY


10670 
	#NFCT_CONFIG_IRQ_PRIORITY
 6

	)

10675 #iâdeà
HAL_NFC_CONFIG_LOG_ENABLED


10676 
	#HAL_NFC_CONFIG_LOG_ENABLED
 0

	)

10686 #iâdeà
HAL_NFC_CONFIG_LOG_LEVEL


10687 
	#HAL_NFC_CONFIG_LOG_LEVEL
 3

	)

10702 #iâdeà
HAL_NFC_CONFIG_INFO_COLOR


10703 
	#HAL_NFC_CONFIG_INFO_COLOR
 0

	)

10718 #iâdeà
HAL_NFC_CONFIG_DEBUG_COLOR


10719 
	#HAL_NFC_CONFIG_DEBUG_COLOR
 0

	)

10730 #iâdeà
HAL_NFC_CONFIG_LOG_LEVEL


10731 
	#HAL_NFC_CONFIG_LOG_LEVEL
 3

	)

10746 #iâdeà
HAL_NFC_CONFIG_INFO_COLOR


10747 
	#HAL_NFC_CONFIG_INFO_COLOR
 0

	)

10762 #iâdeà
HAL_NFC_CONFIG_DEBUG_COLOR


10763 
	#HAL_NFC_CONFIG_DEBUG_COLOR
 0

	)

10770 #iâdeà
HAL_NFC_CONFIG_DEBUG_PIN_ENABLED


10771 
	#HAL_NFC_CONFIG_DEBUG_PIN_ENABLED
 0

	)

10825 #iâdeà
HAL_NFC_HCLOCK_ON_DEBUG_PIN


10826 
	#HAL_NFC_HCLOCK_ON_DEBUG_PIN
 11

	)

10881 #iâdeà
HAL_NFC_HCLOCK_OFF_DEBUG_PIN


10882 
	#HAL_NFC_HCLOCK_OFF_DEBUG_PIN
 12

	)

10937 #iâdeà
HAL_NFC_NFC_EVENT_DEBUG_PIN


10938 
	#HAL_NFC_NFC_EVENT_DEBUG_PIN
 24

	)

10993 #iâdeà
HAL_NFC_DETECT_EVENT_DEBUG_PIN


10994 
	#HAL_NFC_DETECT_EVENT_DEBUG_PIN
 25

	)

11049 #iâdeà
HAL_NFC_TIMER4_EVENT_DEBUG_PIN


11050 
	#HAL_NFC_TIMER4_EVENT_DEBUG_PIN
 28

	)

11105 #iâdeà
HAL_NFC_HCLOCK_ON_DEBUG_PIN


11106 
	#HAL_NFC_HCLOCK_ON_DEBUG_PIN
 31

	)

11161 #iâdeà
HAL_NFC_HCLOCK_OFF_DEBUG_PIN


11162 
	#HAL_NFC_HCLOCK_OFF_DEBUG_PIN
 31

	)

11217 #iâdeà
HAL_NFC_NFC_EVENT_DEBUG_PIN


11218 
	#HAL_NFC_NFC_EVENT_DEBUG_PIN
 31

	)

11273 #iâdeà
HAL_NFC_DETECT_EVENT_DEBUG_PIN


11274 
	#HAL_NFC_DETECT_EVENT_DEBUG_PIN
 31

	)

11329 #iâdeà
HAL_NFC_TIMER4_EVENT_DEBUG_PIN


11330 
	#HAL_NFC_TIMER4_EVENT_DEBUG_PIN
 31

	)

11339 #iâdeà
NFC_T2T_PARSER_ENABLED


11340 
	#NFC_T2T_PARSER_ENABLED
 0

	)

11344 #iâdeà
NFC_T2T_PARSER_LOG_ENABLED


11345 
	#NFC_T2T_PARSER_LOG_ENABLED
 0

	)

11355 #iâdeà
NFC_T2T_PARSER_LOG_LEVEL


11356 
	#NFC_T2T_PARSER_LOG_LEVEL
 3

	)

11371 #iâdeà
NFC_T2T_PARSER_INFO_COLOR


11372 
	#NFC_T2T_PARSER_INFO_COLOR
 0

	)

11381 #iâdeà
NFC_T4T_APDU_ENABLED


11382 
	#NFC_T4T_APDU_ENABLED
 0

	)

11386 #iâdeà
NFC_T4T_APDU_LOG_ENABLED


11387 
	#NFC_T4T_APDU_LOG_ENABLED
 0

	)

11397 #iâdeà
NFC_T4T_APDU_LOG_LEVEL


11398 
	#NFC_T4T_APDU_LOG_LEVEL
 3

	)

11413 #iâdeà
NFC_T4T_APDU_LOG_COLOR


11414 
	#NFC_T4T_APDU_LOG_COLOR
 0

	)

11423 #iâdeà
NFC_T4T_CC_FILE_PARSER_ENABLED


11424 
	#NFC_T4T_CC_FILE_PARSER_ENABLED
 0

	)

11428 #iâdeà
NFC_T4T_CC_FILE_PARSER_LOG_ENABLED


11429 
	#NFC_T4T_CC_FILE_PARSER_LOG_ENABLED
 0

	)

11439 #iâdeà
NFC_T4T_CC_FILE_PARSER_LOG_LEVEL


11440 
	#NFC_T4T_CC_FILE_PARSER_LOG_LEVEL
 3

	)

11455 #iâdeà
NFC_T4T_CC_FILE_PARSER_INFO_COLOR


11456 
	#NFC_T4T_CC_FILE_PARSER_INFO_COLOR
 0

	)

11465 #iâdeà
NFC_T4T_HAL_ENABLED


11466 
	#NFC_T4T_HAL_ENABLED
 0

	)

11481 #iâdeà
NFCT_CONFIG_IRQ_PRIORITY


11482 
	#NFCT_CONFIG_IRQ_PRIORITY
 6

	)

11487 #iâdeà
HAL_NFC_CONFIG_LOG_ENABLED


11488 
	#HAL_NFC_CONFIG_LOG_ENABLED
 0

	)

11498 #iâdeà
HAL_NFC_CONFIG_LOG_LEVEL


11499 
	#HAL_NFC_CONFIG_LOG_LEVEL
 3

	)

11514 #iâdeà
HAL_NFC_CONFIG_INFO_COLOR


11515 
	#HAL_NFC_CONFIG_INFO_COLOR
 0

	)

11530 #iâdeà
HAL_NFC_CONFIG_DEBUG_COLOR


11531 
	#HAL_NFC_CONFIG_DEBUG_COLOR
 0

	)

11542 #iâdeà
HAL_NFC_CONFIG_LOG_LEVEL


11543 
	#HAL_NFC_CONFIG_LOG_LEVEL
 3

	)

11558 #iâdeà
HAL_NFC_CONFIG_INFO_COLOR


11559 
	#HAL_NFC_CONFIG_INFO_COLOR
 0

	)

11574 #iâdeà
HAL_NFC_CONFIG_DEBUG_COLOR


11575 
	#HAL_NFC_CONFIG_DEBUG_COLOR
 0

	)

11582 #iâdeà
HAL_NFC_CONFIG_DEBUG_PIN_ENABLED


11583 
	#HAL_NFC_CONFIG_DEBUG_PIN_ENABLED
 0

	)

11637 #iâdeà
HAL_NFC_HCLOCK_ON_DEBUG_PIN


11638 
	#HAL_NFC_HCLOCK_ON_DEBUG_PIN
 31

	)

11693 #iâdeà
HAL_NFC_HCLOCK_OFF_DEBUG_PIN


11694 
	#HAL_NFC_HCLOCK_OFF_DEBUG_PIN
 31

	)

11749 #iâdeà
HAL_NFC_NFC_EVENT_DEBUG_PIN


11750 
	#HAL_NFC_NFC_EVENT_DEBUG_PIN
 31

	)

11805 #iâdeà
HAL_NFC_DETECT_EVENT_DEBUG_PIN


11806 
	#HAL_NFC_DETECT_EVENT_DEBUG_PIN
 31

	)

11861 #iâdeà
HAL_NFC_TIMER4_EVENT_DEBUG_PIN


11862 
	#HAL_NFC_TIMER4_EVENT_DEBUG_PIN
 31

	)

11917 #iâdeà
HAL_NFC_HCLOCK_ON_DEBUG_PIN


11918 
	#HAL_NFC_HCLOCK_ON_DEBUG_PIN
 31

	)

11973 #iâdeà
HAL_NFC_HCLOCK_OFF_DEBUG_PIN


11974 
	#HAL_NFC_HCLOCK_OFF_DEBUG_PIN
 31

	)

12029 #iâdeà
HAL_NFC_NFC_EVENT_DEBUG_PIN


12030 
	#HAL_NFC_NFC_EVENT_DEBUG_PIN
 31

	)

12085 #iâdeà
HAL_NFC_DETECT_EVENT_DEBUG_PIN


12086 
	#HAL_NFC_DETECT_EVENT_DEBUG_PIN
 31

	)

12141 #iâdeà
HAL_NFC_TIMER4_EVENT_DEBUG_PIN


12142 
	#HAL_NFC_TIMER4_EVENT_DEBUG_PIN
 31

	)

12151 #iâdeà
NFC_T4T_HL_DETECTION_PROCEDURES_ENABLED


12152 
	#NFC_T4T_HL_DETECTION_PROCEDURES_ENABLED
 0

	)

12156 #iâdeà
NFC_T4T_HL_DETECTION_PROCEDURES_LOG_ENABLED


12157 
	#NFC_T4T_HL_DETECTION_PROCEDURES_LOG_ENABLED
 0

	)

12167 #iâdeà
NFC_T4T_HL_DETECTION_PROCEDURES_LOG_LEVEL


12168 
	#NFC_T4T_HL_DETECTION_PROCEDURES_LOG_LEVEL
 3

	)

12183 #iâdeà
NFC_T4T_HL_DETECTION_PROCEDURES_INFO_COLOR


12184 
	#NFC_T4T_HL_DETECTION_PROCEDURES_INFO_COLOR
 0

	)

12190 #iâdeà
APDU_BUFF_SIZE


12191 
	#APDU_BUFF_SIZE
 250

	)

12195 #iâdeà
CC_STORAGE_BUFF_SIZE


12196 
	#CC_STORAGE_BUFF_SIZE
 64

	)

12203 #iâdeà
NFC_T4T_TLV_BLOCK_PARSER_ENABLED


12204 
	#NFC_T4T_TLV_BLOCK_PARSER_ENABLED
 0

	)

12208 #iâdeà
NFC_T4T_TLV_BLOCK_PARSER_LOG_ENABLED


12209 
	#NFC_T4T_TLV_BLOCK_PARSER_LOG_ENABLED
 0

	)

12219 #iâdeà
NFC_T4T_TLV_BLOCK_PARSER_LOG_LEVEL


12220 
	#NFC_T4T_TLV_BLOCK_PARSER_LOG_LEVEL
 3

	)

12235 #iâdeà
NFC_T4T_TLV_BLOCK_PARSER_INFO_COLOR


12236 
	#NFC_T4T_TLV_BLOCK_PARSER_INFO_COLOR
 0

	)

12256 #iâdeà
SEGGER_RTT_CONFIG_BUFFER_SIZE_UP


12257 
	#SEGGER_RTT_CONFIG_BUFFER_SIZE_UP
 512

	)

12261 #iâdeà
SEGGER_RTT_CONFIG_MAX_NUM_UP_BUFFERS


12262 
	#SEGGER_RTT_CONFIG_MAX_NUM_UP_BUFFERS
 2

	)

12266 #iâdeà
SEGGER_RTT_CONFIG_BUFFER_SIZE_DOWN


12267 
	#SEGGER_RTT_CONFIG_BUFFER_SIZE_DOWN
 16

	)

12271 #iâdeà
SEGGER_RTT_CONFIG_MAX_NUM_DOWN_BUFFERS


12272 
	#SEGGER_RTT_CONFIG_MAX_NUM_DOWN_BUFFERS
 2

	)

12286 #iâdeà
SEGGER_RTT_CONFIG_DEFAULT_MODE


12287 
	#SEGGER_RTT_CONFIG_DEFAULT_MODE
 0

	)

12301 #iâdeà
NRF_SDH_BLE_ENABLED


12302 
	#NRF_SDH_BLE_ENABLED
 1

	)

12314 #iâdeà
NRF_SDH_BLE_GAP_DATA_LENGTH


12315 
	#NRF_SDH_BLE_GAP_DATA_LENGTH
 27

	)

12319 #iâdeà
NRF_SDH_BLE_PERIPHERAL_LINK_COUNT


12320 
	#NRF_SDH_BLE_PERIPHERAL_LINK_COUNT
 1

	)

12324 #iâdeà
NRF_SDH_BLE_CENTRAL_LINK_COUNT


12325 
	#NRF_SDH_BLE_CENTRAL_LINK_COUNT
 0

	)

12331 #iâdeà
NRF_SDH_BLE_TOTAL_LINK_COUNT


12332 
	#NRF_SDH_BLE_TOTAL_LINK_COUNT
 1

	)

12338 #iâdeà
NRF_SDH_BLE_GAP_EVENT_LENGTH


12339 
	#NRF_SDH_BLE_GAP_EVENT_LENGTH
 6

	)

12343 #iâdeà
NRF_SDH_BLE_GATT_MAX_MTU_SIZE


12344 
	#NRF_SDH_BLE_GATT_MAX_MTU_SIZE
 23

	)

12348 #iâdeà
NRF_SDH_BLE_GATTS_ATTR_TAB_SIZE


12349 
	#NRF_SDH_BLE_GATTS_ATTR_TAB_SIZE
 1408

	)

12353 #iâdeà
NRF_SDH_BLE_VS_UUID_COUNT


12354 
	#NRF_SDH_BLE_VS_UUID_COUNT
 0

	)

12360 #iâdeà
NRF_SDH_BLE_SERVICE_CHANGED


12361 
	#NRF_SDH_BLE_SERVICE_CHANGED
 0

	)

12374 #iâdeà
NRF_SDH_BLE_OBSERVER_PRIO_LEVELS


12375 
	#NRF_SDH_BLE_OBSERVER_PRIO_LEVELS
 4

	)

12384 #iâdeà
BLE_ADV_BLE_OBSERVER_PRIO


12385 
	#BLE_ADV_BLE_OBSERVER_PRIO
 1

	)

12391 #iâdeà
BLE_ANCS_C_BLE_OBSERVER_PRIO


12392 
	#BLE_ANCS_C_BLE_OBSERVER_PRIO
 2

	)

12398 #iâdeà
BLE_ANS_C_BLE_OBSERVER_PRIO


12399 
	#BLE_ANS_C_BLE_OBSERVER_PRIO
 2

	)

12405 #iâdeà
BLE_BAS_BLE_OBSERVER_PRIO


12406 
	#BLE_BAS_BLE_OBSERVER_PRIO
 2

	)

12412 #iâdeà
BLE_BAS_C_BLE_OBSERVER_PRIO


12413 
	#BLE_BAS_C_BLE_OBSERVER_PRIO
 2

	)

12419 #iâdeà
BLE_BPS_BLE_OBSERVER_PRIO


12420 
	#BLE_BPS_BLE_OBSERVER_PRIO
 2

	)

12426 #iâdeà
BLE_CONN_PARAMS_BLE_OBSERVER_PRIO


12427 
	#BLE_CONN_PARAMS_BLE_OBSERVER_PRIO
 1

	)

12433 #iâdeà
BLE_CONN_STATE_BLE_OBSERVER_PRIO


12434 
	#BLE_CONN_STATE_BLE_OBSERVER_PRIO
 0

	)

12440 #iâdeà
BLE_CSCS_BLE_OBSERVER_PRIO


12441 
	#BLE_CSCS_BLE_OBSERVER_PRIO
 2

	)

12447 #iâdeà
BLE_CTS_C_BLE_OBSERVER_PRIO


12448 
	#BLE_CTS_C_BLE_OBSERVER_PRIO
 2

	)

12454 #iâdeà
BLE_DB_DISC_BLE_OBSERVER_PRIO


12455 
	#BLE_DB_DISC_BLE_OBSERVER_PRIO
 1

	)

12461 #iâdeà
BLE_DFU_BLE_OBSERVER_PRIO


12462 
	#BLE_DFU_BLE_OBSERVER_PRIO
 2

	)

12468 #iâdeà
BLE_DIS_C_BLE_OBSERVER_PRIO


12469 
	#BLE_DIS_C_BLE_OBSERVER_PRIO
 2

	)

12475 #iâdeà
BLE_GLS_BLE_OBSERVER_PRIO


12476 
	#BLE_GLS_BLE_OBSERVER_PRIO
 2

	)

12482 #iâdeà
BLE_HIDS_BLE_OBSERVER_PRIO


12483 
	#BLE_HIDS_BLE_OBSERVER_PRIO
 2

	)

12489 #iâdeà
BLE_HRS_BLE_OBSERVER_PRIO


12490 
	#BLE_HRS_BLE_OBSERVER_PRIO
 2

	)

12496 #iâdeà
BLE_HRS_C_BLE_OBSERVER_PRIO


12497 
	#BLE_HRS_C_BLE_OBSERVER_PRIO
 2

	)

12503 #iâdeà
BLE_HTS_BLE_OBSERVER_PRIO


12504 
	#BLE_HTS_BLE_OBSERVER_PRIO
 2

	)

12510 #iâdeà
BLE_IAS_BLE_OBSERVER_PRIO


12511 
	#BLE_IAS_BLE_OBSERVER_PRIO
 2

	)

12517 #iâdeà
BLE_IAS_C_BLE_OBSERVER_PRIO


12518 
	#BLE_IAS_C_BLE_OBSERVER_PRIO
 2

	)

12524 #iâdeà
BLE_LBS_BLE_OBSERVER_PRIO


12525 
	#BLE_LBS_BLE_OBSERVER_PRIO
 2

	)

12531 #iâdeà
BLE_LBS_C_BLE_OBSERVER_PRIO


12532 
	#BLE_LBS_C_BLE_OBSERVER_PRIO
 2

	)

12538 #iâdeà
BLE_LLS_BLE_OBSERVER_PRIO


12539 
	#BLE_LLS_BLE_OBSERVER_PRIO
 2

	)

12545 #iâdeà
BLE_LNS_BLE_OBSERVER_PRIO


12546 
	#BLE_LNS_BLE_OBSERVER_PRIO
 2

	)

12552 #iâdeà
BLE_NUS_BLE_OBSERVER_PRIO


12553 
	#BLE_NUS_BLE_OBSERVER_PRIO
 2

	)

12559 #iâdeà
BLE_NUS_C_BLE_OBSERVER_PRIO


12560 
	#BLE_NUS_C_BLE_OBSERVER_PRIO
 2

	)

12566 #iâdeà
BLE_OTS_BLE_OBSERVER_PRIO


12567 
	#BLE_OTS_BLE_OBSERVER_PRIO
 2

	)

12573 #iâdeà
BLE_OTS_C_BLE_OBSERVER_PRIO


12574 
	#BLE_OTS_C_BLE_OBSERVER_PRIO
 2

	)

12580 #iâdeà
BLE_RSCS_BLE_OBSERVER_PRIO


12581 
	#BLE_RSCS_BLE_OBSERVER_PRIO
 2

	)

12587 #iâdeà
BLE_RSCS_C_BLE_OBSERVER_PRIO


12588 
	#BLE_RSCS_C_BLE_OBSERVER_PRIO
 2

	)

12594 #iâdeà
BLE_TPS_BLE_OBSERVER_PRIO


12595 
	#BLE_TPS_BLE_OBSERVER_PRIO
 2

	)

12601 #iâdeà
BSP_BTN_BLE_OBSERVER_PRIO


12602 
	#BSP_BTN_BLE_OBSERVER_PRIO
 1

	)

12608 #iâdeà
NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO


12609 
	#NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO
 1

	)

12615 #iâdeà
NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO


12616 
	#NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO
 1

	)

12622 #iâdeà
NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO


12623 
	#NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO
 1

	)

12629 #iâdeà
NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO


12630 
	#NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO
 1

	)

12636 #iâdeà
NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO


12637 
	#NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO
 1

	)

12643 #iâdeà
NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO


12644 
	#NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO
 1

	)

12650 #iâdeà
NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO


12651 
	#NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO
 1

	)

12657 #iâdeà
NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO


12658 
	#NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO
 1

	)

12664 #iâdeà
NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO


12665 
	#NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO
 1

	)

12671 #iâdeà
NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO


12672 
	#NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO
 1

	)

12678 #iâdeà
NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO


12679 
	#NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO
 1

	)

12685 #iâdeà
NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO


12686 
	#NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO
 1

	)

12692 #iâdeà
NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO


12693 
	#NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO
 1

	)

12699 #iâdeà
NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO


12700 
	#NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO
 1

	)

12706 #iâdeà
NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO


12707 
	#NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO
 1

	)

12713 #iâdeà
NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO


12714 
	#NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO
 1

	)

12720 #iâdeà
NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO


12721 
	#NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO
 1

	)

12727 #iâdeà
NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO


12728 
	#NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO
 1

	)

12734 #iâdeà
NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO


12735 
	#NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO
 1

	)

12741 #iâdeà
NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO


12742 
	#NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO
 1

	)

12748 #iâdeà
NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO


12749 
	#NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO
 1

	)

12755 #iâdeà
NRF_BLE_BMS_BLE_OBSERVER_PRIO


12756 
	#NRF_BLE_BMS_BLE_OBSERVER_PRIO
 2

	)

12762 #iâdeà
NRF_BLE_CGMS_BLE_OBSERVER_PRIO


12763 
	#NRF_BLE_CGMS_BLE_OBSERVER_PRIO
 2

	)

12769 #iâdeà
NRF_BLE_ES_BLE_OBSERVER_PRIO


12770 
	#NRF_BLE_ES_BLE_OBSERVER_PRIO
 2

	)

12776 #iâdeà
NRF_BLE_GATTS_C_BLE_OBSERVER_PRIO


12777 
	#NRF_BLE_GATTS_C_BLE_OBSERVER_PRIO
 2

	)

12783 #iâdeà
NRF_BLE_GATT_BLE_OBSERVER_PRIO


12784 
	#NRF_BLE_GATT_BLE_OBSERVER_PRIO
 1

	)

12790 #iâdeà
NRF_BLE_QWR_BLE_OBSERVER_PRIO


12791 
	#NRF_BLE_QWR_BLE_OBSERVER_PRIO
 2

	)

12797 #iâdeà
NRF_BLE_SCAN_OBSERVER_PRIO


12798 
	#NRF_BLE_SCAN_OBSERVER_PRIO
 1

	)

12802 #iâdeà
PM_BLE_OBSERVER_PRIO


12803 
	#PM_BLE_OBSERVER_PRIO
 1

	)

12817 #iâdeà
NRF_SDH_ENABLED


12818 
	#NRF_SDH_ENABLED
 1

	)

12834 #iâdeà
NRF_SDH_DISPATCH_MODEL


12835 
	#NRF_SDH_DISPATCH_MODEL
 1

	)

12850 #iâdeà
NRF_SDH_CLOCK_LF_SRC


12851 
	#NRF_SDH_CLOCK_LF_SRC
 1

	)

12855 #iâdeà
NRF_SDH_CLOCK_LF_RC_CTIV


12856 
	#NRF_SDH_CLOCK_LF_RC_CTIV
 0

	)

12863 #iâdeà
NRF_SDH_CLOCK_LF_RC_TEMP_CTIV


12864 
	#NRF_SDH_CLOCK_LF_RC_TEMP_CTIV
 0

	)

12882 #iâdeà
NRF_SDH_CLOCK_LF_ACCURACY


12883 
	#NRF_SDH_CLOCK_LF_ACCURACY
 7

	)

12896 #iâdeà
NRF_SDH_REQ_OBSERVER_PRIO_LEVELS


12897 
	#NRF_SDH_REQ_OBSERVER_PRIO_LEVELS
 2

	)

12904 #iâdeà
NRF_SDH_STATE_OBSERVER_PRIO_LEVELS


12905 
	#NRF_SDH_STATE_OBSERVER_PRIO_LEVELS
 2

	)

12912 #iâdeà
NRF_SDH_STACK_OBSERVER_PRIO_LEVELS


12913 
	#NRF_SDH_STACK_OBSERVER_PRIO_LEVELS
 2

	)

12923 #iâdeà
CLOCK_CONFIG_STATE_OBSERVER_PRIO


12924 
	#CLOCK_CONFIG_STATE_OBSERVER_PRIO
 0

	)

12930 #iâdeà
POWER_CONFIG_STATE_OBSERVER_PRIO


12931 
	#POWER_CONFIG_STATE_OBSERVER_PRIO
 0

	)

12937 #iâdeà
RNG_CONFIG_STATE_OBSERVER_PRIO


12938 
	#RNG_CONFIG_STATE_OBSERVER_PRIO
 0

	)

12952 #iâdeà
NRF_SDH_ANT_STACK_OBSERVER_PRIO


12953 
	#NRF_SDH_ANT_STACK_OBSERVER_PRIO
 0

	)

12961 #iâdeà
NRF_SDH_BLE_STACK_OBSERVER_PRIO


12962 
	#NRF_SDH_BLE_STACK_OBSERVER_PRIO
 0

	)

12970 #iâdeà
NRF_SDH_SOC_STACK_OBSERVER_PRIO


12971 
	#NRF_SDH_SOC_STACK_OBSERVER_PRIO
 0

	)

12985 #iâdeà
NRF_SDH_SOC_ENABLED


12986 
	#NRF_SDH_SOC_ENABLED
 1

	)

12995 #iâdeà
NRF_SDH_SOC_OBSERVER_PRIO_LEVELS


12996 
	#NRF_SDH_SOC_OBSERVER_PRIO_LEVELS
 2

	)

13005 #iâdeà
BLE_ADV_SOC_OBSERVER_PRIO


13006 
	#BLE_ADV_SOC_OBSERVER_PRIO
 1

	)

13012 #iâdeà
BLE_DFU_SOC_OBSERVER_PRIO


13013 
	#BLE_DFU_SOC_OBSERVER_PRIO
 1

	)

13019 #iâdeà
CLOCK_CONFIG_SOC_OBSERVER_PRIO


13020 
	#CLOCK_CONFIG_SOC_OBSERVER_PRIO
 0

	)

13026 #iâdeà
POWER_CONFIG_SOC_OBSERVER_PRIO


13027 
	#POWER_CONFIG_SOC_OBSERVER_PRIO
 0

	)

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\external\fprintf\nrf_fprintf.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
NRF_FPRINTF
)

42 
	~<¡d¬g.h
>

44 
	~"Äf_as£¹.h
"

45 
	~"Äf_årštf_fÜm©.h
"

47 
	$Äf_årštf_bufãr_æush
(
Äf_årštf_ùx_t
 * cÚ¡ 
p_ùx
)

49 
	`ASSERT
(
p_ùx
 !ğ
NULL
);

51 ià(
p_ùx
->
io_bufãr_út
 == 0)

56 
p_ùx
->
	`fwr™e
Õ_ùx->
p_u£r_ùx
,

57 
p_ùx
->
p_io_bufãr
,

58 
p_ùx
->
io_bufãr_út
);

59 
p_ùx
->
io_bufãr_út
 = 0;

60 
	}
}

62 
	$Äf_årštf
(
Äf_årštf_ùx_t
 * cÚ¡ 
p_ùx
,

63 cÚ¡ * 
p_fmt
,

66 
	`ASSERT
(
p_ùx
 !ğ
NULL
);

67 
	`ASSERT
(
p_ùx
->
fwr™e
 !ğ
NULL
);

68 
	`ASSERT
(
p_ùx
->
p_io_bufãr
 !ğ
NULL
);

69 
	`ASSERT
(
p_ùx
->
io_bufãr_size
 > 0);

71 ià(
p_fmt
 =ğ
NULL
)

76 
va_li¡
 
¬gs
 = {0};

77 
	`va_¡¬t
(
¬gs
, 
p_fmt
);

79 
	`Äf_årštf_fmt
(
p_ùx
, 
p_fmt
, &
¬gs
);

81 
	`va_’d
(
¬gs
);

82 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\external\fprintf\nrf_fprintf_format.c

59 
	~"sdk_commÚ.h
"

60 #ià
NRF_MODULE_ENABLED
(
NRF_FPRINTF
)

62 
	~<¡d¬g.h
>

64 
	~"Äf_as£¹.h
"

65 
	~"Äf_årštf.h
"

66 
	~"Äf_årštf_fÜm©.h
"

68 
	#NRF_CLI_FORMAT_FLAG_LEFT_JUSTIFY
 (1u << 0)

	)

69 
	#NRF_CLI_FORMAT_FLAG_PAD_ZERO
 (1u << 1)

	)

70 
	#NRF_CLI_FORMAT_FLAG_PRINT_SIGN
 (1u << 2)

	)

72 
	$bufãr_add
(
Äf_årštf_ùx_t
 * cÚ¡ 
p_ùx
, 
c
)

74 
p_ùx
->
p_io_bufãr
[p_ùx->
io_bufãr_út
++] = 
c
;

76 ià(
p_ùx
->
io_bufãr_út
 >ğp_ùx->
io_bufãr_size
)

78 
	`Äf_årštf_bufãr_æush
(
p_ùx
);

80 
	}
}

82 
	$¡ršg_´št
(
Äf_årštf_ùx_t
 * cÚ¡ 
p_ùx
,

83 cÚ¡ * 
p_¡r
,

84 
ušt32_t
 
F›ldWidth
,

85 
ušt32_t
 
FÜm©FÏgs
)

87 
ušt32_t
 
Width
 = 0;

88 
c
;

90 ià((
FÜm©FÏgs
 & 
NRF_CLI_FORMAT_FLAG_LEFT_JUSTIFY
) == NRF_CLI_FORMAT_FLAG_LEFT_JUSTIFY)

92 (
c
 = *
p_¡r
) != '\0')

94 
p_¡r
++;

95 
Width
++;

96 
	`bufãr_add
(
p_ùx
, 
c
);

99 (
F›ldWidth
 > 
Width
) && (FieldWidth > 0))

101 
F›ldWidth
--;

102 
	`bufãr_add
(
p_ùx
, ' ');

107 ià(
p_¡r
 != 0)

109 
Width
 = 
	`¡¾’
(
p_¡r
);

112 (
F›ldWidth
 > 
Width
) && (FieldWidth > 0))

114 
F›ldWidth
--;

115 
	`bufãr_add
(
p_ùx
, ' ');

118 (
c
 = *
p_¡r
) != '\0')

120 
p_¡r
++;

121 
Width
++;

122 
	`bufãr_add
(
p_ùx
, 
c
);

125 
	}
}

127 
	$unsigÃd_´št
(
Äf_årštf_ùx_t
 * cÚ¡ 
p_ùx
,

128 
ušt32_t
 
v
,

129 
ušt32_t
 
Ba£
,

130 
ušt32_t
 
NumDig™s
,

131 
ušt32_t
 
F›ldWidth
,

132 
ušt32_t
 
FÜm©FÏgs
)

134 cÚ¡ 
_aV2C
[16] = {'0', '1', '2', '3', '4', '5', '6', '7', '8', '9',

136 
ušt32_t
 
Div
;

137 
ušt32_t
 
V®ue
;

138 
ušt32_t
 
Width
;

139 
c
;

141 
V®ue
 = 
v
;

145 
Width
 = 1u;

146 
V®ue
 >ğ
Ba£
)

148 
V®ue
 = (V®u/ 
Ba£
);

149 
Width
++;

151 ià(
NumDig™s
 > 
Width
)

153 
Width
 = 
NumDig™s
;

158 ià((
FÜm©FÏgs
 & 
NRF_CLI_FORMAT_FLAG_LEFT_JUSTIFY
) == 0u)

160 ià(
F›ldWidth
 != 0u)

162 ià(((
FÜm©FÏgs
 & 
NRF_CLI_FORMAT_FLAG_PAD_ZERO
) == NRF_CLI_FORMAT_FLAG_PAD_ZERO) &&

163 (
NumDig™s
 == 0u))

165 
c
 = '0';

169 
c
 = ' ';

171 (
F›ldWidth
 !ğ0uè&& (
Width
 < FieldWidth))

173 
F›ldWidth
--;

174 
	`bufãr_add
(
p_ùx
, 
c
);

179 
V®ue
 = 1;

191 ià(
NumDig™s
 > 1u)

193 
NumDig™s
--;

197 
Div
 = 
v
 / 
V®ue
;

199 ià(
Div
 < 
Ba£
)

204 
V®ue
 *ğ
Ba£
;

211 
Div
 = 
v
 / 
V®ue
;

212 
v
 -ğ
Div
 * 
V®ue
;

213 
	`bufãr_add
(
p_ùx
, 
_aV2C
[
Div
]);

214 
V®ue
 /ğ
Ba£
;

215 } 
V®ue
);

219 ià((
FÜm©FÏgs
 & 
NRF_CLI_FORMAT_FLAG_LEFT_JUSTIFY
) == NRF_CLI_FORMAT_FLAG_LEFT_JUSTIFY)

221 ià(
F›ldWidth
 != 0u)

223 (
F›ldWidth
 !ğ0uè&& (
Width
 < FieldWidth))

225 
F›ldWidth
--;

226 
	`bufãr_add
(
p_ùx
, ' ');

230 
	}
}

232 
	$št_´št
(
Äf_årštf_ùx_t
 * cÚ¡ 
p_ùx
,

233 
št32_t
 
v
,

234 
ušt32_t
 
Ba£
,

235 
ušt32_t
 
NumDig™s
,

236 
ušt32_t
 
F›ldWidth
,

237 
ušt32_t
 
FÜm©FÏgs
)

239 
ušt32_t
 
Width
;

240 
št32_t
 
Numb”
;

242 
Numb”
 = (
v
 < 0) ? -v : v;

247 
Width
 = 1u;

248 
Numb”
 >ğ(
št32_t
)
Ba£
)

250 
Numb”
 = (Numb” / (
št32_t
)
Ba£
);

251 
Width
++;

253 ià(
NumDig™s
 > 
Width
)

255 
Width
 = 
NumDig™s
;

257 ià((
F›ldWidth
 > 0uè&& ((
v
 < 0) ||

258 ((
FÜm©FÏgs
 & 
NRF_CLI_FORMAT_FLAG_PRINT_SIGN
) == NRF_CLI_FORMAT_FLAG_PRINT_SIGN)))

260 
F›ldWidth
--;

265 ià((((
FÜm©FÏgs
 & 
NRF_CLI_FORMAT_FLAG_PAD_ZERO
è=ğ0uè|| (
NumDig™s
 != 0u)) &&

266 ((
FÜm©FÏgs
 & 
NRF_CLI_FORMAT_FLAG_LEFT_JUSTIFY
) == 0u))

268 ià(
F›ldWidth
 != 0u)

270 (
F›ldWidth
 !ğ0uè&& (
Width
 < FieldWidth))

272 
F›ldWidth
--;

273 
	`bufãr_add
(
p_ùx
, ' ');

280 ià(
v
 < 0)

282 
v
 = -v;

283 
	`bufãr_add
(
p_ùx
, '-');

285 ià((
FÜm©FÏgs
 & 
NRF_CLI_FORMAT_FLAG_PRINT_SIGN
) == NRF_CLI_FORMAT_FLAG_PRINT_SIGN)

287 
	`bufãr_add
(
p_ùx
, '+');

296 ià(((
FÜm©FÏgs
 & 
NRF_CLI_FORMAT_FLAG_PAD_ZERO
) == NRF_CLI_FORMAT_FLAG_PAD_ZERO) &&

297 ((
FÜm©FÏgs
 & 
NRF_CLI_FORMAT_FLAG_LEFT_JUSTIFY
è=ğ0uè&& (
NumDig™s
 == 0u))

299 ià(
F›ldWidth
 != 0u)

301 (
F›ldWidth
 !ğ0uè&& (
Width
 < FieldWidth))

303 
F›ldWidth
--;

304 
	`bufãr_add
(
p_ùx
, '0');

311 
	`unsigÃd_´št
(
p_ùx
, (
ušt32_t
)
v
, 
Ba£
, 
NumDig™s
, 
F›ldWidth
, 
FÜm©FÏgs
);

312 
	}
}

314 
	$Äf_årštf_fmt
(
Äf_årštf_ùx_t
 * cÚ¡ 
p_ùx
,

315 cÚ¡ * 
p_fmt
,

316 
va_li¡
 * 
p_¬gs
)

318 
	`ASSERT
(
p_ùx
 !ğ
NULL
);

320 
	`ASSERT
(
p_ùx
->
fwr™e
 !ğ
NULL
);

321 
	`ASSERT
(
p_ùx
->
p_io_bufãr
 !ğ
NULL
);

322 
	`ASSERT
(
p_ùx
->
io_bufãr_size
 > 0);

324 ià(
p_fmt
 =ğ
NULL
)

329 
c
;

330 
št32_t
 
v
;

331 
ušt32_t
 
NumDig™s
;

332 
ušt32_t
 
FÜm©FÏgs
;

333 
ušt32_t
 
F›ldWidth
;

337 
c
 = *
p_fmt
;

338 
p_fmt
++;

340 ià(
c
 == 0u)

344 ià(
c
 == '%')

349 
FÜm©FÏgs
 = 0u;

350 
v
 = 1;

354 
c
 = *
p_fmt
;

355 
c
)

358 
FÜm©FÏgs
 |ğ
NRF_CLI_FORMAT_FLAG_LEFT_JUSTIFY
;

359 
p_fmt
++;

362 
FÜm©FÏgs
 |ğ
NRF_CLI_FORMAT_FLAG_PAD_ZERO
;

363 
p_fmt
++;

366 
FÜm©FÏgs
 |ğ
NRF_CLI_FORMAT_FLAG_PRINT_SIGN
;

367 
p_fmt
++;

370 
v
 = 0;

373 } 
v
);

378 
F›ldWidth
 = 0u;

381 ià(
c
 == '*')

384 
F›ldWidth
 +ğ
	`va_¬g
(*
p_¬gs
, );

386 
p_fmt
++;

389 
c
 = *
p_fmt
;

390 ià((
c
 < '0') || (c > '9'))

394 
p_fmt
++;

395 
F›ldWidth
 = (F›ldWidth * 10uè+ (
c
 - '0');

401 
NumDig™s
 = 0u;

402 
c
 = *
p_fmt
;

403 ià(
c
 == '.')

405 
p_fmt
++;

408 
c
 = *
p_fmt
;

409 ià((
c
 < '0') || (c > '9'))

413 
p_fmt
++;

414 
NumDig™s
 = NumDig™ * 10u + (
c
 - '0');

420 
c
 = *
p_fmt
;

423 ià((
c
 == 'l') || (c == 'h'))

425 
p_fmt
++;

426 
c
 = *
p_fmt
;

437 
c
)

441 
c0
;

442 
v
 = 
	`va_¬g
(*
p_¬gs
, 
št32_t
);

443 
c0
 = ()
v
;

444 
	`bufãr_add
(
p_ùx
, 
c0
);

449 
v
 = 
	`va_¬g
(*
p_¬gs
, 
št32_t
);

450 
	`št_´št
(
p_ùx
,

451 
v
,

453 
NumDig™s
,

454 
F›ldWidth
,

455 
FÜm©FÏgs
);

458 
v
 = 
	`va_¬g
(*
p_¬gs
, 
št32_t
);

459 
	`unsigÃd_´št
(
p_ùx
,

460 (
ušt32_t
)
v
,

462 
NumDig™s
,

463 
F›ldWidth
,

464 
FÜm©FÏgs
);

468 
v
 = 
	`va_¬g
(*
p_¬gs
, 
št32_t
);

469 
	`unsigÃd_´št
(
p_ùx
,

470 (
ušt32_t
)
v
,

472 
NumDig™s
,

473 
F›ldWidth
,

474 
FÜm©FÏgs
);

478 cÚ¡ * 
p_s
 = 
	`va_¬g
(*
p_¬gs
, const *);

479 
	`¡ršg_´št
(
p_ùx
, 
p_s
, 
F›ldWidth
, 
FÜm©FÏgs
);

483 
v
 = 
	`va_¬g
(*
p_¬gs
, 
št32_t
);

484 
	`bufãr_add
(
p_ùx
, '0');

485 
	`bufãr_add
(
p_ùx
, 'x');

486 
	`unsigÃd_´št
(
p_ùx
, (
ušt32_t
)
v
, 16u, 8u, 8u, 0);

489 
	`bufãr_add
(
p_ùx
, '%');

495 
p_fmt
++;

499 
	`bufãr_add
(
p_ùx
, 
c
);

501 } *
p_fmt
 != '\0');

503 ià(
p_ùx
->
auto_æush
)

505 
	`Äf_årštf_bufãr_æush
(
p_ùx
);

507 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\external\segger_rtt\SEGGER_RTT.c

86 
	~"SEGGER_RTT.h
"

88 
	~<¡ršg.h
>

97 #iâdeà 
BUFFER_SIZE_UP


98 
	#BUFFER_SIZE_UP
 1024

100 

	)

101 #iâdeà 
BUFFER_SIZE_DOWN


102 
	#BUFFER_SIZE_DOWN
 16

104 

	)

105 #iâdeà 
SEGGER_RTT_MAX_NUM_UP_BUFFERS


106 
	#SEGGER_RTT_MAX_NUM_UP_BUFFERS
 2

108 

	)

109 #iâdeà 
SEGGER_RTT_MAX_NUM_DOWN_BUFFERS


110 
	#SEGGER_RTT_MAX_NUM_DOWN_BUFFERS
 2

112 

	)

113 #iâdeà
SEGGER_RTT_BUFFER_SECTION


114 #ià
defšed
(
SEGGER_RTT_SECTION
)

115 
	#SEGGER_RTT_BUFFER_SECTION
 
SEGGER_RTT_SECTION


	)

119 #iâdeà 
SEGGER_RTT_ALIGNMENT


120 
	#SEGGER_RTT_ALIGNMENT
 0

	)

123 #iâdeà 
SEGGER_RTT_BUFFER_ALIGNMENT


124 
	#SEGGER_RTT_BUFFER_ALIGNMENT
 0

	)

127 #iâdeà 
SEGGER_RTT_MODE_DEFAULT


128 
	#SEGGER_RTT_MODE_DEFAULT
 
SEGGER_RTT_MODE_NO_BLOCK_SKIP


	)

131 #iâdeà 
SEGGER_RTT_LOCK


132 
	#SEGGER_RTT_LOCK
()

	)

135 #iâdeà 
SEGGER_RTT_UNLOCK


136 
	#SEGGER_RTT_UNLOCK
()

	)

139 #iâdeà 
STRLEN


140 
	#STRLEN
(
a
è
	`¡¾’
(×))

	)

143 #iâdeà 
SEGGER_RTT_MEMCPY_USE_BYTELOOP


144 
	#SEGGER_RTT_MEMCPY_USE_BYTELOOP
 0

	)

147 #iâdeà 
SEGGER_RTT_MEMCPY


148 #ifdeà 
MEMCPY


149 
	#SEGGER_RTT_MEMCPY
(
pDe¡
, 
pSrc
, 
NumBy‹s
è
	`MEMCPY
(ÕDe¡), (pSrc), (NumBy‹s))

	)

151 
	#SEGGER_RTT_MEMCPY
(
pDe¡
, 
pSrc
, 
NumBy‹s
è
	`memıy
(ÕDe¡), (pSrc), (NumBy‹s))

	)

155 #iâdeà 
MIN


156 
	#MIN
(
a
, 
b
è((×è< (b)è? (aè: (b))

	)

159 #iâdeà 
MAX


160 
	#MAX
(
a
, 
b
è((×è> (b)è? (aè: (b))

	)

165 #iâdeà
NULL


166 
	#NULL
 0

	)

175 #ià(
defšed
 
__ICCARM__
è|| (defšed 
__ICCRX__
)

176 
	#RTT_PRAGMA
(
P
è
	`_P¿gma
(#P)

	)

179 #ià
SEGGER_RTT_ALIGNMENT
 || 
SEGGER_RTT_BUFFER_ALIGNMENT


180 #ià(
defšed
 
__GNUC__
)

181 
	#SEGGER_RTT_ALIGN
(
V¬
, 
Alignm’t
èV¬ 
	`__©Œibu‹__
 ((
	`®igÃd
 (Alignm’t)))

	)

182 #–ià(
defšed
 
__ICCARM__
è|| (defšed 
__ICCRX__
)

183 
	#PRAGMA
(
A
è
	`_P¿gma
(#A)

	)

184 
	#SEGGER_RTT_ALIGN
(
V¬
, 
Alignm’t
è
	`RTT_PRAGMA
(
d©a_®ignm’t
=Alignment) \

185 
V¬


	)

186 #–ià(
defšed
 
__CC_ARM
)

187 
	#SEGGER_RTT_ALIGN
(
V¬
, 
Alignm’t
èV¬ 
	`__©Œibu‹__
 ((
	`®igÃd
 (Alignm’t)))

	)

192 
	#SEGGER_RTT_ALIGN
(
V¬
, 
Alignm’t
è
	)
Var

195 #ià
defšed
(
SEGGER_RTT_SECTION
è|| defšed (
SEGGER_RTT_BUFFER_SECTION
)

196 #ià(
defšed
 
__GNUC__
)

197 
	#SEGGER_RTT_PUT_SECTION
(
V¬
, 
SeùiÚ
è
	`__©Œibu‹__
 ((
	`£ùiÚ
 (SeùiÚ))è
	)
Var

198 #–ià(
defšed
 
__ICCARM__
è|| (defšed 
__ICCRX__
)

199 
	#SEGGER_RTT_PUT_SECTION
(
V¬
, 
SeùiÚ
è
	`RTT_PRAGMA
(
loÿtiÚ
=Section) \

200 
V¬


	)

201 #–ià(
defšed
 
__CC_ARM
)

202 
	#SEGGER_RTT_PUT_SECTION
(
V¬
, 
SeùiÚ
è
	`__©Œibu‹__
 ((
	`£ùiÚ
 (SeùiÚ), 
z”o_š™
)è
	)
Var

207 
	#SEGGER_RTT_PUT_SECTION
(
V¬
, 
SeùiÚ
è
	)
Var

211 #ià
SEGGER_RTT_ALIGNMENT


212 
	#SEGGER_RTT_CB_ALIGN
(
V¬
è
	`SEGGER_RTT_ALIGN
(V¬, 
SEGGER_RTT_ALIGNMENT
)

	)

214 
	#SEGGER_RTT_CB_ALIGN
(
V¬
è
	)
Var

217 #ià
SEGGER_RTT_BUFFER_ALIGNMENT


218 
	#SEGGER_RTT_BUFFER_ALIGN
(
V¬
è
	`SEGGER_RTT_ALIGN
(V¬, 
SEGGER_RTT_BUFFER_ALIGNMENT
)

	)

220 
	#SEGGER_RTT_BUFFER_ALIGN
(
V¬
è
	)
Var

224 #ià
defšed
(
SEGGER_RTT_SECTION
)

225 
	#SEGGER_RTT_PUT_CB_SECTION
(
V¬
è
	`SEGGER_RTT_PUT_SECTION
(V¬, 
SEGGER_RTT_SECTION
)

	)

227 
	#SEGGER_RTT_PUT_CB_SECTION
(
V¬
è
	)
Var

230 #ià
defšed
(
SEGGER_RTT_BUFFER_SECTION
)

231 
	#SEGGER_RTT_PUT_BUFFER_SECTION
(
V¬
è
	`SEGGER_RTT_PUT_SECTION
(V¬, 
SEGGER_RTT_BUFFER_SECTION
)

	)

233 
	#SEGGER_RTT_PUT_BUFFER_SECTION
(
V¬
è
	)
Var

243 
	g_aT”mš®Id
[16] = { '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E', 'F' };

254 
SEGGER_RTT_PUT_CB_SECTION
(
SEGGER_RTT_CB_ALIGN
(
SEGGER_RTT_CB
 
_SEGGER_RTT
));

256 
SEGGER_RTT_PUT_BUFFER_SECTION
(
SEGGER_RTT_BUFFER_ALIGN
(
_acUpBufãr
 [
BUFFER_SIZE_UP
]));

257 
SEGGER_RTT_PUT_BUFFER_SECTION
(
SEGGER_RTT_BUFFER_ALIGN
(
_acDownBufãr
[
BUFFER_SIZE_DOWN
]));

259 
	g_AùiveT”mš®
;

277 
	#INIT
() do { \

278 ià(
_SEGGER_RTT
.
acID
[0] =ğ'\0'è{ 
	`_DoIn™
(); } \

279 } 0)

	)

280 
	$_DoIn™
() {

281 
SEGGER_RTT_CB
* 
p
;

285 
p
 = &
_SEGGER_RTT
;

286 
p
->
MaxNumUpBufãrs
 = 
SEGGER_RTT_MAX_NUM_UP_BUFFERS
;

287 
p
->
MaxNumDownBufãrs
 = 
SEGGER_RTT_MAX_NUM_DOWN_BUFFERS
;

291 
p
->
aUp
[0].
sName
 = "Terminal";

292 
p
->
aUp
[0].
pBufãr
 = 
_acUpBufãr
;

293 
p
->
aUp
[0].
SizeOfBufãr
 = (
_acUpBufãr
);

294 
p
->
aUp
[0].
RdOff
 = 0u;

295 
p
->
aUp
[0].
WrOff
 = 0u;

296 
p
->
aUp
[0].
FÏgs
 = 
SEGGER_RTT_MODE_DEFAULT
;

300 
p
->
aDown
[0].
sName
 = "Terminal";

301 
p
->
aDown
[0].
pBufãr
 = 
_acDownBufãr
;

302 
p
->
aDown
[0].
SizeOfBufãr
 = (
_acDownBufãr
);

303 
p
->
aDown
[0].
RdOff
 = 0u;

304 
p
->
aDown
[0].
WrOff
 = 0u;

305 
p
->
aDown
[0].
FÏgs
 = 
SEGGER_RTT_MODE_DEFAULT
;

311 
	`¡rıy
(&
p
->
acID
[7], "RTT");

312 
	`¡rıy
(&
p
->
acID
[0], "SEGGER");

313 
p
->
acID
[6] = ' ';

314 
	}
}

335 
	$_Wr™eBlockšg
(
SEGGER_RTT_BUFFER_UP
* 
pRšg
, cÚ¡ * 
pBufãr
, 
NumBy‹s
) {

336 
NumBy‹sToWr™e
;

337 
NumBy‹sWr™‹n
;

338 
RdOff
;

339 
WrOff
;

340 #ià
SEGGER_RTT_MEMCPY_USE_BYTELOOP


341 * 
pD¡
;

346 
NumBy‹sWr™‹n
 = 0u;

347 
WrOff
 = 
pRšg
->WrOff;

349 
RdOff
 = 
pRšg
->RdOff;

350 ià(
RdOff
 > 
WrOff
) {

351 
NumBy‹sToWr™e
 = 
RdOff
 - 
WrOff
 - 1u;

353 
NumBy‹sToWr™e
 = 
pRšg
->
SizeOfBufãr
 - (
WrOff
 - 
RdOff
 + 1u);

355 
NumBy‹sToWr™e
 = 
	`MIN
(NumBy‹sToWr™e, (
pRšg
->
SizeOfBufãr
 - 
WrOff
));

356 
NumBy‹sToWr™e
 = 
	`MIN
(NumBy‹sToWr™e, 
NumBy‹s
);

357 #ià
SEGGER_RTT_MEMCPY_USE_BYTELOOP


358 
pD¡
 = 
pRšg
->
pBufãr
 + 
WrOff
;

359 
NumBy‹sWr™‹n
 +ğ
NumBy‹sToWr™e
;

360 
NumBy‹s
 -ğ
NumBy‹sToWr™e
;

361 
WrOff
 +ğ
NumBy‹sToWr™e
;

362 
NumBy‹sToWr™e
--) {

363 *
pD¡
++ = *
pBufãr
++;

366 
	`SEGGER_RTT_MEMCPY
(
pRšg
->
pBufãr
 + 
WrOff
,…Bufãr, 
NumBy‹sToWr™e
);

367 
NumBy‹sWr™‹n
 +ğ
NumBy‹sToWr™e
;

368 
pBufãr
 +ğ
NumBy‹sToWr™e
;

369 
NumBy‹s
 -ğ
NumBy‹sToWr™e
;

370 
WrOff
 +ğ
NumBy‹sToWr™e
;

372 ià(
WrOff
 =ğ
pRšg
->
SizeOfBufãr
) {

373 
WrOff
 = 0u;

375 
pRšg
->
WrOff
 = WrOff;

376 } 
NumBy‹s
);

378  
NumBy‹sWr™‹n
;

379 
	}
}

399 
	$_Wr™eNoCheck
(
SEGGER_RTT_BUFFER_UP
* 
pRšg
, cÚ¡ * 
pD©a
, 
NumBy‹s
) {

400 
NumBy‹sAtOnû
;

401 
WrOff
;

402 
Rem
;

403 #ià
SEGGER_RTT_MEMCPY_USE_BYTELOOP


404 * 
pD¡
;

407 
WrOff
 = 
pRšg
->WrOff;

408 
Rem
 = 
pRšg
->
SizeOfBufãr
 - 
WrOff
;

409 ià(
Rem
 > 
NumBy‹s
) {

413 #ià
SEGGER_RTT_MEMCPY_USE_BYTELOOP


414 
pD¡
 = 
pRšg
->
pBufãr
 + 
WrOff
;

415 
WrOff
 +ğ
NumBy‹s
;

416 
NumBy‹s
--) {

417 *
pD¡
++ = *
pD©a
++;

419 
pRšg
->
WrOff
 = WrOff;

421 
	`SEGGER_RTT_MEMCPY
(
pRšg
->
pBufãr
 + 
WrOff
, 
pD©a
, 
NumBy‹s
);

422 
pRšg
->
WrOff
 = WrOfà+ 
NumBy‹s
;

428 #ià
SEGGER_RTT_MEMCPY_USE_BYTELOOP


429 
pD¡
 = 
pRšg
->
pBufãr
 + 
WrOff
;

430 
NumBy‹sAtOnû
 = 
Rem
;

431 
NumBy‹sAtOnû
--) {

432 *
pD¡
++ = *
pD©a
++;

434 
pD¡
 = 
pRšg
->
pBufãr
;

435 
NumBy‹sAtOnû
 = 
NumBy‹s
 - 
Rem
;

436 
NumBy‹sAtOnû
--) {

437 *
pD¡
++ = *
pD©a
++;

439 
pRšg
->
WrOff
 = 
NumBy‹s
 - 
Rem
;

441 
NumBy‹sAtOnû
 = 
Rem
;

442 
	`SEGGER_RTT_MEMCPY
(
pRšg
->
pBufãr
 + 
WrOff
, 
pD©a
, 
NumBy‹sAtOnû
);

443 
NumBy‹sAtOnû
 = 
NumBy‹s
 - 
Rem
;

444 
	`SEGGER_RTT_MEMCPY
(
pRšg
->
pBufãr
, 
pD©a
 + 
Rem
, 
NumBy‹sAtOnû
);

445 
pRšg
->
WrOff
 = 
NumBy‹sAtOnû
;

448 
	}
}

463 
	$_Po¡T”mš®Sw™ch
(
SEGGER_RTT_BUFFER_UP
* 
pRšg
, 
T”mš®Id
) {

464 
ac
[2];

466 
ac
[0] = 0xFFu;

467 
ac
[1] = 
_aT”mš®Id
[
T”mš®Id
];

468 
	`_Wr™eBlockšg
(
pRšg
, 
ac
, 2u);

469 
	}
}

485 
	$_G‘AvaWr™eS·û
(
SEGGER_RTT_BUFFER_UP
* 
pRšg
) {

486 
RdOff
;

487 
WrOff
;

488 
r
;

493 
RdOff
 = 
pRšg
->RdOff;

494 
WrOff
 = 
pRšg
->WrOff;

495 ià(
RdOff
 <ğ
WrOff
) {

496 
r
 = 
pRšg
->
SizeOfBufãr
 - 1u - 
WrOff
 + 
RdOff
;

498 
r
 = 
RdOff
 - 
WrOff
 - 1u;

500  
r
;

501 
	}
}

526 
	$SEGGER_RTT_R—dNoLock
(
BufãrIndex
, * 
pD©a
, 
BufãrSize
) {

527 
NumBy‹sRem
;

528 
NumBy‹sR—d
;

529 
RdOff
;

530 
WrOff
;

531 * 
pBufãr
;

532 
SEGGER_RTT_BUFFER_DOWN
* 
pRšg
;

533 #ià
SEGGER_RTT_MEMCPY_USE_BYTELOOP


534 cÚ¡ * 
pSrc
;

537 
	`INIT
();

538 
pRšg
 = &
_SEGGER_RTT
.
aDown
[
BufãrIndex
];

539 
pBufãr
 = (*)
pD©a
;

540 
RdOff
 = 
pRšg
->RdOff;

541 
WrOff
 = 
pRšg
->WrOff;

542 
NumBy‹sR—d
 = 0u;

546 ià(
RdOff
 > 
WrOff
) {

547 
NumBy‹sRem
 = 
pRšg
->
SizeOfBufãr
 - 
RdOff
;

548 
NumBy‹sRem
 = 
	`MIN
(NumBy‹sRem, 
BufãrSize
);

549 #ià
SEGGER_RTT_MEMCPY_USE_BYTELOOP


550 
pSrc
 = 
pRšg
->
pBufãr
 + 
RdOff
;

551 
NumBy‹sR—d
 +ğ
NumBy‹sRem
;

552 
BufãrSize
 -ğ
NumBy‹sRem
;

553 
RdOff
 +ğ
NumBy‹sRem
;

554 
NumBy‹sRem
--) {

555 *
pBufãr
++ = *
pSrc
++;

558 
	`SEGGER_RTT_MEMCPY
(
pBufãr
, 
pRšg
->pBufã¸+ 
RdOff
, 
NumBy‹sRem
);

559 
NumBy‹sR—d
 +ğ
NumBy‹sRem
;

560 
pBufãr
 +ğ
NumBy‹sRem
;

561 
BufãrSize
 -ğ
NumBy‹sRem
;

562 
RdOff
 +ğ
NumBy‹sRem
;

567 ià(
RdOff
 =ğ
pRšg
->
SizeOfBufãr
) {

568 
RdOff
 = 0u;

574 
NumBy‹sRem
 = 
WrOff
 - 
RdOff
;

575 
NumBy‹sRem
 = 
	`MIN
(NumBy‹sRem, 
BufãrSize
);

576 ià(
NumBy‹sRem
 > 0u) {

577 #ià
SEGGER_RTT_MEMCPY_USE_BYTELOOP


578 
pSrc
 = 
pRšg
->
pBufãr
 + 
RdOff
;

579 
NumBy‹sR—d
 +ğ
NumBy‹sRem
;

580 
BufãrSize
 -ğ
NumBy‹sRem
;

581 
RdOff
 +ğ
NumBy‹sRem
;

582 
NumBy‹sRem
--) {

583 *
pBufãr
++ = *
pSrc
++;

586 
	`SEGGER_RTT_MEMCPY
(
pBufãr
, 
pRšg
->pBufã¸+ 
RdOff
, 
NumBy‹sRem
);

587 
NumBy‹sR—d
 +ğ
NumBy‹sRem
;

588 
pBufãr
 +ğ
NumBy‹sRem
;

589 
BufãrSize
 -ğ
NumBy‹sRem
;

590 
RdOff
 +ğ
NumBy‹sRem
;

593 ià(
NumBy‹sR—d
) {

594 
pRšg
->
RdOff
 = RdOff;

597  
NumBy‹sR—d
;

598 
	}
}

616 
	$SEGGER_RTT_R—d
(
BufãrIndex
, * 
pBufãr
, 
BufãrSize
) {

617 
NumBy‹sR—d
;

619 
	`SEGGER_RTT_LOCK
();

623 
NumBy‹sR—d
 = 
	`SEGGER_RTT_R—dNoLock
(
BufãrIndex
, 
pBufãr
, 
BufãrSize
);

627 
	`SEGGER_RTT_UNLOCK
();

629  
NumBy‹sR—d
;

630 
	}
}

655 
	$SEGGER_RTT_Wr™eW™hOv”wr™eNoLock
(
BufãrIndex
, cÚ¡ * 
pBufãr
, 
NumBy‹s
) {

656 cÚ¡ * 
pD©a
;

657 
SEGGER_RTT_BUFFER_UP
* 
pRšg
;

658 
Ava
;

659 #ià
SEGGER_RTT_MEMCPY_USE_BYTELOOP


660 * 
pD¡
;

663 
pD©a
 = (cÚ¡ *)
pBufãr
;

667 
pRšg
 = &
_SEGGER_RTT
.
aUp
[
BufãrIndex
];

671 ià(
pRšg
->
WrOff
 =ğpRšg->
RdOff
) {

672 
Ava
 = 
pRšg
->
SizeOfBufãr
 - 1u;

673 } iàĞ
pRšg
->
WrOff
 <…Ršg->
RdOff
) {

674 
Ava
 = 
pRšg
->
RdOff
 -…Ršg->
WrOff
 - 1u;

676 
Ava
 = 
pRšg
->
RdOff
 -…Ršg->
WrOff
 - 1u +…Ršg->
SizeOfBufãr
;

678 ià(
NumBy‹s
 > 
Ava
) {

679 
pRšg
->
RdOff
 +ğ(
NumBy‹s
 - 
Ava
);

680 
pRšg
->
RdOff
 >ğpRšg->
SizeOfBufãr
) {

681 
pRšg
->
RdOff
 -ğpRšg->
SizeOfBufãr
;

687 
Ava
 = 
pRšg
->
SizeOfBufãr
 -…Ršg->
WrOff
;

689 ià(
Ava
 > 
NumBy‹s
) {

693 #ià
SEGGER_RTT_MEMCPY_USE_BYTELOOP


694 
pD¡
 = 
pRšg
->
pBufãr
 +…Ršg->
WrOff
;

695 
Ava
 = 
NumBy‹s
;

696 
NumBy‹s
--) {

697 *
pD¡
++ = *
pD©a
++;

699 
pRšg
->
WrOff
 +ğ
Ava
;

701 
	`SEGGER_RTT_MEMCPY
(
pRšg
->
pBufãr
 +…Ršg->
WrOff
, 
pD©a
, 
NumBy‹s
);

702 
pRšg
->
WrOff
 +ğ
NumBy‹s
;

709 #ià
SEGGER_RTT_MEMCPY_USE_BYTELOOP


710 
pD¡
 = 
pRšg
->
pBufãr
 +…Ršg->
WrOff
;

711 
NumBy‹s
 -ğ
Ava
;

712 
Ava
--) {

713 *
pD¡
++ = *
pD©a
++;

715 
pRšg
->
WrOff
 = 0;

717 
	`SEGGER_RTT_MEMCPY
(
pRšg
->
pBufãr
 +…Ršg->
WrOff
, 
pD©a
, 
Ava
);

718 
pD©a
 +ğ
Ava
;

719 
pRšg
->
WrOff
 = 0;

720 
NumBy‹s
 -ğ
Ava
;

722 
Ava
 = (
pRšg
->
SizeOfBufãr
 - 1);

724 } 
NumBy‹s
);

725 
	}
}

751 
	$SEGGER_RTT_Wr™eSkNoLock
(
BufãrIndex
, cÚ¡ * 
pBufãr
, 
NumBy‹s
) {

752 cÚ¡ * 
pD©a
;

753 
SEGGER_RTT_BUFFER_UP
* 
pRšg
;

754 
Ava
;

755 
RdOff
;

756 
WrOff
;

757 
Rem
;

758 #ià
SEGGER_RTT_MEMCPY_USE_BYTELOOP


759 * 
pD¡
;

762 
pD©a
 = (cÚ¡ *)
pBufãr
;

766 
pRšg
 = &
_SEGGER_RTT
.
aUp
[
BufãrIndex
];

767 
RdOff
 = 
pRšg
->RdOff;

768 
WrOff
 = 
pRšg
->WrOff;

782 ià(
RdOff
 <ğ
WrOff
) {

786 
Ava
 = 
pRšg
->
SizeOfBufãr
 - 1u - 
WrOff
 ;

787 ià(
Ava
 >ğ
NumBy‹s
) {

788 #ià
SEGGER_RTT_MEMCPY_USE_BYTELOOP


789 
pD¡
 = 
pRšg
->
pBufãr
 + 
WrOff
;

790 
WrOff
 +ğ
NumBy‹s
;

791 
NumBy‹s
--) {

792 *
pD¡
++ = *
pD©a
++;

794 
pRšg
->
WrOff
 = WrOff;

796 
	`SEGGER_RTT_MEMCPY
(
pRšg
->
pBufãr
 + 
WrOff
, 
pD©a
, 
NumBy‹s
);

797 
pRšg
->
WrOff
 = WrOfà+ 
NumBy‹s
;

804 
Ava
 +ğ
RdOff
;

808 ià(
Ava
 >ğ
NumBy‹s
) {

812 
Rem
 = 
pRšg
->
SizeOfBufãr
 - 
WrOff
;

813 ià(
Rem
 > 
NumBy‹s
) {

814 #ià
SEGGER_RTT_MEMCPY_USE_BYTELOOP


815 
pD¡
 = 
pRšg
->
pBufãr
 + 
WrOff
;

816 
WrOff
 +ğ
NumBy‹s
;

817 
NumBy‹s
--) {

818 *
pD¡
++ = *
pD©a
++;

820 
pRšg
->
WrOff
 = WrOff;

822 
	`SEGGER_RTT_MEMCPY
(
pRšg
->
pBufãr
 + 
WrOff
, 
pD©a
, 
NumBy‹s
);

823 
pRšg
->
WrOff
 = WrOfà+ 
NumBy‹s
;

829 #ià
SEGGER_RTT_MEMCPY_USE_BYTELOOP


830 
pD¡
 = 
pRšg
->
pBufãr
 + 
WrOff
;

831 
NumBy‹s
 -ğ
Rem
;

832 
WrOff
 = 
NumBy‹s
;

834 *
pD¡
++ = *
pD©a
++;

835 } --
Rem
);

836 
pD¡
 = 
pRšg
->
pBufãr
;

838 *
pD¡
++ = *
pD©a
++;

839 } --
NumBy‹s
);

840 
pRšg
->
WrOff
 = WrOff;

842 
	`SEGGER_RTT_MEMCPY
(
pRšg
->
pBufãr
 + 
WrOff
, 
pD©a
, 
Rem
);

843 
	`SEGGER_RTT_MEMCPY
(
pRšg
->
pBufãr
, 
pD©a
 + 
Rem
, 
NumBy‹s
 - Rem);

844 
pRšg
->
WrOff
 = 
NumBy‹s
 - 
Rem
;

850 
Ava
 = 
RdOff
 - 
WrOff
 - 1u;

851 ià(
Ava
 >ğ
NumBy‹s
) {

852 #ià
SEGGER_RTT_MEMCPY_USE_BYTELOOP


853 
pD¡
 = 
pRšg
->
pBufãr
 + 
WrOff
;

854 
WrOff
 +ğ
NumBy‹s
;

855 
NumBy‹s
--) {

856 *
pD¡
++ = *
pD©a
++;

858 
pRšg
->
WrOff
 = WrOff;

860 
	`SEGGER_RTT_MEMCPY
(
pRšg
->
pBufãr
 + 
WrOff
, 
pD©a
, 
NumBy‹s
);

861 
pRšg
->
WrOff
 = WrOfà+ 
NumBy‹s
;

870 
	}
}

895 
	$SEGGER_RTT_Wr™eNoLock
(
BufãrIndex
, cÚ¡ * 
pBufãr
, 
NumBy‹s
) {

896 
Stus
;

897 
Ava
;

898 cÚ¡ * 
pD©a
;

899 
SEGGER_RTT_BUFFER_UP
* 
pRšg
;

901 
pD©a
 = (cÚ¡ *)
pBufãr
;

905 
pRšg
 = &
_SEGGER_RTT
.
aUp
[
BufãrIndex
];

909 
pRšg
->
FÏgs
) {

910 
SEGGER_RTT_MODE_NO_BLOCK_SKIP
:

915 
Ava
 = 
	`_G‘AvaWr™eS·û
(
pRšg
);

916 ià(
Ava
 < 
NumBy‹s
) {

917 
Stus
 = 0u;

919 
Stus
 = 
NumBy‹s
;

920 
	`_Wr™eNoCheck
(
pRšg
, 
pD©a
, 
NumBy‹s
);

923 
SEGGER_RTT_MODE_NO_BLOCK_TRIM
:

927 
Ava
 = 
	`_G‘AvaWr™eS·û
(
pRšg
);

928 
Stus
 = 
Ava
 < 
NumBy‹s
 ? Avail : NumBytes;

929 
	`_Wr™eNoCheck
(
pRšg
, 
pD©a
, 
Stus
);

931 
SEGGER_RTT_MODE_BLOCK_IF_FIFO_FULL
:

935 
Stus
 = 
	`_Wr™eBlockšg
(
pRšg
, 
pD©a
, 
NumBy‹s
);

938 
Stus
 = 0u;

944  
Stus
;

945 
	}
}

966 
	$SEGGER_RTT_Wr™e
(
BufãrIndex
, cÚ¡ * 
pBufãr
, 
NumBy‹s
) {

967 
Stus
;

969 
	`INIT
();

970 
	`SEGGER_RTT_LOCK
();

974 
Stus
 = 
	`SEGGER_RTT_Wr™eNoLock
(
BufãrIndex
, 
pBufãr
, 
NumBy‹s
);

978 
	`SEGGER_RTT_UNLOCK
();

980  
Stus
;

981 
	}
}

1003 
	$SEGGER_RTT_Wr™eSŒšg
(
BufãrIndex
, cÚ¡ * 
s
) {

1004 
L’
;

1006 
L’
 = 
	`STRLEN
(
s
);

1007  
	`SEGGER_RTT_Wr™e
(
BufãrIndex
, 
s
, 
L’
);

1008 
	}
}

1033 
	$SEGGER_RTT_PutCh¬SkNoLock
(
BufãrIndex
, 
c
) {

1034 
SEGGER_RTT_BUFFER_UP
* 
pRšg
;

1035 
WrOff
;

1036 
Stus
;

1040 
pRšg
 = &
_SEGGER_RTT
.
aUp
[
BufãrIndex
];

1044 
WrOff
 = 
pRšg
->WrOff + 1;

1045 ià(
WrOff
 =ğ
pRšg
->
SizeOfBufãr
) {

1046 
WrOff
 = 0;

1051 ià(
WrOff
 !ğ
pRšg
->
RdOff
) {

1052 
pRšg
->
pBufãr
[pRšg->
WrOff
] = 
c
;

1053 
pRšg
->
WrOff
 = WrOff;

1054 
Stus
 = 1;

1056 
Stus
 = 0;

1059  
Stus
;

1060 
	}
}

1080 
	$SEGGER_RTT_PutCh¬Sk
(
BufãrIndex
, 
c
) {

1081 
SEGGER_RTT_BUFFER_UP
* 
pRšg
;

1082 
WrOff
;

1083 
Stus
;

1087 
	`INIT
();

1088 
	`SEGGER_RTT_LOCK
();

1092 
pRšg
 = &
_SEGGER_RTT
.
aUp
[
BufãrIndex
];

1096 
WrOff
 = 
pRšg
->WrOff + 1;

1097 ià(
WrOff
 =ğ
pRšg
->
SizeOfBufãr
) {

1098 
WrOff
 = 0;

1103 ià(
WrOff
 !ğ
pRšg
->
RdOff
) {

1104 
pRšg
->
pBufãr
[pRšg->
WrOff
] = 
c
;

1105 
pRšg
->
WrOff
 = WrOff;

1106 
Stus
 = 1;

1108 
Stus
 = 0;

1113 
	`SEGGER_RTT_UNLOCK
();

1115  
Stus
;

1116 
	}
}

1136 
	$SEGGER_RTT_PutCh¬
(
BufãrIndex
, 
c
) {

1137 
SEGGER_RTT_BUFFER_UP
* 
pRšg
;

1138 
WrOff
;

1139 
Stus
;

1143 
	`INIT
();

1144 
	`SEGGER_RTT_LOCK
();

1148 
pRšg
 = &
_SEGGER_RTT
.
aUp
[
BufãrIndex
];

1152 
WrOff
 = 
pRšg
->WrOff + 1;

1153 ià(
WrOff
 =ğ
pRšg
->
SizeOfBufãr
) {

1154 
WrOff
 = 0;

1159 ià(
pRšg
->
FÏgs
 =ğ
SEGGER_RTT_MODE_BLOCK_IF_FIFO_FULL
) {

1160 
WrOff
 =ğ
pRšg
->
RdOff
) {

1167 ià(
WrOff
 !ğ
pRšg
->
RdOff
) {

1168 
pRšg
->
pBufãr
[pRšg->
WrOff
] = 
c
;

1169 
pRšg
->
WrOff
 = WrOff;

1170 
Stus
 = 1;

1172 
Stus
 = 0;

1177 
	`SEGGER_RTT_UNLOCK
();

1179  
Stus
;

1180 
	}
}

1197 
	$SEGGER_RTT_G‘Key
() {

1198 
c
;

1199 
r
;

1201 
r
 = ()
	`SEGGER_RTT_R—d
(0u, &
c
, 1u);

1202 ià(
r
 == 1) {

1203 
r
 = ()()
c
;

1205 
r
 = -1;

1207  
r
;

1208 
	}
}

1225 
	$SEGGER_RTT_Wa™Key
() {

1226 
r
;

1229 
r
 = 
	`SEGGER_RTT_G‘Key
();

1230 } 
r
 < 0);

1231  
r
;

1232 
	}
}

1248 
	$SEGGER_RTT_HasKey
() {

1249 
RdOff
;

1250 
r
;

1252 
	`INIT
();

1253 
RdOff
 = 
_SEGGER_RTT
.
aDown
[0].RdOff;

1254 ià(
RdOff
 !ğ
_SEGGER_RTT
.
aDown
[0].
WrOff
) {

1255 
r
 = 1;

1257 
r
 = 0;

1259  
r
;

1260 
	}
}

1274 
	$SEGGER_RTT_HasD©a
(
BufãrIndex
) {

1275 
SEGGER_RTT_BUFFER_DOWN
* 
pRšg
;

1276 
v
;

1278 
pRšg
 = &
_SEGGER_RTT
.
aDown
[
BufãrIndex
];

1279 
v
 = 
pRšg
->
WrOff
;

1280  
v
 - 
pRšg
->
RdOff
;

1281 
	}
}

1302 
	$SEGGER_RTT_AÎocDownBufãr
(cÚ¡ * 
sName
, * 
pBufãr
, 
BufãrSize
, 
FÏgs
) {

1303 
BufãrIndex
;

1305 
	`INIT
();

1306 
	`SEGGER_RTT_LOCK
();

1307 
BufãrIndex
 = 0;

1309 ià(
_SEGGER_RTT
.
aDown
[
BufãrIndex
].
pBufãr
 =ğ
NULL
) {

1312 
BufãrIndex
++;

1313 } 
BufãrIndex
 < 
_SEGGER_RTT
.
MaxNumDownBufãrs
);

1314 ià(
BufãrIndex
 < 
_SEGGER_RTT
.
MaxNumDownBufãrs
) {

1315 
_SEGGER_RTT
.
aDown
[
BufãrIndex
].
sName
 = sName;

1316 
_SEGGER_RTT
.
aDown
[
BufãrIndex
].
pBufãr
 = (*)pBuffer;

1317 
_SEGGER_RTT
.
aDown
[
BufãrIndex
].
SizeOfBufãr
 = 
BufãrSize
;

1318 
_SEGGER_RTT
.
aDown
[
BufãrIndex
].
RdOff
 = 0u;

1319 
_SEGGER_RTT
.
aDown
[
BufãrIndex
].
WrOff
 = 0u;

1320 
_SEGGER_RTT
.
aDown
[
BufãrIndex
].
FÏgs
 = Flags;

1322 
BufãrIndex
 = -1;

1324 
	`SEGGER_RTT_UNLOCK
();

1325  
BufãrIndex
;

1326 
	}
}

1347 
	$SEGGER_RTT_AÎocUpBufãr
(cÚ¡ * 
sName
, * 
pBufãr
, 
BufãrSize
, 
FÏgs
) {

1348 
BufãrIndex
;

1350 
	`INIT
();

1351 
	`SEGGER_RTT_LOCK
();

1352 
BufãrIndex
 = 0;

1354 ià(
_SEGGER_RTT
.
aUp
[
BufãrIndex
].
pBufãr
 =ğ
NULL
) {

1357 
BufãrIndex
++;

1358 } 
BufãrIndex
 < 
_SEGGER_RTT
.
MaxNumUpBufãrs
);

1359 ià(
BufãrIndex
 < 
_SEGGER_RTT
.
MaxNumUpBufãrs
) {

1360 
_SEGGER_RTT
.
aUp
[
BufãrIndex
].
sName
 = sName;

1361 
_SEGGER_RTT
.
aUp
[
BufãrIndex
].
pBufãr
 = (*)pBuffer;

1362 
_SEGGER_RTT
.
aUp
[
BufãrIndex
].
SizeOfBufãr
 = 
BufãrSize
;

1363 
_SEGGER_RTT
.
aUp
[
BufãrIndex
].
RdOff
 = 0u;

1364 
_SEGGER_RTT
.
aUp
[
BufãrIndex
].
WrOff
 = 0u;

1365 
_SEGGER_RTT
.
aUp
[
BufãrIndex
].
FÏgs
 = Flags;

1367 
BufãrIndex
 = -1;

1369 
	`SEGGER_RTT_UNLOCK
();

1370  
BufãrIndex
;

1371 
	}
}

1398 
	$SEGGER_RTT_CÚfigUpBufãr
(
BufãrIndex
, cÚ¡ * 
sName
, * 
pBufãr
, 
BufãrSize
, 
FÏgs
) {

1399 
r
;

1401 
	`INIT
();

1402 ià(
BufãrIndex
 < ()
_SEGGER_RTT
.
MaxNumUpBufãrs
) {

1403 
	`SEGGER_RTT_LOCK
();

1404 ià(
BufãrIndex
 > 0u) {

1405 
_SEGGER_RTT
.
aUp
[
BufãrIndex
].
sName
 = sName;

1406 
_SEGGER_RTT
.
aUp
[
BufãrIndex
].
pBufãr
 = (*)pBuffer;

1407 
_SEGGER_RTT
.
aUp
[
BufãrIndex
].
SizeOfBufãr
 = 
BufãrSize
;

1408 
_SEGGER_RTT
.
aUp
[
BufãrIndex
].
RdOff
 = 0u;

1409 
_SEGGER_RTT
.
aUp
[
BufãrIndex
].
WrOff
 = 0u;

1411 
_SEGGER_RTT
.
aUp
[
BufãrIndex
].
FÏgs
 = Flags;

1412 
	`SEGGER_RTT_UNLOCK
();

1413 
r
 = 0;

1415 
r
 = -1;

1417  
r
;

1418 
	}
}

1445 
	$SEGGER_RTT_CÚfigDownBufãr
(
BufãrIndex
, cÚ¡ * 
sName
, * 
pBufãr
, 
BufãrSize
, 
FÏgs
) {

1446 
r
;

1448 
	`INIT
();

1449 ià(
BufãrIndex
 < ()
_SEGGER_RTT
.
MaxNumDownBufãrs
) {

1450 
	`SEGGER_RTT_LOCK
();

1451 ià(
BufãrIndex
 > 0u) {

1452 
_SEGGER_RTT
.
aDown
[
BufãrIndex
].
sName
 = sName;

1453 
_SEGGER_RTT
.
aDown
[
BufãrIndex
].
pBufãr
 = (*)pBuffer;

1454 
_SEGGER_RTT
.
aDown
[
BufãrIndex
].
SizeOfBufãr
 = 
BufãrSize
;

1455 
_SEGGER_RTT
.
aDown
[
BufãrIndex
].
RdOff
 = 0u;

1456 
_SEGGER_RTT
.
aDown
[
BufãrIndex
].
WrOff
 = 0u;

1458 
_SEGGER_RTT
.
aDown
[
BufãrIndex
].
FÏgs
 = Flags;

1459 
	`SEGGER_RTT_UNLOCK
();

1460 
r
 = 0;

1462 
r
 = -1;

1464  
r
;

1465 
	}
}

1483 
	$SEGGER_RTT_S‘NameUpBufãr
(
BufãrIndex
, cÚ¡ * 
sName
) {

1484 
r
;

1486 
	`INIT
();

1487 ià(
BufãrIndex
 < ()
_SEGGER_RTT
.
MaxNumUpBufãrs
) {

1488 
	`SEGGER_RTT_LOCK
();

1489 
_SEGGER_RTT
.
aUp
[
BufãrIndex
].
sName
 = sName;

1490 
	`SEGGER_RTT_UNLOCK
();

1491 
r
 = 0;

1493 
r
 = -1;

1495  
r
;

1496 
	}
}

1514 
	$SEGGER_RTT_S‘NameDownBufãr
(
BufãrIndex
, cÚ¡ * 
sName
) {

1515 
r
;

1517 
	`INIT
();

1518 ià(
BufãrIndex
 < ()
_SEGGER_RTT
.
MaxNumDownBufãrs
) {

1519 
	`SEGGER_RTT_LOCK
();

1520 
_SEGGER_RTT
.
aDown
[
BufãrIndex
].
sName
 = sName;

1521 
	`SEGGER_RTT_UNLOCK
();

1522 
r
 = 0;

1524 
r
 = -1;

1526  
r
;

1527 
	}
}

1545 
	$SEGGER_RTT_S‘FÏgsUpBufãr
(
BufãrIndex
, 
FÏgs
) {

1546 
r
;

1548 
	`INIT
();

1549 ià(
BufãrIndex
 < ()
_SEGGER_RTT
.
MaxNumUpBufãrs
) {

1550 
	`SEGGER_RTT_LOCK
();

1551 
_SEGGER_RTT
.
aUp
[
BufãrIndex
].
FÏgs
 = Flags;

1552 
	`SEGGER_RTT_UNLOCK
();

1553 
r
 = 0;

1555 
r
 = -1;

1557  
r
;

1558 
	}
}

1576 
	$SEGGER_RTT_S‘FÏgsDownBufãr
(
BufãrIndex
, 
FÏgs
) {

1577 
r
;

1579 
	`INIT
();

1580 ià(
BufãrIndex
 < ()
_SEGGER_RTT
.
MaxNumDownBufãrs
) {

1581 
	`SEGGER_RTT_LOCK
();

1582 
_SEGGER_RTT
.
aDown
[
BufãrIndex
].
FÏgs
 = Flags;

1583 
	`SEGGER_RTT_UNLOCK
();

1584 
r
 = 0;

1586 
r
 = -1;

1588  
r
;

1589 
	}
}

1600 
	$SEGGER_RTT_In™
 () {

1601 
	`_DoIn™
();

1602 
	}
}

1618 
	$SEGGER_RTT_S‘T”mš®
 (
T”mš®Id
) {

1619 
ac
[2];

1620 
SEGGER_RTT_BUFFER_UP
* 
pRšg
;

1621 
Ava
;

1622 
r
;

1624 
	`INIT
();

1626 
r
 = 0;

1627 
ac
[0] = 0xFFU;

1628 ià(()
T”mš®Id
 < ()(
_aT”mš®Id
)) {

1629 
ac
[1] = 
_aT”mš®Id
[()
T”mš®Id
];

1630 
pRšg
 = &
_SEGGER_RTT
.
aUp
[0];

1631 
	`SEGGER_RTT_LOCK
();

1632 ià((
pRšg
->
FÏgs
 & 
SEGGER_RTT_MODE_MASK
è=ğ
SEGGER_RTT_MODE_BLOCK_IF_FIFO_FULL
) {

1633 
_AùiveT”mš®
 = 
T”mš®Id
;

1634 
	`_Wr™eBlockšg
(
pRšg
, 
ac
, 2u);

1636 
Ava
 = 
	`_G‘AvaWr™eS·û
(
pRšg
);

1637 ià(
Ava
 >= 2) {

1638 
_AùiveT”mš®
 = 
T”mš®Id
;

1639 
	`_Wr™eNoCheck
(
pRšg
, 
ac
, 2u);

1641 
r
 = -1;

1644 
	`SEGGER_RTT_UNLOCK
();

1646 
r
 = -1;

1648  
r
;

1649 
	}
}

1668 
	$SEGGER_RTT_T”mš®Out
 (
T”mš®Id
, cÚ¡ * 
s
) {

1669 
Stus
;

1670 
F¿gL’
;

1671 
Ava
;

1672 
SEGGER_RTT_BUFFER_UP
* 
pRšg
;

1674 
	`INIT
();

1678 ià(
T”mš®Id
 < ()(
_aT”mš®Id
)) {

1682 
pRšg
 = &
_SEGGER_RTT
.
aUp
[0];

1687 
F¿gL’
 = 
	`STRLEN
(
s
);

1691 
	`SEGGER_RTT_LOCK
();

1692 
Ava
 = 
	`_G‘AvaWr™eS·û
(
pRšg
);

1693 
pRšg
->
FÏgs
 & 
SEGGER_RTT_MODE_MASK
) {

1694 
SEGGER_RTT_MODE_NO_BLOCK_SKIP
:

1699 ià(
Ava
 < (
F¿gL’
 + 4u)) {

1700 
Stus
 = 0;

1702 
	`_Po¡T”mš®Sw™ch
(
pRšg
, 
T”mš®Id
);

1703 
Stus
 = ()
	`_Wr™eBlockšg
(
pRšg
, 
s
, 
F¿gL’
);

1704 
	`_Po¡T”mš®Sw™ch
(
pRšg
, 
_AùiveT”mš®
);

1707 
SEGGER_RTT_MODE_NO_BLOCK_TRIM
:

1713 ià(
Ava
 < 4u) {

1714 
Stus
 = -1;

1716 
	`_Po¡T”mš®Sw™ch
(
pRšg
, 
T”mš®Id
);

1717 
Stus
 = ()
	`_Wr™eBlockšg
(
pRšg
, 
s
, (
F¿gL’
 < (
Ava
 - 4u)) ? FragLen : (Avail - 4u));

1718 
	`_Po¡T”mš®Sw™ch
(
pRšg
, 
_AùiveT”mš®
);

1721 
SEGGER_RTT_MODE_BLOCK_IF_FIFO_FULL
:

1725 
	`_Po¡T”mš®Sw™ch
(
pRšg
, 
T”mš®Id
);

1726 
Stus
 = ()
	`_Wr™eBlockšg
(
pRšg
, 
s
, 
F¿gL’
);

1727 
	`_Po¡T”mš®Sw™ch
(
pRšg
, 
_AùiveT”mš®
);

1730 
Stus
 = -1;

1736 
	`SEGGER_RTT_UNLOCK
();

1738 
Stus
 = -1;

1740  
Stus
;

1741 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\external\segger_rtt\SEGGER_RTT_Syscalls_GCC.c

66 
	~"sdk_cÚfig.h
"

67 #ià!
defšed
(
RETARGET_ENABLED
) || RETARGET_ENABLED == 0

68 #ià
defšed
(
NRF_LOG_USES_RTT
) && NRF_LOG_USES_RTT == 1

69 #ià(
defšed
 
__GNUC__
è&& !(defšed 
__SES_ARM
è&& !(defšed 
__CROSSWORKS_ARM
)

71 
	~<»’t.h
>

72 
	~"SEGGER_RTT.h
"

85 
	g_»’t
;

93 
_wr™e
(
fe
, *
±r
, 
Ën
);

94 
_ssize_t
 
_wr™e_r
 
_PARAMS
 ((
_»’t
 *, , cÚ¡ *, 
size_t
));

113 
	$_wr™e
(
fe
, *
±r
, 
Ën
) {

114 (è
fe
;

115 
	`SEGGER_RTT_Wr™e
(0, 
±r
, 
Ën
);

116  
Ën
;

117 
	}
}

129 
_ssize_t
 
_wr™e_r
 
_PARAMS
((
_»’t
 *
r
, 
fe
, cÚ¡ *
±r
, 
size_t
 
Ën
)) {

130 (è
	gfe
;

131 (è
	gr
;

132 
SEGGER_RTT_Wr™e
(0, 
±r
, 
Ën
);

133  
	gËn
;

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\external\segger_rtt\SEGGER_RTT_printf.c

64 
	~"SEGGER_RTT.h
"

65 
	~"SEGGER_RTT_CÚf.h
"

74 #iâdeà
SEGGER_RTT_PRINTF_BUFFER_SIZE


75 
	#SEGGER_RTT_PRINTF_BUFFER_SIZE
 (64)

	)

78 
	~<¡dlib.h
>

79 
	~<¡d¬g.h
>

82 
	#FORMAT_FLAG_LEFT_JUSTIFY
 (1u << 0)

	)

83 
	#FORMAT_FLAG_PAD_ZERO
 (1u << 1)

	)

84 
	#FORMAT_FLAG_PRINT_SIGN
 (1u << 2)

	)

85 
	#FORMAT_FLAG_ALTERNATE
 (1u << 3)

	)

95 * 
	mpBufãr
;

96 
	mBufãrSize
;

97 
	mCÁ
;

99 
	mR‘uºV®ue
;

101 
	mRTTBufãrIndex
;

102 } 
	tSEGGER_RTT_PRINTF_DESC
;

110 
SEGGER_RTT_v´štf
(
BufãrIndex
, cÚ¡ * 
sFÜm©
, 
va_li¡
 * 
pP¬amLi¡
);

122 
	$_StÜeCh¬
(
SEGGER_RTT_PRINTF_DESC
 * 
p
, 
c
) {

123 
CÁ
;

125 
CÁ
 = 
p
->Cnt;

126 ià((
CÁ
 + 1uè<ğ
p
->
BufãrSize
) {

127 *(
p
->
pBufãr
 + 
CÁ
èğ
c
;

128 
p
->
CÁ
 = Cnt + 1u;

129 
p
->
R‘uºV®ue
++;

134 ià(
p
->
CÁ
 =ğp->
BufãrSize
) {

135 ià(
	`SEGGER_RTT_Wr™e
(
p
->
RTTBufãrIndex
,…->
pBufãr
,…->
CÁ
) !=…->Cnt) {

136 
p
->
R‘uºV®ue
 = -1;

138 
p
->
CÁ
 = 0u;

141 
	}
}

147 
	$_PrštUnsigÃd
(
SEGGER_RTT_PRINTF_DESC
 * 
pBufãrDesc
, 
v
, 
Ba£
, 
NumDig™s
, 
F›ldWidth
, 
FÜm©FÏgs
) {

148 cÚ¡ 
_aV2C
[16] = {'0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E', 'F' };

149 
Div
;

150 
Dig™
;

151 
Numb”
;

152 
Width
;

153 
c
;

155 
Numb”
 = 
v
;

156 
Dig™
 = 1u;

160 
Width
 = 1u;

161 
Numb”
 >ğ
Ba£
) {

162 
Numb”
 = (Numb” / 
Ba£
);

163 
Width
++;

165 ià(
NumDig™s
 > 
Width
) {

166 
Width
 = 
NumDig™s
;

171 ià((
FÜm©FÏgs
 & 
FORMAT_FLAG_LEFT_JUSTIFY
) == 0u) {

172 ià(
F›ldWidth
 != 0u) {

173 ià(((
FÜm©FÏgs
 & 
FORMAT_FLAG_PAD_ZERO
è=ğFORMAT_FLAG_PAD_ZEROè&& (
NumDig™s
 == 0u)) {

174 
c
 = '0';

176 
c
 = ' ';

178 (
F›ldWidth
 !ğ0uè&& (
Width
 < FieldWidth)) {

179 
F›ldWidth
--;

180 
	`_StÜeCh¬
(
pBufãrDesc
, 
c
);

181 ià(
pBufãrDesc
->
R‘uºV®ue
 < 0) {

187 ià(
pBufãrDesc
->
R‘uºV®ue
 >= 0) {

194 ià(
NumDig™s
 > 1u) {

195 
NumDig™s
--;

197 
Div
 = 
v
 / 
Dig™
;

198 ià(
Div
 < 
Ba£
) {

202 
Dig™
 *ğ
Ba£
;

208 
Div
 = 
v
 / 
Dig™
;

209 
v
 -ğ
Div
 * 
Dig™
;

210 
	`_StÜeCh¬
(
pBufãrDesc
, 
_aV2C
[
Div
]);

211 ià(
pBufãrDesc
->
R‘uºV®ue
 < 0) {

214 
Dig™
 /ğ
Ba£
;

215 } 
Dig™
);

219 ià((
FÜm©FÏgs
 & 
FORMAT_FLAG_LEFT_JUSTIFY
) == FORMAT_FLAG_LEFT_JUSTIFY) {

220 ià(
F›ldWidth
 != 0u) {

221 (
F›ldWidth
 !ğ0uè&& (
Width
 < FieldWidth)) {

222 
F›ldWidth
--;

223 
	`_StÜeCh¬
(
pBufãrDesc
, ' ');

224 ià(
pBufãrDesc
->
R‘uºV®ue
 < 0) {

231 
	}
}

237 
	$_PrštIÁ
(
SEGGER_RTT_PRINTF_DESC
 * 
pBufãrDesc
, 
v
, 
Ba£
, 
NumDig™s
, 
F›ldWidth
, 
FÜm©FÏgs
) {

238 
Width
;

239 
Numb”
;

241 
Numb”
 = (
v
 < 0) ? -v : v;

246 
Width
 = 1u;

247 
Numb”
 >ğ()
Ba£
) {

248 
Numb”
 = (Numb” / ()
Ba£
);

249 
Width
++;

251 ià(
NumDig™s
 > 
Width
) {

252 
Width
 = 
NumDig™s
;

254 ià((
F›ldWidth
 > 0uè&& ((
v
 < 0è|| ((
FÜm©FÏgs
 & 
FORMAT_FLAG_PRINT_SIGN
) == FORMAT_FLAG_PRINT_SIGN))) {

255 
F›ldWidth
--;

261 ià((((
FÜm©FÏgs
 & 
FORMAT_FLAG_PAD_ZERO
è=ğ0uè|| (
NumDig™s
 !ğ0u)è&& ((FÜm©FÏg & 
FORMAT_FLAG_LEFT_JUSTIFY
) == 0u)) {

262 ià(
F›ldWidth
 != 0u) {

263 (
F›ldWidth
 !ğ0uè&& (
Width
 < FieldWidth)) {

264 
F›ldWidth
--;

265 
	`_StÜeCh¬
(
pBufãrDesc
, ' ');

266 ià(
pBufãrDesc
->
R‘uºV®ue
 < 0) {

275 ià(
pBufãrDesc
->
R‘uºV®ue
 >= 0) {

276 ià(
v
 < 0) {

277 
v
 = -v;

278 
	`_StÜeCh¬
(
pBufãrDesc
, '-');

279 } ià((
FÜm©FÏgs
 & 
FORMAT_FLAG_PRINT_SIGN
) == FORMAT_FLAG_PRINT_SIGN) {

280 
	`_StÜeCh¬
(
pBufãrDesc
, '+');

284 ià(
pBufãrDesc
->
R‘uºV®ue
 >= 0) {

288 ià(((
FÜm©FÏgs
 & 
FORMAT_FLAG_PAD_ZERO
è=ğFORMAT_FLAG_PAD_ZEROè&& ((FÜm©FÏg & 
FORMAT_FLAG_LEFT_JUSTIFY
è=ğ0uè&& (
NumDig™s
 == 0u)) {

289 ià(
F›ldWidth
 != 0u) {

290 (
F›ldWidth
 !ğ0uè&& (
Width
 < FieldWidth)) {

291 
F›ldWidth
--;

292 
	`_StÜeCh¬
(
pBufãrDesc
, '0');

293 ià(
pBufãrDesc
->
R‘uºV®ue
 < 0) {

299 ià(
pBufãrDesc
->
R‘uºV®ue
 >= 0) {

303 
	`_PrštUnsigÃd
(
pBufãrDesc
, ()
v
, 
Ba£
, 
NumDig™s
, 
F›ldWidth
, 
FÜm©FÏgs
);

307 
	}
}

332 
	$SEGGER_RTT_v´štf
(
BufãrIndex
, cÚ¡ * 
sFÜm©
, 
va_li¡
 * 
pP¬amLi¡
) {

333 
c
;

334 
SEGGER_RTT_PRINTF_DESC
 
BufãrDesc
;

335 
v
;

336 
NumDig™s
;

337 
FÜm©FÏgs
;

338 
F›ldWidth
;

339 
acBufãr
[
SEGGER_RTT_PRINTF_BUFFER_SIZE
];

341 
BufãrDesc
.
pBufãr
 = 
acBufãr
;

342 
BufãrDesc
.
BufãrSize
 = 
SEGGER_RTT_PRINTF_BUFFER_SIZE
;

343 
BufãrDesc
.
CÁ
 = 0u;

344 
BufãrDesc
.
RTTBufãrIndex
 = 
BufãrIndex
;

345 
BufãrDesc
.
R‘uºV®ue
 = 0;

348 
c
 = *
sFÜm©
;

349 
sFÜm©
++;

350 ià(
c
 == 0u) {

353 ià(
c
 == '%') {

357 
FÜm©FÏgs
 = 0u;

358 
v
 = 1;

360 
c
 = *
sFÜm©
;

361 
c
) {

362 '-': 
FÜm©FÏgs
 |ğ
FORMAT_FLAG_LEFT_JUSTIFY
; 
sFÜm©
++; ;

363 '0': 
FÜm©FÏgs
 |ğ
FORMAT_FLAG_PAD_ZERO
; 
sFÜm©
++; ;

364 '+': 
FÜm©FÏgs
 |ğ
FORMAT_FLAG_PRINT_SIGN
; 
sFÜm©
++; ;

365 '#': 
FÜm©FÏgs
 |ğ
FORMAT_FLAG_ALTERNATE
; 
sFÜm©
++; ;

366 : 
v
 = 0; ;

368 } 
v
);

372 
F›ldWidth
 = 0u;

374 
c
 = *
sFÜm©
;

375 ià((
c
 < '0') || (c > '9')) {

378 
sFÜm©
++;

379 
F›ldWidth
 = (F›ldWidth * 10uè+ (()
c
 - '0');

385 
NumDig™s
 = 0u;

386 
c
 = *
sFÜm©
;

387 ià(
c
 == '.') {

388 
sFÜm©
++;

390 
c
 = *
sFÜm©
;

391 ià((
c
 < '0') || (c > '9')) {

394 
sFÜm©
++;

395 
NumDig™s
 = NumDig™ * 10u + (()
c
 - '0');

401 
c
 = *
sFÜm©
;

403 ià((
c
 == 'l') || (c == 'h')) {

404 
sFÜm©
++;

405 
c
 = *
sFÜm©
;

413 
c
) {

415 
c0
;

416 
v
 = 
	`va_¬g
(*
pP¬amLi¡
, );

417 
c0
 = ()
v
;

418 
	`_StÜeCh¬
(&
BufãrDesc
, 
c0
);

422 
v
 = 
	`va_¬g
(*
pP¬amLi¡
, );

423 
	`_PrštIÁ
(&
BufãrDesc
, 
v
, 10u, 
NumDig™s
, 
F›ldWidth
, 
FÜm©FÏgs
);

426 
v
 = 
	`va_¬g
(*
pP¬amLi¡
, );

427 
	`_PrštUnsigÃd
(&
BufãrDesc
, ()
v
, 10u, 
NumDig™s
, 
F›ldWidth
, 
FÜm©FÏgs
);

431 
v
 = 
	`va_¬g
(*
pP¬amLi¡
, );

432 
	`_PrštUnsigÃd
(&
BufãrDesc
, ()
v
, 16u, 
NumDig™s
, 
F›ldWidth
, 
FÜm©FÏgs
);

436 cÚ¡ * 
s
 = 
	`va_¬g
(*
pP¬amLi¡
, const *);

438 
c
 = *
s
;

439 
s
++;

440 ià(
c
 == '\0') {

443 
	`_StÜeCh¬
(&
BufãrDesc
, 
c
);

444 } 
BufãrDesc
.
R‘uºV®ue
 >= 0);

448 
v
 = 
	`va_¬g
(*
pP¬amLi¡
, );

449 
	`_PrštUnsigÃd
(&
BufãrDesc
, ()
v
, 16u, 8u, 8u, 0u);

452 
	`_StÜeCh¬
(&
BufãrDesc
, '%');

457 
sFÜm©
++;

459 
	`_StÜeCh¬
(&
BufãrDesc
, 
c
);

461 } 
BufãrDesc
.
R‘uºV®ue
 >= 0);

463 ià(
BufãrDesc
.
R‘uºV®ue
 > 0) {

467 ià(
BufãrDesc
.
CÁ
 != 0u) {

468 
	`SEGGER_RTT_Wr™e
(
BufãrIndex
, 
acBufãr
, 
BufãrDesc
.
CÁ
);

470 
BufãrDesc
.
R‘uºV®ue
 +ğ()BufãrDesc.
CÁ
;

472  
BufãrDesc
.
R‘uºV®ue
;

473 
	}
}

506 
	$SEGGER_RTT_´štf
(
BufãrIndex
, cÚ¡ * 
sFÜm©
, ...) {

507 
r
;

508 
va_li¡
 
P¬amLi¡
;

510 
	`va_¡¬t
(
P¬amLi¡
, 
sFÜm©
);

511 
r
 = 
	`SEGGER_RTT_v´štf
(
BufãrIndex
, 
sFÜm©
, &
P¬amLi¡
);

512 
	`va_’d
(
P¬amLi¡
);

513  
r
;

514 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\external\utf_converter\utf.c

3 
	~"utf.h
"

8 
	#badruÃ
 0xFFFD

	)

12 
size_t
 
	$utf8EncodeRuÃ
(
ušt32_t
 
ruÃ
, *
’coded
)

14 
ušt8_t
 
b
;

15 
ušt8_t
 
c
 = 0;

16 
ušt8_t
 
d
 = 0;

17 
ušt8_t
 
e
 = 0;

18 
size_t
 
n
;

21 ià(
ruÃ
 > 0x10FFFF)

22 
ruÃ
 = 
badruÃ
;

24 ià(
ruÃ
 >= 0xD800 &&„une < 0xE000)

25 
ruÃ
 = 
badruÃ
;

27 ià(
ruÃ
 < 0x80) {

28 
b
 = (
ušt8_t
è(
ruÃ
 & 0xFF);

29 
n
 = 1;

30 
dÚe
;

32 ià(
ruÃ
 < 0x800) {

33 
c
 = (
ušt8_t
è(
ruÃ
 & 0x3F);

34 
c
 |= 0x80;

35 
ruÃ
 >>= 6;

36 
b
 = (
ušt8_t
è(
ruÃ
 & 0x1F);

37 
b
 |= 0xC0;

38 
n
 = 2;

39 
dÚe
;

41 ià(
ruÃ
 < 0x10000) {

42 
d
 = (
ušt8_t
è(
ruÃ
 & 0x3F);

43 
d
 |= 0x80;

44 
ruÃ
 >>= 6;

45 
c
 = (
ušt8_t
è(
ruÃ
 & 0x3F);

46 
c
 |= 0x80;

47 
ruÃ
 >>= 6;

48 
b
 = (
ušt8_t
è(
ruÃ
 & 0x0F);

49 
b
 |= 0xE0;

50 
n
 = 3;

51 
dÚe
;

54 
e
 = (
ušt8_t
è(
ruÃ
 & 0x3F);

55 
e
 |= 0x80;

56 
ruÃ
 >>= 6;

57 
d
 = (
ušt8_t
è(
ruÃ
 & 0x3F);

58 
d
 |= 0x80;

59 
ruÃ
 >>= 6;

60 
c
 = (
ušt8_t
è(
ruÃ
 & 0x3F);

61 
c
 |= 0x80;

62 
ruÃ
 >>= 6;

63 
b
 = (
ušt8_t
è(
ruÃ
 & 0x07);

64 
b
 |= 0xF0;

65 
n
 = 4;

67 
dÚe
:

68 
’coded
[0] = 
b
;

69 ià(
n
 > 1)

70 
’coded
[1] = 
c
;

71 ià(
n
 > 2)

72 
’coded
[2] = 
d
;

73 ià(
n
 > 3)

74 
’coded
[3] = 
e
;

75  
n
;

76 
	}
}

78 cÚ¡ *
	$utf8DecodeRuÃ
(cÚ¡ *
s
, 
size_t
 
nEËm
, 
ušt32_t
 *
ruÃ
)

80 
ušt8_t
 
b
, 
c
;

81 
ušt8_t
 
lowe¡AÎowed
, 
highe¡AÎowed
;

82 
size_t
 
i
, 
ex³ùed
;

83 
bad
;

85 
b
 = (
ušt8_t
è(*
s
);

86 ià(
b
 < 0x80) {

87 *
ruÃ
 = 
b
;

88 
s
++;

89  
s
;

94 ià(
b
 < 0xC2 || b > 0xF4) {

95 *
ruÃ
 = 
badruÃ
;

96 
s
++;

97  
s
;

101 
lowe¡AÎowed
 = 0x80;

102 
highe¡AÎowed
 = 0xBF;

103 
b
) {

106 
lowe¡AÎowed
 = 0xA0;

110 
highe¡AÎowed
 = 0x9F;

114 
lowe¡AÎowed
 = 0x90;

118 
highe¡AÎowed
 = 0x8F;

123 
ex³ùed
 = 1;

124 ià(
b
 >= 0xE0)

125 
ex³ùed
++;

126 ià(
b
 >= 0xF0)

127 
ex³ùed
++;

128 ià(
nEËm
 != 0) {

129 
nEËm
--;

130 ià(
nEËm
 < 
ex³ùed
) {

131 *
ruÃ
 = 
badruÃ
;

132 
s
++;

133  
s
;

139 
bad
 = 0;

140 
i
 = 0; i < 
ex³ùed
; i++) {

141 
c
 = (
ušt8_t
è(
s
[1 + 
i
]);

142 ià(
c
 < 
lowe¡AÎowed
 || c > 
highe¡AÎowed
) {

143 
bad
 = 1;

147 
lowe¡AÎowed
 = 0x80;

148 
highe¡AÎowed
 = 0xBF;

150 ià(
bad
) {

151 *
ruÃ
 = 
badruÃ
;

152 
s
++;

153  
s
;

157 ià(
b
 < 0xE0)

158 *
ruÃ
 = 
b
 & 0x1F;

159 ià(
b
 < 0xF0)

160 *
ruÃ
 = 
b
 & 0x0F;

162 *
ruÃ
 = 
b
 & 0x07;

163 
s
++;

166 ; 
ex³ùed
;ƒxpected--) {

167 
c
 = (
ušt8_t
è(*
s
);

168 
s
++;

169 
c
 &= 0x3F;

170 *
ruÃ
 <<= 6;

171 *
ruÃ
 |ğ
c
;

174  
s
;

175 
	}
}

178 
size_t
 
	$utf16EncodeRuÃ
(
ušt32_t
 
ruÃ
, 
ušt16_t
 *
’coded
)

180 
ušt16_t
 
low
, 
high
;

183 ià(
ruÃ
 > 0x10FFFF)

184 
ruÃ
 = 
badruÃ
;

186 ià(
ruÃ
 >= 0xD800 &&„une < 0xE000)

187 
ruÃ
 = 
badruÃ
;

189 ià(
ruÃ
 < 0x10000) {

190 
’coded
[0] = (
ušt16_t
è
ruÃ
;

194 
ruÃ
 -= 0x10000;

195 
low
 = (
ušt16_t
è(
ruÃ
 & 0x3FF);

196 
ruÃ
 >>= 10;

197 
high
 = (
ušt16_t
è(
ruÃ
 & 0x3FF);

198 
’coded
[0] = 
high
 | 0xD800;

199 
’coded
[1] = 
low
 | 0xDC00;

201 
	}
}

204 cÚ¡ 
ušt16_t
 *
	$utf16DecodeRuÃ
(cÚ¡ 
ušt16_t
 *
s
, 
size_t
 
nEËm
, 
ušt32_t
 *
ruÃ
)

206 
ušt16_t
 
high
, 
low
;

208 ià(*
s
 < 0xD800 || *s >= 0xE000) {

210 *
ruÃ
 = *
s
;

211 
s
++;

212  
s
;

214 ià(*
s
 >= 0xDC00) {

216 *
ruÃ
 = 
badruÃ
;

217 
s
++;

218  
s
;

220 ià(
nEËm
 == 1) {

221 *
ruÃ
 = 
badruÃ
;

222 
s
++;

223  
s
;

225 
high
 = *
s
;

226 
high
 &= 0x3FF;

227 ià(
s
[1] < 0xDC00 || s[1] >= 0xE000) {

229 *
ruÃ
 = 
badruÃ
;

230 
s
++;

231  
s
;

233 
s
++;

234 
low
 = *
s
;

235 
s
++;

236 
low
 &= 0x3FF;

237 *
ruÃ
 = 
high
;

238 *
ruÃ
 <<= 10;

239 *
ruÃ
 |ğ
low
;

240 *
ruÃ
 += 0x10000;

241  
s
;

242 
	}
}

246 
size_t
 
	$utf8RuÃCouÁ
(cÚ¡ *
s
, 
size_t
 
nEËm
)

248 
size_t
 
Ën
;

249 
ušt32_t
 
ruÃ
;

251 ià(
nEËm
 != 0) {

252 cÚ¡ *
t
, *
u
;

254 
Ën
 = 0;

255 
t
 = 
s
;

256 
nEËm
 != 0) {

257 
u
 = 
	`utf8DecodeRuÃ
(
t
, 
nEËm
, &
ruÃ
);

258 
Ën
++;

259 
nEËm
 -ğ
u
 - 
t
;

260 
t
 = 
u
;

262  
Ën
;

264 
Ën
 = 0;

265 *
s
) {

266 
s
 = 
	`utf8DecodeRuÃ
(s, 
nEËm
, &
ruÃ
);

267 
Ën
++;

269  
Ën
;

270 
	}
}

272 
size_t
 
	$utf8UTF16CouÁ
(cÚ¡ *
s
, 
size_t
 
nEËm
)

274 
size_t
 
Ën
;

275 
ušt32_t
 
ruÃ
;

276 
ušt16_t
 
’coded
[2];

278 ià(
nEËm
 != 0) {

279 cÚ¡ *
t
, *
u
;

281 
Ën
 = 0;

282 
t
 = 
s
;

283 
nEËm
 != 0) {

284 
u
 = 
	`utf8DecodeRuÃ
(
t
, 
nEËm
, &
ruÃ
);

285 
Ën
 +ğ
	`utf16EncodeRuÃ
(
ruÃ
, 
’coded
);

286 
nEËm
 -ğ
u
 - 
t
;

287 
t
 = 
u
;

289  
Ën
;

291 
Ën
 = 0;

292 *
s
) {

293 
s
 = 
	`utf8DecodeRuÃ
(s, 
nEËm
, &
ruÃ
);

294 
Ën
 +ğ
	`utf16EncodeRuÃ
(
ruÃ
, 
’coded
);

296  
Ën
;

297 
	}
}

299 
size_t
 
	$utf16RuÃCouÁ
(cÚ¡ 
ušt16_t
 *
s
, 
size_t
 
nEËm
)

301 
size_t
 
Ën
;

302 
ušt32_t
 
ruÃ
;

304 ià(
nEËm
 != 0) {

305 cÚ¡ 
ušt16_t
 *
t
, *
u
;

307 
Ën
 = 0;

308 
t
 = 
s
;

309 
nEËm
 != 0) {

310 
u
 = 
	`utf16DecodeRuÃ
(
t
, 
nEËm
, &
ruÃ
);

311 
Ën
++;

312 
nEËm
 -ğ
u
 - 
t
;

313 
t
 = 
u
;

315  
Ën
;

317 
Ën
 = 0;

318 *
s
) {

319 
s
 = 
	`utf16DecodeRuÃ
(s, 
nEËm
, &
ruÃ
);

320 
Ën
++;

322  
Ën
;

323 
	}
}

325 
size_t
 
	$utf16UTF8CouÁ
(cÚ¡ 
ušt16_t
 *
s
, 
size_t
 
nEËm
)

327 
size_t
 
Ën
;

328 
ušt32_t
 
ruÃ
;

329 
’coded
[4];

331 ià(
nEËm
 != 0) {

332 cÚ¡ 
ušt16_t
 *
t
, *
u
;

334 
Ën
 = 0;

335 
t
 = 
s
;

336 
nEËm
 != 0) {

337 
u
 = 
	`utf16DecodeRuÃ
(
t
, 
nEËm
, &
ruÃ
);

338 
Ën
 +ğ
	`utf8EncodeRuÃ
(
ruÃ
, 
’coded
);

339 
nEËm
 -ğ
u
 - 
t
;

340 
t
 = 
u
;

342  
Ën
;

344 
Ën
 = 0;

345 *
s
) {

346 
s
 = 
	`utf16DecodeRuÃ
(s, 
nEËm
, &
ruÃ
);

347 
Ën
 +ğ
	`utf8EncodeRuÃ
(
ruÃ
, 
’coded
);

349  
Ën
;

350 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\integration\nrfx\legacy\nrf_drv_clock.c

41 
	~<nÜdic_commÚ.h
>

42 
	~"Äf_drv_şock.h
"

44 #ià
NRF_MODULE_ENABLED
(
NRF_CLOCK
)

46 #ifdeà
SOFTDEVICE_PRESENT


47 
	~"Äf_sdh.h
"

48 
	~"Äf_sdh_soc.h
"

51 
	#NRF_LOG_MODULE_NAME
 
şock


	)

52 #ià
CLOCK_CONFIG_LOG_ENABLED


53 
	#NRF_LOG_LEVEL
 
CLOCK_CONFIG_LOG_LEVEL


	)

54 
	#NRF_LOG_INFO_COLOR
 
CLOCK_CONFIG_INFO_COLOR


	)

55 
	#NRF_LOG_DEBUG_COLOR
 
CLOCK_CONFIG_DEBUG_COLOR


	)

57 
	#NRF_LOG_LEVEL
 0

	)

59 
	~"Äf_log.h
"

60 
NRF_LOG_MODULE_REGISTER
();

62 
	#EVT_TO_STR
(
ev’t
) \

63 (
ev’t
 =ğ
NRF_CLOCK_EVENT_HFCLKSTARTED
 ? "NRF_CLOCK_EVENT_HFCLKSTARTED" : \

64 (
ev’t
 =ğ
NRF_CLOCK_EVENT_LFCLKSTARTED
 ? "NRF_CLOCK_EVENT_LFCLKSTARTED" : \

65 (
ev’t
 =ğ
NRF_CLOCK_EVENT_DONE
 ? "NRF_CLOCK_EVENT_DONE" : \

66 (
ev’t
 =ğ
NRF_CLOCK_EVENT_CTTO
 ? "NRF_CLOCK_EVENT_CTTO" : \

67 "UNKNOWN EVENT"))))

	)

71 
	#NRF_CLOCK_LFCLK_RC
 
CLOCK_LFCLKSRC_SRC_RC


	)

72 
	#NRF_CLOCK_LFCLK_Xl
 
CLOCK_LFCLKSRC_SRC_Xl


	)

73 
	#NRF_CLOCK_LFCLK_SyÁh
 
CLOCK_LFCLKSRC_SRC_SyÁh


	)

76 #ià(
CLOCK_CONFIG_LF_SRC
 =ğ
NRF_CLOCK_LFCLK_RC
è&& !
defšed
(
SOFTDEVICE_PRESENT
)

77 
	#CALIBRATION_SUPPORT
 1

	)

79 
	#CALIBRATION_SUPPORT
 0

	)

83 
	mCAL_STATE_IDLE
,

84 
	mCAL_STATE_CT
,

85 
	mCAL_STATE_HFCLK_REQ
,

86 
	mCAL_STATE_CAL
,

87 
	mCAL_STATE_ABORT
,

88 } 
	tÄf_drv_şock_ÿl_¡©e_t
;

93 
boŞ
 
	mmoduË_š™Ÿlized
;

94 vŞ©
boŞ
 
	mhfşk_Ú
;

95 vŞ©
boŞ
 
	mlfşk_Ú
;

96 vŞ©
ušt32_t
 
	mhfşk_»que¡s
;

97 vŞ©
Äf_drv_şock_hªdËr_™em_t
 * 
	mp_hf_h—d
;

98 vŞ©
ušt32_t
 
	mlfşk_»que¡s
;

99 vŞ©
Äf_drv_şock_hªdËr_™em_t
 * 
	mp_lf_h—d
;

100 #ià
CALIBRATION_SUPPORT


101 
Äf_drv_şock_hªdËr_™em_t
 
	mÿl_hfşk_¡¬‹d_hªdËr_™em
;

102 
Äf_drv_şock_ev’t_hªdËr_t
 
	mÿl_dÚe_hªdËr
;

103 vŞ©
Äf_drv_şock_ÿl_¡©e_t
 
	mÿl_¡©e
;

105 } 
	tÄf_drv_şock_cb_t
;

107 
Äf_drv_şock_cb_t
 
	gm_şock_cb
;

109 
şock_œq_hªdËr
(
Äfx_şock_evt_ty³_t
 
evt
);

111 
	$lfşk_¡İ
()

113 #ià
CALIBRATION_SUPPORT


114 
	`Äfx_şock_ÿlib¿tiÚ_tim”_¡İ
();

117 #ifdeà
SOFTDEVICE_PRESENT


121 
	`ASSERT
(!
	`Äf_sdh_is_’abËd
());

124 
	`Äfx_şock_lfşk_¡İ
();

125 
m_şock_cb
.
lfşk_Ú
 = 
çl£
;

126 
	}
}

128 
	$hfşk_¡¬t
()

130 #ifdeà
SOFTDEVICE_PRESENT


131 ià(
	`Äf_sdh_is_’abËd
())

133 ()
	`sd_şock_hfşk_»que¡
();

138 
	`Äfx_şock_hfşk_¡¬t
();

139 
	}
}

141 
	$hfşk_¡İ
()

143 #ifdeà
SOFTDEVICE_PRESENT


144 ià(
	`Äf_sdh_is_’abËd
())

146 ()
	`sd_şock_hfşk_»Ëa£
();

147 
m_şock_cb
.
hfşk_Ú
 = 
çl£
;

152 
	`Äfx_şock_hfşk_¡İ
();

153 
m_şock_cb
.
hfşk_Ú
 = 
çl£
;

154 
	}
}

156 
boŞ
 
	$Äf_drv_şock_š™_check
()

158  
m_şock_cb
.
moduË_š™Ÿlized
;

159 
	}
}

161 
»t_code_t
 
	$Äf_drv_şock_š™
()

163 
»t_code_t
 
”r_code
 = 
NRF_SUCCESS
;

164 ià(
m_şock_cb
.
moduË_š™Ÿlized
)

166 
”r_code
 = 
NRF_ERROR_MODULE_ALREADY_INITIALIZED
;

170 
m_şock_cb
.
p_hf_h—d
 = 
NULL
;

171 
m_şock_cb
.
hfşk_»que¡s
 = 0;

172 
m_şock_cb
.
p_lf_h—d
 = 
NULL
;

173 
m_şock_cb
.
lfşk_»que¡s
 = 0;

174 
”r_code
 = 
	`Äfx_şock_š™
(
şock_œq_hªdËr
);

175 #ifdeà
SOFTDEVICE_PRESENT


176 ià(!
	`Äf_sdh_is_’abËd
())

179 
	`Äfx_şock_’abË
();

182 #ià
CALIBRATION_SUPPORT


183 
m_şock_cb
.
ÿl_¡©e
 = 
CAL_STATE_IDLE
;

186 
m_şock_cb
.
moduË_š™Ÿlized
 = 
Œue
;

189 
	`NRF_LOG_INFO
("Function: %s,ƒrror code: %s.",

190 (
ušt32_t
)
__func__
,

191 (
ušt32_t
)
	`NRF_LOG_ERROR_STRING_GET
(
”r_code
));

192  
”r_code
;

193 
	}
}

195 
	$Äf_drv_şock_unš™
()

197 
	`ASSERT
(
m_şock_cb
.
moduË_š™Ÿlized
);

198 
	`Äfx_şock_di§bË
();

199 
	`Äfx_şock_unš™
();

201 
m_şock_cb
.
moduË_š™Ÿlized
 = 
çl£
;

202 
	}
}

204 
	$™em_’queue
(
Äf_drv_şock_hªdËr_™em_t
 ** 
p_h—d
,

205 
Äf_drv_şock_hªdËr_™em_t
 * 
p_™em
)

207 
Äf_drv_şock_hªdËr_™em_t
 * 
p_Ãxt
 = *
p_h—d
;

208 
p_Ãxt
)

210 ià(
p_Ãxt
 =ğ
p_™em
)

214 
p_Ãxt
 =…_next->p_next;

217 
p_™em
->
p_Ãxt
 = (*
p_h—d
 ? *p_h—d : 
NULL
);

218 *
p_h—d
 = 
p_™em
;

219 
	}
}

221 
Äf_drv_şock_hªdËr_™em_t
 * 
	$™em_dequeue
(
Äf_drv_şock_hªdËr_™em_t
 ** 
p_h—d
)

223 
Äf_drv_şock_hªdËr_™em_t
 * 
p_™em
 = *
p_h—d
;

224 ià(
p_™em
)

226 *
p_h—d
 = 
p_™em
->
p_Ãxt
;

228  
p_™em
;

229 
	}
}

231 
	$Äf_drv_şock_lfşk_»que¡
(
Äf_drv_şock_hªdËr_™em_t
 * 
p_hªdËr_™em
)

233 
	`ASSERT
(
m_şock_cb
.
moduË_š™Ÿlized
);

235 ià(
m_şock_cb
.
lfşk_Ú
)

237 ià(
p_hªdËr_™em
)

239 
p_hªdËr_™em
->
	`ev’t_hªdËr
(
NRF_DRV_CLOCK_EVT_LFCLK_STARTED
);

241 
	`CRITICAL_REGION_ENTER
();

242 ++(
m_şock_cb
.
lfşk_»que¡s
);

243 
	`CRITICAL_REGION_EXIT
();

247 
	`CRITICAL_REGION_ENTER
();

248 ià(
p_hªdËr_™em
)

250 
	`™em_’queue
((
Äf_drv_şock_hªdËr_™em_t
 **)&
m_şock_cb
.
p_lf_h—d
,

251 
p_hªdËr_™em
);

253 ià(
m_şock_cb
.
lfşk_»que¡s
 == 0)

255 
	`Äfx_şock_lfşk_¡¬t
();

257 ++(
m_şock_cb
.
lfşk_»que¡s
);

258 
	`CRITICAL_REGION_EXIT
();

261 
	`ASSERT
(
m_şock_cb
.
lfşk_»que¡s
 > 0);

262 
	}
}

264 
	$Äf_drv_şock_lfşk_»Ëa£
()

266 
	`ASSERT
(
m_şock_cb
.
moduË_š™Ÿlized
);

267 
	`ASSERT
(
m_şock_cb
.
lfşk_»que¡s
 > 0);

269 
	`CRITICAL_REGION_ENTER
();

270 --(
m_şock_cb
.
lfşk_»que¡s
);

271 ià(
m_şock_cb
.
lfşk_»que¡s
 == 0)

273 
	`lfşk_¡İ
();

275 
	`CRITICAL_REGION_EXIT
();

276 
	}
}

278 
boŞ
 
	$Äf_drv_şock_lfşk_is_ruÂšg
()

280 
	`ASSERT
(
m_şock_cb
.
moduË_š™Ÿlized
);

282 #ifdeà
SOFTDEVICE_PRESENT


283 ià(
	`Äf_sdh_is_’abËd
())

285  
Œue
;

289  
	`Äfx_şock_lfşk_is_ruÂšg
();

290 
	}
}

292 
	$Äf_drv_şock_hfşk_»que¡
(
Äf_drv_şock_hªdËr_™em_t
 * 
p_hªdËr_™em
)

294 
	`ASSERT
(
m_şock_cb
.
moduË_š™Ÿlized
);

296 ià(
m_şock_cb
.
hfşk_Ú
)

298 ià(
p_hªdËr_™em
)

300 
p_hªdËr_™em
->
	`ev’t_hªdËr
(
NRF_DRV_CLOCK_EVT_HFCLK_STARTED
);

302 
	`CRITICAL_REGION_ENTER
();

303 ++(
m_şock_cb
.
hfşk_»que¡s
);

304 
	`CRITICAL_REGION_EXIT
();

308 
	`CRITICAL_REGION_ENTER
();

309 ià(
p_hªdËr_™em
)

311 
	`™em_’queue
((
Äf_drv_şock_hªdËr_™em_t
 **)&
m_şock_cb
.
p_hf_h—d
,

312 
p_hªdËr_™em
);

314 ià(
m_şock_cb
.
hfşk_»que¡s
 == 0)

316 
	`hfşk_¡¬t
();

318 ++(
m_şock_cb
.
hfşk_»que¡s
);

319 
	`CRITICAL_REGION_EXIT
();

322 
	`ASSERT
(
m_şock_cb
.
hfşk_»que¡s
 > 0);

323 
	}
}

325 
	$Äf_drv_şock_hfşk_»Ëa£
()

327 
	`ASSERT
(
m_şock_cb
.
moduË_š™Ÿlized
);

328 
	`ASSERT
(
m_şock_cb
.
hfşk_»que¡s
 > 0);

330 
	`CRITICAL_REGION_ENTER
();

331 --(
m_şock_cb
.
hfşk_»que¡s
);

332 ià(
m_şock_cb
.
hfşk_»que¡s
 == 0)

334 
	`hfşk_¡İ
();

336 
	`CRITICAL_REGION_EXIT
();

337 
	}
}

339 
boŞ
 
	$Äf_drv_şock_hfşk_is_ruÂšg
()

341 
	`ASSERT
(
m_şock_cb
.
moduË_š™Ÿlized
);

343 #ifdeà
SOFTDEVICE_PRESENT


344 ià(
	`Äf_sdh_is_’abËd
())

346 
ušt32_t
 
is_ruÂšg
;

347 
	`UNUSED_VARIABLE
(
	`sd_şock_hfşk_is_ruÂšg
(&
is_ruÂšg
));

348  (
is_ruÂšg
 ? 
Œue
 : 
çl£
);

352  
	`Äfx_şock_hfşk_is_ruÂšg
();

353 
	}
}

355 #ià
CALIBRATION_SUPPORT


356 
	$şock_ÿlib¿tiÚ_hf_¡¬‹d
(
Äf_drv_şock_evt_ty³_t
 
ev’t
)

358 ià(
m_şock_cb
.
ÿl_¡©e
 =ğ
CAL_STATE_ABORT
)

360 
	`Äf_drv_şock_hfşk_»Ëa£
();

361 
m_şock_cb
.
ÿl_¡©e
 = 
CAL_STATE_IDLE
;

362 ià(
m_şock_cb
.
ÿl_dÚe_hªdËr
)

364 
m_şock_cb
.
	`ÿl_dÚe_hªdËr
(
NRF_DRV_CLOCK_EVT_CAL_ABORTED
);

369 
	`ASSERT
(
ev’t
 =ğ
NRF_DRV_CLOCK_EVT_HFCLK_STARTED
);

370 ià(
	`Äfx_şock_ÿlib¿tiÚ_¡¬t
(è!ğ
NRFX_SUCCESS
)

372 
	`ASSERT
(
çl£
);

375 
	}
}

378 
»t_code_t
 
	$Äf_drv_şock_ÿlib¿tiÚ_¡¬t
(
ušt8_t
 
š‹rv®
, 
Äf_drv_şock_ev’t_hªdËr_t
 
hªdËr
)

380 
»t_code_t
 
”r_code
 = 
NRF_SUCCESS
;

381 #ià
CALIBRATION_SUPPORT


382 
	`ASSERT
(
m_şock_cb
.
ÿl_¡©e
 =ğ
CAL_STATE_IDLE
);

383 ià(
m_şock_cb
.
lfşk_Ú
 =ğ
çl£
)

385 
”r_code
 = 
NRF_ERROR_INVALID_STATE
;

387 ià(
m_şock_cb
.
ÿl_¡©e
 =ğ
CAL_STATE_IDLE
)

389 
m_şock_cb
.
ÿl_dÚe_hªdËr
 = 
hªdËr
;

390 
m_şock_cb
.
ÿl_hfşk_¡¬‹d_hªdËr_™em
.
ev’t_hªdËr
 = 
şock_ÿlib¿tiÚ_hf_¡¬‹d
;

391 ià(
š‹rv®
 == 0)

393 
m_şock_cb
.
ÿl_¡©e
 = 
CAL_STATE_HFCLK_REQ
;

394 
	`Äf_drv_şock_hfşk_»que¡
(&
m_şock_cb
.
ÿl_hfşk_¡¬‹d_hªdËr_™em
);

398 
m_şock_cb
.
ÿl_¡©e
 = 
CAL_STATE_CT
;

399 
	`Äfx_şock_ÿlib¿tiÚ_tim”_¡¬t
(
š‹rv®
);

404 
”r_code
 = 
NRF_ERROR_BUSY
;

406 
	`NRF_LOG_WARNING
("Function: %s,ƒrror code: %s.",

407 (
ušt32_t
)
__func__
,

408 (
ušt32_t
)
	`NRF_LOG_ERROR_STRING_GET
(
”r_code
));

409  
”r_code
;

411 
	`UNUSED_PARAMETER
(
š‹rv®
);

412 
	`UNUSED_PARAMETER
(
hªdËr
);

413 
”r_code
 = 
NRF_ERROR_FORBIDDEN
;

414 
	`NRF_LOG_WARNING
("Function: %s,ƒrror code: %s.",

415 (
ušt32_t
)
__func__
,

416 (
ušt32_t
)
	`NRF_LOG_ERROR_STRING_GET
(
”r_code
));

417  
”r_code
;

419 
	}
}

421 
»t_code_t
 
	$Äf_drv_şock_ÿlib¿tiÚ_abÜt
()

423 
»t_code_t
 
”r_code
 = 
NRF_SUCCESS
;

424 #ià
CALIBRATION_SUPPORT


425 
	`CRITICAL_REGION_ENTER
();

426 
m_şock_cb
.
ÿl_¡©e
)

428 
CAL_STATE_CT
:

429 
	`Äfx_şock_ÿlib¿tiÚ_tim”_¡İ
();

430 
m_şock_cb
.
ÿl_¡©e
 = 
CAL_STATE_IDLE
;

431 ià(
m_şock_cb
.
ÿl_dÚe_hªdËr
)

433 
m_şock_cb
.
	`ÿl_dÚe_hªdËr
(
NRF_DRV_CLOCK_EVT_CAL_ABORTED
);

436 
CAL_STATE_HFCLK_REQ
:

438 
CAL_STATE_CAL
:

439 
m_şock_cb
.
ÿl_¡©e
 = 
CAL_STATE_ABORT
;

444 
	`CRITICAL_REGION_EXIT
();

446 
	`NRF_LOG_INFO
("Function: %s,ƒrror code: %s.",

447 (
ušt32_t
)
__func__
,

448 (
ušt32_t
)
	`NRF_LOG_ERROR_STRING_GET
(
”r_code
));

449  
”r_code
;

451 
”r_code
 = 
NRF_ERROR_FORBIDDEN
;

452 
	`NRF_LOG_WARNING
("Function: %s,ƒrror code: %s.",

453 (
ušt32_t
)
__func__
,

454 (
ušt32_t
)
	`NRF_LOG_ERROR_STRING_GET
(
”r_code
));

455  
”r_code
;

457 
	}
}

459 
»t_code_t
 
	$Äf_drv_şock_is_ÿlib¿tšg
(
boŞ
 * 
p_is_ÿlib¿tšg
)

461 
»t_code_t
 
”r_code
 = 
NRF_SUCCESS
;

462 #ià
CALIBRATION_SUPPORT


463 
	`ASSERT
(
m_şock_cb
.
moduË_š™Ÿlized
);

464 *
p_is_ÿlib¿tšg
 = (
m_şock_cb
.
ÿl_¡©e
 !ğ
CAL_STATE_IDLE
);

465 
	`NRF_LOG_INFO
("Function: %s,ƒrror code: %s.",

466 (
ušt32_t
)
__func__
,

467 (
ušt32_t
)
	`NRF_LOG_ERROR_STRING_GET
(
”r_code
));

468  
”r_code
;

470 
	`UNUSED_PARAMETER
(
p_is_ÿlib¿tšg
);

471 
”r_code
 = 
NRF_ERROR_FORBIDDEN
;

472 
	`NRF_LOG_WARNING
("Function: %s,ƒrror code: %s.",

473 (
ušt32_t
)
__func__
,

474 (
ušt32_t
)
	`NRF_LOG_ERROR_STRING_GET
(
”r_code
));

475  
”r_code
;

477 
	}
}

479 
__STATIC_INLINE
 
	$şock_şk_¡¬‹d_nÙify
(
Äf_drv_şock_evt_ty³_t
 
evt_ty³
)

481 
Äf_drv_şock_hªdËr_™em_t
 **
p_h—d
;

482 ià(
evt_ty³
 =ğ
NRF_DRV_CLOCK_EVT_HFCLK_STARTED
)

484 
p_h—d
 = (
Äf_drv_şock_hªdËr_™em_t
 **)&
m_şock_cb
.
p_hf_h—d
;

488 
p_h—d
 = (
Äf_drv_şock_hªdËr_™em_t
 **)&
m_şock_cb
.
p_lf_h—d
;

493 
Äf_drv_şock_hªdËr_™em_t
 * 
p_™em
 = 
	`™em_dequeue
(
p_h—d
);

494 ià(!
p_™em
)

499 
p_™em
->
	`ev’t_hªdËr
(
evt_ty³
);

501 
	}
}

503 
	$şock_œq_hªdËr
(
Äfx_şock_evt_ty³_t
 
evt
)

505 ià(
evt
 =ğ
NRFX_CLOCK_EVT_HFCLK_STARTED
)

507 
m_şock_cb
.
hfşk_Ú
 = 
Œue
;

508 
	`şock_şk_¡¬‹d_nÙify
(
NRF_DRV_CLOCK_EVT_HFCLK_STARTED
);

510 ià(
evt
 =ğ
NRFX_CLOCK_EVT_LFCLK_STARTED
)

512 
m_şock_cb
.
lfşk_Ú
 = 
Œue
;

513 
	`şock_şk_¡¬‹d_nÙify
(
NRF_DRV_CLOCK_EVT_LFCLK_STARTED
);

515 #ià
CALIBRATION_SUPPORT


516 ià(
evt
 =ğ
NRFX_CLOCK_EVT_CTTO
)

518 
	`Äf_drv_şock_hfşk_»que¡
(&
m_şock_cb
.
ÿl_hfşk_¡¬‹d_hªdËr_™em
);

521 ià(
evt
 =ğ
NRFX_CLOCK_EVT_CAL_DONE
)

523 
	`Äf_drv_şock_hfşk_»Ëa£
();

524 
boŞ
 
abÜ‹d
 = (
m_şock_cb
.
ÿl_¡©e
 =ğ
CAL_STATE_ABORT
);

525 
m_şock_cb
.
ÿl_¡©e
 = 
CAL_STATE_IDLE
;

526 ià(
m_şock_cb
.
ÿl_dÚe_hªdËr
)

528 
m_şock_cb
.
	`ÿl_dÚe_hªdËr
(
abÜ‹d
 ?

529 
NRF_DRV_CLOCK_EVT_CAL_ABORTED
 : 
NRF_DRV_CLOCK_EVT_CAL_DONE
);

533 
	}
}

535 #ifdeà
SOFTDEVICE_PRESENT


542 
	$soc_evt_hªdËr
(
ušt32_t
 
evt_id
, * 
p_cÚ‹xt
)

544 ià(
evt_id
 =ğ
NRF_EVT_HFCLKSTARTED
)

546 
m_şock_cb
.
hfşk_Ú
 = 
Œue
;

547 
	`şock_şk_¡¬‹d_nÙify
(
NRF_DRV_CLOCK_EVT_HFCLK_STARTED
);

549 
	}
}

550 
NRF_SDH_SOC_OBSERVER
(
m_soc_evt_ob£rv”
, 
CLOCK_CONFIG_SOC_OBSERVER_PRIO
, 
soc_evt_hªdËr
, 
NULL
);

558 
	$sd_¡©e_evt_hªdËr
(
Äf_sdh_¡©e_evt_t
 
¡©e
, * 
p_cÚ‹xt
)

560 
¡©e
)

562 
NRF_SDH_EVT_STATE_ENABLE_PREPARE
:

563 
	`NVIC_Di§bËIRQ
(
POWER_CLOCK_IRQn
);

566 
NRF_SDH_EVT_STATE_ENABLED
:

567 
	`CRITICAL_REGION_ENTER
();

569 ià(!
m_şock_cb
.
moduË_š™Ÿlized
)

571 ()
	`Äf_drv_şock_š™
();

574 ++(
m_şock_cb
.
lfşk_»que¡s
);

575 
m_şock_cb
.
lfşk_Ú
 = 
Œue
;

576 
	`CRITICAL_REGION_EXIT
();

579 
NRF_SDH_EVT_STATE_DISABLED
:

581 
	`ASSERT
(
m_şock_cb
.
moduË_š™Ÿlized
);

582 
	`Äfx_şock_’abË
();

585 
	`Äf_drv_şock_lfşk_»Ëa£
();

591 
	}
}

593 
NRF_SDH_STATE_OBSERVER
(
m_sd_¡©e_ob£rv”
, 
CLOCK_CONFIG_STATE_OBSERVER_PRIO
) =

595 .
hªdËr
 = 
sd_¡©e_evt_hªdËr
,

596 .
	gp_cÚ‹xt
 = 
NULL
,

601 #undeà
NRF_CLOCK_LFCLK_RC


602 #undeà
NRF_CLOCK_LFCLK_Xl


603 #undeà
NRF_CLOCK_LFCLK_SyÁh


	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\integration\nrfx\legacy\nrf_drv_uart.c

41 
	~"Äf_drv_u¬t.h
"

43 #ifdeà
UARTE_PRESENT


44 
	#INSTANCE_COUNT
 
UARTE_COUNT


	)

46 
	#INSTANCE_COUNT
 
UART_COUNT


	)

49 
Äf_u¬t_ev’t_hªdËr_t
 
	gm_hªdËrs
[
INSTANCE_COUNT
];

50 * 
	gm_cÚ‹xts
[
INSTANCE_COUNT
];

52 #ià
defšed
(
UARTE_PRESENT
è&& defšed(
UART_PRESENT
)

53 
ušt8_t
 
	gÄf_drv_u¬t_u£_—sy_dma
[
INSTANCE_COUNT
];

56 #ià
defšed
(
NRF_DRV_UART_WITH_UARTE
)

57 
	$u¬‹_evt_hªdËr
(
Äfx_u¬‹_ev’t_t
 cÚ¡ * 
p_ev’t
,

58 * 
p_cÚ‹xt
)

60 
ušt32_t
 
š¡_idx
 = (ušt32_t)
p_cÚ‹xt
;

61 
Äf_drv_u¬t_ev’t_t
 
ev’t
 =

63 .
ty³
 = (
Äf_drv_u¬t_evt_ty³_t
)
p_ev’t
->type,

64 .
d©a
 =

66 .
”rÜ
 =

68 .
rxtx
 =

70 .
p_d©a
 = 
p_ev’t
->
d©a
.
”rÜ
.
rxtx
.p_data,

71 .
by‹s
 = 
p_ev’t
->
d©a
.
”rÜ
.
rxtx
.bytes,

73 .
”rÜ_mask
 = 
p_ev’t
->
d©a
.
”rÜ
.error_mask,

77 
m_hªdËrs
[
š¡_idx
](&
ev’t
, 
m_cÚ‹xts
[inst_idx]);

78 
	}
}

81 #ià
defšed
(
NRF_DRV_UART_WITH_UART
)

82 
	$u¬t_evt_hªdËr
(
Äfx_u¬t_ev’t_t
 cÚ¡ * 
p_ev’t
,

83 * 
p_cÚ‹xt
)

85 
ušt32_t
 
š¡_idx
 = (ušt32_t)
p_cÚ‹xt
;

86 
Äf_drv_u¬t_ev’t_t
 
ev’t
 =

88 .
ty³
 = (
Äf_drv_u¬t_evt_ty³_t
)
p_ev’t
->type,

89 .
d©a
 =

91 .
”rÜ
 =

93 .
rxtx
 =

95 .
p_d©a
 = 
p_ev’t
->
d©a
.
”rÜ
.
rxtx
.p_data,

96 .
by‹s
 = 
p_ev’t
->
d©a
.
”rÜ
.
rxtx
.bytes,

98 .
”rÜ_mask
 = 
p_ev’t
->
d©a
.
”rÜ
.error_mask,

102 
m_hªdËrs
[
š¡_idx
](&
ev’t
, 
m_cÚ‹xts
[inst_idx]);

103 
	}
}

106 
»t_code_t
 
	$Äf_drv_u¬t_š™
(
Äf_drv_u¬t_t
 cÚ¡ * 
p_š¡ªû
,

107 
Äf_drv_u¬t_cÚfig_t
 cÚ¡ * 
p_cÚfig
,

108 
Äf_u¬t_ev’t_hªdËr_t
 
ev’t_hªdËr
)

110 
ušt32_t
 
š¡_idx
 = 
p_š¡ªû
->inst_idx;

111 
m_hªdËrs
[
š¡_idx
] = 
ev’t_hªdËr
;

112 
m_cÚ‹xts
[
š¡_idx
] = 
p_cÚfig
->
p_cÚ‹xt
;

114 #ià
	`defšed
(
NRF_DRV_UART_WITH_UARTE
è&& defšed(
NRF_DRV_UART_WITH_UART
)

115 #ifdeà
NRF52840_XXAA


116 ià(
š¡_idx
 == 1)

118 
	`ASSERT
(
p_cÚfig
->
u£_—sy_dma
);

121 
Äf_drv_u¬t_u£_—sy_dma
[
š¡_idx
] = 
p_cÚfig
->
u£_—sy_dma
;

124 
Äf_drv_u¬t_cÚfig_t
 
cÚfig
 = *
p_cÚfig
;

125 
cÚfig
.
p_cÚ‹xt
 = (*)
š¡_idx
;

127 
»t_code_t
 
»suÉ
 = 0;

128 ià(
NRF_DRV_UART_USE_UARTE
)

130 
»suÉ
 = 
	`Äfx_u¬‹_š™
(&
p_š¡ªû
->
u¬‹
,

131 (
Äfx_u¬‹_cÚfig_t
 cÚ¡ *)&
cÚfig
,

132 
ev’t_hªdËr
 ? 
u¬‹_evt_hªdËr
 : 
NULL
);

134 ià(
NRF_DRV_UART_USE_UART
)

136 
»suÉ
 = 
	`Äfx_u¬t_š™
(&
p_š¡ªû
->
u¬t
,

137 (
Äfx_u¬t_cÚfig_t
 cÚ¡ *)&
cÚfig
,

138 
ev’t_hªdËr
 ? 
u¬t_evt_hªdËr
 : 
NULL
);

140  
»suÉ
;

141 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\modules\nrfx\drivers\src\nrfx_clock.c

41 
	~<Äfx.h
>

43 #ià
NRFX_CHECK
(
NRFX_CLOCK_ENABLED
)

45 
	~<Äfx_şock.h
>

47 
	#NRFX_LOG_MODULE
 
CLOCK


	)

48 
	~<Äfx_log.h
>

50 #ià
NRFX_CHECK
(
NRFX_POWER_ENABLED
)

51 
boŞ
 
Äfx_pow”_œq_’abËd
;

54 
	#EVT_TO_STR
(
ev’t
) \

55 (
ev’t
 =ğ
NRF_CLOCK_EVENT_HFCLKSTARTED
 ? "NRF_CLOCK_EVENT_HFCLKSTARTED" : \

56 (
ev’t
 =ğ
NRF_CLOCK_EVENT_LFCLKSTARTED
 ? "NRF_CLOCK_EVENT_LFCLKSTARTED" : \

57 (
ev’t
 =ğ
NRF_CLOCK_EVENT_DONE
 ? "NRF_CLOCK_EVENT_DONE" : \

58 (
ev’t
 =ğ
NRF_CLOCK_EVENT_CTTO
 ? "NRF_CLOCK_EVENT_CTTO" : \

59 "UNKNOWN EVENT"))))

	)

63 
	#NRF_CLOCK_LFCLK_RC
 
CLOCK_LFCLKSRC_SRC_RC


	)

64 
	#NRF_CLOCK_LFCLK_Xl
 
CLOCK_LFCLKSRC_SRC_Xl


	)

65 
	#NRF_CLOCK_LFCLK_SyÁh
 
CLOCK_LFCLKSRC_SRC_SyÁh


	)

68 #ià(
NRFX_CLOCK_CONFIG_LF_SRC
 =ğ
NRF_CLOCK_LFCLK_RC
)

69 
	#CALIBRATION_SUPPORT
 1

	)

71 
	#CALIBRATION_SUPPORT
 0

	)

74 #ià
defšed
(
NRF52810_XXAA
) || \

75 
defšed
(
NRF52832_XXAA
è|| defšed(
NRF52832_XXAB
) || \

76 
	$defšed
(
NRF52840_XXAA
)

79 
	#USE_WORKAROUND_FOR_ANOMALY_192


	)

82 
	#USE_WORKAROUND_FOR_ANOMALY_201


	)

87 
CAL_STATE_IDLE
,

88 
CAL_STATE_CAL


89 } 
	tÄfx_şock_ÿl_¡©e_t
;

94 
Äfx_şock_ev’t_hªdËr_t
 
ev’t_hªdËr
;

95 
boŞ
 
moduË_š™Ÿlized
;

96 #ià
	`defšed
(
USE_WORKAROUND_FOR_ANOMALY_201
)

97 
boŞ
 
hfşk_¡¬‹d
;

100 #ià
CALIBRATION_SUPPORT


101 vŞ©
Äfx_şock_ÿl_¡©e_t
 
ÿl_¡©e
;

103 } 
	tÄfx_şock_cb_t
;

105 
Äfx_şock_cb_t
 
m_şock_cb
;

111 #ià
	`NRFX_CHECK
(
NRFX_POWER_ENABLED
)

112 
boŞ
 
Äfx_şock_œq_’abËd
;

115 #ià
	`defšed
(
NRF52832_XXAA
è|| defšed(
NRF52832_XXAB
)

119 
	#ANOMALY_132_REQ_DELAY_US
 138UL

	)

122 
	#ANOMALY_132_NRF52832_FREQ_MHZ
 64UL

	)

125 
	#ANOMALY_132_DELAY_CYCLES
 (
ANOMALY_132_REQ_DELAY_US
 * 
ANOMALY_132_NRF52832_FREQ_MHZ
)

	)

130 
	$Äfx_şock_ªom®y_132
()

132 
ušt32_t
 
cycút_š™®
;

133 
ušt32_t
 
cÜe_debug
;

134 
ušt32_t
 
dwt_ù¾
;

138 
cÜe_debug
 = 
CÜeDebug
->
DEMCR
;

139 
CÜeDebug
->
DEMCR
 = 
cÜe_debug
 | 
CÜeDebug_DEMCR_TRCENA_Msk
;

143 
dwt_ù¾
 = 
DWT
->
CTRL
;

144 
DWT
->
CTRL
 = 
dwt_ù¾
 | 
DWT_CTRL_CYCCNTENA_Msk
;

147 
cycút_š™®
 = 
DWT
->
CYCCNT
;

150 (
DWT
->
CYCCNT
 - 
cycút_š™®
è< 
ANOMALY_132_DELAY_CYCLES
)

154 
DWT
->
CTRL
 = 
dwt_ù¾
;

155 
CÜeDebug
->
DEMCR
 = 
cÜe_debug
;

156 
	}
}

160 
Äfx_”r_t
 
	$Äfx_şock_š™
(
Äfx_şock_ev’t_hªdËr_t
 
ev’t_hªdËr
)

162 
	`NRFX_ASSERT
(
ev’t_hªdËr
);

164 
Äfx_”r_t
 
”r_code
 = 
NRFX_SUCCESS
;

165 ià(
m_şock_cb
.
moduË_š™Ÿlized
)

167 
”r_code
 = 
NRFX_ERROR_ALREADY_INITIALIZED
;

171 #ià
CALIBRATION_SUPPORT


172 
m_şock_cb
.
ÿl_¡©e
 = 
CAL_STATE_IDLE
;

174 
m_şock_cb
.
ev’t_hªdËr
 =ƒvent_handler;

175 
m_şock_cb
.
moduË_š™Ÿlized
 = 
Œue
;

176 #ià
	`defšed
(
USE_WORKAROUND_FOR_ANOMALY_201
)

177 
m_şock_cb
.
hfşk_¡¬‹d
 = 
çl£
;

181 
	`NRFX_LOG_INFO
("FunùiÚ: %s,ƒ¼Ü code: %s.", 
__func__
, 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

182  
”r_code
;

183 
	}
}

185 
	$Äfx_şock_’abË
()

187 
	`NRFX_ASSERT
(
m_şock_cb
.
moduË_š™Ÿlized
);

188 
	`Äfx_pow”_şock_œq_š™
();

189 
	`Äf_şock_lf_¤c_£t
((
Äf_şock_lfşk_t
)
NRFX_CLOCK_CONFIG_LF_SRC
);

191 #ià
	`NRFX_CHECK
(
NRFX_POWER_ENABLED
)

192 
Äfx_şock_œq_’abËd
 = 
Œue
;

195 
	`NRFX_LOG_INFO
("Moduleƒnabled.");

196 
	}
}

198 
	$Äfx_şock_di§bË
()

200 
	`NRFX_ASSERT
(
m_şock_cb
.
moduË_š™Ÿlized
);

201 #ià
	`NRFX_CHECK
(
NRFX_POWER_ENABLED
)

202 
	`NRFX_ASSERT
(
Äfx_şock_œq_’abËd
);

203 ià(!
Äfx_pow”_œq_’abËd
)

206 
	`NRFX_IRQ_DISABLE
(
POWER_CLOCK_IRQn
);

208 
	`Äf_şock_št_di§bË
(
CLOCK_INTENSET_HFCLKSTARTED_Msk
 |

209 
CLOCK_INTENSET_LFCLKSTARTED_Msk
 |

210 
CLOCK_INTENSET_DONE_Msk
 |

211 
CLOCK_INTENSET_CTTO_Msk
);

212 #ià
	`NRFX_CHECK
(
NRFX_POWER_ENABLED
)

213 
Äfx_şock_œq_’abËd
 = 
çl£
;

215 
	`NRFX_LOG_INFO
("Module disabled.");

216 
	}
}

218 
	$Äfx_şock_unš™
()

220 
	`NRFX_ASSERT
(
m_şock_cb
.
moduË_š™Ÿlized
);

221 
	`Äfx_şock_lfşk_¡İ
();

222 
	`Äfx_şock_hfşk_¡İ
();

223 
m_şock_cb
.
moduË_š™Ÿlized
 = 
çl£
;

224 
	`NRFX_LOG_INFO
("Uninitialized.");

225 
	}
}

227 
	$Äfx_şock_lfşk_¡¬t
()

229 
	`NRFX_ASSERT
(
m_şock_cb
.
moduË_š™Ÿlized
);

230 
	`Äf_şock_ev’t_ş—r
(
NRF_CLOCK_EVENT_LFCLKSTARTED
);

231 
	`Äf_şock_št_’abË
(
NRF_CLOCK_INT_LF_STARTED_MASK
);

233 #ià
	`defšed
(
NRF52832_XXAA
è|| defšed(
NRF52832_XXAB
)

234 
	`Äfx_şock_ªom®y_132
();

237 
	`Äf_şock_sk_Œigg”
(
NRF_CLOCK_TASK_LFCLKSTART
);

238 
	}
}

240 
	$Äfx_şock_lfşk_¡İ
()

242 
	`NRFX_ASSERT
(
m_şock_cb
.
moduË_š™Ÿlized
);

243 
	`Äf_şock_sk_Œigg”
(
NRF_CLOCK_TASK_LFCLKSTOP
);

244 
	`Äf_şock_lf_is_ruÂšg
())

246 
	}
}

248 
	$Äfx_şock_hfşk_¡¬t
()

250 
	`NRFX_ASSERT
(
m_şock_cb
.
moduË_š™Ÿlized
);

251 
	`Äf_şock_ev’t_ş—r
(
NRF_CLOCK_EVENT_HFCLKSTARTED
);

252 
	`Äf_şock_št_’abË
(
NRF_CLOCK_INT_HF_STARTED_MASK
);

253 
	`Äf_şock_sk_Œigg”
(
NRF_CLOCK_TASK_HFCLKSTART
);

254 
	}
}

256 
	$Äfx_şock_hfşk_¡İ
()

258 
	`NRFX_ASSERT
(
m_şock_cb
.
moduË_š™Ÿlized
);

259 
	`Äf_şock_sk_Œigg”
(
NRF_CLOCK_TASK_HFCLKSTOP
);

260 
	`Äf_şock_hf_is_ruÂšg
(
NRF_CLOCK_HFCLK_HIGH_ACCURACY
))

262 #ià
	`defšed
(
USE_WORKAROUND_FOR_ANOMALY_201
)

263 
m_şock_cb
.
hfşk_¡¬‹d
 = 
çl£
;

265 
	}
}

267 
Äfx_”r_t
 
	$Äfx_şock_ÿlib¿tiÚ_¡¬t
()

269 
Äfx_”r_t
 
”r_code
 = 
NRFX_SUCCESS
;

270 #ià
CALIBRATION_SUPPORT


271 ià(
	`Äfx_şock_hfşk_is_ruÂšg
(è=ğ
çl£
)

273  
NRFX_ERROR_INVALID_STATE
;

276 ià(
	`Äfx_şock_lfşk_is_ruÂšg
(è=ğ
çl£
)

278  
NRFX_ERROR_INVALID_STATE
;

281 ià(
m_şock_cb
.
ÿl_¡©e
 =ğ
CAL_STATE_IDLE
)

283 
	`Äf_şock_ev’t_ş—r
(
NRF_CLOCK_EVENT_DONE
);

284 
	`Äf_şock_št_’abË
(
NRF_CLOCK_INT_DONE_MASK
);

285 
m_şock_cb
.
ÿl_¡©e
 = 
CAL_STATE_CAL
;

286 #ià
	`defšed
(
USE_WORKAROUND_FOR_ANOMALY_192
)

287 *(vŞ©
ušt32_t
 *)0x40000C34 = 0x00000002;

289 
	`Äf_şock_sk_Œigg”
(
NRF_CLOCK_TASK_CAL
);

293 
”r_code
 = 
NRFX_ERROR_BUSY
;

296 
	`NRFX_LOG_WARNING
("Function: %s,ƒrror code: %s.",

297 
__func__
,

298 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

299  
”r_code
;

300 
	}
}

302 
Äfx_”r_t
 
	$Äfx_şock_is_ÿlib¿tšg
()

304 #ià
CALIBRATION_SUPPORT


305 ià(
m_şock_cb
.
ÿl_¡©e
 =ğ
CAL_STATE_CAL
)

307  
NRFX_ERROR_BUSY
;

310  
NRFX_SUCCESS
;

311 
	}
}

313 
	$Äfx_şock_ÿlib¿tiÚ_tim”_¡¬t
(
ušt8_t
 
š‹rv®
)

315 
	`Äf_şock_ÿl_tim”_timeout_£t
(
š‹rv®
);

316 
	`Äf_şock_ev’t_ş—r
(
NRF_CLOCK_EVENT_CTTO
);

317 
	`Äf_şock_št_’abË
(
NRF_CLOCK_INT_CTTO_MASK
);

318 
	`Äf_şock_sk_Œigg”
(
NRF_CLOCK_TASK_CTSTART
);

319 
	}
}

321 
	$Äfx_şock_ÿlib¿tiÚ_tim”_¡İ
()

323 
	`Äf_şock_št_di§bË
(
NRF_CLOCK_INT_CTTO_MASK
);

324 
	`Äf_şock_sk_Œigg”
(
NRF_CLOCK_TASK_CTSTOP
);

325 
	}
}

327 
	$Äfx_şock_œq_hªdËr
()

329 ià(
	`Äf_şock_ev’t_check
(
NRF_CLOCK_EVENT_HFCLKSTARTED
))

331 
	`Äf_şock_ev’t_ş—r
(
NRF_CLOCK_EVENT_HFCLKSTARTED
);

332 
	`NRFX_LOG_DEBUG
("Ev’t: %s.", 
	`EVT_TO_STR
(
NRF_CLOCK_EVENT_HFCLKSTARTED
));

333 
	`Äf_şock_št_di§bË
(
NRF_CLOCK_INT_HF_STARTED_MASK
);

335 #ià
	`defšed
(
USE_WORKAROUND_FOR_ANOMALY_201
)

336 ià(!
m_şock_cb
.
hfşk_¡¬‹d
)

338 
m_şock_cb
.
hfşk_¡¬‹d
 = 
Œue
;

339 
m_şock_cb
.
	`ev’t_hªdËr
(
NRFX_CLOCK_EVT_HFCLK_STARTED
);

342 
m_şock_cb
.
	`ev’t_hªdËr
(
NRFX_CLOCK_EVT_HFCLK_STARTED
);

345 ià(
	`Äf_şock_ev’t_check
(
NRF_CLOCK_EVENT_LFCLKSTARTED
))

347 
	`Äf_şock_ev’t_ş—r
(
NRF_CLOCK_EVENT_LFCLKSTARTED
);

348 
	`NRFX_LOG_DEBUG
("Ev’t: %s.", 
	`EVT_TO_STR
(
NRF_CLOCK_EVENT_LFCLKSTARTED
));

349 
	`Äf_şock_št_di§bË
(
NRF_CLOCK_INT_LF_STARTED_MASK
);

351 
m_şock_cb
.
	`ev’t_hªdËr
(
NRFX_CLOCK_EVT_LFCLK_STARTED
);

353 #ià
CALIBRATION_SUPPORT


354 ià(
	`Äf_şock_ev’t_check
(
NRF_CLOCK_EVENT_CTTO
))

356 
	`Äf_şock_ev’t_ş—r
(
NRF_CLOCK_EVENT_CTTO
);

357 
	`NRFX_LOG_DEBUG
("Ev’t: %s.", 
	`EVT_TO_STR
(
NRF_CLOCK_EVENT_CTTO
));

358 
	`Äf_şock_št_di§bË
(
NRF_CLOCK_INT_CTTO_MASK
);

360 
m_şock_cb
.
	`ev’t_hªdËr
(
NRFX_CLOCK_EVT_CTTO
);

363 ià(
	`Äf_şock_ev’t_check
(
NRF_CLOCK_EVENT_DONE
))

365 #ià
	`defšed
(
USE_WORKAROUND_FOR_ANOMALY_192
)

366 *(vŞ©
ušt32_t
 *)0x40000C34 = 0x00000000;

368 
	`Äf_şock_ev’t_ş—r
(
NRF_CLOCK_EVENT_DONE
);

369 
	`NRFX_LOG_DEBUG
("Ev’t: %s.", 
	`EVT_TO_STR
(
NRF_CLOCK_EVENT_DONE
));

370 
	`Äf_şock_št_di§bË
(
NRF_CLOCK_INT_DONE_MASK
);

371 
m_şock_cb
.
ÿl_¡©e
 = 
CAL_STATE_IDLE
;

372 
m_şock_cb
.
	`ev’t_hªdËr
(
NRFX_CLOCK_EVT_CAL_DONE
);

375 
	}
}

377 #undeà
NRF_CLOCK_LFCLK_RC


378 #undeà
NRF_CLOCK_LFCLK_Xl


379 #undeà
NRF_CLOCK_LFCLK_SyÁh


	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\modules\nrfx\drivers\src\nrfx_gpiote.c

40 
	~<Äfx.h
>

42 #ià
NRFX_CHECK
(
NRFX_GPIOTE_ENABLED
)

44 
	~<Äfx_gpiÙe.h
>

45 
	~"Äf_b™mask.h
"

46 
	~<¡ršg.h
>

48 
	#NRFX_LOG_MODULE
 
GPIOTE


	)

49 
	~<Äfx_log.h
>

52 
	#FORBIDDEN_HANDLER_ADDRESS
 ((
Äfx_gpiÙe_evt_hªdËr_t
)
UINT32_MAX
)

	)

53 
	#PIN_NOT_USED
 (-1)

	)

54 
	#PIN_USED
 (-2)

	)

55 
	#NO_CHANNELS
 (-1)

	)

56 
	#SENSE_FIELD_POS
 (6)

	)

57 
	#SENSE_FIELD_MASK
 (0xC0)

	)

64 
	#TE_IDX_TO_EVENT_ADDR
(
idx
è(
Äf_gpiÙe_ev’ts_t
)((
ušt32_t
)
NRF_GPIOTE_EVENTS_IN_0
 + \

65 ((
ušt32_t
è* (
idx
)))

	)

72 
	#TE_OUT_IDX_TO_TASK_ADDR
(
idx
è(
Äf_gpiÙe_sks_t
)((
ušt32_t
)
NRF_GPIOTE_TASKS_OUT_0
 + \

73 ((
ušt32_t
è* (
idx
)))

	)

75 #ià
defšed
(
GPIOTE_FEATURE_SET_PRESENT
è|| defšed(
__NRFX_DOXYGEN__
)

81 
	#TE_SET_IDX_TO_TASK_ADDR
(
idx
è(
Äf_gpiÙe_sks_t
)((
ušt32_t
)
NRF_GPIOTE_TASKS_SET_0
 + \

82 ((
ušt32_t
è* (
idx
)))

	)

86 #ià
defšed
(
GPIOTE_FEATURE_CLR_PRESENT
è|| defšed(
__NRFX_DOXYGEN__
)

92 
	#TE_CLR_IDX_TO_TASK_ADDR
(
idx
è(
Äf_gpiÙe_sks_t
)((
ušt32_t
)
NRF_GPIOTE_TASKS_CLR_0
 + \

93 ((
ušt32_t
è* (
idx
)))

	)

100 
Äfx_gpiÙe_evt_hªdËr_t
 
	mhªdËrs
[
GPIOTE_CH_NUM
 + 
NRFX_GPIOTE_CONFIG_NUM_OF_LOW_POWER_EVENTS
];

101 
št8_t
 
	mpš_assignm’ts
[
NUMBER_OF_PINS
];

102 
št8_t
 
	mpÜt_hªdËrs_pšs
[
NRFX_GPIOTE_CONFIG_NUM_OF_LOW_POWER_EVENTS
];

103 
ušt8_t
 
	mcÚfigu»d_pšs
[((
NUMBER_OF_PINS
)+7) / 8];

104 
Äfx_drv_¡©e_t
 
	m¡©e
;

105 } 
	tgpiÙe_cÚŒŞ_block_t
;

107 
gpiÙe_cÚŒŞ_block_t
 
	gm_cb
;

109 
__STATIC_INLINE
 
boŞ
 
	$pš_š_u£
(
ušt32_t
 
pš
)

111  (
m_cb
.
pš_assignm’ts
[
pš
] !ğ
PIN_NOT_USED
);

112 
	}
}

115 
__STATIC_INLINE
 
boŞ
 
	$pš_š_u£_as_nÚ_sk_out
(
ušt32_t
 
pš
)

117  (
m_cb
.
pš_assignm’ts
[
pš
] =ğ
PIN_USED
);

118 
	}
}

121 
__STATIC_INLINE
 
boŞ
 
	$pš_š_u£_by_‹
(
ušt32_t
 
pš
)

123  (
m_cb
.
pš_assignm’ts
[
pš
] >ğ0 && m_cb.pš_assignm’ts[pš] < 
GPIOTE_CH_NUM
) ?

124 
Œue
 : 
çl£
;

125 
	}
}

128 
__STATIC_INLINE
 
boŞ
 
	$pš_š_u£_by_pÜt
(
ušt32_t
 
pš
)

130  (
m_cb
.
pš_assignm’ts
[
pš
] >ğ
GPIOTE_CH_NUM
);

131 
	}
}

134 
__STATIC_INLINE
 
boŞ
 
	$pš_š_u£_by_gpiÙe
(
ušt32_t
 
pš
)

136  (
m_cb
.
pš_assignm’ts
[
pš
] >= 0);

137 
	}
}

140 
__STATIC_INLINE
 
	$pš_š_u£_by_‹_£t
(
ušt32_t
 
pš
,

141 
ušt32_t
 
chªÃl_id
,

142 
Äfx_gpiÙe_evt_hªdËr_t
 
hªdËr
,

143 
boŞ
 
is_chªÃl
)

145 
m_cb
.
pš_assignm’ts
[
pš
] = 
chªÃl_id
;

146 
m_cb
.
hªdËrs
[
chªÃl_id
] = 
hªdËr
;

147 ià(!
is_chªÃl
)

149 
m_cb
.
pÜt_hªdËrs_pšs
[
chªÃl_id
 - 
GPIOTE_CH_NUM
] = (
št8_t
)
pš
;

151 
	}
}

154 
__STATIC_INLINE
 
	$pš_š_u£_£t
(
ušt32_t
 
pš
)

156 
m_cb
.
pš_assignm’ts
[
pš
] = 
PIN_USED
;

157 
	}
}

160 
__STATIC_INLINE
 
	$pš_š_u£_ş—r
(
ušt32_t
 
pš
)

162 
m_cb
.
pš_assignm’ts
[
pš
] = 
PIN_NOT_USED
;

163 
	}
}

166 
__STATIC_INLINE
 
	$pš_cÚfigu»d_£t
(
ušt32_t
 
pš
)

168 
	`Äf_b™mask_b™_£t
(
pš
, 
m_cb
.
cÚfigu»d_pšs
);

169 
	}
}

171 
__STATIC_INLINE
 
	$pš_cÚfigu»d_ş—r
(
ušt32_t
 
pš
)

173 
	`Äf_b™mask_b™_ş—r
(
pš
, 
m_cb
.
cÚfigu»d_pšs
);

174 
	}
}

176 
__STATIC_INLINE
 
boŞ
 
	$pš_cÚfigu»d_check
(
ušt32_t
 
pš
)

178  0 !ğ
	`Äf_b™mask_b™_is_£t
(
pš
, 
m_cb
.
cÚfigu»d_pšs
);

179 
	}
}

181 
__STATIC_INLINE
 
št8_t
 
	$chªÃl_pÜt_g‘
(
ušt32_t
 
pš
)

183  
m_cb
.
pš_assignm’ts
[
pš
];

184 
	}
}

187 
__STATIC_INLINE
 
Äfx_gpiÙe_evt_hªdËr_t
 
	$chªÃl_hªdËr_g‘
(
ušt32_t
 
chªÃl
)

189  
m_cb
.
hªdËrs
[
chªÃl
];

190 
	}
}

193 
št8_t
 
	$chªÃl_pÜt_®loc
(
ušt32_t
 
pš
, 
Äfx_gpiÙe_evt_hªdËr_t
 
hªdËr
, 
boŞ
 
chªÃl
)

195 
št8_t
 
chªÃl_id
 = 
NO_CHANNELS
;

196 
ušt32_t
 
i
;

198 
ušt32_t
 
¡¬t_idx
 = 
chªÃl
 ? 0 : 
GPIOTE_CH_NUM
;

199 
ušt32_t
 
’d_idx
 =

200 
chªÃl
 ? 
GPIOTE_CH_NUM
 : (GPIOTE_CH_NUM + 
NRFX_GPIOTE_CONFIG_NUM_OF_LOW_POWER_EVENTS
);

204 
i
 = 
¡¬t_idx
; i < 
’d_idx
; i++)

206 ià(
m_cb
.
hªdËrs
[
i
] =ğ
FORBIDDEN_HANDLER_ADDRESS
)

208 
	`pš_š_u£_by_‹_£t
(
pš
, 
i
, 
hªdËr
, 
chªÃl
);

209 
chªÃl_id
 = 
i
;

214  
chªÃl_id
;

215 
	}
}

218 
	$chªÃl_ä“
(
ušt8_t
 
chªÃl_id
)

220 
m_cb
.
hªdËrs
[
chªÃl_id
] = 
FORBIDDEN_HANDLER_ADDRESS
;

221 ià(
chªÃl_id
 >ğ
GPIOTE_CH_NUM
)

223 
m_cb
.
pÜt_hªdËrs_pšs
[
chªÃl_id
 - 
GPIOTE_CH_NUM
] = (
št8_t
)
PIN_NOT_USED
;

225 
	}
}

228 
Äfx_”r_t
 
	$Äfx_gpiÙe_š™
()

230 
Äfx_”r_t
 
”r_code
;

232 ià(
m_cb
.
¡©e
 !ğ
NRFX_DRV_STATE_UNINITIALIZED
)

234 
”r_code
 = 
NRFX_ERROR_INVALID_STATE
;

235 
	`NRFX_LOG_WARNING
("Function: %s,ƒrror code: %s.",

236 
__func__
,

237 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

238  
”r_code
;

241 
ušt8_t
 
i
;

243 
i
 = 0; i < 
NUMBER_OF_PINS
; i++)

245 
	`pš_š_u£_ş—r
(
i
);

248 
i
 = 0; i < (
GPIOTE_CH_NUM
 + 
NRFX_GPIOTE_CONFIG_NUM_OF_LOW_POWER_EVENTS
); i++)

250 
	`chªÃl_ä“
(
i
);

253 
	`mem£t
(
m_cb
.
cÚfigu»d_pšs
, 0, (m_cb.configured_pins));

255 
	`NRFX_IRQ_PRIORITY_SET
(
GPIOTE_IRQn
, 
NRFX_GPIOTE_CONFIG_IRQ_PRIORITY
);

256 
	`NRFX_IRQ_ENABLE
(
GPIOTE_IRQn
);

257 
	`Äf_gpiÙe_ev’t_ş—r
(
NRF_GPIOTE_EVENTS_PORT
);

258 
	`Äf_gpiÙe_št_’abË
(
GPIOTE_INTENSET_PORT_Msk
);

259 
m_cb
.
¡©e
 = 
NRFX_DRV_STATE_INITIALIZED
;

261 
”r_code
 = 
NRFX_SUCCESS
;

262 
	`NRFX_LOG_INFO
("FunùiÚ: %s,ƒ¼Ü code: %s.", 
__func__
, 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

263  
”r_code
;

264 
	}
}

267 
boŞ
 
	$Äfx_gpiÙe_is_š™
()

269  (
m_cb
.
¡©e
 !ğ
NRFX_DRV_STATE_UNINITIALIZED
è? 
Œue
 : 
çl£
;

270 
	}
}

273 
	$Äfx_gpiÙe_unš™
()

275 
	`NRFX_ASSERT
(
m_cb
.
¡©e
 !ğ
NRFX_DRV_STATE_UNINITIALIZED
);

277 
ušt32_t
 
i
;

279 
i
 = 0; i < 
NUMBER_OF_PINS
; i++)

281 ià(
	`pš_š_u£_as_nÚ_sk_out
(
i
))

283 
	`Äfx_gpiÙe_out_unš™
(
i
);

285 iàĞ
	`pš_š_u£_by_gpiÙe
(
i
))

290 
	`Äfx_gpiÙe_š_unš™
(
i
);

293 
m_cb
.
¡©e
 = 
NRFX_DRV_STATE_UNINITIALIZED
;

294 
	`NRFX_LOG_INFO
("Uninitialized.");

295 
	}
}

298 
Äfx_”r_t
 
	$Äfx_gpiÙe_out_š™
(
Äfx_gpiÙe_pš_t
 
pš
,

299 
Äfx_gpiÙe_out_cÚfig_t
 cÚ¡ * 
p_cÚfig
)

301 
	`NRFX_ASSERT
(
pš
 < 
NUMBER_OF_PINS
);

302 
	`NRFX_ASSERT
(
m_cb
.
¡©e
 =ğ
NRFX_DRV_STATE_INITIALIZED
);

303 
	`NRFX_ASSERT
(
p_cÚfig
);

305 
Äfx_”r_t
 
”r_code
 = 
NRFX_SUCCESS
;

307 ià(
	`pš_š_u£
(
pš
))

309 
”r_code
 = 
NRFX_ERROR_INVALID_STATE
;

313 ià(
p_cÚfig
->
sk_pš
)

315 
št8_t
 
chªÃl
 = 
	`chªÃl_pÜt_®loc
(
pš
, 
NULL
, 
Œue
);

317 ià(
chªÃl
 !ğ
NO_CHANNELS
)

319 
	`Äf_gpiÙe_sk_cÚfigu»
((
ušt32_t
)
chªÃl
,

320 
pš
,

321 
p_cÚfig
->
aùiÚ
,

322 
p_cÚfig
->
š™_¡©e
);

326 
”r_code
 = 
NRFX_ERROR_NO_MEM
;

331 
	`pš_š_u£_£t
(
pš
);

334 ià(
”r_code
 =ğ
NRFX_SUCCESS
)

336 ià(
p_cÚfig
->
š™_¡©e
 =ğ
NRF_GPIOTE_INITIAL_VALUE_HIGH
)

338 
	`Äf_gpio_pš_£t
(
pš
);

342 
	`Äf_gpio_pš_ş—r
(
pš
);

345 
	`Äf_gpio_cfg_ouut
(
pš
);

346 
	`pš_cÚfigu»d_£t
(
pš
);

350 
	`NRFX_LOG_INFO
("FunùiÚ: %s,ƒ¼Ü code: %s.", 
__func__
, 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

351  
”r_code
;

352 
	}
}

355 
	$Äfx_gpiÙe_out_unš™
(
Äfx_gpiÙe_pš_t
 
pš
)

357 
	`NRFX_ASSERT
(
pš
 < 
NUMBER_OF_PINS
);

358 
	`NRFX_ASSERT
(
	`pš_š_u£
(
pš
));

360 ià(
	`pš_š_u£_by_‹
(
pš
))

362 
	`chªÃl_ä“
((
ušt8_t
)
	`chªÃl_pÜt_g‘
(
pš
));

363 
	`Äf_gpiÙe_‹_deçuÉ
((
ušt32_t
)
	`chªÃl_pÜt_g‘
(
pš
));

365 
	`pš_š_u£_ş—r
(
pš
);

367 ià(
	`pš_cÚfigu»d_check
(
pš
))

369 
	`Äf_gpio_cfg_deçuÉ
(
pš
);

370 
	`pš_cÚfigu»d_ş—r
(
pš
);

372 
	}
}

375 
	$Äfx_gpiÙe_out_£t
(
Äfx_gpiÙe_pš_t
 
pš
)

377 
	`NRFX_ASSERT
(
pš
 < 
NUMBER_OF_PINS
);

378 
	`NRFX_ASSERT
(
	`pš_š_u£
(
pš
));

379 
	`NRFX_ASSERT
(!
	`pš_š_u£_by_‹
(
pš
));

381 
	`Äf_gpio_pš_£t
(
pš
);

382 
	}
}

385 
	$Äfx_gpiÙe_out_ş—r
(
Äfx_gpiÙe_pš_t
 
pš
)

387 
	`NRFX_ASSERT
(
pš
 < 
NUMBER_OF_PINS
);

388 
	`NRFX_ASSERT
(
	`pš_š_u£
(
pš
));

389 
	`NRFX_ASSERT
(!
	`pš_š_u£_by_‹
(
pš
));

391 
	`Äf_gpio_pš_ş—r
(
pš
);

392 
	}
}

395 
	$Äfx_gpiÙe_out_toggË
(
Äfx_gpiÙe_pš_t
 
pš
)

397 
	`NRFX_ASSERT
(
pš
 < 
NUMBER_OF_PINS
);

398 
	`NRFX_ASSERT
(
	`pš_š_u£
(
pš
));

399 
	`NRFX_ASSERT
(!
	`pš_š_u£_by_‹
(
pš
));

401 
	`Äf_gpio_pš_toggË
(
pš
);

402 
	}
}

405 
	$Äfx_gpiÙe_out_sk_’abË
(
Äfx_gpiÙe_pš_t
 
pš
)

407 
	`NRFX_ASSERT
(
pš
 < 
NUMBER_OF_PINS
);

408 
	`NRFX_ASSERT
(
	`pš_š_u£
(
pš
));

409 
	`NRFX_ASSERT
(
	`pš_š_u£_by_‹
(
pš
));

411 
	`Äf_gpiÙe_sk_’abË
((
ušt32_t
)
m_cb
.
pš_assignm’ts
[
pš
]);

412 
	}
}

415 
	$Äfx_gpiÙe_out_sk_di§bË
(
Äfx_gpiÙe_pš_t
 
pš
)

417 
	`NRFX_ASSERT
(
pš
 < 
NUMBER_OF_PINS
);

418 
	`NRFX_ASSERT
(
	`pš_š_u£
(
pš
));

419 
	`NRFX_ASSERT
(
	`pš_š_u£_by_‹
(
pš
));

421 
	`Äf_gpiÙe_sk_di§bË
((
ušt32_t
)
m_cb
.
pš_assignm’ts
[
pš
]);

422 
	}
}

425 
ušt32_t
 
	$Äfx_gpiÙe_out_sk_addr_g‘
(
Äfx_gpiÙe_pš_t
 
pš
)

427 
	`NRFX_ASSERT
(
pš
 < 
NUMBER_OF_PINS
);

428 
	`NRFX_ASSERT
(
	`pš_š_u£_by_‹
(
pš
));

430 
Äf_gpiÙe_sks_t
 
sk
 = 
	`TE_OUT_IDX_TO_TASK_ADDR
((
ušt32_t
)
	`chªÃl_pÜt_g‘
(
pš
));

431  
	`Äf_gpiÙe_sk_addr_g‘
(
sk
);

432 
	}
}

435 #ià
defšed
(
GPIOTE_FEATURE_SET_PRESENT
)

436 
ušt32_t
 
	$Äfx_gpiÙe_£t_sk_addr_g‘
(
Äfx_gpiÙe_pš_t
 
pš
)

438 
	`NRFX_ASSERT
(
pš
 < 
NUMBER_OF_PINS
);

439 
	`NRFX_ASSERT
(
	`pš_š_u£_by_‹
(
pš
));

441 
Äf_gpiÙe_sks_t
 
sk
 = 
	`TE_SET_IDX_TO_TASK_ADDR
((
ušt32_t
)
	`chªÃl_pÜt_g‘
(
pš
));

442  
	`Äf_gpiÙe_sk_addr_g‘
(
sk
);

443 
	}
}

448 #ià
defšed
(
GPIOTE_FEATURE_CLR_PRESENT
)

449 
ušt32_t
 
	$Äfx_gpiÙe_şr_sk_addr_g‘
(
Äfx_gpiÙe_pš_t
 
pš
)

451 
	`NRFX_ASSERT
(
pš
 < 
NUMBER_OF_PINS
);

452 
	`NRFX_ASSERT
(
	`pš_š_u£_by_‹
(
pš
));

454 
Äf_gpiÙe_sks_t
 
sk
 = 
	`TE_CLR_IDX_TO_TASK_ADDR
((
ušt32_t
)
	`chªÃl_pÜt_g‘
(
pš
));

455  
	`Äf_gpiÙe_sk_addr_g‘
(
sk
);

456 
	}
}

461 
	$Äfx_gpiÙe_out_sk_fÜû
(
Äfx_gpiÙe_pš_t
 
pš
, 
ušt8_t
 
¡©e
)

463 
	`NRFX_ASSERT
(
pš
 < 
NUMBER_OF_PINS
);

464 
	`NRFX_ASSERT
(
	`pš_š_u£
(
pš
));

465 
	`NRFX_ASSERT
(
	`pš_š_u£_by_‹
(
pš
));

467 
Äf_gpiÙe_outš™_t
 
š™_v®
 =

468 
¡©e
 ? 
NRF_GPIOTE_INITIAL_VALUE_HIGH
 : 
NRF_GPIOTE_INITIAL_VALUE_LOW
;

469 
	`Äf_gpiÙe_sk_fÜû
((
ušt32_t
)
m_cb
.
pš_assignm’ts
[
pš
], 
š™_v®
);

470 
	}
}

473 
	$Äfx_gpiÙe_out_sk_Œigg”
(
Äfx_gpiÙe_pš_t
 
pš
)

475 
	`NRFX_ASSERT
(
pš
 < 
NUMBER_OF_PINS
);

476 
	`NRFX_ASSERT
(
	`pš_š_u£
(
pš
));

477 
	`NRFX_ASSERT
(
	`pš_š_u£_by_‹
(
pš
));

479 
Äf_gpiÙe_sks_t
 
sk
 = 
	`TE_OUT_IDX_TO_TASK_ADDR
((
ušt32_t
)
	`chªÃl_pÜt_g‘
(
pš
));

480 
	`Äf_gpiÙe_sk_£t
(
sk
);

481 
	}
}

484 #ià
defšed
(
GPIOTE_FEATURE_SET_PRESENT
)

485 
	$Äfx_gpiÙe_£t_sk_Œigg”
(
Äfx_gpiÙe_pš_t
 
pš
)

487 
	`NRFX_ASSERT
(
pš
 < 
NUMBER_OF_PINS
);

488 
	`NRFX_ASSERT
(
	`pš_š_u£
(
pš
));

489 
	`NRFX_ASSERT
(
	`pš_š_u£_by_‹
(
pš
));

491 
Äf_gpiÙe_sks_t
 
sk
 = 
	`TE_SET_IDX_TO_TASK_ADDR
((
ušt32_t
)
	`chªÃl_pÜt_g‘
(
pš
));

492 
	`Äf_gpiÙe_sk_£t
(
sk
);

493 
	}
}

498 #ià 
defšed
(
GPIOTE_FEATURE_CLR_PRESENT
)

499 
	$Äfx_gpiÙe_şr_sk_Œigg”
(
Äfx_gpiÙe_pš_t
 
pš
)

501 
	`NRFX_ASSERT
(
pš
 < 
NUMBER_OF_PINS
);

502 
	`NRFX_ASSERT
(
	`pš_š_u£
(
pš
));

503 
	`NRFX_ASSERT
(
	`pš_š_u£_by_‹
(
pš
));

505 
Äf_gpiÙe_sks_t
 
sk
 = 
	`TE_CLR_IDX_TO_TASK_ADDR
((
ušt32_t
)
	`chªÃl_pÜt_g‘
(
pš
));

506 
	`Äf_gpiÙe_sk_£t
(
sk
);

507 
	}
}

512 
Äfx_”r_t
 
	$Äfx_gpiÙe_š_š™
(
Äfx_gpiÙe_pš_t
 
pš
,

513 
Äfx_gpiÙe_š_cÚfig_t
 cÚ¡ * 
p_cÚfig
,

514 
Äfx_gpiÙe_evt_hªdËr_t
 
evt_hªdËr
)

516 
	`NRFX_ASSERT
(
pš
 < 
NUMBER_OF_PINS
);

517 
Äfx_”r_t
 
”r_code
 = 
NRFX_SUCCESS
;

520 ià(
	`pš_š_u£_by_gpiÙe
(
pš
))

522 
”r_code
 = 
NRFX_ERROR_INVALID_STATE
;

526 
št8_t
 
chªÃl
 = 
	`chªÃl_pÜt_®loc
(
pš
, 
evt_hªdËr
, 
p_cÚfig
->
hi_accu¿cy
);

527 ià(
chªÃl
 !ğ
NO_CHANNELS
)

529 ià(!
p_cÚfig
->
sk_gpio_£tup
)

531 ià(
p_cÚfig
->
is_w©ch”
)

533 
	`Äf_gpio_cfg_w©ch”
(
pš
);

537 
	`Äf_gpio_cfg_šput
(
pš
, 
p_cÚfig
->
puÎ
);

539 
	`pš_cÚfigu»d_£t
(
pš
);

542 ià(
p_cÚfig
->
hi_accu¿cy
)

544 
	`Äf_gpiÙe_ev’t_cÚfigu»
((
ušt32_t
)
chªÃl
, 
pš
, 
p_cÚfig
->
£n£
);

548 
m_cb
.
pÜt_hªdËrs_pšs
[
chªÃl
 -

549 
GPIOTE_CH_NUM
] |ğ(
p_cÚfig
->
£n£
è<< 
SENSE_FIELD_POS
;

554 
”r_code
 = 
NRFX_ERROR_NO_MEM
;

558 
	`NRFX_LOG_INFO
("FunùiÚ: %s,ƒ¼Ü code: %s.", 
__func__
, 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

559  
”r_code
;

560 
	}
}

562 
	$Äfx_gpiÙe_š_ev’t_’abË
(
Äfx_gpiÙe_pš_t
 
pš
, 
boŞ
 
št_’abË
)

564 
	`NRFX_ASSERT
(
pš
 < 
NUMBER_OF_PINS
);

565 
	`NRFX_ASSERT
(
	`pš_š_u£_by_gpiÙe
(
pš
));

566 ià(
	`pš_š_u£_by_pÜt
(
pš
))

568 
ušt8_t
 
pš_ªd_£n£
 = (uint8_t)

569 
m_cb
.
pÜt_hªdËrs_pšs
[
	`chªÃl_pÜt_g‘
(
pš
è- 
GPIOTE_CH_NUM
];

570 
Äf_gpiÙe_pŞ¬™y_t
 
pŞ¬™y
 =

571 (
Äf_gpiÙe_pŞ¬™y_t
)(
pš_ªd_£n£
 >> 
SENSE_FIELD_POS
);

572 
Äf_gpio_pš_£n£_t
 
£n£
;

573 ià(
pŞ¬™y
 =ğ
NRF_GPIOTE_POLARITY_TOGGLE
)

576 
£n£
 = (
	`Äf_gpio_pš_»ad
(
pš
)) ?

577 
NRF_GPIO_PIN_SENSE_LOW
 : 
NRF_GPIO_PIN_SENSE_HIGH
;

581 
£n£
 = (
pŞ¬™y
 =ğ
NRF_GPIOTE_POLARITY_LOTOHI
) ?

582 
NRF_GPIO_PIN_SENSE_HIGH
 : 
NRF_GPIO_PIN_SENSE_LOW
;

584 
	`Äf_gpio_cfg_£n£_£t
(
pš
, 
£n£
);

586 ià(
	`pš_š_u£_by_‹
(
pš
))

588 
št32_t
 
chªÃl
 = (št32_t)
	`chªÃl_pÜt_g‘
(
pš
);

589 
Äf_gpiÙe_ev’ts_t
 
ev’t
 = 
	`TE_IDX_TO_EVENT_ADDR
((
ušt32_t
)
chªÃl
);

591 
	`Äf_gpiÙe_ev’t_’abË
((
ušt32_t
)
chªÃl
);

593 
	`Äf_gpiÙe_ev’t_ş—r
(
ev’t
);

594 ià(
št_’abË
)

596 
Äfx_gpiÙe_evt_hªdËr_t
 
hªdËr
 = 
	`chªÃl_hªdËr_g‘
((
ušt32_t
)
	`chªÃl_pÜt_g‘
(
pš
));

598 ià(
hªdËr
)

600 
	`Äf_gpiÙe_št_’abË
(1 << 
chªÃl
);

604 
	}
}

607 
	$Äfx_gpiÙe_š_ev’t_di§bË
(
Äfx_gpiÙe_pš_t
 
pš
)

609 
	`NRFX_ASSERT
(
pš
 < 
NUMBER_OF_PINS
);

610 
	`NRFX_ASSERT
(
	`pš_š_u£_by_gpiÙe
(
pš
));

611 ià(
	`pš_š_u£_by_pÜt
(
pš
))

613 
	`Äf_gpio_cfg_£n£_£t
(
pš
, 
NRF_GPIO_PIN_NOSENSE
);

615 ià(
	`pš_š_u£_by_‹
(
pš
))

617 
št32_t
 
chªÃl
 = (št32_t)
	`chªÃl_pÜt_g‘
(
pš
);

618 
	`Äf_gpiÙe_ev’t_di§bË
((
ušt32_t
)
chªÃl
);

619 
	`Äf_gpiÙe_št_di§bË
(1 << 
chªÃl
);

621 
	}
}

624 
	$Äfx_gpiÙe_š_unš™
(
Äfx_gpiÙe_pš_t
 
pš
)

626 
	`NRFX_ASSERT
(
pš
 < 
NUMBER_OF_PINS
);

627 
	`NRFX_ASSERT
(
	`pš_š_u£_by_gpiÙe
(
pš
));

628 
	`Äfx_gpiÙe_š_ev’t_di§bË
(
pš
);

629 ià(
	`pš_š_u£_by_‹
(
pš
))

631 
	`Äf_gpiÙe_‹_deçuÉ
((
ušt32_t
)
	`chªÃl_pÜt_g‘
(
pš
));

633 ià(
	`pš_cÚfigu»d_check
(
pš
))

635 
	`Äf_gpio_cfg_deçuÉ
(
pš
);

636 
	`pš_cÚfigu»d_ş—r
(
pš
);

638 
	`chªÃl_ä“
((
ušt8_t
)
	`chªÃl_pÜt_g‘
(
pš
));

639 
	`pš_š_u£_ş—r
(
pš
);

640 
	}
}

643 
boŞ
 
	$Äfx_gpiÙe_š_is_£t
(
Äfx_gpiÙe_pš_t
 
pš
)

645 
	`NRFX_ASSERT
(
pš
 < 
NUMBER_OF_PINS
);

646  
	`Äf_gpio_pš_»ad
(
pš
è? 
Œue
 : 
çl£
;

647 
	}
}

650 
ušt32_t
 
	$Äfx_gpiÙe_š_ev’t_addr_g‘
(
Äfx_gpiÙe_pš_t
 
pš
)

652 
	`NRFX_ASSERT
(
pš
 < 
NUMBER_OF_PINS
);

653 
	`NRFX_ASSERT
(
	`pš_š_u£_by_pÜt
(
pš
è|| 
	`pš_š_u£_by_‹
(pin));

655 
Äf_gpiÙe_ev’ts_t
 
ev’t
 = 
NRF_GPIOTE_EVENTS_PORT
;

657 ià(
	`pš_š_u£_by_‹
(
pš
))

659 
ev’t
 = 
	`TE_IDX_TO_EVENT_ADDR
((
ušt32_t
)
	`chªÃl_pÜt_g‘
(
pš
));

661  
	`Äf_gpiÙe_ev’t_addr_g‘
(
ev’t
);

662 
	}
}

665 
	$Äfx_gpiÙe_œq_hªdËr
()

667 
ušt32_t
 
¡©us
 = 0;

668 
ušt32_t
 
šput
[
GPIO_COUNT
] = {0};

671 
ušt32_t
 
i
;

672 
Äf_gpiÙe_ev’ts_t
 
ev’t
 = 
NRF_GPIOTE_EVENTS_IN_0
;

673 
ušt32_t
 
mask
 = (ušt32_t)
NRF_GPIOTE_INT_IN0_MASK
;

675 
i
 = 0; i < 
GPIOTE_CH_NUM
; i++)

677 ià(
	`Äf_gpiÙe_ev’t_is_£t
(
ev’t
è&& 
	`Äf_gpiÙe_št_is_’abËd
(
mask
))

679 
	`Äf_gpiÙe_ev’t_ş—r
(
ev’t
);

680 
¡©us
 |ğ
mask
;

682 
mask
 <<= 1;

685 
ev’t
 = (
Äf_gpiÙe_ev’ts_t
)((
ušt32_t
)event + (uint32_t));

690 ià(
	`Äf_gpiÙe_ev’t_is_£t
(
NRF_GPIOTE_EVENTS_PORT
))

692 
	`Äf_gpiÙe_ev’t_ş—r
(
NRF_GPIOTE_EVENTS_PORT
);

693 
¡©us
 |ğ(
ušt32_t
)
NRF_GPIOTE_INT_PORT_MASK
;

694 
	`Äf_gpio_pÜts_»ad
(0, 
GPIO_COUNT
, 
šput
);

698 ià(
¡©us
 & 
NRF_GPIOTE_INT_IN_MASK
)

700 
mask
 = (
ušt32_t
)
NRF_GPIOTE_INT_IN0_MASK
;

702 
i
 = 0; i < 
GPIOTE_CH_NUM
; i++)

704 ià(
mask
 & 
¡©us
)

706 
Äfx_gpiÙe_pš_t
 
pš
 = 
	`Äf_gpiÙe_ev’t_pš_g‘
(
i
);

707 
	`NRFX_LOG_DEBUG
("Ev’ˆš‚umb”: %d.", 
i
);

708 
Äf_gpiÙe_pŞ¬™y_t
 
pŞ¬™y
 = 
	`Äf_gpiÙe_ev’t_pŞ¬™y_g‘
(
i
);

709 
Äfx_gpiÙe_evt_hªdËr_t
 
hªdËr
 = 
	`chªÃl_hªdËr_g‘
(
i
);

710 
	`NRFX_LOG_DEBUG
("Pš: %d,…Ş¬™y: %d.", 
pš
, 
pŞ¬™y
);

711 ià(
hªdËr
)

713 
	`hªdËr
(
pš
, 
pŞ¬™y
);

716 
mask
 <<= 1;

720 ià(
¡©us
 & (
ušt32_t
)
NRF_GPIOTE_INT_PORT_MASK
)

723 
ušt32_t
 
pÜt_idx
;

724 
ušt8_t
 
»³©
 = 0;

725 
ušt32_t
 
toggË_mask
[
GPIO_COUNT
] = {0};

726 
ušt32_t
 
pšs_to_check
[
GPIO_COUNT
];

729 
pÜt_idx
 = 0;…Üt_idx < 
GPIO_COUNT
;…ort_idx++)

731 
pšs_to_check
[
pÜt_idx
] = 0xFFFFFFFF;

736 
»³©
 = 0;

738 
i
 = 0; i < 
NRFX_GPIOTE_CONFIG_NUM_OF_LOW_POWER_EVENTS
; i++)

740 
ušt8_t
 
pš_ªd_£n£
 = (ušt8_t)
m_cb
.
pÜt_hªdËrs_pšs
[
i
];

741 
Äfx_gpiÙe_pš_t
 
pš
 = (
pš_ªd_£n£
 & ~
SENSE_FIELD_MASK
);

743 ià((
m_cb
.
pÜt_hªdËrs_pšs
[
i
] !ğ
PIN_NOT_USED
)

744 && 
	`Äf_b™mask_b™_is_£t
(
pš
, 
pšs_to_check
))

746 
Äf_gpiÙe_pŞ¬™y_t
 
pŞ¬™y
 =

747 (
Äf_gpiÙe_pŞ¬™y_t
)((
pš_ªd_£n£
 &

748 
SENSE_FIELD_MASK
è>> 
SENSE_FIELD_POS
);

749 
Äfx_gpiÙe_evt_hªdËr_t
 
hªdËr
 =

750 
	`chªÃl_hªdËr_g‘
((
ušt32_t
)
	`chªÃl_pÜt_g‘
(
pš
));

751 ià(
hªdËr
 || (
pŞ¬™y
 =ğ
NRF_GPIOTE_POLARITY_TOGGLE
))

753 ià(
pŞ¬™y
 =ğ
NRF_GPIOTE_POLARITY_TOGGLE
)

755 
	`Äf_b™mask_b™_£t
(
pš
, 
toggË_mask
);

757 
Äf_gpio_pš_£n£_t
 
£n£
 = 
	`Äf_gpio_pš_£n£_g‘
(
pš
);

758 
ušt32_t
 
pš_¡©e
 = 
	`Äf_b™mask_b™_is_£t
(
pš
, 
šput
);

759 ià((
pš_¡©e
 && (
£n£
 =ğ
NRF_GPIO_PIN_SENSE_HIGH
)) ||

760 (!
pš_¡©e
 && (
£n£
 =ğ
NRF_GPIO_PIN_SENSE_LOW
)) )

762 
	`NRFX_LOG_DEBUG
("PORTƒv’ˆfÜ…š: %d,…Ş¬™y: %d.", 
pš
, 
pŞ¬™y
);

763 ià(
pŞ¬™y
 =ğ
NRF_GPIOTE_POLARITY_TOGGLE
)

765 
Äf_gpio_pš_£n£_t
 
Ãxt_£n£
 =

766 (
£n£
 =ğ
NRF_GPIO_PIN_SENSE_HIGH
) ?

767 
NRF_GPIO_PIN_SENSE_LOW
 :

768 
NRF_GPIO_PIN_SENSE_HIGH
;

769 
	`Äf_gpio_cfg_£n£_£t
(
pš
, 
Ãxt_£n£
);

770 ++
»³©
;

773 ià(
hªdËr
)

775 
	`hªdËr
(
pš
, 
pŞ¬™y
);

782 ià(
»³©
)

790 
ušt32_t
 
Ãw_šput
[
GPIO_COUNT
];

791 
boŞ
 
šput_unchªged
 = 
Œue
;

792 
	`Äf_gpio_pÜts_»ad
(0, 
GPIO_COUNT
, 
Ãw_šput
);

795 
pÜt_idx
 = 0;…Üt_idx < 
GPIO_COUNT
;…ort_idx++)

797 ià(
Ãw_šput
[
pÜt_idx
] !ğ
šput
[port_idx])

799 
šput_unchªged
 = 
çl£
;

804 ià(
šput_unchªged
)

807 
»³©
 = 0;

812 
pÜt_idx
 = 0;…Üt_idx < 
GPIO_COUNT
;…ort_idx++)

814 
šput
[
pÜt_idx
] = 
Ãw_šput
[port_idx];

815 
pšs_to_check
[
pÜt_idx
] = 
toggË_mask
[port_idx];

820 
»³©
);

822 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\modules\nrfx\drivers\src\nrfx_power_clock.c

41 
	~<Äfx.h
>

42 
	~<Äfx_pow”.h
>

43 
	~<Äfx_şock.h
>

46 #ià
NRFX_CHECK
(
NRFX_POWER_ENABLED
è&& NRFX_CHECK(
NRFX_CLOCK_ENABLED
)

47 
	$Äfx_pow”_şock_œq_hªdËr
()

49 
	`Äfx_pow”_œq_hªdËr
();

50 
	`Äfx_şock_œq_hªdËr
();

51 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\modules\nrfx\drivers\src\nrfx_uart.c

41 
	~<Äfx.h
>

43 #ià
NRFX_CHECK
(
NRFX_UART_ENABLED
)

45 #ià!
NRFX_CHECK
(
NRFX_UART0_ENABLED
)

49 
	~<Äfx_u¬t.h
>

50 
	~"´s/Äfx_´s.h
"

51 
	~<h®/Äf_gpio.h
>

53 
	#NRFX_LOG_MODULE
 
UART


	)

54 
	~<Äfx_log.h
>

56 
	#EVT_TO_STR
(
ev’t
) \

57 (
ev’t
 =ğ
NRF_UART_EVENT_ERROR
 ? "NRF_UART_EVENT_ERROR" : \

58 "UNKNOWN EVENT")

	)

61 
	#TX_COUNTER_ABORT_REQ_VALUE
 
UINT32_MAX


	)

65 * 
	mp_cÚ‹xt
;

66 
Äfx_u¬t_ev’t_hªdËr_t
 
	mhªdËr
;

67 
ušt8_t
 cÚ¡ * 
	mp_tx_bufãr
;

68 
ušt8_t
 * 
	mp_rx_bufãr
;

69 
ušt8_t
 * 
	mp_rx_£cÚd¬y_bufãr
;

70 
size_t
 
	mtx_bufãr_Ëngth
;

71 
size_t
 
	mrx_bufãr_Ëngth
;

72 
size_t
 
	mrx_£cÚd¬y_bufãr_Ëngth
;

73 vŞ©
size_t
 
	mtx_couÁ”
;

74 vŞ©
size_t
 
	mrx_couÁ”
;

75 vŞ©
boŞ
 
	mtx_abÜt
;

76 
boŞ
 
	mrx_’abËd
;

77 
Äfx_drv_¡©e_t
 
	m¡©e
;

78 } 
	tu¬t_cÚŒŞ_block_t
;

79 
u¬t_cÚŒŞ_block_t
 
	gm_cb
[
NRFX_UART_ENABLED_COUNT
];

81 
	$­¶y_cÚfig
(
Äfx_u¬t_t
 cÚ¡ * 
p_š¡ªû
,

82 
Äfx_u¬t_cÚfig_t
 cÚ¡ * 
p_cÚfig
)

84 ià(
p_cÚfig
->
p£Éxd
 !ğ
NRF_UART_PSEL_DISCONNECTED
)

86 
	`Äf_gpio_pš_£t
(
p_cÚfig
->
p£Éxd
);

87 
	`Äf_gpio_cfg_ouut
(
p_cÚfig
->
p£Éxd
);

89 ià(
p_cÚfig
->
p£Ìxd
 !ğ
NRF_UART_PSEL_DISCONNECTED
)

91 
	`Äf_gpio_cfg_šput
(
p_cÚfig
->
p£Ìxd
, 
NRF_GPIO_PIN_NOPULL
);

94 
	`Äf_u¬t_baud¿‹_£t
(
p_š¡ªû
->
p_»g
, 
p_cÚfig
->
baud¿‹
);

95 
	`Äf_u¬t_cÚfigu»
(
p_š¡ªû
->
p_»g
, 
p_cÚfig
->
·r™y
,…_cÚfig->
hwfc
);

96 
	`Äf_u¬t_txrx_pšs_£t
(
p_š¡ªû
->
p_»g
, 
p_cÚfig
->
p£Éxd
,…_cÚfig->
p£Ìxd
);

97 ià(
p_cÚfig
->
hwfc
 =ğ
NRF_UART_HWFC_ENABLED
)

99 ià(
p_cÚfig
->
p£lùs
 !ğ
NRF_UART_PSEL_DISCONNECTED
)

101 
	`Äf_gpio_cfg_šput
(
p_cÚfig
->
p£lùs
, 
NRF_GPIO_PIN_NOPULL
);

103 ià(
p_cÚfig
->
p£Ìts
 !ğ
NRF_UART_PSEL_DISCONNECTED
)

105 
	`Äf_gpio_pš_£t
(
p_cÚfig
->
p£Ìts
);

106 
	`Äf_gpio_cfg_ouut
(
p_cÚfig
->
p£Ìts
);

108 
	`Äf_u¬t_hwfc_pšs_£t
(
p_š¡ªû
->
p_»g
, 
p_cÚfig
->
p£Ìts
,…_cÚfig->
p£lùs
);

110 
	}
}

112 
	$š‹¼u±s_’abË
(
Äfx_u¬t_t
 cÚ¡ * 
p_š¡ªû
,

113 
ušt8_t
 
š‹¼u±_´iÜ™y
)

115 
	`Äf_u¬t_ev’t_ş—r
(
p_š¡ªû
->
p_»g
, 
NRF_UART_EVENT_TXDRDY
);

116 
	`Äf_u¬t_ev’t_ş—r
(
p_š¡ªû
->
p_»g
, 
NRF_UART_EVENT_RXTO
);

117 
	`Äf_u¬t_št_’abË
(
p_š¡ªû
->
p_»g
, 
NRF_UART_INT_MASK_TXDRDY
 |

118 
NRF_UART_INT_MASK_RXTO
);

119 
	`NRFX_IRQ_PRIORITY_SET
(
	`Äfx_g‘_œq_numb”
((*)
p_š¡ªû
->
p_»g
),

120 
š‹¼u±_´iÜ™y
);

121 
	`NRFX_IRQ_ENABLE
(
	`Äfx_g‘_œq_numb”
((*)
p_š¡ªû
->
p_»g
));

122 
	}
}

124 
	$š‹¼u±s_di§bË
(
Äfx_u¬t_t
 cÚ¡ * 
p_š¡ªû
)

126 
	`Äf_u¬t_št_di§bË
(
p_š¡ªû
->
p_»g
, 
NRF_UART_INT_MASK_RXDRDY
 |

127 
NRF_UART_INT_MASK_TXDRDY
 |

128 
NRF_UART_INT_MASK_ERROR
 |

129 
NRF_UART_INT_MASK_RXTO
);

130 
	`NRFX_IRQ_DISABLE
(
	`Äfx_g‘_œq_numb”
((*)
p_š¡ªû
->
p_»g
));

131 
	}
}

133 
	$pšs_to_deçuÉ
(
Äfx_u¬t_t
 cÚ¡ * 
p_š¡ªû
)

136 
ušt32_t
 
txd
;

137 
ušt32_t
 
rxd
;

138 
ušt32_t
 
¹s
;

139 
ušt32_t
 
ùs
;

141 
txd
 = 
	`Äf_u¬t_tx_pš_g‘
(
p_š¡ªû
->
p_»g
);

142 
rxd
 = 
	`Äf_u¬t_rx_pš_g‘
(
p_š¡ªû
->
p_»g
);

143 
¹s
 = 
	`Äf_u¬t_¹s_pš_g‘
(
p_š¡ªû
->
p_»g
);

144 
ùs
 = 
	`Äf_u¬t_ùs_pš_g‘
(
p_š¡ªû
->
p_»g
);

145 
	`Äf_u¬t_txrx_pšs_discÚÃù
(
p_š¡ªû
->
p_»g
);

146 
	`Äf_u¬t_hwfc_pšs_discÚÃù
(
p_š¡ªû
->
p_»g
);

148 ià(
txd
 !ğ
NRF_UART_PSEL_DISCONNECTED
)

150 
	`Äf_gpio_cfg_deçuÉ
(
txd
);

152 ià(
rxd
 !ğ
NRF_UART_PSEL_DISCONNECTED
)

154 
	`Äf_gpio_cfg_deçuÉ
(
rxd
);

156 ià(
ùs
 !ğ
NRF_UART_PSEL_DISCONNECTED
)

158 
	`Äf_gpio_cfg_deçuÉ
(
ùs
);

160 ià(
¹s
 !ğ
NRF_UART_PSEL_DISCONNECTED
)

162 
	`Äf_gpio_cfg_deçuÉ
(
¹s
);

164 
	}
}

166 
Äfx_”r_t
 
	$Äfx_u¬t_š™
(
Äfx_u¬t_t
 cÚ¡ * 
p_š¡ªû
,

167 
Äfx_u¬t_cÚfig_t
 cÚ¡ * 
p_cÚfig
,

168 
Äfx_u¬t_ev’t_hªdËr_t
 
ev’t_hªdËr
)

170 
	`NRFX_ASSERT
(
p_cÚfig
);

171 
u¬t_cÚŒŞ_block_t
 * 
p_cb
 = &
m_cb
[
p_š¡ªû
->
drv_š¡_idx
];

172 
Äfx_”r_t
 
”r_code
 = 
NRFX_SUCCESS
;

174 ià(
p_cb
->
¡©e
 !ğ
NRFX_DRV_STATE_UNINITIALIZED
)

176 
”r_code
 = 
NRFX_ERROR_INVALID_STATE
;

177 
	`NRFX_LOG_WARNING
("Function: %s,ƒrror code: %s.",

178 
__func__
,

179 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

180  
”r_code
;

183 #ià
	`NRFX_CHECK
(
NRFX_PRS_ENABLED
)

184 
Äfx_œq_hªdËr_t
 cÚ¡ 
œq_hªdËrs
[
NRFX_UART_ENABLED_COUNT
] = {

185 #ià
	`NRFX_CHECK
(
NRFX_UART0_ENABLED
)

186 
Äfx_u¬t_0_œq_hªdËr
,

189 ià(
	`Äfx_´s_acquœe
(
p_š¡ªû
->
p_»g
,

190 
œq_hªdËrs
[
p_š¡ªû
->
drv_š¡_idx
]è!ğ
NRFX_SUCCESS
)

192 
”r_code
 = 
NRFX_ERROR_BUSY
;

193 
	`NRFX_LOG_WARNING
("Function: %s,ƒrror code: %s.",

194 
__func__
,

195 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

196  
”r_code
;

200 
	`­¶y_cÚfig
(
p_š¡ªû
, 
p_cÚfig
);

202 
p_cb
->
hªdËr
 = 
ev’t_hªdËr
;

203 
p_cb
->
p_cÚ‹xt
 = 
p_cÚfig
->p_context;

205 ià(
p_cb
->
hªdËr
)

207 
	`š‹¼u±s_’abË
(
p_š¡ªû
, 
p_cÚfig
->
š‹¼u±_´iÜ™y
);

210 
	`Äf_u¬t_’abË
(
p_š¡ªû
->
p_»g
);

211 
p_cb
->
rx_bufãr_Ëngth
 = 0;

212 
p_cb
->
rx_£cÚd¬y_bufãr_Ëngth
 = 0;

213 
p_cb
->
rx_’abËd
 = 
çl£
;

214 
p_cb
->
tx_bufãr_Ëngth
 = 0;

215 
p_cb
->
¡©e
 = 
NRFX_DRV_STATE_INITIALIZED
;

216 
	`NRFX_LOG_WARNING
("Function: %s,ƒrror code: %s.",

217 
__func__
,

218 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

219  
”r_code
;

220 
	}
}

222 
	$Äfx_u¬t_unš™
(
Äfx_u¬t_t
 cÚ¡ * 
p_š¡ªû
)

224 
u¬t_cÚŒŞ_block_t
 * 
p_cb
 = &
m_cb
[
p_š¡ªû
->
drv_š¡_idx
];

226 
	`Äf_u¬t_di§bË
(
p_š¡ªû
->
p_»g
);

228 ià(
p_cb
->
hªdËr
)

230 
	`š‹¼u±s_di§bË
(
p_š¡ªû
);

233 
	`pšs_to_deçuÉ
(
p_š¡ªû
);

235 #ià
	`NRFX_CHECK
(
NRFX_PRS_ENABLED
)

236 
	`Äfx_´s_»Ëa£
(
p_š¡ªû
->
p_»g
);

239 
p_cb
->
¡©e
 = 
NRFX_DRV_STATE_UNINITIALIZED
;

240 
p_cb
->
hªdËr
 = 
NULL
;

241 
	`NRFX_LOG_INFO
("In¡ªû unš™Ÿlized: %d.", 
p_š¡ªû
->
drv_š¡_idx
);

242 
	}
}

244 
	$tx_by‹
(
NRF_UART_Ty³
 * 
p_u¬t
, 
u¬t_cÚŒŞ_block_t
 * 
p_cb
)

246 
	`Äf_u¬t_ev’t_ş—r
(
p_u¬t
, 
NRF_UART_EVENT_TXDRDY
);

247 
ušt8_t
 
txd
 = 
p_cb
->
p_tx_bufãr
[p_cb->
tx_couÁ”
];

248 
p_cb
->
tx_couÁ”
++;

249 
	`Äf_u¬t_txd_£t
(
p_u¬t
, 
txd
);

250 
	}
}

252 
boŞ
 
	$tx_blockšg
(
NRF_UART_Ty³
 * 
p_u¬t
, 
u¬t_cÚŒŞ_block_t
 * 
p_cb
)

254 
p_cb
->
tx_couÁ”
 <…_cb->
tx_bufãr_Ëngth
)

258 !
	`Äf_u¬t_ev’t_check
(
p_u¬t
, 
NRF_UART_EVENT_TXDRDY
))

260 ià(
p_cb
->
tx_abÜt
)

262  
çl£
;

266 
	`tx_by‹
(
p_u¬t
, 
p_cb
);

269  
Œue
;

270 
	}
}

272 
Äfx_”r_t
 
	$Äfx_u¬t_tx
(
Äfx_u¬t_t
 cÚ¡ * 
p_š¡ªû
,

273 
ušt8_t
 cÚ¡ * 
p_d©a
,

274 
size_t
 
Ëngth
)

276 
u¬t_cÚŒŞ_block_t
 * 
p_cb
 = &
m_cb
[
p_š¡ªû
->
drv_š¡_idx
];

277 
	`NRFX_ASSERT
(
p_cb
->
¡©e
 =ğ
NRFX_DRV_STATE_INITIALIZED
);

278 
	`NRFX_ASSERT
(
p_d©a
);

279 
	`NRFX_ASSERT
(
Ëngth
 > 0);

281 
Äfx_”r_t
 
”r_code
;

283 ià(
	`Äfx_u¬t_tx_š_´og»ss
(
p_š¡ªû
))

285 
”r_code
 = 
NRFX_ERROR_BUSY
;

286 
	`NRFX_LOG_WARNING
("Function: %s,ƒrror code: %s.",

287 
__func__
,

288 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

289  
”r_code
;

291 
p_cb
->
tx_bufãr_Ëngth
 = 
Ëngth
;

292 
p_cb
->
p_tx_bufãr
 = 
p_d©a
;

293 
p_cb
->
tx_couÁ”
 = 0;

294 
p_cb
->
tx_abÜt
 = 
çl£
;

296 
	`NRFX_LOG_INFO
("T¿nsã¸tx_Ën: %d.", 
p_cb
->
tx_bufãr_Ëngth
);

297 
	`NRFX_LOG_DEBUG
("Tx data:");

298 
	`NRFX_LOG_HEXDUMP_DEBUG
(
p_cb
->
p_tx_bufãr
,

299 
p_cb
->
tx_bufãr_Ëngth
 * Õ_cb->
p_tx_bufãr
[0]));

301 
”r_code
 = 
NRFX_SUCCESS
;

303 
	`Äf_u¬t_ev’t_ş—r
(
p_š¡ªû
->
p_»g
, 
NRF_UART_EVENT_TXDRDY
);

304 
	`Äf_u¬t_sk_Œigg”
(
p_š¡ªû
->
p_»g
, 
NRF_UART_TASK_STARTTX
);

306 
	`tx_by‹
(
p_š¡ªû
->
p_»g
, 
p_cb
);

308 ià(
p_cb
->
hªdËr
 =ğ
NULL
)

310 ià(!
	`tx_blockšg
(
p_š¡ªû
->
p_»g
, 
p_cb
))

313 
”r_code
 = 
NRFX_ERROR_FORBIDDEN
;

318 !
	`Äf_u¬t_ev’t_check
(
p_š¡ªû
->
p_»g
, 
NRF_UART_EVENT_TXDRDY
))

320 
	`Äf_u¬t_sk_Œigg”
(
p_š¡ªû
->
p_»g
, 
NRF_UART_TASK_STOPTX
);

322 
p_cb
->
tx_bufãr_Ëngth
 = 0;

325 
	`NRFX_LOG_INFO
("FunùiÚ: %s,ƒ¼Ü code: %s.", 
__func__
, 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

326  
”r_code
;

327 
	}
}

329 
boŞ
 
	$Äfx_u¬t_tx_š_´og»ss
(
Äfx_u¬t_t
 cÚ¡ * 
p_š¡ªû
)

331  (
m_cb
[
p_š¡ªû
->
drv_š¡_idx
].
tx_bufãr_Ëngth
 != 0);

332 
	}
}

334 
	$rx_’abË
(
Äfx_u¬t_t
 cÚ¡ * 
p_š¡ªû
)

336 
	`Äf_u¬t_ev’t_ş—r
(
p_š¡ªû
->
p_»g
, 
NRF_UART_EVENT_ERROR
);

337 
	`Äf_u¬t_ev’t_ş—r
(
p_š¡ªû
->
p_»g
, 
NRF_UART_EVENT_RXDRDY
);

338 
	`Äf_u¬t_sk_Œigg”
(
p_š¡ªû
->
p_»g
, 
NRF_UART_TASK_STARTRX
);

339 
	}
}

341 
	$rx_by‹
(
NRF_UART_Ty³
 * 
p_u¬t
, 
u¬t_cÚŒŞ_block_t
 * 
p_cb
)

343 ià(!
p_cb
->
rx_bufãr_Ëngth
)

345 
	`Äf_u¬t_ev’t_ş—r
(
p_u¬t
, 
NRF_UART_EVENT_RXDRDY
);

347 (è
	`Äf_u¬t_rxd_g‘
(
p_u¬t
);

350 
	`Äf_u¬t_ev’t_ş—r
(
p_u¬t
, 
NRF_UART_EVENT_RXDRDY
);

351 
p_cb
->
p_rx_bufãr
[p_cb->
rx_couÁ”
] = 
	`Äf_u¬t_rxd_g‘
(
p_u¬t
);

352 
p_cb
->
rx_couÁ”
++;

353 
	}
}

355 
Äfx_”r_t
 
	$Äfx_u¬t_rx
(
Äfx_u¬t_t
 cÚ¡ * 
p_š¡ªû
,

356 
ušt8_t
 * 
p_d©a
,

357 
size_t
 
Ëngth
)

359 
u¬t_cÚŒŞ_block_t
 * 
p_cb
 = &
m_cb
[
p_š¡ªû
->
drv_š¡_idx
];

361 
	`NRFX_ASSERT
(
m_cb
[
p_š¡ªû
->
drv_š¡_idx
].
¡©e
 =ğ
NRFX_DRV_STATE_INITIALIZED
);

362 
	`NRFX_ASSERT
(
p_d©a
);

363 
	`NRFX_ASSERT
(
Ëngth
 > 0);

365 
Äfx_”r_t
 
”r_code
;

367 
boŞ
 
£cÚd_bufãr
 = 
çl£
;

369 ià(
p_cb
->
hªdËr
)

371 
	`Äf_u¬t_št_di§bË
(
p_š¡ªû
->
p_»g
, 
NRF_UART_INT_MASK_RXDRDY
 |

372 
NRF_UART_INT_MASK_ERROR
);

374 ià(
p_cb
->
rx_bufãr_Ëngth
 != 0)

376 ià(
p_cb
->
rx_£cÚd¬y_bufãr_Ëngth
 != 0)

378 ià(
p_cb
->
hªdËr
)

380 
	`Äf_u¬t_št_’abË
(
p_š¡ªû
->
p_»g
, 
NRF_UART_INT_MASK_RXDRDY
 |

381 
NRF_UART_INT_MASK_ERROR
);

383 
”r_code
 = 
NRFX_ERROR_BUSY
;

384 
	`NRFX_LOG_WARNING
("Function: %s,ƒrror code: %s.",

385 
__func__
,

386 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

387  
”r_code
;

389 
£cÚd_bufãr
 = 
Œue
;

392 ià(!
£cÚd_bufãr
)

394 
p_cb
->
rx_bufãr_Ëngth
 = 
Ëngth
;

395 
p_cb
->
p_rx_bufãr
 = 
p_d©a
;

396 
p_cb
->
rx_couÁ”
 = 0;

397 
p_cb
->
rx_£cÚd¬y_bufãr_Ëngth
 = 0;

401 
p_cb
->
p_rx_£cÚd¬y_bufãr
 = 
p_d©a
;

402 
p_cb
->
rx_£cÚd¬y_bufãr_Ëngth
 = 
Ëngth
;

405 
	`NRFX_LOG_INFO
("T¿nsã¸rx_Ën: %d.", 
Ëngth
);

407 ià((!
p_cb
->
rx_’abËd
è&& (!
£cÚd_bufãr
))

409 
	`rx_’abË
(
p_š¡ªû
);

412 ià(
p_cb
->
hªdËr
 =ğ
NULL
)

414 
	`Äf_u¬t_ev’t_ş—r
(
p_š¡ªû
->
p_»g
, 
NRF_UART_EVENT_RXTO
);

416 
boŞ
 
rxrdy
;

417 
boŞ
 
rxto
;

418 
boŞ
 
”rÜ
;

423 
”rÜ
 = 
	`Äf_u¬t_ev’t_check
(
p_š¡ªû
->
p_»g
, 
NRF_UART_EVENT_ERROR
);

424 
rxrdy
 = 
	`Äf_u¬t_ev’t_check
(
p_š¡ªû
->
p_»g
, 
NRF_UART_EVENT_RXDRDY
);

425 
rxto
 = 
	`Äf_u¬t_ev’t_check
(
p_š¡ªû
->
p_»g
, 
NRF_UART_EVENT_RXTO
);

426 } (!
rxrdy
è&& (!
rxto
è&& (!
”rÜ
));

428 ià(
”rÜ
 || 
rxto
)

432 
	`rx_by‹
(
p_š¡ªû
->
p_»g
, 
p_cb
);

433 } 
p_cb
->
rx_bufãr_Ëngth
 >…_cb->
rx_couÁ”
);

435 
p_cb
->
rx_bufãr_Ëngth
 = 0;

436 ià(
”rÜ
)

438 
”r_code
 = 
NRFX_ERROR_INTERNAL
;

439 
	`NRFX_LOG_WARNING
("Function: %s,ƒrror code: %s.",

440 
__func__
,

441 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

442  
”r_code
;

445 ià(
rxto
)

447 
”r_code
 = 
NRFX_ERROR_FORBIDDEN
;

448 
	`NRFX_LOG_WARNING
("Function: %s,ƒrror code: %s.",

449 
__func__
,

450 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

451  
”r_code
;

454 ià(
p_cb
->
rx_’abËd
)

456 
	`Äf_u¬t_sk_Œigg”
(
p_š¡ªû
->
p_»g
, 
NRF_UART_TASK_STARTRX
);

461 
	`Äf_u¬t_sk_Œigg”
(
p_š¡ªû
->
p_»g
, 
NRF_UART_TASK_STOPRX
);

466 
	`Äf_u¬t_št_’abË
(
p_š¡ªû
->
p_»g
, 
NRF_UART_INT_MASK_RXDRDY
 |

467 
NRF_UART_INT_MASK_ERROR
);

469 
”r_code
 = 
NRFX_SUCCESS
;

470 
	`NRFX_LOG_INFO
("FunùiÚ: %s,ƒ¼Ü code: %s.", 
__func__
, 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

471  
”r_code
;

472 
	}
}

474 
boŞ
 
	$Äfx_u¬t_rx_»ady
(
Äfx_u¬t_t
 cÚ¡ * 
p_š¡ªû
)

476  
	`Äf_u¬t_ev’t_check
(
p_š¡ªû
->
p_»g
, 
NRF_UART_EVENT_RXDRDY
);

477 
	}
}

479 
	$Äfx_u¬t_rx_’abË
(
Äfx_u¬t_t
 cÚ¡ * 
p_š¡ªû
)

481 ià(!
m_cb
[
p_š¡ªû
->
drv_š¡_idx
].
rx_’abËd
)

483 
	`rx_’abË
(
p_š¡ªû
);

484 
m_cb
[
p_š¡ªû
->
drv_š¡_idx
].
rx_’abËd
 = 
Œue
;

486 
	}
}

488 
	$Äfx_u¬t_rx_di§bË
(
Äfx_u¬t_t
 cÚ¡ * 
p_š¡ªû
)

490 
	`Äf_u¬t_sk_Œigg”
(
p_š¡ªû
->
p_»g
, 
NRF_UART_TASK_STOPRX
);

491 
m_cb
[
p_š¡ªû
->
drv_š¡_idx
].
rx_’abËd
 = 
çl£
;

492 
	}
}

494 
ušt32_t
 
	$Äfx_u¬t_”rÜ¤c_g‘
(
Äfx_u¬t_t
 cÚ¡ * 
p_š¡ªû
)

496 
	`Äf_u¬t_ev’t_ş—r
(
p_š¡ªû
->
p_»g
, 
NRF_UART_EVENT_ERROR
);

497  
	`Äf_u¬t_”rÜ¤c_g‘_ªd_ş—r
(
p_š¡ªû
->
p_»g
);

498 
	}
}

500 
	$rx_dÚe_ev’t
(
u¬t_cÚŒŞ_block_t
 * 
p_cb
,

501 
size_t
 
by‹s
,

502 
ušt8_t
 * 
p_d©a
)

504 
Äfx_u¬t_ev’t_t
 
ev’t
;

506 
ev’t
.
ty³
 = 
NRFX_UART_EVT_RX_DONE
;

507 
ev’t
.
d©a
.
rxtx
.
by‹s
 = bytes;

508 
ev’t
.
d©a
.
rxtx
.
p_d©a
 =…_data;

510 
p_cb
->
	`hªdËr
(&
ev’t
,…_cb->
p_cÚ‹xt
);

511 
	}
}

513 
	$tx_dÚe_ev’t
(
u¬t_cÚŒŞ_block_t
 * 
p_cb
,

514 
size_t
 
by‹s
)

516 
Äfx_u¬t_ev’t_t
 
ev’t
;

518 
ev’t
.
ty³
 = 
NRFX_UART_EVT_TX_DONE
;

519 
ev’t
.
d©a
.
rxtx
.
by‹s
 = bytes;

520 
ev’t
.
d©a
.
rxtx
.
p_d©a
 = (
ušt8_t
 *)
p_cb
->
p_tx_bufãr
;

522 
p_cb
->
tx_bufãr_Ëngth
 = 0;

524 
p_cb
->
	`hªdËr
(&
ev’t
,…_cb->
p_cÚ‹xt
);

525 
	}
}

527 
	$Äfx_u¬t_tx_abÜt
(
Äfx_u¬t_t
 cÚ¡ * 
p_š¡ªû
)

529 
u¬t_cÚŒŞ_block_t
 * 
p_cb
 = &
m_cb
[
p_š¡ªû
->
drv_š¡_idx
];

531 
p_cb
->
tx_abÜt
 = 
Œue
;

532 
	`Äf_u¬t_sk_Œigg”
(
p_š¡ªû
->
p_»g
, 
NRF_UART_TASK_STOPTX
);

533 ià(
p_cb
->
hªdËr
)

535 
	`tx_dÚe_ev’t
(
p_cb
,…_cb->
tx_couÁ”
);

538 
	`NRFX_LOG_INFO
("TXransaction‡borted.");

539 
	}
}

541 
	$Äfx_u¬t_rx_abÜt
(
Äfx_u¬t_t
 cÚ¡ * 
p_š¡ªû
)

543 
	`Äf_u¬t_št_di§bË
(
p_š¡ªû
->
p_»g
, 
NRF_UART_INT_MASK_RXDRDY
 |

544 
NRF_UART_INT_MASK_ERROR
);

545 
	`Äf_u¬t_sk_Œigg”
(
p_š¡ªû
->
p_»g
, 
NRF_UART_TASK_STOPRX
);

547 
	`NRFX_LOG_INFO
("RXransaction‡borted.");

548 
	}
}

550 
	$u¬t_œq_hªdËr
(
NRF_UART_Ty³
 * 
p_u¬t
,

551 
u¬t_cÚŒŞ_block_t
 * 
p_cb
)

553 ià(
	`Äf_u¬t_št_’abË_check
(
p_u¬t
, 
NRF_UART_INT_MASK_ERROR
) &&

554 
	`Äf_u¬t_ev’t_check
(
p_u¬t
, 
NRF_UART_EVENT_ERROR
))

556 
Äfx_u¬t_ev’t_t
 
ev’t
;

557 
	`Äf_u¬t_ev’t_ş—r
(
p_u¬t
, 
NRF_UART_EVENT_ERROR
);

558 
	`NRFX_LOG_DEBUG
("Ev’t: %s.", 
	`EVT_TO_STR
(
NRF_UART_EVENT_ERROR
));

559 
	`Äf_u¬t_št_di§bË
(
p_u¬t
, 
NRF_UART_INT_MASK_RXDRDY
 |

560 
NRF_UART_INT_MASK_ERROR
);

561 ià(!
p_cb
->
rx_’abËd
)

563 
	`Äf_u¬t_sk_Œigg”
(
p_u¬t
, 
NRF_UART_TASK_STOPRX
);

565 
ev’t
.
ty³
 = 
NRFX_UART_EVT_ERROR
;

566 
ev’t
.
d©a
.
”rÜ
.
”rÜ_mask
 = 
	`Äf_u¬t_”rÜ¤c_g‘_ªd_ş—r
(
p_u¬t
);

567 
ev’t
.
d©a
.
”rÜ
.
rxtx
.
by‹s
 = 
p_cb
->
rx_bufãr_Ëngth
;

568 
ev’t
.
d©a
.
”rÜ
.
rxtx
.
p_d©a
 = 
p_cb
->
p_rx_bufãr
;

571 
p_cb
->
rx_bufãr_Ëngth
 = 0;

572 
p_cb
->
rx_£cÚd¬y_bufãr_Ëngth
 = 0;

574 
p_cb
->
	`hªdËr
(&
ev’t
,p_cb->
p_cÚ‹xt
);

576 ià(
	`Äf_u¬t_št_’abË_check
(
p_u¬t
, 
NRF_UART_INT_MASK_RXDRDY
) &&

577 
	`Äf_u¬t_ev’t_check
(
p_u¬t
, 
NRF_UART_EVENT_RXDRDY
))

579 
	`rx_by‹
(
p_u¬t
, 
p_cb
);

580 ià(
p_cb
->
rx_bufãr_Ëngth
 =ğp_cb->
rx_couÁ”
)

582 ià(
p_cb
->
rx_£cÚd¬y_bufãr_Ëngth
)

584 
ušt8_t
 * 
p_d©a
 = 
p_cb
->
p_rx_bufãr
;

585 
size_t
 
rx_couÁ”
 = 
p_cb
->rx_counter;

588 
p_cb
->
rx_bufãr_Ëngth
 =…_cb->
rx_£cÚd¬y_bufãr_Ëngth
;

589 
p_cb
->
p_rx_bufãr
 =…_cb->
p_rx_£cÚd¬y_bufãr
;

590 
p_cb
->
rx_£cÚd¬y_bufãr_Ëngth
 = 0;

591 
p_cb
->
rx_couÁ”
 = 0;

592 
	`rx_dÚe_ev’t
(
p_cb
, 
rx_couÁ”
, 
p_d©a
);

596 ià(!
p_cb
->
rx_’abËd
)

598 
	`Äf_u¬t_sk_Œigg”
(
p_u¬t
, 
NRF_UART_TASK_STOPRX
);

600 
	`Äf_u¬t_št_di§bË
(
p_u¬t
, 
NRF_UART_INT_MASK_RXDRDY
 |

601 
NRF_UART_INT_MASK_ERROR
);

602 
p_cb
->
rx_bufãr_Ëngth
 = 0;

603 
	`rx_dÚe_ev’t
(
p_cb
,…_cb->
rx_couÁ”
,…_cb->
p_rx_bufãr
);

608 ià(
	`Äf_u¬t_ev’t_check
(
p_u¬t
, 
NRF_UART_EVENT_TXDRDY
))

610 ià(
p_cb
->
tx_couÁ”
 <…_cb->
tx_bufãr_Ëngth
 &&

611 !
p_cb
->
tx_abÜt
)

613 
	`tx_by‹
(
p_u¬t
, 
p_cb
);

617 
	`Äf_u¬t_ev’t_ş—r
(
p_u¬t
, 
NRF_UART_EVENT_TXDRDY
);

618 ià(
p_cb
->
tx_bufãr_Ëngth
)

620 
	`tx_dÚe_ev’t
(
p_cb
,…_cb->
tx_bufãr_Ëngth
);

625 ià(
	`Äf_u¬t_ev’t_check
(
p_u¬t
, 
NRF_UART_EVENT_RXTO
))

627 
	`Äf_u¬t_ev’t_ş—r
(
p_u¬t
, 
NRF_UART_EVENT_RXTO
);

630 ià(
p_cb
->
rx_’abËd
)

632 
	`Äf_u¬t_sk_Œigg”
(
p_u¬t
, 
NRF_UART_TASK_STARTRX
);

634 ià(
p_cb
->
rx_bufãr_Ëngth
)

636 
p_cb
->
rx_bufãr_Ëngth
 = 0;

637 
	`rx_dÚe_ev’t
(
p_cb
,…_cb->
rx_couÁ”
,…_cb->
p_rx_bufãr
);

640 
	}
}

642 #ià
NRFX_CHECK
(
NRFX_UART0_ENABLED
)

643 
	$Äfx_u¬t_0_œq_hªdËr
()

645 
	`u¬t_œq_hªdËr
(
NRF_UART0
, &
m_cb
[
NRFX_UART0_INST_IDX
]);

646 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\modules\nrfx\drivers\src\nrfx_uarte.c

41 
	~<Äfx.h
>

43 #ià
NRFX_CHECK
(
NRFX_UARTE_ENABLED
)

45 #ià!(
NRFX_CHECK
(
NRFX_UARTE0_ENABLED
è|| NRFX_CHECK(
NRFX_UARTE1_ENABLED
))

49 
	~<Äfx_u¬‹.h
>

50 
	~"´s/Äfx_´s.h
"

51 
	~<h®/Äf_gpio.h
>

53 
	#NRFX_LOG_MODULE
 
UARTE


	)

54 
	~<Äfx_log.h
>

56 
	#EVT_TO_STR
(
ev’t
) \

57 (
ev’t
 =ğ
NRF_UARTE_EVENT_ERROR
 ? "NRF_UARTE_EVENT_ERROR" : \

58 "UNKNOWN EVENT")

	)

60 
	#UARTEX_LENGTH_VALIDATE
(
³rh”®
, 
drv_š¡_idx
, 
Ën1
, 
Ën2
) \

61 (((
drv_š¡_idx
è=ğ
	`NRFX_CONCAT_3
(
NRFX_
, 
³rh”®
, 
_INST_IDX
)) && \

62 
	`NRFX_EASYDMA_LENGTH_VALIDATE
(
³rh”®
, 
Ën1
, 
Ën2
))

	)

64 #ià
NRFX_CHECK
(
NRFX_UARTE0_ENABLED
)

65 
	#UARTE0_LENGTH_VALIDATE
(...è
	`UARTEX_LENGTH_VALIDATE
(
UARTE0
, 
__VA_ARGS__
)

	)

67 
	#UARTE0_LENGTH_VALIDATE
(...è0

	)

70 #ià
NRFX_CHECK
(
NRFX_UARTE1_ENABLED
)

71 
	#UARTE1_LENGTH_VALIDATE
(...è
	`UARTEX_LENGTH_VALIDATE
(
UARTE1
, 
__VA_ARGS__
)

	)

73 
	#UARTE1_LENGTH_VALIDATE
(...è0

	)

76 
	#UARTE_LENGTH_VALIDATE
(
drv_š¡_idx
, 
Ëngth
) \

77 (
	`UARTE0_LENGTH_VALIDATE
(
drv_š¡_idx
, 
Ëngth
, 0) || \

78 
	`UARTE1_LENGTH_VALIDATE
(
drv_š¡_idx
, 
Ëngth
, 0))

	)

83 * 
	mp_cÚ‹xt
;

84 
Äfx_u¬‹_ev’t_hªdËr_t
 
	mhªdËr
;

85 
ušt8_t
 cÚ¡ * 
	mp_tx_bufãr
;

86 
ušt8_t
 * 
	mp_rx_bufãr
;

87 
ušt8_t
 * 
	mp_rx_£cÚd¬y_bufãr
;

88 
size_t
 
	mtx_bufãr_Ëngth
;

89 
size_t
 
	mrx_bufãr_Ëngth
;

90 
size_t
 
	mrx_£cÚd¬y_bufãr_Ëngth
;

91 
Äfx_drv_¡©e_t
 
	m¡©e
;

92 } 
	tu¬‹_cÚŒŞ_block_t
;

93 
u¬‹_cÚŒŞ_block_t
 
	gm_cb
[
NRFX_UARTE_ENABLED_COUNT
];

95 
	$­¶y_cÚfig
(
Äfx_u¬‹_t
 cÚ¡ * 
p_š¡ªû
,

96 
Äfx_u¬‹_cÚfig_t
 cÚ¡ * 
p_cÚfig
)

98 ià(
p_cÚfig
->
p£Éxd
 !ğ
NRF_UARTE_PSEL_DISCONNECTED
)

100 
	`Äf_gpio_pš_£t
(
p_cÚfig
->
p£Éxd
);

101 
	`Äf_gpio_cfg_ouut
(
p_cÚfig
->
p£Éxd
);

103 ià(
p_cÚfig
->
p£Ìxd
 !ğ
NRF_UARTE_PSEL_DISCONNECTED
)

105 
	`Äf_gpio_cfg_šput
(
p_cÚfig
->
p£Ìxd
, 
NRF_GPIO_PIN_NOPULL
);

108 
	`Äf_u¬‹_baud¿‹_£t
(
p_š¡ªû
->
p_»g
, 
p_cÚfig
->
baud¿‹
);

109 
	`Äf_u¬‹_cÚfigu»
(
p_š¡ªû
->
p_»g
, 
p_cÚfig
->
·r™y
,…_cÚfig->
hwfc
);

110 
	`Äf_u¬‹_txrx_pšs_£t
(
p_š¡ªû
->
p_»g
, 
p_cÚfig
->
p£Éxd
,…_cÚfig->
p£Ìxd
);

111 ià(
p_cÚfig
->
hwfc
 =ğ
NRF_UARTE_HWFC_ENABLED
)

113 ià(
p_cÚfig
->
p£lùs
 !ğ
NRF_UARTE_PSEL_DISCONNECTED
)

115 
	`Äf_gpio_cfg_šput
(
p_cÚfig
->
p£lùs
, 
NRF_GPIO_PIN_NOPULL
);

117 ià(
p_cÚfig
->
p£Ìts
 !ğ
NRF_UARTE_PSEL_DISCONNECTED
)

119 
	`Äf_gpio_pš_£t
(
p_cÚfig
->
p£Ìts
);

120 
	`Äf_gpio_cfg_ouut
(
p_cÚfig
->
p£Ìts
);

122 
	`Äf_u¬‹_hwfc_pšs_£t
(
p_š¡ªû
->
p_»g
, 
p_cÚfig
->
p£Ìts
,…_cÚfig->
p£lùs
);

124 
	}
}

126 
	$š‹¼u±s_’abË
(
Äfx_u¬‹_t
 cÚ¡ * 
p_š¡ªû
,

127 
ušt8_t
 
š‹¼u±_´iÜ™y
)

129 
	`Äf_u¬‹_ev’t_ş—r
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_EVENT_ENDRX
);

130 
	`Äf_u¬‹_ev’t_ş—r
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_EVENT_ENDTX
);

131 
	`Äf_u¬‹_ev’t_ş—r
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_EVENT_ERROR
);

132 
	`Äf_u¬‹_ev’t_ş—r
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_EVENT_RXTO
);

133 
	`Äf_u¬‹_št_’abË
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_INT_ENDRX_MASK
 |

134 
NRF_UARTE_INT_ENDTX_MASK
 |

135 
NRF_UARTE_INT_ERROR_MASK
 |

136 
NRF_UARTE_INT_RXTO_MASK
);

137 
	`NRFX_IRQ_PRIORITY_SET
(
	`Äfx_g‘_œq_numb”
((*)
p_š¡ªû
->
p_»g
),

138 
š‹¼u±_´iÜ™y
);

139 
	`NRFX_IRQ_ENABLE
(
	`Äfx_g‘_œq_numb”
((*)
p_š¡ªû
->
p_»g
));

140 
	}
}

142 
	$š‹¼u±s_di§bË
(
Äfx_u¬‹_t
 cÚ¡ * 
p_š¡ªû
)

144 
	`Äf_u¬‹_št_di§bË
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_INT_ENDRX_MASK
 |

145 
NRF_UARTE_INT_ENDTX_MASK
 |

146 
NRF_UARTE_INT_ERROR_MASK
 |

147 
NRF_UARTE_INT_RXTO_MASK
);

148 
	`NRFX_IRQ_DISABLE
(
	`Äfx_g‘_œq_numb”
((*)
p_š¡ªû
->
p_»g
));

149 
	}
}

151 
	$pšs_to_deçuÉ
(
Äfx_u¬‹_t
 cÚ¡ * 
p_š¡ªû
)

154 
ušt32_t
 
txd
;

155 
ušt32_t
 
rxd
;

156 
ušt32_t
 
¹s
;

157 
ušt32_t
 
ùs
;

159 
txd
 = 
	`Äf_u¬‹_tx_pš_g‘
(
p_š¡ªû
->
p_»g
);

160 
rxd
 = 
	`Äf_u¬‹_rx_pš_g‘
(
p_š¡ªû
->
p_»g
);

161 
¹s
 = 
	`Äf_u¬‹_¹s_pš_g‘
(
p_š¡ªû
->
p_»g
);

162 
ùs
 = 
	`Äf_u¬‹_ùs_pš_g‘
(
p_š¡ªû
->
p_»g
);

163 
	`Äf_u¬‹_txrx_pšs_discÚÃù
(
p_š¡ªû
->
p_»g
);

164 
	`Äf_u¬‹_hwfc_pšs_discÚÃù
(
p_š¡ªû
->
p_»g
);

166 ià(
txd
 !ğ
NRF_UARTE_PSEL_DISCONNECTED
)

168 
	`Äf_gpio_cfg_deçuÉ
(
txd
);

170 ià(
rxd
 !ğ
NRF_UARTE_PSEL_DISCONNECTED
)

172 
	`Äf_gpio_cfg_deçuÉ
(
rxd
);

174 ià(
ùs
 !ğ
NRF_UARTE_PSEL_DISCONNECTED
)

176 
	`Äf_gpio_cfg_deçuÉ
(
ùs
);

178 ià(
¹s
 !ğ
NRF_UARTE_PSEL_DISCONNECTED
)

180 
	`Äf_gpio_cfg_deçuÉ
(
¹s
);

182 
	}
}

184 
Äfx_”r_t
 
	$Äfx_u¬‹_š™
(
Äfx_u¬‹_t
 cÚ¡ * 
p_š¡ªû
,

185 
Äfx_u¬‹_cÚfig_t
 cÚ¡ * 
p_cÚfig
,

186 
Äfx_u¬‹_ev’t_hªdËr_t
 
ev’t_hªdËr
)

188 
	`NRFX_ASSERT
(
p_cÚfig
);

189 
u¬‹_cÚŒŞ_block_t
 * 
p_cb
 = &
m_cb
[
p_š¡ªû
->
drv_š¡_idx
];

190 
Äfx_”r_t
 
”r_code
 = 
NRFX_SUCCESS
;

192 ià(
p_cb
->
¡©e
 !ğ
NRFX_DRV_STATE_UNINITIALIZED
)

194 
”r_code
 = 
NRFX_ERROR_INVALID_STATE
;

195 
	`NRFX_LOG_WARNING
("Function: %s,ƒrror code: %s.",

196 
__func__
,

197 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

198  
”r_code
;

201 #ià
	`NRFX_CHECK
(
NRFX_PRS_ENABLED
)

202 
Äfx_œq_hªdËr_t
 cÚ¡ 
œq_hªdËrs
[
NRFX_UARTE_ENABLED_COUNT
] = {

203 #ià
	`NRFX_CHECK
(
NRFX_UARTE0_ENABLED
)

204 
Äfx_u¬‹_0_œq_hªdËr
,

206 #ià
	`NRFX_CHECK
(
NRFX_UARTE1_ENABLED
)

207 
Äfx_u¬‹_1_œq_hªdËr
,

210 ià(
	`Äfx_´s_acquœe
(
p_š¡ªû
->
p_»g
,

211 
œq_hªdËrs
[
p_š¡ªû
->
drv_š¡_idx
]è!ğ
NRFX_SUCCESS
)

213 
”r_code
 = 
NRFX_ERROR_BUSY
;

214 
	`NRFX_LOG_WARNING
("Function: %s,ƒrror code: %s.",

215 
__func__
,

216 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

217  
”r_code
;

221 
	`­¶y_cÚfig
(
p_š¡ªû
, 
p_cÚfig
);

223 
p_cb
->
hªdËr
 = 
ev’t_hªdËr
;

224 
p_cb
->
p_cÚ‹xt
 = 
p_cÚfig
->p_context;

226 ià(
p_cb
->
hªdËr
)

228 
	`š‹¼u±s_’abË
(
p_š¡ªû
, 
p_cÚfig
->
š‹¼u±_´iÜ™y
);

231 
	`Äf_u¬‹_’abË
(
p_š¡ªû
->
p_»g
);

232 
p_cb
->
rx_bufãr_Ëngth
 = 0;

233 
p_cb
->
rx_£cÚd¬y_bufãr_Ëngth
 = 0;

234 
p_cb
->
tx_bufãr_Ëngth
 = 0;

235 
p_cb
->
¡©e
 = 
NRFX_DRV_STATE_INITIALIZED
;

236 
	`NRFX_LOG_WARNING
("Function: %s,ƒrror code: %s.",

237 
__func__
,

238 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

239  
”r_code
;

240 
	}
}

242 
	$Äfx_u¬‹_unš™
(
Äfx_u¬‹_t
 cÚ¡ * 
p_š¡ªû
)

244 
u¬‹_cÚŒŞ_block_t
 * 
p_cb
 = &
m_cb
[
p_š¡ªû
->
drv_š¡_idx
];

246 
	`Äf_u¬‹_di§bË
(
p_š¡ªû
->
p_»g
);

248 ià(
p_cb
->
hªdËr
)

250 
	`š‹¼u±s_di§bË
(
p_š¡ªû
);

253 
	`pšs_to_deçuÉ
(
p_š¡ªû
);

255 #ià
	`NRFX_CHECK
(
NRFX_PRS_ENABLED
)

256 
	`Äfx_´s_»Ëa£
(
p_š¡ªû
->
p_»g
);

259 
p_cb
->
¡©e
 = 
NRFX_DRV_STATE_UNINITIALIZED
;

260 
p_cb
->
hªdËr
 = 
NULL
;

261 
	`NRFX_LOG_INFO
("In¡ªû unš™Ÿlized: %d.", 
p_š¡ªû
->
drv_š¡_idx
);

262 
	}
}

264 
Äfx_”r_t
 
	$Äfx_u¬‹_tx
(
Äfx_u¬‹_t
 cÚ¡ * 
p_š¡ªû
,

265 
ušt8_t
 cÚ¡ * 
p_d©a
,

266 
size_t
 
Ëngth
)

268 
u¬‹_cÚŒŞ_block_t
 * 
p_cb
 = &
m_cb
[
p_š¡ªû
->
drv_š¡_idx
];

269 
	`NRFX_ASSERT
(
p_cb
->
¡©e
 =ğ
NRFX_DRV_STATE_INITIALIZED
);

270 
	`NRFX_ASSERT
(
p_d©a
);

271 
	`NRFX_ASSERT
(
Ëngth
 > 0);

272 
	`NRFX_ASSERT
(
	`UARTE_LENGTH_VALIDATE
(
p_š¡ªû
->
drv_š¡_idx
, 
Ëngth
));

274 
Äfx_”r_t
 
”r_code
;

278 ià(!
	`Äfx_is_š_¿m
(
p_d©a
))

280 
”r_code
 = 
NRFX_ERROR_INVALID_ADDR
;

281 
	`NRFX_LOG_WARNING
("Function: %s,ƒrror code: %s.",

282 
__func__
,

283 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

284  
”r_code
;

287 ià(
	`Äfx_u¬‹_tx_š_´og»ss
(
p_š¡ªû
))

289 
”r_code
 = 
NRFX_ERROR_BUSY
;

290 
	`NRFX_LOG_WARNING
("Function: %s,ƒrror code: %s.",

291 
__func__
,

292 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

293  
”r_code
;

295 
p_cb
->
tx_bufãr_Ëngth
 = 
Ëngth
;

296 
p_cb
->
p_tx_bufãr
 = 
p_d©a
;

298 
	`NRFX_LOG_INFO
("T¿nsã¸tx_Ën: %d.", 
p_cb
->
tx_bufãr_Ëngth
);

299 
	`NRFX_LOG_DEBUG
("Tx data:");

300 
	`NRFX_LOG_HEXDUMP_DEBUG
(
p_cb
->
p_tx_bufãr
,

301 
p_cb
->
tx_bufãr_Ëngth
 * Õ_cb->
p_tx_bufãr
[0]));

303 
”r_code
 = 
NRFX_SUCCESS
;

305 
	`Äf_u¬‹_ev’t_ş—r
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_EVENT_ENDTX
);

306 
	`Äf_u¬‹_ev’t_ş—r
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_EVENT_TXSTOPPED
);

307 
	`Äf_u¬‹_tx_bufãr_£t
(
p_š¡ªû
->
p_»g
, 
p_cb
->
p_tx_bufãr
,…_cb->
tx_bufãr_Ëngth
);

308 
	`Äf_u¬‹_sk_Œigg”
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_TASK_STARTTX
);

310 ià(
p_cb
->
hªdËr
 =ğ
NULL
)

312 
boŞ
 
’dtx
;

313 
boŞ
 
tx¡İ³d
;

316 
’dtx
 = 
	`Äf_u¬‹_ev’t_check
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_EVENT_ENDTX
);

317 
tx¡İ³d
 = 
	`Äf_u¬‹_ev’t_check
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_EVENT_TXSTOPPED
);

319 (!
’dtx
è&& (!
tx¡İ³d
));

321 ià(
tx¡İ³d
)

323 
”r_code
 = 
NRFX_ERROR_FORBIDDEN
;

325 
p_cb
->
tx_bufãr_Ëngth
 = 0;

328 
	`NRFX_LOG_INFO
("FunùiÚ: %s,ƒ¼Ü code: %s.", 
__func__
, 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

329  
”r_code
;

330 
	}
}

332 
boŞ
 
	$Äfx_u¬‹_tx_š_´og»ss
(
Äfx_u¬‹_t
 cÚ¡ * 
p_š¡ªû
)

334  (
m_cb
[
p_š¡ªû
->
drv_š¡_idx
].
tx_bufãr_Ëngth
 != 0);

335 
	}
}

337 
Äfx_”r_t
 
	$Äfx_u¬‹_rx
(
Äfx_u¬‹_t
 cÚ¡ * 
p_š¡ªû
,

338 
ušt8_t
 * 
p_d©a
,

339 
size_t
 
Ëngth
)

341 
u¬‹_cÚŒŞ_block_t
 * 
p_cb
 = &
m_cb
[
p_š¡ªû
->
drv_š¡_idx
];

343 
	`NRFX_ASSERT
(
m_cb
[
p_š¡ªû
->
drv_š¡_idx
].
¡©e
 =ğ
NRFX_DRV_STATE_INITIALIZED
);

344 
	`NRFX_ASSERT
(
p_d©a
);

345 
	`NRFX_ASSERT
(
Ëngth
 > 0);

346 
	`NRFX_ASSERT
(
	`UARTE_LENGTH_VALIDATE
(
p_š¡ªû
->
drv_š¡_idx
, 
Ëngth
));

348 
Äfx_”r_t
 
”r_code
;

352 ià(!
	`Äfx_is_š_¿m
(
p_d©a
))

354 
”r_code
 = 
NRFX_ERROR_INVALID_ADDR
;

355 
	`NRFX_LOG_WARNING
("Function: %s,ƒrror code: %s.",

356 
__func__
,

357 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

358  
”r_code
;

361 
boŞ
 
£cÚd_bufãr
 = 
çl£
;

363 ià(
p_cb
->
hªdËr
)

365 
	`Äf_u¬‹_št_di§bË
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_INT_ERROR_MASK
 |

366 
NRF_UARTE_INT_ENDRX_MASK
);

368 ià(
p_cb
->
rx_bufãr_Ëngth
 != 0)

370 ià(
p_cb
->
rx_£cÚd¬y_bufãr_Ëngth
 != 0)

372 ià(
p_cb
->
hªdËr
)

374 
	`Äf_u¬‹_št_’abË
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_INT_ERROR_MASK
 |

375 
NRF_UARTE_INT_ENDRX_MASK
);

377 
”r_code
 = 
NRFX_ERROR_BUSY
;

378 
	`NRFX_LOG_WARNING
("Function: %s,ƒrror code: %s.",

379 
__func__
,

380 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

381  
”r_code
;

383 
£cÚd_bufãr
 = 
Œue
;

386 ià(!
£cÚd_bufãr
)

388 
p_cb
->
rx_bufãr_Ëngth
 = 
Ëngth
;

389 
p_cb
->
p_rx_bufãr
 = 
p_d©a
;

390 
p_cb
->
rx_£cÚd¬y_bufãr_Ëngth
 = 0;

394 
p_cb
->
p_rx_£cÚd¬y_bufãr
 = 
p_d©a
;

395 
p_cb
->
rx_£cÚd¬y_bufãr_Ëngth
 = 
Ëngth
;

398 
	`NRFX_LOG_INFO
("T¿nsã¸rx_Ën: %d.", 
Ëngth
);

400 
”r_code
 = 
NRFX_SUCCESS
;

402 
	`Äf_u¬‹_ev’t_ş—r
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_EVENT_ENDRX
);

403 
	`Äf_u¬‹_ev’t_ş—r
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_EVENT_RXTO
);

404 
	`Äf_u¬‹_rx_bufãr_£t
(
p_š¡ªû
->
p_»g
, 
p_d©a
, 
Ëngth
);

405 ià(!
£cÚd_bufãr
)

407 
	`Äf_u¬‹_sk_Œigg”
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_TASK_STARTRX
);

411 
	`Äf_u¬‹_shÜts_’abË
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_SHORT_ENDRX_STARTRX
);

414 ià(
m_cb
[
p_š¡ªû
->
drv_š¡_idx
].
hªdËr
 =ğ
NULL
)

416 
boŞ
 
’drx
;

417 
boŞ
 
rxto
;

418 
boŞ
 
”rÜ
;

420 
’drx
 = 
	`Äf_u¬‹_ev’t_check
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_EVENT_ENDRX
);

421 
rxto
 = 
	`Äf_u¬‹_ev’t_check
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_EVENT_RXTO
);

422 
”rÜ
 = 
	`Äf_u¬‹_ev’t_check
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_EVENT_ERROR
);

423 } (!
’drx
è&& (!
rxto
è&& (!
”rÜ
));

425 
m_cb
[
p_š¡ªû
->
drv_š¡_idx
].
rx_bufãr_Ëngth
 = 0;

427 ià(
”rÜ
)

429 
”r_code
 = 
NRFX_ERROR_INTERNAL
;

432 ià(
rxto
)

434 
”r_code
 = 
NRFX_ERROR_FORBIDDEN
;

439 
	`Äf_u¬‹_št_’abË
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_INT_ERROR_MASK
 |

440 
NRF_UARTE_INT_ENDRX_MASK
);

442 
	`NRFX_LOG_INFO
("FunùiÚ: %s,ƒ¼Ü code: %s.", 
__func__
, 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

443  
”r_code
;

444 
	}
}

446 
boŞ
 
	$Äfx_u¬‹_rx_»ady
(
Äfx_u¬‹_t
 cÚ¡ * 
p_š¡ªû
)

448  
	`Äf_u¬‹_ev’t_check
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_EVENT_ENDRX
);

449 
	}
}

451 
ušt32_t
 
	$Äfx_u¬‹_”rÜ¤c_g‘
(
Äfx_u¬‹_t
 cÚ¡ * 
p_š¡ªû
)

453 
	`Äf_u¬‹_ev’t_ş—r
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_EVENT_ERROR
);

454  
	`Äf_u¬‹_”rÜ¤c_g‘_ªd_ş—r
(
p_š¡ªû
->
p_»g
);

455 
	}
}

457 
	$rx_dÚe_ev’t
(
u¬‹_cÚŒŞ_block_t
 * 
p_cb
,

458 
size_t
 
by‹s
,

459 
ušt8_t
 * 
p_d©a
)

461 
Äfx_u¬‹_ev’t_t
 
ev’t
;

463 
ev’t
.
ty³
 = 
NRFX_UARTE_EVT_RX_DONE
;

464 
ev’t
.
d©a
.
rxtx
.
by‹s
 = bytes;

465 
ev’t
.
d©a
.
rxtx
.
p_d©a
 =…_data;

467 
p_cb
->
	`hªdËr
(&
ev’t
,…_cb->
p_cÚ‹xt
);

468 
	}
}

470 
	$tx_dÚe_ev’t
(
u¬‹_cÚŒŞ_block_t
 * 
p_cb
,

471 
size_t
 
by‹s
)

473 
Äfx_u¬‹_ev’t_t
 
ev’t
;

475 
ev’t
.
ty³
 = 
NRFX_UARTE_EVT_TX_DONE
;

476 
ev’t
.
d©a
.
rxtx
.
by‹s
 = bytes;

477 
ev’t
.
d©a
.
rxtx
.
p_d©a
 = (
ušt8_t
 *)
p_cb
->
p_tx_bufãr
;

479 
p_cb
->
tx_bufãr_Ëngth
 = 0;

481 
p_cb
->
	`hªdËr
(&
ev’t
,…_cb->
p_cÚ‹xt
);

482 
	}
}

484 
	$Äfx_u¬‹_tx_abÜt
(
Äfx_u¬‹_t
 cÚ¡ * 
p_š¡ªû
)

486 
u¬‹_cÚŒŞ_block_t
 * 
p_cb
 = &
m_cb
[
p_š¡ªû
->
drv_š¡_idx
];

488 
	`Äf_u¬‹_ev’t_ş—r
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_EVENT_TXSTOPPED
);

489 
	`Äf_u¬‹_sk_Œigg”
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_TASK_STOPTX
);

490 ià(
p_cb
->
hªdËr
 =ğ
NULL
)

492 !
	`Äf_u¬‹_ev’t_check
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_EVENT_TXSTOPPED
))

495 
	`NRFX_LOG_INFO
("TXransaction‡borted.");

496 
	}
}

498 
	$Äfx_u¬‹_rx_abÜt
(
Äfx_u¬‹_t
 cÚ¡ * 
p_š¡ªû
)

500 
	`Äf_u¬‹_sk_Œigg”
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_TASK_STOPRX
);

501 
	`NRFX_LOG_INFO
("RXransaction‡borted.");

502 
	}
}

504 
	$u¬‹_œq_hªdËr
(
NRF_UARTE_Ty³
 * 
p_u¬‹
,

505 
u¬‹_cÚŒŞ_block_t
 * 
p_cb
)

507 ià(
	`Äf_u¬‹_ev’t_check
(
p_u¬‹
, 
NRF_UARTE_EVENT_ERROR
))

509 
Äfx_u¬‹_ev’t_t
 
ev’t
;

511 
	`Äf_u¬‹_ev’t_ş—r
(
p_u¬‹
, 
NRF_UARTE_EVENT_ERROR
);

513 
ev’t
.
ty³
 = 
NRFX_UARTE_EVT_ERROR
;

514 
ev’t
.
d©a
.
”rÜ
.
”rÜ_mask
 = 
	`Äf_u¬‹_”rÜ¤c_g‘_ªd_ş—r
(
p_u¬‹
);

515 
ev’t
.
d©a
.
”rÜ
.
rxtx
.
by‹s
 = 
	`Äf_u¬‹_rx_amouÁ_g‘
(
p_u¬‹
);

516 
ev’t
.
d©a
.
”rÜ
.
rxtx
.
p_d©a
 = 
p_cb
->
p_rx_bufãr
;

519 
p_cb
->
rx_bufãr_Ëngth
 = 0;

520 
p_cb
->
rx_£cÚd¬y_bufãr_Ëngth
 = 0;

522 
p_cb
->
	`hªdËr
(&
ev’t
,…_cb->
p_cÚ‹xt
);

524 ià(
	`Äf_u¬‹_ev’t_check
(
p_u¬‹
, 
NRF_UARTE_EVENT_ENDRX
))

526 
	`Äf_u¬‹_ev’t_ş—r
(
p_u¬‹
, 
NRF_UARTE_EVENT_ENDRX
);

527 
size_t
 
amouÁ
 = 
	`Äf_u¬‹_rx_amouÁ_g‘
(
p_u¬‹
);

530 ià(
amouÁ
 =ğ
p_cb
->
rx_bufãr_Ëngth
)

532 ià(
p_cb
->
rx_£cÚd¬y_bufãr_Ëngth
)

534 
ušt8_t
 * 
p_d©a
 = 
p_cb
->
p_rx_bufãr
;

535 
	`Äf_u¬‹_shÜts_di§bË
(
p_u¬‹
, 
NRF_UARTE_SHORT_ENDRX_STARTRX
);

536 
p_cb
->
rx_bufãr_Ëngth
 =…_cb->
rx_£cÚd¬y_bufãr_Ëngth
;

537 
p_cb
->
p_rx_bufãr
 =…_cb->
p_rx_£cÚd¬y_bufãr
;

538 
p_cb
->
rx_£cÚd¬y_bufãr_Ëngth
 = 0;

539 
	`rx_dÚe_ev’t
(
p_cb
, 
amouÁ
, 
p_d©a
);

543 
p_cb
->
rx_bufãr_Ëngth
 = 0;

544 
	`rx_dÚe_ev’t
(
p_cb
, 
amouÁ
,…_cb->
p_rx_bufãr
);

549 ià(
	`Äf_u¬‹_ev’t_check
(
p_u¬‹
, 
NRF_UARTE_EVENT_RXTO
))

551 
	`Äf_u¬‹_ev’t_ş—r
(
p_u¬‹
, 
NRF_UARTE_EVENT_RXTO
);

552 ià(
p_cb
->
rx_bufãr_Ëngth
)

554 
p_cb
->
rx_bufãr_Ëngth
 = 0;

555 
	`rx_dÚe_ev’t
(
p_cb
, 
	`Äf_u¬‹_rx_amouÁ_g‘
(
p_u¬‹
),…_cb->
p_rx_bufãr
);

559 ià(
	`Äf_u¬‹_ev’t_check
(
p_u¬‹
, 
NRF_UARTE_EVENT_ENDTX
))

561 
	`Äf_u¬‹_ev’t_ş—r
(
p_u¬‹
, 
NRF_UARTE_EVENT_ENDTX
);

562 ià(
p_cb
->
tx_bufãr_Ëngth
)

564 
	`tx_dÚe_ev’t
(
p_cb
, 
	`Äf_u¬‹_tx_amouÁ_g‘
(
p_u¬‹
));

567 
	}
}

569 #ià
NRFX_CHECK
(
NRFX_UARTE0_ENABLED
)

570 
	$Äfx_u¬‹_0_œq_hªdËr
()

572 
	`u¬‹_œq_hªdËr
(
NRF_UARTE0
, &
m_cb
[
NRFX_UARTE0_INST_IDX
]);

573 
	}
}

576 #ià
NRFX_CHECK
(
NRFX_UARTE1_ENABLED
)

577 
	$Äfx_u¬‹_1_œq_hªdËr
()

579 
	`u¬‹_œq_hªdËr
(
NRF_UARTE1
, &
m_cb
[
NRFX_UARTE1_INST_IDX
]);

580 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\modules\nrfx\drivers\src\prs\nrfx_prs.c

41 
	~<Äfx.h
>

43 #ià
NRFX_CHECK
(
NRFX_PRS_ENABLED
)

44 
	~"Äfx_´s.h
"

46 
	#NRFX_LOG_MODULE
 
PRS


	)

47 
	~<Äfx_log.h
>

49 
	#LOG_FUNCTION_EXIT
(
Ëv–
, 
»t_code
) \

50 
NRFX_LOG_
##
	`Ëv–
("Function: %s,ƒrror code: %s.", \

51 
__func__
, \

52 
	`NRFX_LOG_ERROR_STRING_GET
(
»t_code
))

	)

56 
Äfx_œq_hªdËr_t
 
	mhªdËr
;

57 
boŞ
 
	macquœed
;

58 } 
	t´s_box_t
;

60 
	#PRS_BOX_DEFINE
(
n
) \

61 
´s_box_t
 
m_´s_box_
##
n
 = { .
hªdËr
 = 
NULL
, .
acquœed
 = 
çl£
 }; \

62 
Äfx_´s_box_
##
n
##
	`_œq_hªdËr
() \

64 
	`NRFX_ASSERT
(
m_´s_box_
##
n
.
hªdËr
); \

65 
m_´s_box_
##
n
.
	`hªdËr
(); \

66 }

	)

68 #ià
defšed
(
NRFX_PRS_BOX_0_ADDR
è&& 
NRFX_CHECK
(
NRFX_PRS_BOX_0_ENABLED
)

69 
	$PRS_BOX_DEFINE
(0)

71 #ià
	`defšed
(
NRFX_PRS_BOX_1_ADDR
è&& 
	`NRFX_CHECK
(
NRFX_PRS_BOX_1_ENABLED
)

72 
	$PRS_BOX_DEFINE
(1)

74 #ià
	`defšed
(
NRFX_PRS_BOX_2_ADDR
è&& 
	`NRFX_CHECK
(
NRFX_PRS_BOX_2_ENABLED
)

75 
	$PRS_BOX_DEFINE
(2)

77 #ià
	`defšed
(
NRFX_PRS_BOX_3_ADDR
è&& 
	`NRFX_CHECK
(
NRFX_PRS_BOX_3_ENABLED
)

78 
	$PRS_BOX_DEFINE
(3)

80 #ià
	`defšed
(
NRFX_PRS_BOX_4_ADDR
è&& 
	`NRFX_CHECK
(
NRFX_PRS_BOX_4_ENABLED
)

81 
	$PRS_BOX_DEFINE
(4)

85 
´s_box_t
 * 
	$´s_box_g‘
(cÚ¡ * 
p_ba£_addr
)

87 #ià!
	`defšed
(
IS_PRS_BOX
)

88 
	#IS_PRS_BOX
(
n
, 
p_ba£_addr
è(Õ_ba£_addrè=ğ
NRFX_PRS_BOX_
##n##
_ADDR
)

	)

91 #ià
	`defšed
(
NRFX_PRS_BOX_0_ADDR
è&& 
	`NRFX_CHECK
(
NRFX_PRS_BOX_0_ENABLED
)

92 ià(
	`IS_PRS_BOX
(0, 
p_ba£_addr
)è{  &
m_´s_box_0
; }

95 #ià
	`defšed
(
NRFX_PRS_BOX_1_ADDR
è&& 
	`NRFX_CHECK
(
NRFX_PRS_BOX_1_ENABLED
)

96 ià(
	`IS_PRS_BOX
(1, 
p_ba£_addr
)è{  &
m_´s_box_1
; }

99 #ià
	`defšed
(
NRFX_PRS_BOX_2_ADDR
è&& 
	`NRFX_CHECK
(
NRFX_PRS_BOX_2_ENABLED
)

100 ià(
	`IS_PRS_BOX
(2, 
p_ba£_addr
)è{  &
m_´s_box_2
; }

103 #ià
	`defšed
(
NRFX_PRS_BOX_3_ADDR
è&& 
	`NRFX_CHECK
(
NRFX_PRS_BOX_3_ENABLED
)

104 ià(
	`IS_PRS_BOX
(3, 
p_ba£_addr
)è{  &
m_´s_box_3
; }

107 #ià
	`defšed
(
NRFX_PRS_BOX_4_ADDR
è&& 
	`NRFX_CHECK
(
NRFX_PRS_BOX_4_ENABLED
)

108 ià(
	`IS_PRS_BOX
(4, 
p_ba£_addr
)è{  &
m_´s_box_4
; }

112  
NULL
;

114 
	}
}

116 
Äfx_”r_t
 
	$Äfx_´s_acquœe
(cÚ¡ * 
p_ba£_addr
,

117 
Äfx_œq_hªdËr_t
 
œq_hªdËr
)

119 
	`NRFX_ASSERT
(
p_ba£_addr
);

121 
Äfx_”r_t
 
»t_code
;

123 
´s_box_t
 * 
p_box
 = 
	`´s_box_g‘
(
p_ba£_addr
);

124 ià(
p_box
 !ğ
NULL
)

126 
boŞ
 
busy
 = 
çl£
;

128 
	`NRFX_CRITICAL_SECTION_ENTER
();

129 ià(
p_box
->
acquœed
)

131 
busy
 = 
Œue
;

135 
p_box
->
hªdËr
 = 
œq_hªdËr
;

136 
p_box
->
acquœed
 = 
Œue
;

138 
	`NRFX_CRITICAL_SECTION_EXIT
();

140 ià(
busy
)

142 
»t_code
 = 
NRFX_ERROR_BUSY
;

143 
	`LOG_FUNCTION_EXIT
(
WARNING
, 
»t_code
);

144  
»t_code
;

148 
»t_code
 = 
NRFX_SUCCESS
;

149 
	`LOG_FUNCTION_EXIT
(
INFO
, 
»t_code
);

150  
»t_code
;

151 
	}
}

153 
	$Äfx_´s_»Ëa£
(cÚ¡ * 
p_ba£_addr
)

155 
	`NRFX_ASSERT
(
p_ba£_addr
);

157 
´s_box_t
 * 
p_box
 = 
	`´s_box_g‘
(
p_ba£_addr
);

158 ià(
p_box
 !ğ
NULL
)

160 
p_box
->
hªdËr
 = 
NULL
;

161 
p_box
->
acquœed
 = 
çl£
;

163 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\modules\nrfx\mdk\gcc_startup_nrf52840.S

23 .
syÁax
 
	gunif›d


24 .
¬ch
 
	g¬mv7e
-
	gm


26 #ifdeà
__STARTUP_CONFIG


27 
	~"¡¬tup_cÚfig.h
"

28 #iâdeà
__STARTUP_CONFIG_STACK_ALIGNEMENT


29 
	#__STARTUP_CONFIG_STACK_ALIGNEMENT
 3

	)

33 .
	g£ùiÚ
 .
	g¡ack


34 #ià
defšed
(
__STARTUP_CONFIG
)

35 .
®ign
 
	g__STARTUP_CONFIG_STACK_ALIGNEMENT


36 .
equ
 
	gSck_Size
, 
	g__STARTUP_CONFIG_STACK_SIZE


37 #–ià
defšed
(
__STACK_SIZE
)

38 .
	g®ign
 3

39 .
equ
 
	gSck_Size
, 
	g__STACK_SIZE


41 .
	g®ign
 3

42 .
equ
 
	gSck_Size
, 8192

44 .
globl
 
	g__SckTİ


45 .
globl
 
__SckLim™


46 
	g__SckLim™
:

47 .
¥aû
 
Sck_Size


48 .
size
 
__SckLim™
, . - __StackLimit

49 
	g__SckTİ
:

50 .
size
 
__SckTİ
, . - 
	g__SckTİ


52 .
	g£ùiÚ
 .
	gh—p


53 .
	g®ign
 3

54 #ià
defšed
(
__STARTUP_CONFIG
)

55 .
equ
 
	gH—p_Size
, 
	g__STARTUP_CONFIG_HEAP_SIZE


56 #–ià
defšed
(
__HEAP_SIZE
)

57 .
equ
 
	gH—p_Size
, 
	g__HEAP_SIZE


59 .
equ
 
	gH—p_Size
, 8192

61 .
globl
 
	g__H—pBa£


62 .
globl
 
__H—pLim™


63 
	g__H—pBa£
:

64 .
H—p_Size


65 .
¥aû
 
H—p_Size


66 .
’dif


67 .
size
 
__H—pBa£
, . - __HeapBase

68 
	g__H—pLim™
:

69 .
size
 
__H—pLim™
, . - 
	g__H—pLim™


71 .
	g£ùiÚ
 .
	gi¤_veùÜ


72 .
	g®ign
 2

73 .
globl
 
__i¤_veùÜ


74 
	g__i¤_veùÜ
:

75 .
__SckTİ


76 .
Re£t_HªdËr


77 .
NMI_HªdËr


78 .
H¬dFauÉ_HªdËr


79 .
MemÜyMªagem’t_HªdËr


80 .
BusFauÉ_HªdËr


81 .
U§geFauÉ_HªdËr


86 .
SVC_HªdËr


87 .
DebugMÚ_HªdËr


89 .
P’dSV_HªdËr


90 .
SysTick_HªdËr


93 .
POWER_CLOCK_IRQHªdËr


94 .
RADIO_IRQHªdËr


95 .
UARTE0_UART0_IRQHªdËr


96 .
SPIM0_SPIS0_TWIM0_TWIS0_SPI0_TWI0_IRQHªdËr


97 .
SPIM1_SPIS1_TWIM1_TWIS1_SPI1_TWI1_IRQHªdËr


98 .
NFCT_IRQHªdËr


99 .
GPIOTE_IRQHªdËr


100 .
SAADC_IRQHªdËr


101 .
TIMER0_IRQHªdËr


102 .
TIMER1_IRQHªdËr


103 .
TIMER2_IRQHªdËr


104 .
RTC0_IRQHªdËr


105 .
TEMP_IRQHªdËr


106 .
RNG_IRQHªdËr


107 .
ECB_IRQHªdËr


108 .
CCM_AAR_IRQHªdËr


109 .
WDT_IRQHªdËr


110 .
RTC1_IRQHªdËr


111 .
QDEC_IRQHªdËr


112 .
COMP_LPCOMP_IRQHªdËr


113 .
SWI0_EGU0_IRQHªdËr


114 .
SWI1_EGU1_IRQHªdËr


115 .
SWI2_EGU2_IRQHªdËr


116 .
SWI3_EGU3_IRQHªdËr


117 .
SWI4_EGU4_IRQHªdËr


118 .
SWI5_EGU5_IRQHªdËr


119 .
TIMER3_IRQHªdËr


120 .
TIMER4_IRQHªdËr


121 .
PWM0_IRQHªdËr


122 .
PDM_IRQHªdËr


125 .
MWU_IRQHªdËr


126 .
PWM1_IRQHªdËr


127 .
PWM2_IRQHªdËr


128 .
SPIM2_SPIS2_SPI2_IRQHªdËr


129 .
RTC2_IRQHªdËr


130 .
I2S_IRQHªdËr


131 .
FPU_IRQHªdËr


132 .
USBD_IRQHªdËr


133 .
UARTE1_IRQHªdËr


134 .
QSPI_IRQHªdËr


135 .
CRYPTOCELL_IRQHªdËr


138 .
PWM3_IRQHªdËr


140 .
SPIM3_IRQHªdËr


206 .
size
 
__i¤_veùÜ
, . - 
	g__i¤_veùÜ


211 .
	g‹xt


212 .
	gthumb


213 .
	gthumb_func


214 .
	g®ign
 1

215 .
globl
 
	gRe£t_HªdËr


216 .
ty³
 
	gRe£t_HªdËr
, %
funùiÚ


217 
	gRe£t_HªdËr
:

229 
ldr
 
r1
, =
__‘ext


230 
ldr
 
r2
, =
__d©a_¡¬t__


231 
ldr
 
r3
, =
__bss_¡¬t__


233 
subs
 
r3
, 
	gr3
, 
r2


234 
	gbË
 .
	gL_loİ1_dÚe


236 .
	gL_loİ1
:

237 
subs
 
r3
, 
	gr3
, #4

238 
ldr
 
	gr0
, [
r1
,
r3
]

239 
¡r
 
	gr0
, [
r2
,
r3
]

240 
	gbgt
 .
	gL_loİ1


242 .
	gL_loİ1_dÚe
:

254 #ifdeà
__STARTUP_CLEAR_BSS


255 
ldr
 
r1
, =
__bss_¡¬t__


256 
ldr
 
r2
, =
__bss_’d__


258 
movs
 
r0
, 0

260 
subs
 
	gr2
,„2, 
r1


261 
	gbË
 .
	gL_loİ3_dÚe


263 .
	gL_loİ3
:

264 
subs
 
r2
, 
	gr2
, #4

265 
¡r
 
	gr0
, [
r1
, 
r2
]

266 
	gbgt
 .
	gL_loİ3


268 .
	gL_loİ3_dÚe
:

272 
bl
 
Sy¡emIn™


277 #iâdeà
__START


278 
	#__START
 
_¡¬t


	)

280 
bl
 
__START


282 .
poŞ


283 .
size
 
Re£t_HªdËr
,.-
	gRe£t_HªdËr


285 .
	g£ùiÚ
 ".text"

290 .
w—k
 
	gNMI_HªdËr


291 .
ty³
 
	gNMI_HªdËr
, %
funùiÚ


292 
	gNMI_HªdËr
:

293 
b
 .

294 .
size
 
NMI_HªdËr
, . - 
	gNMI_HªdËr


297 .
w—k
 
	gH¬dFauÉ_HªdËr


298 .
ty³
 
	gH¬dFauÉ_HªdËr
, %
funùiÚ


299 
	gH¬dFauÉ_HªdËr
:

300 
b
 .

301 .
size
 
H¬dFauÉ_HªdËr
, . - 
	gH¬dFauÉ_HªdËr


304 .
w—k
 
	gMemÜyMªagem’t_HªdËr


305 .
ty³
 
	gMemÜyMªagem’t_HªdËr
, %
funùiÚ


306 
	gMemÜyMªagem’t_HªdËr
:

307 
b
 .

308 .
size
 
MemÜyMªagem’t_HªdËr
, . - 
	gMemÜyMªagem’t_HªdËr


311 .
w—k
 
	gBusFauÉ_HªdËr


312 .
ty³
 
	gBusFauÉ_HªdËr
, %
funùiÚ


313 
	gBusFauÉ_HªdËr
:

314 
b
 .

315 .
size
 
BusFauÉ_HªdËr
, . - 
	gBusFauÉ_HªdËr


318 .
w—k
 
	gU§geFauÉ_HªdËr


319 .
ty³
 
	gU§geFauÉ_HªdËr
, %
funùiÚ


320 
	gU§geFauÉ_HªdËr
:

321 
b
 .

322 .
size
 
U§geFauÉ_HªdËr
, . - 
	gU§geFauÉ_HªdËr


325 .
w—k
 
	gSVC_HªdËr


326 .
ty³
 
	gSVC_HªdËr
, %
funùiÚ


327 
	gSVC_HªdËr
:

328 
b
 .

329 .
size
 
SVC_HªdËr
, . - 
	gSVC_HªdËr


332 .
w—k
 
	gDebugMÚ_HªdËr


333 .
ty³
 
	gDebugMÚ_HªdËr
, %
funùiÚ


334 
	gDebugMÚ_HªdËr
:

335 
b
 .

336 .
size
 
DebugMÚ_HªdËr
, . - 
	gDebugMÚ_HªdËr


339 .
w—k
 
	gP’dSV_HªdËr


340 .
ty³
 
	gP’dSV_HªdËr
, %
funùiÚ


341 
	gP’dSV_HªdËr
:

342 
b
 .

343 .
size
 
P’dSV_HªdËr
, . - 
	gP’dSV_HªdËr


346 .
w—k
 
	gSysTick_HªdËr


347 .
ty³
 
	gSysTick_HªdËr
, %
funùiÚ


348 
	gSysTick_HªdËr
:

349 
b
 .

350 .
size
 
SysTick_HªdËr
, . - 
	gSysTick_HªdËr


355 .
globl
 
	gDeçuÉ_HªdËr


356 .
ty³
 
	gDeçuÉ_HªdËr
, %
funùiÚ


357 
	gDeçuÉ_HªdËr
:

358 
b
 .

359 .
size
 
DeçuÉ_HªdËr
, . - 
	gDeçuÉ_HªdËr


361 .
maüo
 
IRQ
 
	ghªdËr


362 .
	gw—k
 \
	ghªdËr


363 .
	g£t
 \
	ghªdËr
, 
	gDeçuÉ_HªdËr


364 .
’dm


366 
IRQ
 
POWER_CLOCK_IRQHªdËr


367 
IRQ
 
RADIO_IRQHªdËr


368 
IRQ
 
UARTE0_UART0_IRQHªdËr


369 
IRQ
 
SPIM0_SPIS0_TWIM0_TWIS0_SPI0_TWI0_IRQHªdËr


370 
IRQ
 
SPIM1_SPIS1_TWIM1_TWIS1_SPI1_TWI1_IRQHªdËr


371 
IRQ
 
NFCT_IRQHªdËr


372 
IRQ
 
GPIOTE_IRQHªdËr


373 
IRQ
 
SAADC_IRQHªdËr


374 
IRQ
 
TIMER0_IRQHªdËr


375 
IRQ
 
TIMER1_IRQHªdËr


376 
IRQ
 
TIMER2_IRQHªdËr


377 
IRQ
 
RTC0_IRQHªdËr


378 
IRQ
 
TEMP_IRQHªdËr


379 
IRQ
 
RNG_IRQHªdËr


380 
IRQ
 
ECB_IRQHªdËr


381 
IRQ
 
CCM_AAR_IRQHªdËr


382 
IRQ
 
WDT_IRQHªdËr


383 
IRQ
 
RTC1_IRQHªdËr


384 
IRQ
 
QDEC_IRQHªdËr


385 
IRQ
 
COMP_LPCOMP_IRQHªdËr


386 
IRQ
 
SWI0_EGU0_IRQHªdËr


387 
IRQ
 
SWI1_EGU1_IRQHªdËr


388 
IRQ
 
SWI2_EGU2_IRQHªdËr


389 
IRQ
 
SWI3_EGU3_IRQHªdËr


390 
IRQ
 
SWI4_EGU4_IRQHªdËr


391 
IRQ
 
SWI5_EGU5_IRQHªdËr


392 
IRQ
 
TIMER3_IRQHªdËr


393 
IRQ
 
TIMER4_IRQHªdËr


394 
IRQ
 
PWM0_IRQHªdËr


395 
IRQ
 
PDM_IRQHªdËr


396 
IRQ
 
MWU_IRQHªdËr


397 
IRQ
 
PWM1_IRQHªdËr


398 
IRQ
 
PWM2_IRQHªdËr


399 
IRQ
 
SPIM2_SPIS2_SPI2_IRQHªdËr


400 
IRQ
 
RTC2_IRQHªdËr


401 
IRQ
 
I2S_IRQHªdËr


402 
IRQ
 
FPU_IRQHªdËr


403 
IRQ
 
USBD_IRQHªdËr


404 
IRQ
 
UARTE1_IRQHªdËr


405 
IRQ
 
QSPI_IRQHªdËr


406 
IRQ
 
CRYPTOCELL_IRQHªdËr


407 
IRQ
 
PWM3_IRQHªdËr


408 
IRQ
 
	gSPIM3_IRQHªdËr


410 .
	g’d


	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\modules\nrfx\mdk\nrf_common.ld

18 
OUTPUT_FORMAT
 ("elf32-littlearm", "elf32-bigarm", "elf32-littlearm")

47 
	$ENTRY
(
Re£t_HªdËr
)

49 
SECTIONS


51 .
‹xt
 :

53 
	`KEEP
(*(.
i¤_veùÜ
))

54 *(.
‹xt
*)

56 
	`KEEP
(*(.
š™
))

57 
	`KEEP
(*(.
fši
))

60 *
ütbegš
.
	`o
(.
ùÜs
)

61 *
ütbegš
?.
	`o
(.
ùÜs
)

62 *(
	`EXCLUDE_FILE
(*
ü‹nd
?.
o
 *ü‹nd.oè.
ùÜs
)

63 *(
	`SORT
(.
ùÜs
.*))

64 *(.
ùÜs
)

67 *
ütbegš
.
	`o
(.
dtÜs
)

68 *
ütbegš
?.
	`o
(.
dtÜs
)

69 *(
	`EXCLUDE_FILE
(*
ü‹nd
?.
o
 *ü‹nd.oè.
dtÜs
)

70 *(
	`SORT
(.
dtÜs
.*))

71 *(.
dtÜs
)

73 *(.
rod©a
*)

75 
	`KEEP
(*(.
eh_äame
*))

76 } > 
FLASH


78 .
ARM
.
exb
 :

80 *(.
ARM
.
exb
* .
gnu
.
lškÚû
.
¬mexb
.*)

81 } > 
FLASH


83 
__exidx_¡¬t
 = .;

84 .
ARM
.
exidx
 :

86 *(.
ARM
.
exidx
* .
gnu
.
lškÚû
.
¬mexidx
.*)

87 } > 
FLASH


88 
__exidx_’d
 = .;

90 
__‘ext
 = .;

92 .
d©a
 : 
	`AT
 (
__‘ext
)

94 
__d©a_¡¬t__
 = .;

95 *(
vbË
)

96 *(.
d©a
*)

98 . = 
	`ALIGN
(4);

100 
	`PROVIDE_HIDDEN
 (
__´eš™_¬¿y_¡¬t
 = .);

101 
	`KEEP
(*(.
´eš™_¬¿y
))

102 
	`PROVIDE_HIDDEN
 (
__´eš™_¬¿y_’d
 = .);

104 . = 
	`ALIGN
(4);

106 
	`PROVIDE_HIDDEN
 (
__š™_¬¿y_¡¬t
 = .);

107 
	`KEEP
(*(
	`SORT
(.
š™_¬¿y
.*)))

108 
	`KEEP
(*(.
š™_¬¿y
))

109 
	`PROVIDE_HIDDEN
 (
__š™_¬¿y_’d
 = .);

112 . = 
	`ALIGN
(4);

114 
	`PROVIDE_HIDDEN
 (
__fši_¬¿y_¡¬t
 = .);

115 
	`KEEP
(*(
	`SORT
(.
fši_¬¿y
.*)))

116 
	`KEEP
(*(.
fši_¬¿y
))

117 
	`PROVIDE_HIDDEN
 (
__fši_¬¿y_’d
 = .);

119 
	`KEEP
(*(.
jü
*))

120 . = 
	`ALIGN
(4);

122 
__d©a_’d__
 = .;

124 } > 
RAM


126 .
bss
 :

128 . = 
	`ALIGN
(4);

129 
__bss_¡¬t__
 = .;

130 *(.
bss
*)

131 *(
COMMON
)

132 . = 
	`ALIGN
(4);

133 
__bss_’d__
 = .;

134 } > 
RAM


136 .
	`h—p
 (
COPY
):

138 
__H—pBa£
 = .;

139 
__’d__
 = .;

140 
	`PROVIDE
(
’d
 = .);

141 
	`KEEP
(*(.
h—p
*))

142 
__H—pLim™
 = .;

143 } > 
RAM


148 .
	`¡ack_dummy
 (
COPY
):

150 
	`KEEP
(*(.
¡ack
*))

151 } > 
RAM


155 
__SckTİ
 = 
	`ORIGIN
(
RAM
è+ 
	`LENGTH
(RAM);

156 
__SckLim™
 = 
__SckTİ
 - 
	`SIZEOF
(.
¡ack_dummy
);

157 
	`PROVIDE
(
__¡ack
 = 
__SckTİ
);

160 
	`ASSERT
(
__SckLim™
 >ğ
__H—pLim™
, "region RAM overflowed with stack")

163 
D©aIn™FÏshU£d
 = 
__bss_¡¬t__
 - 
__d©a_¡¬t__
;

164 
CodeFÏshU£d
 = 
__‘ext
 - 
	`ORIGIN
(
FLASH
);

165 
TÙ®FÏshU£d
 = 
CodeFÏshU£d
 + 
D©aIn™FÏshU£d
;

166 
	`ASSERT
(
TÙ®FÏshU£d
 <ğ
	`LENGTH
(
FLASH
), "region FLASH overflowed with .data‡nd user data")

168 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\modules\nrfx\mdk\system_nrf52840.c

26 
	~<¡dšt.h
>

27 
	~<¡dboŞ.h
>

28 
	~"Äf.h
"

29 
	~"sy¡em_Äf52840.h
"

33 
	#__SYSTEM_CLOCK_64M
 (64000000UL)

	)

35 
boŞ
 
”¿_36
();

36 
boŞ
 
”¿_66
();

37 
boŞ
 
”¿_98
();

38 
boŞ
 
”¿_103
();

39 
boŞ
 
”¿_115
();

40 
boŞ
 
”¿_120
();

41 
boŞ
 
”¿_136
();

44 #ià
defšed
 ( 
__CC_ARM
 )

45 
ušt32_t
 
Sy¡emCÜeClock
 
__©Œibu‹__
((
u£d
)èğ
__SYSTEM_CLOCK_64M
;

46 #–ià
defšed
 ( 
__ICCARM__
 )

47 
__roÙ
 
ušt32_t
 
	gSy¡emCÜeClock
 = 
__SYSTEM_CLOCK_64M
;

48 #–ià
defšed
 ( 
__GNUC__
 )

49 
ušt32_t
 
Sy¡emCÜeClock
 
__©Œibu‹__
((
u£d
)èğ
__SYSTEM_CLOCK_64M
;

52 
	$Sy¡emCÜeClockUpd©e
()

54 
Sy¡emCÜeClock
 = 
__SYSTEM_CLOCK_64M
;

55 
	}
}

57 
	$Sy¡emIn™
()

61 #ià
	`defšed
 (
ENABLE_SWO
)

62 
CÜeDebug
->
DEMCR
 |ğ
CÜeDebug_DEMCR_TRCENA_Msk
;

63 
NRF_CLOCK
->
TRACECONFIG
 |ğ
CLOCK_TRACECONFIG_TRACEMUX_S”Ÿl
 << 
CLOCK_TRACECONFIG_TRACEMUX_Pos
;

64 
NRF_P1
->
PIN_CNF
[0] = (
GPIO_PIN_CNF_DRIVE_H0H1
 << 
GPIO_PIN_CNF_DRIVE_Pos
è| (
GPIO_PIN_CNF_INPUT_CÚÃù
 << 
GPIO_PIN_CNF_INPUT_Pos
è| (
GPIO_PIN_CNF_DIR_Ouut
 << 
GPIO_PIN_CNF_DIR_Pos
);

69 #ià
	`defšed
 (
ENABLE_TRACE
)

70 
CÜeDebug
->
DEMCR
 |ğ
CÜeDebug_DEMCR_TRCENA_Msk
;

71 
NRF_CLOCK
->
TRACECONFIG
 |ğ
CLOCK_TRACECONFIG_TRACEMUX_P¬®Ël
 << 
CLOCK_TRACECONFIG_TRACEMUX_Pos
;

72 
NRF_P0
->
PIN_CNF
[7] = (
GPIO_PIN_CNF_DRIVE_H0H1
 << 
GPIO_PIN_CNF_DRIVE_Pos
è| (
GPIO_PIN_CNF_INPUT_CÚÃù
 << 
GPIO_PIN_CNF_INPUT_Pos
è| (
GPIO_PIN_CNF_DIR_Ouut
 << 
GPIO_PIN_CNF_DIR_Pos
);

73 
NRF_P1
->
PIN_CNF
[0] = (
GPIO_PIN_CNF_DRIVE_H0H1
 << 
GPIO_PIN_CNF_DRIVE_Pos
è| (
GPIO_PIN_CNF_INPUT_CÚÃù
 << 
GPIO_PIN_CNF_INPUT_Pos
è| (
GPIO_PIN_CNF_DIR_Ouut
 << 
GPIO_PIN_CNF_DIR_Pos
);

74 
NRF_P0
->
PIN_CNF
[12] = (
GPIO_PIN_CNF_DRIVE_H0H1
 << 
GPIO_PIN_CNF_DRIVE_Pos
è| (
GPIO_PIN_CNF_INPUT_CÚÃù
 << 
GPIO_PIN_CNF_INPUT_Pos
è| (
GPIO_PIN_CNF_DIR_Ouut
 << 
GPIO_PIN_CNF_DIR_Pos
);

75 
NRF_P0
->
PIN_CNF
[11] = (
GPIO_PIN_CNF_DRIVE_H0H1
 << 
GPIO_PIN_CNF_DRIVE_Pos
è| (
GPIO_PIN_CNF_INPUT_CÚÃù
 << 
GPIO_PIN_CNF_INPUT_Pos
è| (
GPIO_PIN_CNF_DIR_Ouut
 << 
GPIO_PIN_CNF_DIR_Pos
);

76 
NRF_P1
->
PIN_CNF
[9] = (
GPIO_PIN_CNF_DRIVE_H0H1
 << 
GPIO_PIN_CNF_DRIVE_Pos
è| (
GPIO_PIN_CNF_INPUT_CÚÃù
 << 
GPIO_PIN_CNF_INPUT_Pos
è| (
GPIO_PIN_CNF_DIR_Ouut
 << 
GPIO_PIN_CNF_DIR_Pos
);

81 ià(
	`”¿_36
()){

82 
NRF_CLOCK
->
EVENTS_DONE
 = 0;

83 
NRF_CLOCK
->
EVENTS_CTTO
 = 0;

84 
NRF_CLOCK
->
CTIV
 = 0;

89 ià(
	`”¿_66
()){

90 
NRF_TEMP
->
A0
 = 
NRF_FICR
->
TEMP
.A0;

91 
NRF_TEMP
->
A1
 = 
NRF_FICR
->
TEMP
.A1;

92 
NRF_TEMP
->
A2
 = 
NRF_FICR
->
TEMP
.A2;

93 
NRF_TEMP
->
A3
 = 
NRF_FICR
->
TEMP
.A3;

94 
NRF_TEMP
->
A4
 = 
NRF_FICR
->
TEMP
.A4;

95 
NRF_TEMP
->
A5
 = 
NRF_FICR
->
TEMP
.A5;

96 
NRF_TEMP
->
B0
 = 
NRF_FICR
->
TEMP
.B0;

97 
NRF_TEMP
->
B1
 = 
NRF_FICR
->
TEMP
.B1;

98 
NRF_TEMP
->
B2
 = 
NRF_FICR
->
TEMP
.B2;

99 
NRF_TEMP
->
B3
 = 
NRF_FICR
->
TEMP
.B3;

100 
NRF_TEMP
->
B4
 = 
NRF_FICR
->
TEMP
.B4;

101 
NRF_TEMP
->
B5
 = 
NRF_FICR
->
TEMP
.B5;

102 
NRF_TEMP
->
T0
 = 
NRF_FICR
->
TEMP
.T0;

103 
NRF_TEMP
->
T1
 = 
NRF_FICR
->
TEMP
.T1;

104 
NRF_TEMP
->
T2
 = 
NRF_FICR
->
TEMP
.T2;

105 
NRF_TEMP
->
T3
 = 
NRF_FICR
->
TEMP
.T3;

106 
NRF_TEMP
->
T4
 = 
NRF_FICR
->
TEMP
.T4;

111 ià(
	`”¿_98
()){

112 *(vŞ©
ušt32_t
 *)0x4000568Cul = 0x00038148ul;

117 ià(
	`”¿_103
()){

118 
NRF_CCM
->
MAXPACKETSIZE
 = 0xFBul;

123 ià(
	`”¿_115
()){

124 *(vŞ©
ušt32_t
 *)0x40000EE4 = (*(volatile uint32_t *)0x40000EE4 & 0xFFFFFFF0) | (*(uint32_t *)0x10000258 & 0x0000000F);

129 ià(
	`”¿_120
()){

130 *(vŞ©
ušt32_t
 *)0x40029640ul = 0x200ul;

135 ià(
	`”¿_136
()){

136 ià(
NRF_POWER
->
RESETREAS
 & 
POWER_RESETREAS_RESETPIN_Msk
){

137 
NRF_POWER
->
RESETREAS
 = ~
POWER_RESETREAS_RESETPIN_Msk
;

144 #ià(
__FPU_USED
 == 1)

145 
SCB
->
CPACR
 |= (3UL << 20) | (3UL << 22);

146 
	`__DSB
();

147 
	`__ISB
();

153 #ià
	`defšed
 (
CONFIG_NFCT_PINS_AS_GPIOS
)

154 ià((
NRF_UICR
->
NFCPINS
 & 
UICR_NFCPINS_PROTECT_Msk
è=ğ(
UICR_NFCPINS_PROTECT_NFC
 << 
UICR_NFCPINS_PROTECT_Pos
)){

155 
NRF_NVMC
->
CONFIG
 = 
NVMC_CONFIG_WEN_W’
 << 
NVMC_CONFIG_WEN_Pos
;

156 
NRF_NVMC
->
READY
 =ğ
NVMC_READY_READY_Busy
){}

157 
NRF_UICR
->
NFCPINS
 &ğ~
UICR_NFCPINS_PROTECT_Msk
;

158 
NRF_NVMC
->
READY
 =ğ
NVMC_READY_READY_Busy
){}

159 
NRF_NVMC
->
CONFIG
 = 
NVMC_CONFIG_WEN_R’
 << 
NVMC_CONFIG_WEN_Pos
;

160 
NRF_NVMC
->
READY
 =ğ
NVMC_READY_READY_Busy
){}

161 
	`NVIC_Sy¡emRe£t
();

168 #ià
	`defšed
 (
CONFIG_GPIO_AS_PINRESET
)

169 ià(((
NRF_UICR
->
PSELRESET
[0] & 
UICR_PSELRESET_CONNECT_Msk
è!ğ(
UICR_PSELRESET_CONNECT_CÚÃùed
 << 
UICR_PSELRESET_CONNECT_Pos
)) ||

170 ((
NRF_UICR
->
PSELRESET
[1] & 
UICR_PSELRESET_CONNECT_Msk
è!ğ(
UICR_PSELRESET_CONNECT_CÚÃùed
 << 
UICR_PSELRESET_CONNECT_Pos
))){

171 
NRF_NVMC
->
CONFIG
 = 
NVMC_CONFIG_WEN_W’
 << 
NVMC_CONFIG_WEN_Pos
;

172 
NRF_NVMC
->
READY
 =ğ
NVMC_READY_READY_Busy
){}

173 
NRF_UICR
->
PSELRESET
[0] = 18;

174 
NRF_NVMC
->
READY
 =ğ
NVMC_READY_READY_Busy
){}

175 
NRF_UICR
->
PSELRESET
[1] = 18;

176 
NRF_NVMC
->
READY
 =ğ
NVMC_READY_READY_Busy
){}

177 
NRF_NVMC
->
CONFIG
 = 
NVMC_CONFIG_WEN_R’
 << 
NVMC_CONFIG_WEN_Pos
;

178 
NRF_NVMC
->
READY
 =ğ
NVMC_READY_READY_Busy
){}

179 
	`NVIC_Sy¡emRe£t
();

183 
	`Sy¡emCÜeClockUpd©e
();

184 
	}
}

187 
boŞ
 
	$”¿_36
()

189 ià(*(
ušt32_t
 *)0x10000130ul == 0x8ul){

190 ià(*(
ušt32_t
 *)0x10000134ul == 0x0ul){

191  
Œue
;

193 ià(*(
ušt32_t
 *)0x10000134ul == 0x1ul){

194  
Œue
;

196 ià(*(
ušt32_t
 *)0x10000134ul == 0x2ul){

197  
Œue
;

201  
Œue
;

202 
	}
}

205 
boŞ
 
	$”¿_66
()

207 ià(*(
ušt32_t
 *)0x10000130ul == 0x8ul){

208 ià(*(
ušt32_t
 *)0x10000134ul == 0x0ul){

209  
Œue
;

211 ià(*(
ušt32_t
 *)0x10000134ul == 0x1ul){

212  
Œue
;

214 ià(*(
ušt32_t
 *)0x10000134ul == 0x2ul){

215  
Œue
;

219  
Œue
;

220 
	}
}

223 
boŞ
 
	$”¿_98
()

225 ià(*(
ušt32_t
 *)0x10000130ul == 0x8ul){

226 ià(*(
ušt32_t
 *)0x10000134ul == 0x0ul){

227  
Œue
;

231  
çl£
;

232 
	}
}

235 
boŞ
 
	$”¿_103
()

237 ià(*(
ušt32_t
 *)0x10000130ul == 0x8ul){

238 ià(*(
ušt32_t
 *)0x10000134ul == 0x0ul){

239  
Œue
;

243  
çl£
;

244 
	}
}

247 
boŞ
 
	$”¿_115
()

249 ià(*(
ušt32_t
 *)0x10000130ul == 0x8ul){

250 ià(*(
ušt32_t
 *)0x10000134ul == 0x0ul){

251  
Œue
;

255  
çl£
;

256 
	}
}

259 
boŞ
 
	$”¿_120
()

261 ià(*(
ušt32_t
 *)0x10000130ul == 0x8ul){

262 ià(*(
ušt32_t
 *)0x10000134ul == 0x0ul){

263  
Œue
;

267  
çl£
;

268 
	}
}

271 
boŞ
 
	$”¿_136
()

273 ià(*(
ušt32_t
 *)0x10000130ul == 0x8ul){

274 ià(*(
ušt32_t
 *)0x10000134ul == 0x0ul){

275  
Œue
;

277 ià(*(
ušt32_t
 *)0x10000134ul == 0x1ul){

278  
Œue
;

280 ià(*(
ušt32_t
 *)0x10000134ul == 0x2ul){

281  
Œue
;

285  
Œue
;

286 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\orderProcessing.c

5 
	~"¡dšt.h
"

6 
	~"¡ršg.h
"

7 
	~"¡dboŞ.h
"

9 
	~"Üd”Proûssšg.h
"

11 
	#ORDER_CLEAR_BYTE
 0xFF

	)

12 
	#ORDER_ITEM_FREE
 0xFFFF

	)

13 
	#ORDER_HEAP_ITEM_FREE
 0xFF

	)

14 
	#ORDER_HEAP_ITEM_BUSY
 0x00

	)

15 
	#ORDER_FLASH_DATA_VALIDATOR
 0xAABBCCDD

	)

18 
	sÜd”


20 
ušt16_t
 
	mÜd”
[
ORDER_ITEM_QUANTITY
];

21 } 
	tdeviûOrd”S
;

25 
deviûOrd”S
 
	mh—p
[
HEAP_ORDER_QUANTITY
];

26 
ušt8_t
 
	mh—pI‹mS‹
[
HEAP_ORDER_QUANTITY
];

27 }
	gh—pDesütÜ
 =

29 .
h—pI‹mS‹
 = {[0 ... 
HEAP_ORDER_QUANTITY
 - 1] = 
ORDER_HEAP_ITEM_FREE
}

33 
šlše
 
boŞ
 
	$g‘IDPos
(
Üd”T
 
Üd”In
, 
ušt16_t
 *
»zPos
, 
ušt8_t
 
šI‹m
)

35 
ušt16_t
 
út
 = 0; cÁ < 
ORDER_ITEM_QUANTITY
; cnt++ )

37 ifĞ
šI‹m
 !ğ
Üd”In
->
Üd”
[
út
])

41 *
»zPos
 = 
út
;

42  
Œue
;

44  
çl£
;

45 
	}
}

48 
Üd”T
 
	$Üd”M®loc
()

50 
ušt8_t
 
út
 = 0; cÁ < 
HEAP_ORDER_QUANTITY
; cnt++)

52 if(
h—pDesütÜ
.
h—pI‹mS‹
[
út
] !ğ
ORDER_HEAP_ITEM_FREE
)

56 
h—pDesütÜ
.
h—pI‹mS‹
[
út
] = 
ORDER_HEAP_ITEM_BUSY
;

57 
	`mem£t
(
h—pDesütÜ
.
h—p
[
út
].
Üd”
, 
ORDER_CLEAR_BYTE
, (heapDescriptor.heap[cnt].order));

58  &
h—pDesütÜ
.
h—p
[
út
];

60  
NULL
;

61 
	}
}

63 
boŞ
 
	$Üd”F»e
(
Üd”T
 
Üd”In
)

65 
ušt8_t
 
út
 = 0; cÁ < 
HEAP_ORDER_QUANTITY
; cnt++)

67 if(
Üd”In
 !ğ&
h—pDesütÜ
.
h—p
[
út
])

71 
h—pDesütÜ
.
h—pI‹mS‹
[
út
] = 
ORDER_HEAP_ITEM_FREE
;

72  
Œue
;

74  
çl£
;

75 
	}
}

78 
boŞ
 
	$Üd”S‘Fœ¡
 (
Üd”T
 
Üd”In
, 
ušt8_t
 
šI‹m
)

80 
ušt16_t
 
cu¼’tPos
;

81 ifĞ
Üd”In
 =ğ
NULL
)

83  
çl£
;

85 ifĞ!
	`g‘IDPos
(
Üd”In
, &
cu¼’tPos
, 
šI‹m
))

87 
cu¼’tPos
 = 
ORDER_ITEM_QUANTITY
 - 1;

89 if(
cu¼’tPos
 == 0)

91  
Œue
;

93 ; 
cu¼’tPos
 > 0; currentPos--)

95 
Üd”In
->
Üd”
[
cu¼’tPos
] = orderIn->order[currentPos - 1];

97 
Üd”In
->
Üd”
[0] = 
šI‹m
;

98  
Œue
;

99 
	}
}

102 
boŞ
 
	$Üd”G‘Pos
(cÚ¡ 
Üd”T
 
Üd”In
, 
ušt8_t
 
deviûID
, ušt8_ˆ*
pos
)

104 
ušt16_t
 
út
 = 0; cÁ < 
ORDER_ITEM_QUANTITY
; cnt++)

106 if(
Üd”In
->
Üd”
[
út
] !ğ
deviûID
)

110 *
pos
 = 
út
;

111  
Œue
;

113  
çl£
;

114 
	}
}

116 
ušt16_t
 
	$Üd”G‘I‹m
(cÚ¡ 
Üd”T
 
Üd”In
, 
ušt8_t
 
pos
)

118  
Üd”In
->
Üd”
[
pos
];

119 
	}
}

122 
ušt8_t
 
	$Üd”G‘Quªt™y
(cÚ¡ 
Üd”T
 
Üd”In
)

124 
ušt16_t
 
út
 = 0; cÁ < 
ORDER_ITEM_QUANTITY
; cnt++)

126 if(
Üd”In
->
Üd”
[
út
] =ğ
ORDER_ITEM_FREE
)

128  
út
;

131  
ORDER_ITEM_QUANTITY
;

132 
	}
}

135 
	$Üd”CËª
(
Üd”T
 
Üd”In
)

137 
	`mem£t
(
Üd”In
->
Üd”
, 
ORDER_CLEAR_BYTE
, (orderIn->order));

138 
	}
}

141 
boŞ
 
	$Üd”R—dFÏsh
(
Üd”T
 
Üd”In
, 
ušt32_t
 
æashAdd»ss
)

143 
	`æashMemR—dBy‹s
(
æashAdd»ss
, (
ušt8_t
*)
Üd”In
->
Üd”
, (orderIn->order));

144  
Œue
;

145 
	}
}

148 
	$Üd”Wr™eFÏsh
(
Üd”T
 
Üd”In
, 
ušt32_t
 
æashAdd»ss
)

150 
	`æashMemWr™eBy‹s
(
æashAdd»ss
, (
ušt8_t
*)
Üd”In
->
Üd”
, (orderIn->order));

151 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\orderProcessing.h

5 #iâdeà
ORDERPROCESSING


6 
	#ORDERPROCESSING


	)

8 
	~"¡dšt.h
"

9 
	~"¡dboŞ.h
"

11 
	#ORDER_ITEM_QUANTITY
 5

	)

12 
	#HEAP_ORDER_QUANTITY
 2

	)

14 
Üd”
 *
	tÜd”T
;

16 
Üd”T
 
Üd”M®loc
 ();

17 
boŞ
 
Üd”F»e
 (
Üd”T
 
Üd”In
);

18 
boŞ
 
Üd”S‘Fœ¡
 (
Üd”T
 
Üd”In
, 
ušt8_t
 
šI‹m
);

19 
boŞ
 
Üd”G‘Pos
 (cÚ¡ 
Üd”T
 
Üd”In
, 
ušt8_t
 
deviûID
, ušt8_ˆ*
pos
);

20 
ušt16_t
 
Üd”G‘I‹m
 (cÚ¡ 
Üd”T
 
Üd”In
, 
ušt8_t
 
pos
);

21 
ušt8_t
 
Üd”G‘Quªt™y
(cÚ¡ 
Üd”T
 
Üd”In
);

22 
Üd”CËª
 (
Üd”T
 
Üd”In
);

23 
boŞ
 
Üd”R—dFÏsh
 (
Üd”T
 
Üd”In
, 
ušt32_t
 
æashAdd»ss
);

24 
Üd”Wr™eFÏsh
 (
Üd”T
 
Üd”In
, 
ušt32_t
 
æashAdd»ss
);

28 
æashMemWr™eBy‹s
(
ušt32_t
 
æashAdd»ss
, 
ušt8_t
 
bufãr
[], ušt32_ˆ
bufãrSize
);

29 
æashMemR—dBy‹s
(
ušt32_t
 
æashAdd»ss
, 
ušt8_t
 
bufãr
[], ušt32_ˆ
bufãrSize
);

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\systemTime.c

4 
	~"¡dšt.h
"

5 
	~"sy¡emTime.h
"

7 
	~"Äf.h
"

8 
	~"Äf_tim”.h
"

10 
	#TIMER_INT_MS
 1

	)

13 vŞ©
ušt32_t
 
	gútMs
;

14 
boŞ
 
	gisNewTick
 = 
çl£
;

16 vŞ©
	stim”C®lback


18 
tim”C®lbackFunT
 
	mfun
;

19 
ušt32_t
 
	mtimeC®lback
;

20 
boŞ
 
	mrunC®lback
;

21 
boŞ
 
	mwa™eC®lback
;

22 } 
	gtim”C®lbackH—p
[
CALLBACK_QUANTITY
];

24 
boŞ
 
	gisC®lbackF»e
[
CALLBACK_QUANTITY
] = {[0 ... CALLBACK_QUANTITY - 1] = 
Œue
};

27 cÚ¡ 
ušt32_t
 
	gtimFrqLi¡
[]=

29 [
NRF_TIMER_FREQ_16MHz
] = 16000000,

30 [
NRF_TIMER_FREQ_8MHz
] = 8000000,

31 [
NRF_TIMER_FREQ_4MHz
] = 4000000,

32 [
NRF_TIMER_FREQ_2MHz
] = 2000000,

33 [
NRF_TIMER_FREQ_1MHz
] = 1000000,

34 [
NRF_TIMER_FREQ_500kHz
] = 500000,

35 [
NRF_TIMER_FREQ_250kHz
] = 250000,

36 [
NRF_TIMER_FREQ_125kHz
] = 125000,

37 [
NRF_TIMER_FREQ_62500Hz
] = 62500,

38 [
NRF_TIMER_FREQ_31250Hz
] = 31250

42 
	$š™U£rTim”
()

45 
ušt32_t
 
v®CC
 = (
timFrqLi¡
[
NRF_TIMER_FREQ_500kHz
] / 1000è* 
TIMER_INT_MS
;

46 
	`Äf_tim”_mode_£t
(
USER_SCHEDULER_TIMER
, 
NRF_TIMER_MODE_TIMER
);

47 
	`Äf_tim”_b™_width_£t
(
USER_SCHEDULER_TIMER
, 
NRF_TIMER_BIT_WIDTH_16
);

48 
	`Äf_tim”_äequ’cy_£t
(
USER_SCHEDULER_TIMER
, 
NRF_TIMER_FREQ_500kHz
);

49 
	`Äf_tim”_cc_wr™e
(
USER_SCHEDULER_TIMER
, 
NRF_TIMER_CC_CHANNEL0
, 
v®CC
);

50 
	`Äf_tim”_št_’abË
(
USER_SCHEDULER_TIMER
, (0b1 << 16));

52 
	`NVIC_S‘PriÜ™y
(
TIMER1_IRQn
, 3);

53 
	`NVIC_EÇbËIRQ
(
TIMER1_IRQn
);

55 
	`Äf_tim”_sk_Œigg”
(
USER_SCHEDULER_TIMER
, 
NRF_TIMER_TASK_START
);

56 
	}
}

59 
	$TIMER1_IRQHªdËr
()

61 
útMs
++;

62 
	`Äf_tim”_sk_Œigg”
(
USER_SCHEDULER_TIMER
, 
NRF_TIMER_TASK_CLEAR
);

63 
	`Äf_tim”_ev’t_ş—r
(
USER_SCHEDULER_TIMER
, 
NRF_TIMER_EVENT_COMPARE0
);

64 
ušt16_t
 
út
 = 0; cÁ < 
CALLBACK_QUANTITY
; cnt++)

66 if(
tim”C®lbackH—p
[
út
].
wa™eC®lback
 && (tim”C®lbackH—p[út].
timeC®lback
 <ğ
útMs
))

68 if(
tim”C®lbackH—p
[
út
].
timeC®lback
 >ğ
útMs
)

69 
tim”C®lbackH—p
[
út
].
wa™eC®lback
 = 
çl£
;

70 
tim”C®lbackH—p
[
út
].
runC®lback
 = 
Œue
;

74 
isNewTick
 = 
Œue
;

75 
	}
}

78 
ušt32_t
 
	$g‘Time
()

80  
útMs
;

81 
	}
}

84 
tim”C®lbacT
 
	$tim”G‘C®lback
(
tim”C®lbackFunT
 
tim”C®lbackFun
)

86 
ušt16_t
 
út
 = 0; cÁ < 
CALLBACK_QUANTITY
; cnt ++)

88 if(!
isC®lbackF»e
[
út
])

92 
isC®lbackF»e
[
út
] = 
çl£
;

93 
tim”C®lbackH—p
[
út
].
fun
 = 
tim”C®lbackFun
;

94 
tim”C®lbackH—p
[
út
].
runC®lback
 = 
çl£
;

95 
tim”C®lbackH—p
[
út
].
wa™eC®lback
 = 
çl£
;

96  &
tim”C®lbackH—p
[
út
];

98  
NULL
;

99 
	}
}

102 
	$tim”Run
(
tim”C®lbacT
 
šTim”C®lbac
, 
št32_t
 
wa™Time
)

104 
šTim”C®lbac
->
timeC®lback
 = 
útMs
 + 
wa™Time
;

105 
šTim”C®lbac
->
runC®lback
 = 
çl£
;

106 
šTim”C®lbac
->
wa™eC®lback
 = 
Œue
;

107 
	}
}

109 
	$tim”Stİ
(
tim”C®lbacT
 
šTim”C®lbac
)

111 
šTim”C®lbac
->
wa™eC®lback
 = 
çl£
;

112 
	}
}

114 
	$u£rProûssšgTim”C®lbackFun
()

116 if(!
isNewTick
)

120 
isNewTick
 = 
çl£
;

121 
ušt16_t
 
út
 = 0; cÁ < 
CALLBACK_QUANTITY
; cnt++)

123 if(!
tim”C®lbackH—p
[
út
].
runC®lback
)

127 
tim”C®lbackH—p
[
út
].
runC®lback
 = 
çl£
;

128 
tim”C®lbackH—p
[
út
].
	`fun
();

130 
	}
}

	@C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\systemTime.h

5 #iâdeà
SYSTEMTIME_H_


6 
	#SYSTEMTIME_H_


	)

8 
	#USER_SCHEDULER_TIMER
 
NRF_TIMER1


	)

9 
	#CALLBACK_QUANTITY
 5

	)

11 vŞ©
	ttim”C®lback
 *
	ttim”C®lbacT
;

12 (*
	ttim”C®lbackFunT
)();

15 
	`š™U£rTim”
();

16 
ušt32_t
 
	`g‘Time
();

17 
tim”C®lbacT
 
	`tim”G‘C®lback
(
tim”C®lbackFunT
 
tim”C®lbackFun
);

18 
	`tim”Run
(
tim”C®lbacT
 
šTim”C®lbac
, 
št32_t
 
wa™Time
);

19 
	`u£rProûssšgTim”C®lbackFun
();

20 
	`tim”Stİ
(
tim”C®lbacT
 
šTim”C®lbac
);

	@orderProcessing.h

5 #iâdeà
ORDERPROCESSING


6 
	#ORDERPROCESSING


	)

8 
	~"¡dšt.h
"

9 
	~"¡dboŞ.h
"

11 
	#ORDER_ITEM_QUANTITY
 5

	)

12 
	#HEAP_ORDER_QUANTITY
 2

	)

14 
Üd”
 *
	tÜd”T
;

16 
Üd”T
 
Üd”M®loc
 ();

17 
boŞ
 
Üd”F»e
 (
Üd”T
 
Üd”In
);

18 
boŞ
 
Üd”S‘Fœ¡
 (
Üd”T
 
Üd”In
, 
ušt8_t
 
šI‹m
);

19 
boŞ
 
Üd”G‘Pos
 (cÚ¡ 
Üd”T
 
Üd”In
, 
ušt8_t
 
deviûID
, ušt8_ˆ*
pos
);

20 
ušt16_t
 
Üd”G‘I‹m
 (cÚ¡ 
Üd”T
 
Üd”In
, 
ušt8_t
 
pos
);

21 
ušt8_t
 
Üd”G‘Quªt™y
(cÚ¡ 
Üd”T
 
Üd”In
);

22 
Üd”CËª
 (
Üd”T
 
Üd”In
);

23 
boŞ
 
Üd”R—dFÏsh
 (
Üd”T
 
Üd”In
, 
ušt32_t
 
æashAdd»ss
);

24 
Üd”Wr™eFÏsh
 (
Üd”T
 
Üd”In
, 
ušt32_t
 
æashAdd»ss
);

28 
æashMemWr™eBy‹s
(
ušt32_t
 
æashAdd»ss
, 
ušt8_t
 
bufãr
[], ušt32_ˆ
bufãrSize
);

29 
æashMemR—dBy‹s
(
ušt32_t
 
æashAdd»ss
, 
ušt8_t
 
bufãr
[], ušt32_ˆ
bufãrSize
);

	@systemTime.h

5 #iâdeà
SYSTEMTIME_H_


6 
	#SYSTEMTIME_H_


	)

8 
	#USER_SCHEDULER_TIMER
 
NRF_TIMER1


	)

9 
	#CALLBACK_QUANTITY
 5

	)

11 vŞ©
	ttim”C®lback
 *
	ttim”C®lbacT
;

12 (*
	ttim”C®lbackFunT
)();

15 
	`š™U£rTim”
();

16 
ušt32_t
 
	`g‘Time
();

17 
tim”C®lbacT
 
	`tim”G‘C®lback
(
tim”C®lbackFunT
 
tim”C®lbackFun
);

18 
	`tim”Run
(
tim”C®lbacT
 
šTim”C®lbac
, 
št32_t
 
wa™Time
);

19 
	`u£rProûssšgTim”C®lbackFun
();

20 
	`tim”Stİ
(
tim”C®lbacT
 
šTim”C®lbac
);

	@
1
.
0
84
10010
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\ble\ble_advertising\ble_advertising.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\ble\ble_link_ctx_manager\ble_link_ctx_manager.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\ble\ble_services\ble_bas\ble_bas.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\ble\ble_services\ble_dis\ble_dis.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\ble\ble_services\ble_hids\ble_hids.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\ble\common\ble_advdata.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\ble\common\ble_conn_params.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\ble\common\ble_conn_state.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\ble\common\ble_srv_common.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\ble\nrf_ble_gatt\nrf_ble_gatt.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\ble\nrf_ble_qwr\nrf_ble_qwr.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\ble\peer_manager\auth_status_tracker.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\ble\peer_manager\gatt_cache_manager.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\ble\peer_manager\gatts_cache_manager.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\ble\peer_manager\id_manager.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\ble\peer_manager\peer_data_storage.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\ble\peer_manager\peer_database.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\ble\peer_manager\peer_id.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\ble\peer_manager\peer_manager.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\ble\peer_manager\peer_manager_handler.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\ble\peer_manager\pm_buffer.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\ble\peer_manager\security_dispatcher.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\ble\peer_manager\security_manager.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\boards\boards.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\atomic\nrf_atomic.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\atomic_fifo\nrf_atfifo.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\atomic_flags\nrf_atflags.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\balloc\nrf_balloc.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\bsp\bsp.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\bsp\bsp_btn_ble.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\button\app_button.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\crc16\crc16.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\experimental_section_vars\nrf_section_iter.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\fds\fds.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\fstorage\nrf_fstorage.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\fstorage\nrf_fstorage_sd.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\hardfault\hardfault_implementation.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\log\src\nrf_log_backend_rtt.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\log\src\nrf_log_backend_serial.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\log\src\nrf_log_backend_uart.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\log\src\nrf_log_default_backends.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\log\src\nrf_log_frontend.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\log\src\nrf_log_str_formatter.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\memobj\nrf_memobj.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\pwr_mgmt\nrf_pwr_mgmt.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\ringbuf\nrf_ringbuf.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\scheduler\app_scheduler.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\sensorsim\sensorsim.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\strerror\nrf_strerror.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\timer\app_timer.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\util\app_error.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\util\app_error_handler_gcc.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\util\app_error_weak.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\util\app_util_platform.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\libraries\util\nrf_assert.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\softdevice\common\nrf_sdh.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\softdevice\common\nrf_sdh_ble.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\components\softdevice\common\nrf_sdh_soc.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\examples\ble_peripheral\ble_app_hids_mouse\main.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\examples\ble_peripheral\ble_app_hids_mouse\pca10056\s140\armgcc\ble_app_hids_mouse_gcc_nrf52.ld
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\examples\ble_peripheral\ble_app_hids_mouse\pca10056\s140\config\sdk_config.h
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\external\fprintf\nrf_fprintf.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\external\fprintf\nrf_fprintf_format.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\external\segger_rtt\SEGGER_RTT.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\external\segger_rtt\SEGGER_RTT_Syscalls_GCC.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\external\segger_rtt\SEGGER_RTT_printf.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\external\utf_converter\utf.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\integration\nrfx\legacy\nrf_drv_clock.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\integration\nrfx\legacy\nrf_drv_uart.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\modules\nrfx\drivers\src\nrfx_clock.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\modules\nrfx\drivers\src\nrfx_gpiote.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\modules\nrfx\drivers\src\nrfx_power_clock.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\modules\nrfx\drivers\src\nrfx_uart.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\modules\nrfx\drivers\src\nrfx_uarte.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\modules\nrfx\drivers\src\prs\nrfx_prs.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\modules\nrfx\mdk\gcc_startup_nrf52840.S
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\modules\nrfx\mdk\nrf_common.ld
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\nRF5_SDK_15.2.0_9412b96\modules\nrfx\mdk\system_nrf52840.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\orderProcessing.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\orderProcessing.h
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\systemTime.c
C:\Users\Alex\Desktop\nrf52840Mouse_15\nrf52840Mouse_15\systemTime.h
orderProcessing.h
systemTime.h
